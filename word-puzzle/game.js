var qg=Object.defineProperty,Jg=Object.defineProperties;var Zg=Object.getOwnPropertyDescriptors;var If=Object.getOwnPropertySymbols;var $g=Object.prototype.hasOwnProperty,Qg=Object.prototype.propertyIsEnumerable;var Of=(bn,Di,ft)=>Di in bn?qg(bn,Di,{enumerable:!0,configurable:!0,writable:!0,value:ft}):bn[Di]=ft,Lf=(bn,Di)=>{for(var ft in Di||(Di={}))$g.call(Di,ft)&&Of(bn,ft,Di[ft]);if(If)for(var ft of If(Di))Qg.call(Di,ft)&&Of(bn,ft,Di[ft]);return bn},Mf=(bn,Di)=>Jg(bn,Zg(Di));var it=(bn,Di,ft)=>new Promise((md,He)=>{var Ae=x=>{try{_e(ft.next(x))}catch(N){He(N)}},Ce=x=>{try{_e(ft.throw(x))}catch(N){He(N)}},_e=x=>x.done?md(x.value):Promise.resolve(x.value).then(Ae,Ce);_e((ft=ft.apply(bn,Di)).next())});(()=>{var bn={566:He=>{(function(Ae,Ce){He.exports=Ce()})(window,function(){return _e={},Ae.m=Ce=[function(x,N){function r(c,p,h,l){for(var d in p)if(p.hasOwnProperty(d)){var y=(T=p,C=d,P=L=void 0,P=(O=h)?T[C]:Object.getOwnPropertyDescriptor(T,C),!O&&P.value&&typeof P.value=="object"&&(P=P.value),!(!P||!((L=P).get&&typeof L.get=="function"||L.set&&typeof L.set=="function"))&&(P.enumerable===void 0&&(P.enumerable=!0),P.configurable===void 0&&(P.configurable=!0),P));if(y!==!1){if(g=(l||c).prototype,b=d,A=void 0,(A=Object.getOwnPropertyDescriptor(g,b))&&(A.value&&typeof A.value=="object"&&(A=A.value),A.configurable===!1)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+d+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(c.prototype,d,y)}else c.prototype[d]=p[d]}var g,b,A,T,C,O,L,P}function m(c,p){if(p){Array.isArray(p)||(p=[p]);for(var h=0;h<p.length;h++)r(c,p[h].prototype||p[h])}}function u(c){var p,h,l;if((c=c||{}).initialize){if(typeof c.initialize!="function")throw new Error("initialize must be a function");l=c.initialize,delete c.initialize}else l=c.Extends?(h=c.Extends,function(){h.apply(this,arguments)}):function(){};c.Extends?(l.prototype=Object.create(c.Extends.prototype),l.prototype.constructor=l,p=c.Extends,delete c.Extends):l.prototype.constructor=l;var d=null;return c.Mixins&&(d=c.Mixins,delete c.Mixins),m(l,d),r(l,c,!0,p),l}u.extend=r,u.mixin=m,u.ignoreFinals=!1,x.exports=u},function(x,N){x.exports=function(){}},function(x,N){x.exports=function(r,m,u){var c=typeof r;return r&&c!="number"&&c!="string"&&r.hasOwnProperty(m)&&r[m]!==void 0?r[m]:u}},function(x,N,r){var m=r(0),u=r(31),c=new m({initialize:function(p,h){p===void 0&&(p=0),h===void 0&&(h=p),this.type=u.POINT,this.x=p,this.y=h},setTo:function(p,h){return p===void 0&&(p=0),h===void 0&&(h=p),this.x=p,this.y=h,this}});x.exports=c},function(x,N,r){var m=r(0),u=r(106),c=new m({initialize:function(p,h){this.x=0,this.y=0,typeof p=="object"?(this.x=p.x||0,this.y=p.y||0):(h===void 0&&(h=p),this.x=p||0,this.y=h||0)},clone:function(){return new c(this.x,this.y)},copy:function(p){return this.x=p.x||0,this.y=p.y||0,this},setFromObject:function(p){return this.x=p.x||0,this.y=p.y||0,this},set:function(p,h){return h===void 0&&(h=p),this.x=p,this.y=h,this},setTo:function(p,h){return this.set(p,h)},setToPolar:function(p,h){return h==null&&(h=1),this.x=Math.cos(p)*h,this.y=Math.sin(p)*h,this},equals:function(p){return this.x===p.x&&this.y===p.y},fuzzyEquals:function(p,h){return u(this.x,p.x,h)&&u(this.y,p.y,h)},angle:function(){var p=Math.atan2(this.y,this.x);return p<0&&(p+=2*Math.PI),p},setAngle:function(p){return this.setToPolar(p,this.length())},add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.x-=p.x,this.y-=p.y,this},multiply:function(p){return this.x*=p.x,this.y*=p.y,this},scale:function(p){return isFinite(p)?(this.x*=p,this.y*=p):(this.x=0,this.y=0),this},divide:function(p){return this.x/=p.x,this.y/=p.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(p){var h=p.x-this.x,l=p.y-this.y;return Math.sqrt(h*h+l*l)},distanceSq:function(p){var h=p.x-this.x,l=p.y-this.y;return h*h+l*l},length:function(){var p=this.x,h=this.y;return Math.sqrt(p*p+h*h)},setLength:function(p){return this.normalize().scale(p)},lengthSq:function(){var p=this.x,h=this.y;return p*p+h*h},normalize:function(){var p=this.x,h=this.y,l=p*p+h*h;return 0<l&&(l=1/Math.sqrt(l),this.x=p*l,this.y=h*l),this},normalizeRightHand:function(){var p=this.x;return this.x=-1*this.y,this.y=p,this},normalizeLeftHand:function(){var p=this.x;return this.x=this.y,this.y=-1*p,this},dot:function(p){return this.x*p.x+this.y*p.y},cross:function(p){return this.x*p.y-this.y*p.x},lerp:function(p,h){h===void 0&&(h=0);var l=this.x,d=this.y;return this.x=l+h*(p.x-l),this.y=d+h*(p.y-d),this},transformMat3:function(p){var h=this.x,l=this.y,d=p.val;return this.x=d[0]*h+d[3]*l+d[6],this.y=d[1]*h+d[4]*l+d[7],this},transformMat4:function(p){var h=this.x,l=this.y,d=p.val;return this.x=d[0]*h+d[4]*l+d[12],this.y=d[1]*h+d[5]*l+d[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(p){var h=this.length();return h&&p<h&&this.scale(p/h),this},reflect:function(p){return p=p.clone().normalize(),this.subtract(p.scale(2*this.dot(p)))},mirror:function(p){return this.reflect(p).negate()},rotate:function(p){var h=Math.cos(p),l=Math.sin(p);return this.set(h*this.x-l*this.y,l*this.x+h*this.y)}});c.ZERO=new c,c.RIGHT=new c(1,0),c.LEFT=new c(-1,0),c.UP=new c(0,-1),c.DOWN=new c(0,1),c.ONE=new c(1,1),x.exports=c},function(x,N){x.exports=function(r,m,u){if(r&&typeof r!="number"){if(r.hasOwnProperty(m))return r[m];if(m.indexOf(".")===-1)return u;for(var c=m.split("."),p=r,h=u,l=0;l<c.length;l++){if(!p.hasOwnProperty(c[l])){h=u;break}h=p[c[l]],p=p[c[l]]}return h}return u}},function(x,N,r){var m=r(0),u=r(19),c=r(17),p=new m({initialize:function(h){this.scene=h,this.systems=h.sys,this.displayList,this.updateList,h.sys.events.once(c.BOOT,this.boot,this),h.sys.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});p.register=function(h,l){p.prototype.hasOwnProperty(h)||(p.prototype[h]=l)},p.remove=function(h){p.prototype.hasOwnProperty(h)&&delete p.prototype[h]},u.register("GameObjectFactory",p,"add"),x.exports=p},function(x,N,r){"use strict";var m=Object.prototype.hasOwnProperty,u="~";function c(){}function p(y,g,b){this.fn=y,this.context=g,this.once=b||!1}function h(y,g,b,A,T){if(typeof b!="function")throw new TypeError("The listener must be a function");var C=new p(b,A||y,T),O=u?u+g:g;return y._events[O]?y._events[O].fn?y._events[O]=[y._events[O],C]:y._events[O].push(C):(y._events[O]=C,y._eventsCount++),y}function l(y,g){--y._eventsCount==0?y._events=new c:delete y._events[g]}function d(){this._events=new c,this._eventsCount=0}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(u=!1)),d.prototype.eventNames=function(){var y,g,b=[];if(this._eventsCount===0)return b;for(g in y=this._events)m.call(y,g)&&b.push(u?g.slice(1):g);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(y)):b},d.prototype.listeners=function(y){var g=u?u+y:y,b=this._events[g];if(!b)return[];if(b.fn)return[b.fn];for(var A=0,T=b.length,C=new Array(T);A<T;A++)C[A]=b[A].fn;return C},d.prototype.listenerCount=function(y){var g=u?u+y:y,b=this._events[g];return b?b.fn?1:b.length:0},d.prototype.emit=function(y,g,b,A,T,C){var O=u?u+y:y;if(!this._events[O])return!1;var L,P=this._events[O],H=arguments.length;if(P.fn){switch(P.once&&this.removeListener(y,P.fn,void 0,!0),H){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,g),!0;case 3:return P.fn.call(P.context,g,b),!0;case 4:return P.fn.call(P.context,g,b,A),!0;case 5:return P.fn.call(P.context,g,b,A,T),!0;case 6:return P.fn.call(P.context,g,b,A,T,C),!0}for(F=1,L=new Array(H-1);F<H;F++)L[F-1]=arguments[F];P.fn.apply(P.context,L)}else for(var G,B=P.length,F=0;F<B;F++)switch(P[F].once&&this.removeListener(y,P[F].fn,void 0,!0),H){case 1:P[F].fn.call(P[F].context);break;case 2:P[F].fn.call(P[F].context,g);break;case 3:P[F].fn.call(P[F].context,g,b);break;case 4:P[F].fn.call(P[F].context,g,b,A);break;default:if(!L)for(G=1,L=new Array(H-1);G<H;G++)L[G-1]=arguments[G];P[F].fn.apply(P[F].context,L)}return!0},d.prototype.on=function(y,g,b){return h(this,y,g,b,!1)},d.prototype.once=function(y,g,b){return h(this,y,g,b,!0)},d.prototype.removeListener=function(y,g,b,A){var T=u?u+y:y;if(!this._events[T])return this;if(!g)return l(this,T),this;var C=this._events[T];if(C.fn)C.fn!==g||A&&!C.once||b&&C.context!==b||l(this,T);else{for(var O=0,L=[],P=C.length;O<P;O++)(C[O].fn!==g||A&&!C[O].once||b&&C[O].context!==b)&&L.push(C[O]);L.length?this._events[T]=L.length===1?L[0]:L:l(this,T)}return this},d.prototype.removeAllListeners=function(y){var g;return y?(g=u?u+y:y,this._events[g]&&l(this,g)):(this._events=new c,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=u,d.EventEmitter=d,x.exports=d},function(x,N,r){var m=r(0),u=r(37),c=r(118),p=r(198),h=r(31),l=r(33),d=r(160),y=new m({initialize:function(g,b,A,T){g===void 0&&(g=0),b===void 0&&(b=0),A===void 0&&(A=0),T===void 0&&(T=0),this.type=h.RECTANGLE,this.x=g,this.y=b,this.width=A,this.height=T},contains:function(g,b){return u(this,g,b)},getPoint:function(g,b){return c(this,g,b)},getPoints:function(g,b,A){return p(this,g,b,A)},getRandomPoint:function(g){return d(this,g)},setTo:function(g,b,A,T){return this.x=g,this.y=b,this.width=A,this.height=T,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(g,b){return b===void 0&&(b=g),this.x=g,this.y=b,this},setSize:function(g,b){return b===void 0&&(b=g),this.width=g,this.height=b,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(g){return g===void 0&&(g=new l),g.setTo(this.x,this.y,this.right,this.y),g},getLineB:function(g){return g===void 0&&(g=new l),g.setTo(this.right,this.y,this.right,this.bottom),g},getLineC:function(g){return g===void 0&&(g=new l),g.setTo(this.right,this.bottom,this.x,this.bottom),g},getLineD:function(g){return g===void 0&&(g=new l),g.setTo(this.x,this.bottom,this.x,this.y),g},left:{get:function(){return this.x},set:function(g){g>=this.right?this.width=0:this.width=this.right-g,this.x=g}},right:{get:function(){return this.x+this.width},set:function(g){g<=this.x?this.width=0:this.width=g-this.x}},top:{get:function(){return this.y},set:function(g){g>=this.bottom?this.height=0:this.height=this.bottom-g,this.y=g}},bottom:{get:function(){return this.y+this.height},set:function(g){g<=this.y?this.height=0:this.height=g-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(g){this.x=g-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(g){this.y=g-this.height/2}}});x.exports=y},function(x,N){var r={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};x.exports=r},function(x,N){x.exports=function(r){if(typeof r!="object"||r.nodeType||r===r.window)return!1;try{if(r.constructor&&!{}.hasOwnProperty.call(r.constructor.prototype,"isPrototypeOf"))return!1}catch(m){return!1}return!0}},function(x,N){var r={},m={install:function(u){for(var c in r)u[c]=r[c]},register:function(u,c){r[u]=c},destroy:function(){r={}}};x.exports=m},function(x,N){x.exports=function(r,m,u){return Math.max(m,Math.min(u,r))}},function(x,N){x.exports={getTintFromFloats:function(r,m,u,c){return((255&(255*c|0))<<24|(255&(255*r|0))<<16|(255&(255*m|0))<<8|255&(255*u|0))>>>0},getTintAppendFloatAlpha:function(r,m){return((255&(255*m|0))<<24|r)>>>0},getTintAppendFloatAlphaAndSwap:function(r,m){return((255&(255*m|0))<<24|(255&(0|r))<<16|(255&(r>>8|0))<<8|255&(r>>16|0))>>>0},getFloatsFromUintRGB:function(r){return[(255&(r>>16|0))/255,(255&(r>>8|0))/255,(255&(0|r))/255]},getComponentCount:function(r,m){for(var u=0,c=0;c<r.length;++c){var p=r[c];p.type===m.FLOAT?u+=p.size:u+=1}return u}}},function(x,N,r){x.exports={Alpha:r(448),AlphaSingle:r(195),Animation:r(449),BlendMode:r(196),ComputedSize:r(450),Crop:r(451),Depth:r(197),Flip:r(452),GetBounds:r(453),Mask:r(201),Origin:r(454),PathFollower:r(455),Pipeline:r(204),ScrollFactor:r(205),Size:r(456),Texture:r(457),TextureCrop:r(458),Tint:r(459),ToJSON:r(206),Transform:r(207),TransformMatrix:r(25),Visible:r(210)}},function(x,N,r){x.exports={BLUR:r(428),BOOT:r(429),CONTEXT_LOST:r(430),CONTEXT_RESTORED:r(431),DESTROY:r(432),FOCUS:r(433),HIDDEN:r(434),PAUSE:r(435),POST_RENDER:r(436),POST_STEP:r(437),PRE_RENDER:r(438),PRE_STEP:r(439),READY:r(440),RESUME:r(441),STEP:r(442),VISIBLE:r(443)}},function(x,N,r){var m=r(10),u=function(){var c,p,h,l,d,y,g=arguments[0]||{},b=1,A=arguments.length,T=!1;for(typeof g=="boolean"&&(T=g,g=arguments[1]||{},b=2),A===b&&(g=this,--b);b<A;b++)if((c=arguments[b])!=null)for(p in c)h=g[p],g!==(l=c[p])&&(T&&l&&(m(l)||(d=Array.isArray(l)))?(y=d?(d=!1,h&&Array.isArray(h)?h:[]):h&&m(h)?h:{},g[p]=u(T,y,l)):l!==void 0&&(g[p]=l));return g};x.exports=u},function(x,N,r){x.exports={BOOT:r(522),CREATE:r(523),DESTROY:r(524),PAUSE:r(525),POST_UPDATE:r(526),PRE_UPDATE:r(527),READY:r(528),RENDER:r(529),RESUME:r(530),SHUTDOWN:r(531),SLEEP:r(532),START:r(533),TRANSITION_COMPLETE:r(534),TRANSITION_INIT:r(535),TRANSITION_OUT:r(536),TRANSITION_START:r(537),TRANSITION_WAKE:r(538),UPDATE:r(539),WAKE:r(540)}},function(x,N,r){var m=r(163),u=r(5);x.exports=function(c,p,h){var l=u(c,p,null);if(l===null)return h;if(Array.isArray(l))return m.RND.pick(l);if(typeof l=="object"){if(l.hasOwnProperty("randInt"))return m.RND.integerInRange(l.randInt[0],l.randInt[1]);if(l.hasOwnProperty("randFloat"))return m.RND.realInRange(l.randFloat[0],l.randFloat[1])}else if(typeof l=="function")return l(p);return l}},function(x,N){var r={},m={},u={register:function(c,p,h,l){l===void 0&&(l=!1),r[c]={plugin:p,mapping:h,custom:l}},registerCustom:function(c,p,h,l){m[c]={plugin:p,mapping:h,data:l}},hasCore:function(c){return r.hasOwnProperty(c)},hasCustom:function(c){return m.hasOwnProperty(c)},getCore:function(c){return r[c]},getCustom:function(c){return m[c]},getCustomClass:function(c){return m.hasOwnProperty(c)?m[c].plugin:null},remove:function(c){r.hasOwnProperty(c)&&delete r[c]},removeCustom:function(c){m.hasOwnProperty(c)&&delete m[c]},destroyCorePlugins:function(){for(var c in r)r.hasOwnProperty(c)&&delete r[c]},destroyCustomPlugins:function(){for(var c in m)m.hasOwnProperty(c)&&delete m[c]}};x.exports=u},function(x,N,r){var m=r(0),u=r(19),c=r(17),p=new m({initialize:function(h){this.scene=h,this.systems=h.sys,this.displayList,this.updateList,h.sys.events.once(c.BOOT,this.boot,this),h.sys.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});p.register=function(h,l){p.prototype.hasOwnProperty(h)||(p.prototype[h]=l)},p.remove=function(h){p.prototype.hasOwnProperty(h)&&delete p.prototype[h]},u.register("GameObjectCreator",p,"make"),x.exports=p},function(x,N,r){var m=r(0),u=r(206),c=r(86),p=r(7),h=r(111),l=new m({Extends:p,initialize:function(d,y){p.call(this),this.scene=d,this.type=y,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,d.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new c(this)),this},setData:function(d,y){return this.data||(this.data=new c(this)),this.data.set(d,y),this},incData:function(d,y){return this.data||(this.data=new c(this)),this.data.inc(d,y),this},toggleData:function(d){return this.data||(this.data=new c(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new c(this)),this.data.get(d)},setInteractive:function(d,y,g){return this.scene.sys.input.enable(this,d,y,g),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},update:function(){},toJSON:function(){return u(this)},willRender:function(d){return!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,y=this.parentContainer,g=[];y&&(g.unshift(y.getIndex(d)),(d=y).parentContainer);)y=y.parentContainer;return g.unshift(this.scene.sys.displayList.getIndex(d)),g},destroy:function(d){var y;d===void 0&&(d=!1),this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this),y=this.scene.sys,d||(y.displayList.remove(this),y.updateList.remove(this)),this.input&&(y.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),d||y.queueDepthSort(),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0,this.removeAllListeners())}});l.RENDER_MASK=15,x.exports=l},function(x,N){x.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(x,N,r){var m,u=r(29),c=r(212),p=[],h=!1;function l(y,g,b,A,T){g===void 0&&(g=1),b===void 0&&(b=1),A===void 0&&(A=u.CANVAS),T===void 0&&(T=!1);var C=m(A),O=(C===null?(C={parent:y,canvas:document.createElement("canvas"),type:A},A===u.CANVAS&&p.push(C)):C.parent=y,C.canvas);return T&&(C.parent=O),O.width=g,O.height=b,h&&A===u.CANVAS&&c.disable(O.getContext("2d")),O}function d(){var y=0;return p.forEach(function(g){g.parent&&y++}),y}x.exports={create2D:function(y,g,b){return l(y,g,b,u.CANVAS)},create:l,createWebGL:function(y,g,b){return l(y,g,b,u.WEBGL)},disableSmoothing:function(){h=!0},enableSmoothing:function(){h=!1},first:m=function(y){if(y===void 0&&(y=u.CANVAS),y===u.WEBGL)return null;for(var g=0;g<p.length;g++){var b=p[g];if(!b.parent&&b.type===y)return b}return null},free:function(){return p.length-d()},pool:p,remove:function(y){var g=y instanceof HTMLCanvasElement;p.forEach(function(b){(g&&b.canvas===y||!g&&b.parent===y)&&(b.parent=null,b.canvas.width=1,b.canvas.height=1)})},total:d}},function(x,N,r){var m=r(0),u=r(22),c=r(62),p=r(2),h=r(114),l=r(147),d=r(334),y=r(97),g=new m({initialize:function(b,A){this.loader=b,this.cache=p(A,"cache",!1),this.type=p(A,"type",!1),this.key=p(A,"key",!1);var T=this.key;if(b.prefix&&b.prefix!==""&&(this.key=b.prefix+T),!this.type||!this.key)throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.");this.url=p(A,"url"),this.url===void 0?this.url=b.path+T+"."+p(A,"extension",""):typeof this.url=="string"&&this.url.indexOf("blob:")!==0&&this.url.indexOf("data:")!==0&&(this.url=b.path+this.url),this.src="",this.xhrSettings=y(p(A,"responseType",void 0)),p(A,"xhrSettings",!1)&&(this.xhrSettings=l(this.xhrSettings,p(A,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?u.FILE_POPULATED:u.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=p(A,"config",{}),this.multiFile,this.linkFile},setLink:function(b){(this.linkFile=b).linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===u.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=u.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=d(this,this.loader.xhr))},onLoad:function(b,A){var T=b.responseURL&&b.responseURL.indexOf("file://")===0&&A.target.status===0,C=!(A.target&&A.target.status!==200)||T;b.readyState===4&&400<=b.status&&b.status<=599&&(C=!1),this.state=u.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,C)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(b){b.lengthComputable&&(this.bytesLoaded=b.loaded,this.bytesTotal=b.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=u.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=u.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=u.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(b){b===void 0&&(b=this.data);var A=this.key,T=this.type;this.loader.emit(c.FILE_COMPLETE,A,T,b),this.loader.emit(c.FILE_KEY_COMPLETE+T+"-"+A,A,T,b),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});g.createObjectURL=function(b,A,T){var C;typeof URL=="function"?b.src=URL.createObjectURL(A):((C=new FileReader).onload=function(){b.removeAttribute("crossOrigin"),b.src="data:"+(A.type||T)+";base64,"+C.result.split(",")[1]},C.onerror=b.onerror,C.readAsDataURL(A))},g.revokeObjectURL=function(b){typeof URL=="function"&&URL.revokeObjectURL(b.src)},x.exports=g},function(x,N,r){var m=r(0),u=r(9),c=r(4),p=new m({initialize:function(h,l,d,y,g,b){h===void 0&&(h=1),l===void 0&&(l=0),d===void 0&&(d=0),y===void 0&&(y=1),g===void 0&&(g=0),b===void 0&&(b=0),this.matrix=new Float32Array([h,l,d,y,g,b,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,l=h[0],d=h[1],y=h[2],g=h[3];return l||d?0<d?Math.acos(l/this.scaleX):-Math.acos(l/this.scaleX):y||g?u.TAU-(0<g?Math.acos(-y/this.scaleY):-Math.acos(y/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,l){var d=this.matrix;return d[4]=d[0]*h+d[2]*l+d[4],d[5]=d[1]*h+d[3]*l+d[5],this},scale:function(h,l){var d=this.matrix;return d[0]*=h,d[1]*=h,d[2]*=l,d[3]*=l,this},rotate:function(h){var l=Math.sin(h),d=Math.cos(h),y=this.matrix,g=y[0],b=y[1],A=y[2],T=y[3];return y[0]=g*d+A*l,y[1]=b*d+T*l,y[2]=g*-l+A*d,y[3]=b*-l+T*d,this},multiply:function(h,l){var d=this.matrix,y=h.matrix,g=d[0],b=d[1],A=d[2],T=d[3],C=d[4],O=d[5],L=y[0],P=y[1],H=y[2],G=y[3],B=y[4],F=y[5],D=l===void 0?this:l;return D.a=L*g+P*A,D.b=L*b+P*T,D.c=H*g+G*A,D.d=H*b+G*T,D.e=B*g+F*A+C,D.f=B*b+F*T+O,D},multiplyWithOffset:function(h,l,d){var y=this.matrix,g=h.matrix,b=y[0],A=y[1],T=y[2],C=y[3],O=l*b+d*T+y[4],L=l*A+d*C+y[5],P=g[0],H=g[1],G=g[2],B=g[3],F=g[4],D=g[5];return y[0]=P*b+H*T,y[1]=P*A+H*C,y[2]=G*b+B*T,y[3]=G*A+B*C,y[4]=F*b+D*T+O,y[5]=F*A+D*C+L,this},transform:function(h,l,d,y,g,b){var A=this.matrix,T=A[0],C=A[1],O=A[2],L=A[3],P=A[4],H=A[5];return A[0]=h*T+l*O,A[1]=h*C+l*L,A[2]=d*T+y*O,A[3]=d*C+y*L,A[4]=g*T+b*O+P,A[5]=g*C+b*L+H,this},transformPoint:function(h,l,d){d===void 0&&(d={x:0,y:0});var y=this.matrix,g=y[0],b=y[1],A=y[2],T=y[3],C=y[4],O=y[5];return d.x=h*g+l*A+C,d.y=h*b+l*T+O,d},invert:function(){var h=this.matrix,l=h[0],d=h[1],y=h[2],g=h[3],b=h[4],A=h[5],T=l*g-d*y;return h[0]=g/T,h[1]=-d/T,h[2]=-y/T,h[3]=l/T,h[4]=(y*A-g*b)/T,h[5]=-(l*A-d*b)/T,this},copyFrom:function(h){var l=this.matrix;return l[0]=h.a,l[1]=h.b,l[2]=h.c,l[3]=h.d,l[4]=h.e,l[5]=h.f,this},copyFromArray:function(h){var l=this.matrix;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],this},copyToContext:function(h){var l=this.matrix;return h.transform(l[0],l[1],l[2],l[3],l[4],l[5]),h},setToContext:function(h){var l=this.matrix;return h.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]),h},copyToArray:function(h){var l=this.matrix;return h===void 0?h=[l[0],l[1],l[2],l[3],l[4],l[5]]:(h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5]),h},setTransform:function(h,l,d,y,g,b){var A=this.matrix;return A[0]=h,A[1]=l,A[2]=d,A[3]=y,A[4]=g,A[5]=b,this},decomposeMatrix:function(){var h,l,d=this.decomposedMatrix,y=this.matrix,g=y[0],b=y[1],A=y[2],T=y[3],C=g*T-b*A;return d.translateX=y[4],d.translateY=y[5],g||b?(h=Math.sqrt(g*g+b*b),d.rotation=0<b?Math.acos(g/h):-Math.acos(g/h),d.scaleX=h,d.scaleY=C/h):A||T?(l=Math.sqrt(A*A+T*T),d.rotation=.5*Math.PI-(0<T?Math.acos(-A/l):-Math.acos(A/l)),d.scaleX=C/l,d.scaleY=l):(d.rotation=0,d.scaleX=0,d.scaleY=0),d},applyITRS:function(h,l,d,y,g){var b=this.matrix,A=Math.sin(d),T=Math.cos(d);return b[4]=h,b[5]=l,b[0]=T*y,b[1]=A*y,b[2]=-A*g,b[3]=T*g,this},applyInverse:function(h,l,d){d===void 0&&(d=new c);var y=this.matrix,g=y[0],b=y[1],A=y[2],T=y[3],C=y[4],O=y[5],L=1/(g*T+A*-b);return d.x=T*L*h+-A*L*l+(O*A-C*T)*L,d.y=g*L*l+-b*L*h+(-O*g+C*b)*L,d},getX:function(h,l){return h*this.a+l*this.c+this.e},getY:function(h,l){return h*this.b+l*this.d+this.f},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});x.exports=p},function(x,N,r){x.exports={DESTROY:r(460),FADE_IN_COMPLETE:r(461),FADE_IN_START:r(462),FADE_OUT_COMPLETE:r(463),FADE_OUT_START:r(464),FLASH_COMPLETE:r(465),FLASH_START:r(466),PAN_COMPLETE:r(467),PAN_START:r(468),POST_RENDER:r(469),PRE_RENDER:r(470),ROTATE_COMPLETE:r(471),ROTATE_START:r(472),SHAKE_COMPLETE:r(473),SHAKE_START:r(474),ZOOM_COMPLETE:r(475),ZOOM_START:r(476)}},function(x,N){x.exports=function(r,m,u,c,p){var h=c.alpha*u.alpha;if(h<=0)return!1;var l=r._tempMatrix1.copyFromArray(c.matrix.matrix),d=r._tempMatrix2.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),y=r._tempMatrix3;return p?(l.multiplyWithOffset(p,-c.scrollX*u.scrollFactorX,-c.scrollY*u.scrollFactorY),d.e=u.x,d.f=u.y):(d.e-=c.scrollX*u.scrollFactorX,d.f-=c.scrollY*u.scrollFactorY),l.multiply(d,y),m.globalCompositeOperation=r.blendModes[u.blendMode],m.globalAlpha=h,m.save(),y.setToContext(m),m.imageSmoothingEnabled=!(!r.antialias||u.frame&&u.frame.source.scaleMode),!0}},function(x,N,r){var m=r(41),u=r(18);x.exports=function(c,p,h){p.x=u(h,"x",0),p.y=u(h,"y",0),p.depth=u(h,"depth",0),p.flipX=u(h,"flipX",!1),p.flipY=u(h,"flipY",!1);var l=u(h,"scale",null);typeof l=="number"?p.setScale(l):l!==null&&(p.scaleX=u(l,"x",1),p.scaleY=u(l,"y",1));var d=u(h,"scrollFactor",null);typeof d=="number"?p.setScrollFactor(d):d!==null&&(p.scrollFactorX=u(d,"x",1),p.scrollFactorY=u(d,"y",1)),p.rotation=u(h,"rotation",0);var y=u(h,"angle",null);y!==null&&(p.angle=y),p.alpha=u(h,"alpha",1);var g,b,A=u(h,"origin",null);return typeof A=="number"?p.setOrigin(A):A!==null&&(g=u(A,"x",.5),b=u(A,"y",.5),p.setOrigin(g,b)),p.blendMode=u(h,"blendMode",m.NORMAL),p.visible=u(h,"visible",!0),u(h,"add",!0)&&c.sys.displayList.add(p),p.preUpdate&&c.sys.updateList.add(p),p}},function(x,N,r){var m={VERSION:"3.24.1",BlendModes:r(41),ScaleModes:r(187),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};x.exports=m},function(x,N,r){var m=r(0),u=r(162),c=r(349),p=r(211),h=r(350),l=new m({initialize:function(d,y,g,b){d===void 0&&(d=0),y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,y,g,b)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(d,y,g,b,A){return b===void 0&&(b=255),A===void 0&&(A=!0),this._locked=!0,this.red=d,this.green=y,this.blue=g,this.alpha=b,this._locked=!1,this.update(A)},setGLTo:function(d,y,g,b){return b===void 0&&(b=1),this._locked=!0,this.redGL=d,this.greenGL=y,this.blueGL=g,this.alphaGL=b,this._locked=!1,this.update(!0)},setFromRGB:function(d){return this._locked=!0,this.red=d.r,this.green=d.g,this.blue=d.b,d.hasOwnProperty("a")&&(this.alpha=d.a),this._locked=!1,this.update(!0)},setFromHSV:function(d,y,g){return p(d,y,g,this)},update:function(d){if(d===void 0&&(d=!1),this._locked)return this;var y=this.r,g=this.g,b=this.b,A=this.a;return this._color=u(y,g,b),this._color32=c(y,g,b,A),this._rgba="rgba("+y+","+g+","+b+","+A/255+")",d&&h(y,g,b,this),this},updateHSV:function(){var d=this.r,y=this.g,g=this.b;return h(d,y,g,this),this},clone:function(){return new l(this.r,this.g,this.b,this.a)},gray:function(d){return this.setTo(d,d,d)},random:function(d,y){d===void 0&&(d=0),y===void 0&&(y=255);var g=Math.floor(d+Math.random()*(y-d)),b=Math.floor(d+Math.random()*(y-d)),A=Math.floor(d+Math.random()*(y-d));return this.setTo(g,b,A)},randomGray:function(d,y){d===void 0&&(d=0),y===void 0&&(y=255);var g=Math.floor(d+Math.random()*(y-d));return this.setTo(g,g,g)},saturate:function(d){return this.s+=d/100,this},desaturate:function(d){return this.s-=d/100,this},lighten:function(d){return this.v+=d/100,this},darken:function(d){return this.v-=d/100,this},brighten:function(d){var y=this.r,g=this.g,b=this.b,y=Math.max(0,Math.min(255,y-Math.round(-d/100*255))),g=Math.max(0,Math.min(255,g-Math.round(-d/100*255))),b=Math.max(0,Math.min(255,b-Math.round(-d/100*255)));return this.setTo(y,g,b)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(d){this.gl[0]=Math.min(Math.abs(d),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(d){this.gl[1]=Math.min(Math.abs(d),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(d){this.gl[2]=Math.min(Math.abs(d),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(d){this.gl[3]=Math.min(Math.abs(d),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(d){d=Math.floor(Math.abs(d)),this.r=Math.min(d,255),this.gl[0]=d/255,this.update(!0)}},green:{get:function(){return this.g},set:function(d){d=Math.floor(Math.abs(d)),this.g=Math.min(d,255),this.gl[1]=d/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(d){d=Math.floor(Math.abs(d)),this.b=Math.min(d,255),this.gl[2]=d/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(d){d=Math.floor(Math.abs(d)),this.a=Math.min(d,255),this.gl[3]=d/255,this.update()}},h:{get:function(){return this._h},set:function(d){this._h=d,p(d,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(d){this._s=d,p(this._h,d,this._v,this)}},v:{get:function(){return this._v},set:function(d){this._v=d,p(this._h,this._s,d,this)}}});x.exports=l},function(x,N){x.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(x,N,r){var m=r(9);x.exports=function(u){return u*m.DEG_TO_RAD}},function(x,N,r){var m=r(0),u=r(199),c=r(158),p=r(31),h=r(159),l=r(4),d=new m({initialize:function(y,g,b,A){y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=0),A===void 0&&(A=0),this.type=p.LINE,this.x1=y,this.y1=g,this.x2=b,this.y2=A},getPoint:function(y,g){return u(this,y,g)},getPoints:function(y,g,b){return c(this,y,g,b)},getRandomPoint:function(y){return h(this,y)},setTo:function(y,g,b,A){return y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=0),A===void 0&&(A=0),this.x1=y,this.y1=g,this.x2=b,this.y2=A,this},getPointA:function(y){return y===void 0&&(y=new l),y.set(this.x1,this.y1),y},getPointB:function(y){return y===void 0&&(y=new l),y.set(this.x2,this.y2),y},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(y){this.x1<=this.x2?this.x1=y:this.x2=y}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(y){this.x1>this.x2?this.x1=y:this.x2=y}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(y){this.y1<=this.y2?this.y1=y:this.y2=y}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(y){this.y1>this.y2?this.y1=y:this.y2=y}}});x.exports=d},function(x,N){x.exports=function(r){return Math.sqrt((r.x2-r.x1)*(r.x2-r.x1)+(r.y2-r.y1)*(r.y2-r.y1))}},function(x,N,r){x.exports={BOOT:r(617),DESTROY:r(618),DRAG_END:r(619),DRAG_ENTER:r(620),DRAG:r(621),DRAG_LEAVE:r(622),DRAG_OVER:r(623),DRAG_START:r(624),DROP:r(625),GAME_OUT:r(626),GAME_OVER:r(627),GAMEOBJECT_DOWN:r(628),GAMEOBJECT_DRAG_END:r(629),GAMEOBJECT_DRAG_ENTER:r(630),GAMEOBJECT_DRAG:r(631),GAMEOBJECT_DRAG_LEAVE:r(632),GAMEOBJECT_DRAG_OVER:r(633),GAMEOBJECT_DRAG_START:r(634),GAMEOBJECT_DROP:r(635),GAMEOBJECT_MOVE:r(636),GAMEOBJECT_OUT:r(637),GAMEOBJECT_OVER:r(638),GAMEOBJECT_POINTER_DOWN:r(639),GAMEOBJECT_POINTER_MOVE:r(640),GAMEOBJECT_POINTER_OUT:r(641),GAMEOBJECT_POINTER_OVER:r(642),GAMEOBJECT_POINTER_UP:r(643),GAMEOBJECT_POINTER_WHEEL:r(644),GAMEOBJECT_UP:r(645),GAMEOBJECT_WHEEL:r(646),MANAGER_BOOT:r(647),MANAGER_PROCESS:r(648),MANAGER_UPDATE:r(649),POINTER_DOWN:r(650),POINTER_DOWN_OUTSIDE:r(651),POINTER_MOVE:r(652),POINTER_OUT:r(653),POINTER_OVER:r(654),POINTER_UP:r(655),POINTER_UP_OUTSIDE:r(656),POINTER_WHEEL:r(657),POINTERLOCK_CHANGE:r(658),PRE_UPDATE:r(659),SHUTDOWN:r(660),START:r(661),UPDATE:r(662)}},,function(x,N){x.exports=function(r,m,u){return!(r.width<=0||r.height<=0)&&r.x<=m&&r.x+r.width>=m&&r.y<=u&&r.y+r.height>=u}},function(x,N,r){x.exports={COMPLETE:r(685),DECODED:r(686),DECODED_ALL:r(687),DESTROY:r(688),DETUNE:r(689),GLOBAL_DETUNE:r(690),GLOBAL_MUTE:r(691),GLOBAL_RATE:r(692),GLOBAL_VOLUME:r(693),LOOP:r(694),LOOPED:r(695),MUTE:r(696),PAUSE_ALL:r(697),PAUSE:r(698),PLAY:r(699),RATE:r(700),RESUME_ALL:r(701),RESUME:r(702),SEEK:r(703),STOP_ALL:r(704),STOP:r(705),UNLOCKED:r(706),VOLUME:r(707)}},function(x,N,r){var m=r(0),u=r(14),c=r(21),p=r(33),h=new m({Extends:c,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible],initialize:function(l,d,y){d===void 0&&(d="Shape"),c.call(this,l,d),this.geom=y,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new p,this.initPipeline()},setFillStyle:function(l,d){return d===void 0&&(d=1),l===void 0?this.isFilled=!1:(this.fillColor=l,this.fillAlpha=d,this.isFilled=!0),this},setStrokeStyle:function(l,d,y){return y===void 0&&(y=1),l===void 0?this.isStroked=!1:(this.lineWidth=l,this.strokeColor=d,this.strokeAlpha=y,this.isStroked=!0),this},setClosePath:function(l){return this.closePath=l,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]}});x.exports=h},,function(x,N){x.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(x,N){x.exports=function(r,m,u){var c=u-m;return m+((r-m)%c+c)%c}},function(x,N){x.exports=function(r,m,u,c){var p=r.length;if(m<0||p<m||u<=m||p<u||p<m+u){if(c)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(x,N){x.exports=function(r,m,u){return 0<r.radius&&m>=r.left&&m<=r.right&&u>=r.top&&u<=r.bottom&&(r.x-m)*(r.x-m)+(r.y-u)*(r.y-u)<=r.radius*r.radius}},function(x,N,r){var m=r(80),u=r(171);x.exports=function(c,p){var h,l=m.Power0;if(typeof c=="string"?m.hasOwnProperty(c)?l=m[c]:(h="",c.indexOf(".")&&((h=c.substr(c.indexOf(".")+1)).toLowerCase()==="in"?h="easeIn":h.toLowerCase()==="out"?h="easeOut":h.toLowerCase()==="inout"&&(h="easeInOut")),c=u(c.substr(0,c.indexOf(".")+1)+h),m.hasOwnProperty(c)&&(l=m[c])):typeof c=="function"?l=c:Array.isArray(c)&&c.length,!p)return l;var d=p.slice(0);return d.unshift(0),function(y){return d[0]=y,l.apply(this,d)}}},function(x,N){x.exports=function(r,m,u,c){var p=r-u,h=m-c;return Math.sqrt(p*p+h*h)}},function(x,N,r){var m=r(0),u=r(52),c=r(310),p=r(311),h=r(31),l=r(33),d=r(177),y=new m({initialize:function(g,b,A,T,C,O){g===void 0&&(g=0),b===void 0&&(b=0),A===void 0&&(A=0),T===void 0&&(T=0),C===void 0&&(C=0),O===void 0&&(O=0),this.type=h.TRIANGLE,this.x1=g,this.y1=b,this.x2=A,this.y2=T,this.x3=C,this.y3=O},contains:function(g,b){return u(this,g,b)},getPoint:function(g,b){return c(this,g,b)},getPoints:function(g,b,A){return p(this,g,b,A)},getRandomPoint:function(g){return d(this,g)},setTo:function(g,b,A,T,C,O){return g===void 0&&(g=0),b===void 0&&(b=0),A===void 0&&(A=0),T===void 0&&(T=0),C===void 0&&(C=0),O===void 0&&(O=0),this.x1=g,this.y1=b,this.x2=A,this.y2=T,this.x3=C,this.y3=O,this},getLineA:function(g){return g===void 0&&(g=new l),g.setTo(this.x1,this.y1,this.x2,this.y2),g},getLineB:function(g){return g===void 0&&(g=new l),g.setTo(this.x2,this.y2,this.x3,this.y3),g},getLineC:function(g){return g===void 0&&(g=new l),g.setTo(this.x3,this.y3,this.x1,this.y1),g},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(g){var b=0,b=this.x1<=this.x2&&this.x1<=this.x3?this.x1-g:this.x2<=this.x1&&this.x2<=this.x3?this.x2-g:this.x3-g;this.x1-=b,this.x2-=b,this.x3-=b}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(g){var b=0,b=this.x1>=this.x2&&this.x1>=this.x3?this.x1-g:this.x2>=this.x1&&this.x2>=this.x3?this.x2-g:this.x3-g;this.x1-=b,this.x2-=b,this.x3-=b}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(g){var b=0,b=this.y1<=this.y2&&this.y1<=this.y3?this.y1-g:this.y2<=this.y1&&this.y2<=this.y3?this.y2-g:this.y3-g;this.y1-=b,this.y2-=b,this.y3-=b}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(g){var b=0,b=this.y1>=this.y2&&this.y1>=this.y3?this.y1-g:this.y2>=this.y1&&this.y2>=this.y3?this.y2-g:this.y3-g;this.y1-=b,this.y2-=b,this.y3-=b}}});x.exports=y},function(x,N,r){var m=r(0),u=r(123),c=r(8),p=r(4),h=new m({initialize:function(l){this.type=l,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new p,this._tmpVec2B=new p},draw:function(l,d){return d===void 0&&(d=32),l.strokePoints(this.getPoints(d))},getBounds:function(l,d){l=l||new c,d===void 0&&(d=16);var y=this.getLength();y<d&&(d=y/2);var g=Math.max(1,Math.round(y/d));return u(this.getSpacedPoints(g),l)},getDistancePoints:function(l){var d=this.getLength(),y=Math.max(1,d/l);return this.getSpacedPoints(y)},getEndPoint:function(l){return l===void 0&&(l=new p),this.getPointAt(1,l)},getLength:function(){var l=this.getLengths();return l[l.length-1]},getLengths:function(l){if(l===void 0&&(l=this.arcLengthDivisions),this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var d,y=[],g=this.getPoint(0,this._tmpVec2A),b=0;y.push(0);for(var A=1;A<=l;A++)b+=(d=this.getPoint(A/l,this._tmpVec2B)).distance(g),y.push(b),g.copy(d);return this.cacheArcLengths=y},getPointAt:function(l,d){var y=this.getUtoTmapping(l);return this.getPoint(y,d)},getPoints:function(l,d,y){y===void 0&&(y=[]),l=l||(d?this.getLength()/d:this.defaultDivisions);for(var g=0;g<=l;g++)y.push(this.getPoint(g/l));return y},getRandomPoint:function(l){return l===void 0&&(l=new p),this.getPoint(Math.random(),l)},getSpacedPoints:function(l,d,y){y===void 0&&(y=[]),l=l||(d?this.getLength()/d:this.defaultDivisions);for(var g=0;g<=l;g++){var b=this.getUtoTmapping(g/l,null,l);y.push(this.getPoint(b))}return y},getStartPoint:function(l){return l===void 0&&(l=new p),this.getPointAt(0,l)},getTangent:function(l,d){d===void 0&&(d=new p);var y=l-1e-4,g=l+1e-4;return y<0&&(y=0),1<g&&(g=1),this.getPoint(y,this._tmpVec2A),this.getPoint(g,d),d.subtract(this._tmpVec2A).normalize()},getTangentAt:function(l,d){var y=this.getUtoTmapping(l);return this.getTangent(y,d)},getTFromDistance:function(l,d){return l<=0?0:this.getUtoTmapping(0,l,d)},getUtoTmapping:function(l,d,y){for(var g,b=this.getLengths(y),A=0,T=b.length,C=d?Math.min(d,b[T-1]):l*b[T-1],O=0,L=T-1;O<=L;)if((g=b[A=Math.floor(O+(L-O)/2)]-C)<0)O=A+1;else{if(!(0<g)){L=A;break}L=A-1}if(b[A=L]===C)return A/(T-1);var P=b[A];return(A+(C-P)/(b[A+1]-P))/(T-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});x.exports=h},function(x,N){x.exports=function(r){var m={};for(var u in r)Array.isArray(r[u])?m[u]=r[u].slice(0):m[u]=r[u];return m}},function(x,N,r){var m=r(0),u=r(44),c=r(288),p=r(289),h=r(31),l=r(172),d=new m({initialize:function(y,g,b){y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=0),this.type=h.CIRCLE,this.x=y,this.y=g,this._radius=b,this._diameter=2*b},contains:function(y,g){return u(this,y,g)},getPoint:function(y,g){return c(this,y,g)},getPoints:function(y,g,b){return p(this,y,g,b)},getRandomPoint:function(y){return l(this,y)},setTo:function(y,g,b){return this.x=y,this.y=g,this._radius=b,this._diameter=2*b,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(y,g){return g===void 0&&(g=y),this.x=y,this.y=g,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(y){this._radius=y,this._diameter=2*y}},diameter:{get:function(){return this._diameter},set:function(y){this._diameter=y,this._radius=.5*y}},left:{get:function(){return this.x-this._radius},set:function(y){this.x=y+this._radius}},right:{get:function(){return this.x+this._radius},set:function(y){this.x=y-this._radius}},top:{get:function(){return this.y-this._radius},set:function(y){this.y=y+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(y){this.y=y-this._radius}}});x.exports=d},function(x,N,r){var m=r(3);x.exports=function(u,c,p){p===void 0&&(p=new m);var h=u.x1,l=u.y1,d=u.x2,y=u.y2,g=c.x1,b=c.y1,A=c.x2,T=c.y2,C=(T-b)*(d-h)-(A-g)*(y-l);if(C==0)return!1;var O=((A-g)*(l-b)-(T-b)*(h-g))/C,L=((d-h)*(l-b)-(y-l)*(h-g))/C;return 0<=O&&O<=1&&0<=L&&L<=1&&(p.x=h+O*(d-h),p.y=l+O*(y-l),!0)}},function(x,N){x.exports=function(r,m,u){var c=r.x3-r.x1,p=r.y3-r.y1,h=r.x2-r.x1,l=r.y2-r.y1,d=m-r.x1,y=u-r.y1,g=c*c+p*p,b=c*h+p*l,A=c*d+p*y,T=h*h+l*l,C=h*d+l*y,O=g*T-b*b,L=O==0?0:1/O,P=(T*A-b*C)*L,H=(g*C-b*A)*L;return 0<=P&&0<=H&&P+H<1}},function(x,N){x.exports=function(r){return Math.atan2(r.y2-r.y1,r.x2-r.x1)}},function(x,N){x.exports=function(r,m,u,c){var p=u||m.fillColor,h=c||m.fillAlpha,l=(16711680&p)>>>16,d=(65280&p)>>>8,y=255&p;r.fillStyle="rgba("+l+","+d+","+y+","+h+")"}},function(x,N){x.exports=function(r,m,u,c){var p=u||m.strokeColor,h=c||m.strokeAlpha,l=(16711680&p)>>>16,d=(65280&p)>>>8,y=255&p;r.strokeStyle="rgba("+l+","+d+","+y+","+h+")",r.lineWidth=m.lineWidth}},function(x,N){x.exports=function(r,m){if(!(m>=r.length)){for(var u=r.length-1,c=r[m],p=m;p<u;p++)r[p]=r[p+1];return r.length=u,c}}},function(x,N){x.exports=function(r,m,u){return r&&r.hasOwnProperty(m)?r[m]:u}},function(x,N){x.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(x,N,r){x.exports={ENTER_FULLSCREEN:r(516),FULLSCREEN_FAILED:r(517),FULLSCREEN_UNSUPPORTED:r(518),LEAVE_FULLSCREEN:r(519),ORIENTATION_CHANGE:r(520),RESIZE:r(521)}},function(x,N,r){var m=r(12);x.exports=function(u,c,p){return(p-c)*(u=m(u,0,1))}},function(x,N,r){"use strict";function m(H,G,B){B=B||2;var F,D,V,z,Y,j,X,J=G&&G.length,Q=J?G[0]*B:H.length,se=u(H,0,Q,B,!0),te=[];if(!se||se.next===se.prev)return te;if(J&&(se=function(re,he,de,ue){var Te,ye,Ne,Ve,we,Ue=[];for(Te=0,ye=he.length;Te<ye;Te++)Ne=he[Te]*ue,Ve=Te<ye-1?he[Te+1]*ue:re.length,(we=u(re,Ne,Ve,ue,!1))===we.next&&(we.steiner=!0),Ue.push(function(Oe){for(var Ye=Oe,st=Oe;Ye.x<st.x&&(st=Ye),Ye=Ye.next,Ye!==Oe;);return st}(we));for(Ue.sort(h),Te=0;Te<Ue.length;Te++)(function(Oe,Ye){{var st;(Ye=function(lt,Ke){var et,Xe=Ke,nt=lt.x,Se=lt.y,Wt=-1/0;do{if(Se<=Xe.y&&Se>=Xe.next.y&&Xe.next.y!==Xe.y){var Ht=Xe.x+(Se-Xe.y)*(Xe.next.x-Xe.x)/(Xe.next.y-Xe.y);if(Ht<=nt&&Wt<Ht){if((Wt=Ht)===nt){if(Se===Xe.y)return Xe;if(Se===Xe.next.y)return Xe.next}et=Xe.x<Xe.next.x?Xe:Xe.next}}Xe=Xe.next}while(Xe!==Ke);if(!et)return null;if(nt===Wt)return et.prev;var zt,wt=et,Mt=et.x,Et=et.y,Jt=1/0;for(Xe=et.next;Xe!==wt;)nt>=Xe.x&&Xe.x>=Mt&&nt!==Xe.x&&d(Se<Et?nt:Wt,Se,Mt,Et,Se<Et?Wt:nt,Se,Xe.x,Xe.y)&&((zt=Math.abs(Se-Xe.y)/(nt-Xe.x))<Jt||zt===Jt&&Xe.x>et.x)&&A(Xe,lt)&&(et=Xe,Jt=zt),Xe=Xe.next;return et}(Oe,Ye))&&c(st=T(Ye,Oe),st.next)}})(Ue[Te],de),de=c(de,de.next);return de}(H,G,se,B)),H.length>80*B){F=V=H[0],D=z=H[1];for(var ie=B;ie<Q;ie+=B)(Y=H[ie])<F&&(F=Y),(j=H[ie+1])<D&&(D=j),V<Y&&(V=Y),z<j&&(z=j);X=(X=Math.max(V-F,z-D))!==0?1/X:0}return p(se,te,B,F,D,X),te}function u(H,G,B,F,D){var V,z;if(D===0<P(H,G,B,F))for(V=G;V<B;V+=F)z=C(V,H[V],H[V+1],z);else for(V=B-F;G<=V;V-=F)z=C(V,H[V],H[V+1],z);return z&&g(z,z.next)&&(O(z),z=z.next),z}function c(H,G){if(!H)return H;G=G||H;var B,F=H;do if(B=!1,F.steiner||!g(F,F.next)&&y(F.prev,F,F.next)!==0)F=F.next;else{if(O(F),(F=G=F.prev)===F.next)break;B=!0}while(B||F!==G);return G}function p(H,G,B,F,D,V,z){if(H){!z&&V&&function(J,Q,se,te){for(var ie=J;ie.z===null&&(ie.z=l(ie.x,ie.y,Q,se,te)),ie.prevZ=ie.prev,ie.nextZ=ie.next,ie=ie.next,ie!==J;);ie.prevZ.nextZ=null,ie.prevZ=null,function(re){var he,de,ue,Te,ye,Ne,Ve,we,Ue=1;do{for(de=re,ye=re=null,Ne=0;de;){for(Ne++,ue=de,he=Ve=0;he<Ue&&(Ve++,ue=ue.nextZ);he++);for(we=Ue;0<Ve||0<we&&ue;)Ve!==0&&(we===0||!ue||de.z<=ue.z)?(de=(Te=de).nextZ,Ve--):(ue=(Te=ue).nextZ,we--),ye?ye.nextZ=Te:re=Te,Te.prevZ=ye,ye=Te;de=ue}ye.nextZ=null,Ue*=2}while(1<Ne)}(ie)}(H,F,D,V);for(var Y,j,X=H;H.prev!==H.next;)if(Y=H.prev,j=H.next,V?function(J,Q,se,te){var ie=J.prev,re=J,he=J.next;if(0<=y(ie,re,he))return!1;for(var de=ie.x<re.x?ie.x<he.x?ie.x:he.x:re.x<he.x?re.x:he.x,ue=ie.y<re.y?ie.y<he.y?ie.y:he.y:re.y<he.y?re.y:he.y,Te=ie.x>re.x?ie.x>he.x?ie.x:he.x:re.x>he.x?re.x:he.x,ye=ie.y>re.y?ie.y>he.y?ie.y:he.y:re.y>he.y?re.y:he.y,Ne=l(de,ue,Q,se,te),Ve=l(Te,ye,Q,se,te),we=J.prevZ,Ue=J.nextZ;we&&we.z>=Ne&&Ue&&Ue.z<=Ve;){if(we!==J.prev&&we!==J.next&&d(ie.x,ie.y,re.x,re.y,he.x,he.y,we.x,we.y)&&0<=y(we.prev,we,we.next)||(we=we.prevZ,Ue!==J.prev&&Ue!==J.next&&d(ie.x,ie.y,re.x,re.y,he.x,he.y,Ue.x,Ue.y)&&0<=y(Ue.prev,Ue,Ue.next)))return!1;Ue=Ue.nextZ}for(;we&&we.z>=Ne;){if(we!==J.prev&&we!==J.next&&d(ie.x,ie.y,re.x,re.y,he.x,he.y,we.x,we.y)&&0<=y(we.prev,we,we.next))return!1;we=we.prevZ}for(;Ue&&Ue.z<=Ve;){if(Ue!==J.prev&&Ue!==J.next&&d(ie.x,ie.y,re.x,re.y,he.x,he.y,Ue.x,Ue.y)&&0<=y(Ue.prev,Ue,Ue.next))return!1;Ue=Ue.nextZ}return!0}(H,F,D,V):function(J){var Q=J.prev,se=J,te=J.next;if(0<=y(Q,se,te))return!1;for(var ie=J.next.next;ie!==J.prev;){if(d(Q.x,Q.y,se.x,se.y,te.x,te.y,ie.x,ie.y)&&0<=y(ie.prev,ie,ie.next))return!1;ie=ie.next}return!0}(H))G.push(Y.i/B),G.push(H.i/B),G.push(j.i/B),O(H),H=j.next,X=j.next;else if((H=j)===X){z?z===1?p(H=function(J,Q,se){var te=J;do{var ie=te.prev,re=te.next.next;!g(ie,re)&&b(ie,te,te.next,re)&&A(ie,re)&&A(re,ie)&&(Q.push(ie.i/se),Q.push(te.i/se),Q.push(re.i/se),O(te),O(te.next),te=J=re),te=te.next}while(te!==J);return te}(H,G,B),G,B,F,D,V,2):z===2&&function(J,Q,se,te,ie,re){var he=J;do{for(var de=he.next.next;de!==he.prev;){if(he.i!==de.i&&function(Te,ye){return Te.next.i!==ye.i&&Te.prev.i!==ye.i&&!function(Ne,Ve){var we=Ne;do{if(we.i!==Ne.i&&we.next.i!==Ne.i&&we.i!==Ve.i&&we.next.i!==Ve.i&&b(we,we.next,Ne,Ve))return!0;we=we.next}while(we!==Ne);return!1}(Te,ye)&&A(Te,ye)&&A(ye,Te)&&function(Ne,Ve){for(var we=Ne,Ue=!1,Oe=(Ne.x+Ve.x)/2,Ye=(Ne.y+Ve.y)/2;we.y>Ye!=we.next.y>Ye&&we.next.y!==we.y&&Oe<(we.next.x-we.x)*(Ye-we.y)/(we.next.y-we.y)+we.x&&(Ue=!Ue),we=we.next,we!==Ne;);return Ue}(Te,ye)}(he,de)){var ue=T(he,de);return he=c(he,he.next),ue=c(ue,ue.next),p(he,Q,se,te,ie,re),p(ue,Q,se,te,ie,re)}de=de.next}he=he.next}while(he!==J)}(H,G,B,F,D,V):p(c(H),G,B,F,D,V,1);break}}}function h(H,G){return H.x-G.x}function l(H,G,B,F,D){return(H=1431655765&((H=858993459&((H=252645135&((H=16711935&((H=32767*(H-B)*D)|H<<8))|H<<4))|H<<2))|H<<1))|(G=1431655765&((G=858993459&((G=252645135&((G=16711935&((G=32767*(G-F)*D)|G<<8))|G<<4))|G<<2))|G<<1))<<1}function d(H,G,B,F,D,V,z,Y){return 0<=(D-z)*(G-Y)-(H-z)*(V-Y)&&0<=(H-z)*(F-Y)-(B-z)*(G-Y)&&0<=(B-z)*(V-Y)-(D-z)*(F-Y)}function y(H,G,B){return(G.y-H.y)*(B.x-G.x)-(G.x-H.x)*(B.y-G.y)}function g(H,G){return H.x===G.x&&H.y===G.y}function b(H,G,B,F){return g(H,G)&&g(B,F)||g(H,F)&&g(B,G)||0<y(H,G,B)!=0<y(H,G,F)&&0<y(B,F,H)!=0<y(B,F,G)}function A(H,G){return y(H.prev,H,H.next)<0?0<=y(H,G,H.next)&&0<=y(H,H.prev,G):y(H,G,H.prev)<0||y(H,H.next,G)<0}function T(H,G){var B=new L(H.i,H.x,H.y),F=new L(G.i,G.x,G.y),D=H.next,V=G.prev;return(H.next=G).prev=H,(B.next=D).prev=B,(F.next=B).prev=F,(V.next=F).prev=V,F}function C(H,G,B,F){var D=new L(H,G,B);return F?(D.next=F.next,(D.prev=F).next.prev=D,F.next=D):(D.prev=D).next=D,D}function O(H){H.next.prev=H.prev,H.prev.next=H.next,H.prevZ&&(H.prevZ.nextZ=H.nextZ),H.nextZ&&(H.nextZ.prevZ=H.prevZ)}function L(H,G,B){this.i=H,this.x=G,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(H,G,B,F){for(var D=0,V=G,z=B-F;V<B;V+=F)D+=(H[z]-H[V])*(H[V+1]+H[z+1]),z=V;return D}(x.exports=m).deviation=function(H,G,B,F){var D=G&&G.length,V=D?G[0]*B:H.length,z=Math.abs(P(H,0,V,B));if(D)for(var Y=0,j=G.length;Y<j;Y++){var X=G[Y]*B,J=Y<j-1?G[Y+1]*B:H.length;z-=Math.abs(P(H,X,J,B))}for(var Q=0,Y=0;Y<F.length;Y+=3){var se=F[Y]*B,te=F[Y+1]*B,ie=F[Y+2]*B;Q+=Math.abs((H[se]-H[ie])*(H[1+te]-H[1+se])-(H[se]-H[te])*(H[1+ie]-H[1+se]))}return z===0&&Q===0?0:Math.abs((Q-z)/z)},m.flatten=function(H){for(var G=H[0][0].length,B={vertices:[],holes:[],dimensions:G},F=0,D=0;D<H.length;D++){for(var V=0;V<H[D].length;V++)for(var z=0;z<G;z++)B.vertices.push(H[D][V][z]);0<D&&(F+=H[D-1].length,B.holes.push(F))}return B}},function(x,N,r){x.exports={ADD:r(664),COMPLETE:r(665),FILE_COMPLETE:r(666),FILE_KEY_COMPLETE:r(667),FILE_LOAD_ERROR:r(668),FILE_LOAD:r(669),FILE_PROGRESS:r(670),POST_PROCESS:r(671),PROGRESS:r(672),START:r(673)}},function(x,N){x.exports=function(r,m,u){if(r.width<=0||r.height<=0)return!1;var c=(m-r.x)/r.width,p=(u-r.y)/r.height;return(c*=c)+(p*=p)<.25}},function(x,N,r){var m=r(0),u=r(22),c=r(24),p=r(11),h=r(2),l=r(10),d=new m({Extends:c,initialize:function y(g,b,A,T,C){var O,L,P="png";l(b)&&(b=h(L=b,"key"),A=h(L,"url"),O=h(L,"normalMap"),T=h(L,"xhrSettings"),P=h(L,"extension",P),C=h(L,"frameConfig")),Array.isArray(A)&&(O=A[1],A=A[0]);var H,G={type:"image",cache:g.textureManager,extension:P,responseType:"blob",key:b,url:A,xhrSettings:T,config:C};c.call(this,g,G),O&&((H=new y(g,this.key,O,T,C)).type="normalMap",this.setLink(H),g.addFile(H))},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var y=this;this.data.onload=function(){c.revokeObjectURL(y.data),y.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(y.data),y.onProcessError()},c.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var y,g=this.linkFile;g&&g.state===u.FILE_COMPLETE?(y=this.type==="image"?this.cache.addImage(this.key,this.data,g.data):this.cache.addImage(g.key,g.data,this.data),this.pendingDestroy(y),g.pendingDestroy(y)):g||(y=this.cache.addImage(this.key,this.data),this.pendingDestroy(y))}});p.register("image",function(y,g,b){if(Array.isArray(y))for(var A=0;A<y.length;A++)this.addFile(new d(this,y[A]));else this.addFile(new d(this,y,g,b));return this}),x.exports=d},function(x,N,r){var m=new(r(0))({initialize:function(u,c,p,h){this.loader=u,this.type=c,this.key=p,this.multiKeyIndex=u.multiKeyIndex++,this.files=h,this.complete=!1,this.pending=h.length,this.failed=0,this.config={},this.baseURL=u.baseURL,this.path=u.path,this.prefix=u.prefix;for(var l=0;l<h.length;l++)h[l].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(u){return this.files.push(u),(u.multiFile=this).pending++,this.complete=!1,this},onFileComplete:function(u){this.files.indexOf(u)!==-1&&this.pending--},onFileFailed:function(u){this.files.indexOf(u)!==-1&&this.failed++}});x.exports=m},,function(x,N,r){var m=r(0),u=r(14),c=r(32),p=r(7),h=r(26),l=r(8),d=r(25),y=r(161),g=r(4),b=new m({Extends:p,Mixins:[u.Alpha,u.Visible],initialize:function(A,T,C,O){A===void 0&&(A=0),T===void 0&&(T=0),C===void 0&&(C=0),O===void 0&&(O=0),p.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.resolution=1,this.roundPixels=!1,this.useBounds=!1,this.worldView=new l,this.dirty=!0,this._x=A,this._y=T,this._cx=0,this._cy=0,this._cw=0,this._ch=0,this._width=C,this._height=O,this._bounds=new l,this._scrollX=0,this._scrollY=0,this._zoom=1,this._rotation=0,this.matrix=new d,this.transparent=!0,this.backgroundColor=y("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new g(C/2,O/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null},setOrigin:function(A,T){return A===void 0&&(A=.5),T===void 0&&(T=A),this.originX=A,this.originY=T,this},getScroll:function(A,T,C){C===void 0&&(C=new g);var O=.5*this.width,L=.5*this.height;return C.x=A-O,C.y=T-L,this.useBounds&&(C.x=this.clampX(C.x),C.y=this.clampY(C.y)),C},centerOnX:function(A){var T=.5*this.width;return this.midPoint.x=A,this.scrollX=A-T,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(A){var T=.5*this.height;return this.midPoint.y=A,this.scrollY=A-T,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(A,T){return this.centerOnX(A),this.centerOnY(T),this},centerToBounds:function(){var A,T,C;return this.useBounds&&(A=this._bounds,T=.5*this.width,C=.5*this.height,this.midPoint.set(A.centerX,A.centerY),this.scrollX=A.centerX-T,this.scrollY=A.centerY-C),this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(A){if(this.disableCull)return A;var T=this.matrix.matrix,C=T[0],O=T[1],L=T[2],P=T[3];if(!(C*P-O*L))return A;for(var H=T[4],G=T[5],B=this.scrollX,F=this.scrollY,D=this.width,V=this.height,z=this.y,Y=z+V,j=this.x,X=j+D,J=this.culledObjects,Q=A.length,se=J.length=0;se<Q;++se){var te,ie,re,he,de=A[se];de.hasOwnProperty("width")&&!de.parentContainer?(te=de.width,ie=de.height,j<((re=de.x-B*de.scrollFactorX-te*de.originX)+te)*C+((he=de.y-F*de.scrollFactorY-ie*de.originY)+ie)*L+H&&re*C+he*L+H<X&&z<(re+te)*O+(he+ie)*P+G&&re*O+he*P+G<Y&&J.push(de)):J.push(de)}return J},getWorldPoint:function(A,T,C){C===void 0&&(C=new g);var O=this.matrix.matrix,L=O[0],P=O[1],H=O[2],G=O[3],B=O[4],F=O[5],D=L*G-P*H;if(!D)return C.x=A,C.y=T,C;var V=G*(D=1/D),z=-P*D,Y=-H*D,j=L*D,X=(H*F-G*B)*D,J=(P*B-L*F)*D,Q=Math.cos(this.rotation),se=Math.sin(this.rotation),te=this.zoom,ie=this.resolution,re=this.scrollX,he=this.scrollY,de=A+(re*Q-he*se)*te,ue=T+(re*se+he*Q)*te;return C.x=(de*V+ue*Y)*ie+X,C.y=(de*z+ue*j)*ie+J,C},ignore:function(A){var T=this.id;Array.isArray(A)||(A=[A]);for(var C=0;C<A.length;C++){var O=A[C];Array.isArray(O)?this.ignore(O):O.isParent?this.ignore(O.getChildren()):O.cameraFilter|=T}return this},preRender:function(A){var T=this.width,C=this.height,O=.5*T,L=.5*C,P=this.zoom*A,H=this.matrix,G=T*this.originX,B=C*this.originY,F=this.scrollX,D=this.scrollY;this.useBounds&&(F=this.clampX(F),D=this.clampY(D)),this.roundPixels&&(G=Math.round(G),B=Math.round(B));var V=(this.scrollX=F)+O,z=(this.scrollY=D)+L;this.midPoint.set(V,z);var Y=T/P,j=C/P;this.worldView.setTo(V-Y/2,z-j/2,Y,j),H.applyITRS(this.x+G,this.y+B,this.rotation,P,P),H.translate(-G,-B)},clampX:function(A){var T=this._bounds,C=this.displayWidth,O=T.x+(C-this.width)/2,L=Math.max(O,O+T.width-C);return A<O?A=O:L<A&&(A=L),A},clampY:function(A){var T=this._bounds,C=this.displayHeight,O=T.y+(C-this.height)/2,L=Math.max(O,O+T.height-C);return A<O?A=O:L<A&&(A=L),A},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(A){return A===void 0&&(A=0),this.rotation=c(A),this},setBackgroundColor:function(A){return A===void 0&&(A="rgba(0,0,0,0)"),this.backgroundColor=y(A),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(A,T,C,O,L){return L===void 0&&(L=!1),this._bounds.setTo(A,T,C,O),this.dirty=!0,this.useBounds=!0,L?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(A){A===void 0&&(A=new l);var T=this._bounds;return A.setTo(T.x,T.y,T.width,T.height),A},setName:function(A){return A===void 0&&(A=""),this.name=A,this},setPosition:function(A,T){return T===void 0&&(T=A),this.x=A,this.y=T,this},setRotation:function(A){return A===void 0&&(A=0),this.rotation=A,this},setRoundPixels:function(A){return this.roundPixels=A,this},setScene:function(A){this.scene&&this._customViewport&&this.sceneManager.customViewports--;var T=(this.scene=A).sys;this.sceneManager=T.game.scene,this.scaleManager=T.scale,this.cameraManager=T.cameras;var C=this.scaleManager.resolution;return this.resolution=C,this._cx=this._x*C,this._cy=this._y*C,this._cw=this._width*C,this._ch=this._height*C,this.updateSystem(),this},setScroll:function(A,T){return T===void 0&&(T=A),this.scrollX=A,this.scrollY=T,this},setSize:function(A,T){return T===void 0&&(T=A),this.width=A,this.height=T,this},setViewport:function(A,T,C,O){return this.x=A,this.y=T,this.width=C,this.height=O,this},setZoom:function(A){return A===void 0&&(A=1),A===0&&(A=.001),this.zoom=A,this},setMask:function(A,T){return T===void 0&&(T=!0),this.mask=A,this._maskCamera=T?this.cameraManager.default:this,this},clearMask:function(A){return A===void 0&&(A=!1),A&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var A={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(A.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),A},update:function(){},updateSystem:function(){var A,T;this.scaleManager&&(A=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,T=this.sceneManager,A&&!this._customViewport?T.customViewports++:!A&&this._customViewport&&T.customViewports--,this.dirty=!0,this._customViewport=A)},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(A){this._x=A,this._cx=A*this.resolution,this.updateSystem()}},y:{get:function(){return this._y},set:function(A){this._y=A,this._cy=A*this.resolution,this.updateSystem()}},width:{get:function(){return this._width},set:function(A){this._width=A,this._cw=A*this.resolution,this.updateSystem()}},height:{get:function(){return this._height},set:function(A){this._height=A,this._ch=A*this.resolution,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(A){this._scrollX=A,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(A){this._scrollY=A,this.dirty=!0}},zoom:{get:function(){return this._zoom},set:function(A){this._zoom=A,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(A){this._rotation=A,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoom}},displayHeight:{get:function(){return this.height/this.zoom}}});x.exports=b},function(x,N){x.exports=function(r,m,u,c){return u===void 0&&(u=0),m===0?r:(r-=u,r=m*Math.floor(r/m),c?(u+r)/m:u+r)}},function(x,N,r){var m=r(0),u=r(63),c=r(291),p=r(292),h=r(31),l=r(173),d=new m({initialize:function(y,g,b,A){y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=0),A===void 0&&(A=0),this.type=h.ELLIPSE,this.x=y,this.y=g,this.width=b,this.height=A},contains:function(y,g){return u(this,y,g)},getPoint:function(y,g){return c(this,y,g)},getPoints:function(y,g,b){return p(this,y,g,b)},getRandomPoint:function(y){return l(this,y)},setTo:function(y,g,b,A){return this.x=y,this.y=g,this.width=b,this.height=A,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(y,g){return g===void 0&&(g=y),this.x=y,this.y=g,this},setSize:function(y,g){return g===void 0&&(g=y),this.width=y,this.height=g,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(y){this.x=y+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(y){this.x=y-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(y){this.y=y+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(y){this.y=y-this.height/2}}});x.exports=d},function(x,N,r){var m=r(13);x.exports=function(u,c,p,h,l){var d=u.strokeTint,y=m.getTintAppendFloatAlphaAndSwap(c.strokeColor,c.strokeAlpha*p);d.TL=y,d.TR=y,d.BL=y,d.BR=y;var g=c.pathData,b=g.length-1,A=c.lineWidth,T=A/2,C=g[0]-h,O=g[1]-l;c.closePath||(b-=2);for(var L=2;L<b;L+=2){var P=g[L]-h,H=g[L+1]-l;u.setTexture2D(),u.batchLine(C,O,P,H,T,T,A,L-2,!!c.closePath&&L===b-1),C=P,O=H}}},function(x,N,r){var m=r(0),u=r(14),c=r(21),p=r(882),h=new m({Extends:c,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,p],initialize:function(l,d,y,g,b){c.call(this,l,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u.Animation(this),this.setTexture(g,b),this.setPosition(d,y),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},preUpdate:function(l,d){this.anims.update(l,d)},play:function(l,d,y){return this.anims.play(l,d,y),this},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});x.exports=h},function(x,N,r){var m=r(0),u=r(22),c=r(24),p=r(11),h=r(2),l=r(5),d=r(10),y=new m({Extends:c,initialize:function(g,b,A,T,C){var O,L="json";d(b)&&(b=h(O=b,"key"),A=h(O,"url"),T=h(O,"xhrSettings"),L=h(O,"extension",L),C=h(O,"dataKey",C));var P={type:"json",cache:g.cacheManager.json,extension:L,responseType:"text",key:b,url:A,xhrSettings:T,config:C};c.call(this,g,P),d(A)&&(this.data=C?l(A,C):A,this.state=u.FILE_POPULATED)},onProcess:function(){var g,b;this.state!==u.FILE_POPULATED&&(this.state=u.FILE_PROCESSING,g=JSON.parse(this.xhrLoader.responseText),b=this.config,this.data=typeof b=="string"?l(g,b,g):g),this.onProcessComplete()}});p.register("json",function(g,b,A,T){if(Array.isArray(g))for(var C=0;C<g.length;C++)this.addFile(new y(this,g[C]));else this.addFile(new y(this,g,b,T,A));return this}),x.exports=y},,,,,,function(x,N,r){x.exports={ADD_ANIMATION:r(410),ANIMATION_COMPLETE:r(411),ANIMATION_REPEAT:r(412),ANIMATION_RESTART:r(413),ANIMATION_START:r(414),PAUSE_ALL:r(415),REMOVE_ANIMATION:r(416),RESUME_ALL:r(417),SPRITE_ANIMATION_COMPLETE:r(418),SPRITE_ANIMATION_KEY_COMPLETE:r(419),SPRITE_ANIMATION_KEY_REPEAT:r(420),SPRITE_ANIMATION_KEY_RESTART:r(421),SPRITE_ANIMATION_KEY_START:r(422),SPRITE_ANIMATION_KEY_UPDATE:r(423),SPRITE_ANIMATION_REPEAT:r(424),SPRITE_ANIMATION_RESTART:r(425),SPRITE_ANIMATION_START:r(426),SPRITE_ANIMATION_UPDATE:r(427)}},function(x,N){x.exports=function(r){return 2*(r.width+r.height)}},function(x,N,r){var m=r(214),u=r(215),c=r(216),p=r(217),h=r(218),l=r(219),d=r(220),y=r(221),g=r(222),b=r(223),A=r(224),T=r(225);x.exports={Power0:d,Power1:y.Out,Power2:p.Out,Power3:g.Out,Power4:b.Out,Linear:d,Quad:y.Out,Cubic:p.Out,Quart:g.Out,Quint:b.Out,Sine:A.Out,Expo:l.Out,Circ:c.Out,Elastic:h.Out,Back:m.Out,Bounce:u.Out,Stepped:T,"Quad.easeIn":y.In,"Cubic.easeIn":p.In,"Quart.easeIn":g.In,"Quint.easeIn":b.In,"Sine.easeIn":A.In,"Expo.easeIn":l.In,"Circ.easeIn":c.In,"Elastic.easeIn":h.In,"Back.easeIn":m.In,"Bounce.easeIn":u.In,"Quad.easeOut":y.Out,"Cubic.easeOut":p.Out,"Quart.easeOut":g.Out,"Quint.easeOut":b.Out,"Sine.easeOut":A.Out,"Expo.easeOut":l.Out,"Circ.easeOut":c.Out,"Elastic.easeOut":h.Out,"Back.easeOut":m.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":y.InOut,"Cubic.easeInOut":p.InOut,"Quart.easeInOut":g.InOut,"Quint.easeInOut":b.InOut,"Sine.easeInOut":A.InOut,"Expo.easeInOut":l.InOut,"Circ.easeInOut":c.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":m.InOut,"Bounce.easeInOut":u.InOut}},function(x,N,r){(function(m){var u={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};x.exports=function(){var c=navigator.userAgent;/Windows/.test(c)?u.windows=!0:/Mac OS/.test(c)&&!/like Mac OS/.test(c)?u.macOS=!0:/Android/.test(c)?u.android=!0:/Linux/.test(c)?u.linux=!0:/iP[ao]d|iPhone/i.test(c)?(u.iOS=!0,navigator.appVersion.match(/OS (\d+)/),u.iOSVersion=parseInt(RegExp.$1,10),u.iPhone=c.toLowerCase().indexOf("iphone")!==-1,u.iPad=c.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(c)||/\bKF[A-Z][A-Z]+/.test(c)||/Silk.*Mobile Safari/.test(c)?u.kindle=!0:/CrOS/.test(c)&&(u.chromeOS=!0),(/Windows Phone/i.test(c)||/IEMobile/i.test(c))&&(u.android=!1,u.iOS=!1,u.macOS=!1,u.windows=!0,u.windowsPhone=!0);var p=/Silk/.test(c);return(u.windows||u.macOS||u.linux&&!p||u.chromeOS)&&(u.desktop=!0),(u.windowsPhone||/Windows NT/i.test(c)&&/Touch/i.test(c))&&(u.desktop=!1),navigator.standalone&&(u.webApp=!0),window.cordova!==void 0&&(u.cordova=!0),m!==void 0&&m.versions&&m.versions.node&&(u.node=!0),u.node&&typeof m.versions=="object"&&(u.nodeWebkit=!!m.versions["node-webkit"],u.electron=!!m.versions.electron),window.ejecta!==void 0&&(u.ejecta=!0),/Crosswalk/.test(c)&&(u.crosswalk=!0),u.pixelRatio=window.devicePixelRatio||1,u}()}).call(this,r(542))},function(x,N,r){var m,u=r(81),c={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};x.exports=(m=navigator.userAgent,/Edge\/\d+/.test(m)?c.edge=!0:/Chrome\/(\d+)/.test(m)&&!u.windowsPhone?(c.chrome=!0,c.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(m)?(c.firefox=!0,c.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(m)&&u.iOS?c.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(m)?(c.ie=!0,c.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(m)?c.opera=!0:/Safari/.test(m)&&!u.windowsPhone?c.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(m)&&(c.ie=!0,c.trident=!0,c.tridentVersion=parseInt(RegExp.$1,10),c.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(m)&&(c.silk=!0),c)},function(x,N){x.exports=function(r,m){return Math.random()*(m-r)+r}},function(x,N){x.exports=function(r,m){return 0<r&&(r&r-1)==0&&0<m&&(m&m-1)==0}},function(x,N,r){x.exports={ADD:r(594),ERROR:r(595),LOAD:r(596),READY:r(597),REMOVE:r(598)}},function(x,N,r){var m=r(0),u=r(255),c=new m({initialize:function(p,h){this.parent=p,(this.events=h)||(this.events=p.events?p.events:p),this.list={},this.values={},this._frozen=!1,!p.hasOwnProperty("sys")&&this.events&&this.events.once("destroy",this.destroy,this)},get:function(p){var h=this.list;if(Array.isArray(p)){for(var l=[],d=0;d<p.length;d++)l.push(h[p[d]]);return l}return h[p]},getAll:function(){var p={};for(var h in this.list)this.list.hasOwnProperty(h)&&(p[h]=this.list[h]);return p},query:function(p){var h={};for(var l in this.list)this.list.hasOwnProperty(l)&&l.match(p)&&(h[l]=this.list[l]);return h},set:function(p,h){if(this._frozen)return this;if(typeof p=="string")return this.setValue(p,h);for(var l in p)this.setValue(l,p[l]);return this},inc:function(p,h){if(this._frozen)return this;h===void 0&&(h=1);var l=this.get(p);return l===void 0&&(l=0),this.set(p,l+h),this},toggle:function(p){return this._frozen||this.set(p,!this.get(p)),this},setValue:function(p,h){return this._frozen||(this.has(p)?this.values[p]=h:(d=(l=this).list,y=this.events,g=this.parent,Object.defineProperty(this.values,p,{enumerable:!0,configurable:!0,get:function(){return d[p]},set:function(b){var A;l._frozen||(A=d[p],d[p]=b,y.emit(u.CHANGE_DATA,g,p,b,A),y.emit(u.CHANGE_DATA_KEY+p,g,b,A))}}),d[p]=h,y.emit(u.SET_DATA,g,p,h))),this;var l,d,y,g},each:function(p,h){for(var l=[this.parent,null,void 0],d=1;d<arguments.length;d++)l.push(arguments[d]);for(var y in this.list)l[1]=y,l[2]=this.list[y],p.apply(h,l);return this},merge:function(p,h){for(var l in h===void 0&&(h=!0),p)p.hasOwnProperty(l)&&(h||!h&&!this.has(l))&&this.setValue(l,p[l]);return this},remove:function(p){if(this._frozen)return this;if(!Array.isArray(p))return this.removeValue(p);for(var h=0;h<p.length;h++)this.removeValue(p[h]);return this},removeValue:function(p){var h;return this.has(p)&&(h=this.list[p],delete this.list[p],delete this.values[p],this.events.emit(u.REMOVE_DATA,this.parent,p,h)),this},pop:function(p){var h=void 0;return!this._frozen&&this.has(p)&&(h=this.list[p],delete this.list[p],delete this.values[p],this.events.emit(u.REMOVE_DATA,this.parent,p,h)),h},has:function(p){return this.list.hasOwnProperty(p)},setFreeze:function(p){return this._frozen=p,this},reset:function(){for(var p in this.list)delete this.list[p],delete this.values[p];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(u.CHANGE_DATA),this.events.off(u.SET_DATA),this.events.off(u.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(p){this._frozen=!!p}},count:{get:function(){var p=0;for(var h in this.list)this.list[h]!==void 0&&p++;return p}}});x.exports=c},function(x,N,r){var m=r(56);x.exports=function(u,c,p,h){if(h===void 0&&(h=u),!Array.isArray(c))return(d=u.indexOf(c))!==-1?(m(u,d),p&&p.call(h,c),c):null;for(var l=c.length-1;0<=l;){var d,y=c[l];(d=u.indexOf(y))!==-1?(m(u,d),p&&p.call(h,y)):c.pop(),l--}return c}},function(x,N){x.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(x,N){x.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(x,N,r){var m=r(0),u=r(49),c=r(7),p=r(38),h=r(15),l=r(1),d=r(281),y=r(282),g=new m({Extends:c,initialize:function(b){c.call(this),this.game=b,this.jsonCache=b.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,b.events.on(h.BLUR,this.onGameBlur,this),b.events.on(h.FOCUS,this.onGameFocus,this),b.events.on(h.PRE_STEP,this.update,this),b.events.once(h.DESTROY,this.destroy,this)},add:l,addAudioSprite:function(b,A){A===void 0&&(A={});var T,C,O=this.add(b,A);for(var L in O.spritemap=this.jsonCache.get(b).spritemap,O.spritemap)O.spritemap.hasOwnProperty(L)&&(T=u(A),C=O.spritemap[L],T.loop=!!C.hasOwnProperty("loop")&&C.loop,O.addMarker({name:L,start:C.start,duration:C.end-C.start,config:T}));return O},get:function(b){return y(this.sounds,"key",b)},getAll:function(b){return d(this.sounds,"key",b)},play:function(b,A){var T=this.add(b);return T.once(p.COMPLETE,T.destroy,T),A?A.name?(T.addMarker(A),T.play(A.name)):T.play(A):T.play()},playAudioSprite:function(b,A,T){var C=this.addAudioSprite(b);return C.once(p.COMPLETE,C.destroy,C),C.play(A,T)},remove:function(b){var A=this.sounds.indexOf(b);return A!==-1&&(b.destroy(),this.sounds.splice(A,1),!0)},removeAll:function(){this.sounds.forEach(function(b){b.destroy()}),this.sounds.length=0},removeByKey:function(b){for(var A=0,T=this.sounds.length-1;0<=T;T--){var C=this.sounds[T];C.key===b&&(C.destroy(),this.sounds.splice(T,1),A++)}return A},pauseAll:function(){this.forEachActiveSound(function(b){b.pause()}),this.emit(p.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(b){b.resume()}),this.emit(p.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(b){b.stop()}),this.emit(p.STOP_ALL,this)},stopByKey:function(b){var A=0;return this.getAll(b).forEach(function(T){T.stop()&&A++}),A},unlock:l,onBlur:l,onFocus:l,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(b,A){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(p.UNLOCKED,this));for(var T=this.sounds.length-1;0<=T;T--)this.sounds[T].pendingRemove&&this.sounds.splice(T,1);this.sounds.forEach(function(C){C.update(b,A)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(b,A){var T=this;this.sounds.forEach(function(C,O){C&&!C.pendingRemove&&b.call(A||T,C,O,T.sounds)})},setRate:function(b){return this.rate=b,this},rate:{get:function(){return this._rate},set:function(b){this._rate=b,this.forEachActiveSound(function(A){A.calculateRate()}),this.emit(p.GLOBAL_RATE,this,b)}},setDetune:function(b){return this.detune=b,this},detune:{get:function(){return this._detune},set:function(b){this._detune=b,this.forEachActiveSound(function(A){A.calculateRate()}),this.emit(p.GLOBAL_DETUNE,this,b)}}});x.exports=g},function(x,N,r){var m=r(0),u=r(7),c=r(38),p=r(16),h=r(1),l=new m({Extends:u,initialize:function(d,y,g){u.call(this),this.manager=d,this.key=y,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},this.currentConfig=this.config,this.config=p(this.config,g),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(d){return!(!d||!d.name||typeof d.name!="string")&&(this.markers[d.name]?(console.error("addMarker "+d.name+" already exists in Sound"),!1):(d=p(!0,{name:"",start:0,duration:this.totalDuration-(d.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},d),this.markers[d.name]=d,!0))},updateMarker:function(d){return!(!d||!d.name||typeof d.name!="string")&&(this.markers[d.name]?(this.markers[d.name]=p(!0,this.markers[d.name],d),!0):(console.warn("Audio Marker: "+d.name+" missing in Sound: "+this.key),!1))},removeMarker:function(d){var y=this.markers[d];return y?(this.markers[d]=null,y):null},play:function(d,y){if(d===void 0&&(d=""),typeof d=="object"&&(y=d,d=""),typeof d!="string")return!1;if(d){if(!this.markers[d])return console.warn("Marker: "+d+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[d],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=p(this.currentConfig,y),this.isPlaying=!0,!(this.isPaused=!1)},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0)},resume:function(){return!(!this.isPaused||this.isPlaying)&&(this.isPlaying=!0,!(this.isPaused=!1))},stop:function(){return!(!this.isPaused&&!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var d=this.currentConfig.detune+this.manager.detune,y=Math.pow(1.0005777895065548,d);this.totalRate=this.currentConfig.rate*this.manager.rate*y},destroy:function(){this.pendingRemove||(this.emit(c.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});x.exports=l},function(x,N){x.exports=function(r,m){return!(r.width<=0||r.height<=0||m.width<=0||m.height<=0)&&!(r.right<m.x||r.bottom<m.y||r.x>m.right||r.y>m.bottom)}},function(x,N,r){var m=r(141),u=r(317);x.exports=function(c,p){if(p===void 0&&(p=90),!m(c))return null;if(typeof p!="string"&&(p=(p%360+360)%360),p===90||p===-270||p==="rotateLeft")(c=u(c)).reverse();else if(p===-90||p===270||p==="rotateRight")c.reverse(),c=u(c);else if(Math.abs(p)===180||p==="rotate180"){for(var h=0;h<c.length;h++)c[h].reverse();c.reverse()}return c}},function(x,N,r){(function(){function m(p,h){return u(p.slice(),h)}function u(p,h){typeof h!="function"&&(h=function(b,A){return String(b).localeCompare(A)});var l=p.length;if(l<=1)return p;for(var d=new Array(l),y=1;y<l;y*=2){c(p,h,y,d);var g=p;p=d,d=g}return p}m.inplace=function(p,h){var l=u(p,h);return l!==p&&c(l,null,p.length,p),p};var c=function(p,h,l,d){for(var y,g,b,A,T=p.length,C=0,O=2*l,L=0;L<T;L+=O)for(g=(y=L+l)+l,T<y&&(y=T),T<g&&(g=T),b=L,A=y;;)if(b<y&&A<g)h(p[b],p[A])<=0?d[C++]=p[b++]:d[C++]=p[A++];else if(b<y)d[C++]=p[b++];else{if(!(A<g))break;d[C++]=p[A++]}};x.exports=m})()},function(x,N,r){var m=r(5),u={},c={register:function(p,h,l,d,y){u[p]={plugin:h,mapping:l,settingsKey:d,configKey:y}},getPlugin:function(p){return u[p]},install:function(p){var h=p.scene.sys,l=h.settings.input,d=h.game.config;for(var y in u){var g=u[y].plugin,b=u[y].mapping,A=u[y].settingsKey,T=u[y].configKey;m(l,A,d[T])&&(p[b]=new g(p))}},remove:function(p){u.hasOwnProperty(p)&&delete u[p]}};x.exports=c},function(x,N,r){x.exports={ANY_KEY_DOWN:r(919),ANY_KEY_UP:r(920),COMBO_MATCH:r(921),DOWN:r(922),KEY_DOWN:r(923),KEY_UP:r(924),UP:r(925)}},function(x,N){x.exports=function(r,m,u,c,p,h){return r===void 0&&(r=""),m===void 0&&(m=!0),u===void 0&&(u=""),c===void 0&&(c=""),p===void 0&&(p=0),h===void 0&&(h=!1),{responseType:r,async:m,user:u,password:c,timeout:p,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}}},function(x,N){x.exports=function(r,m,u){return r.hasOwnProperty(m)?typeof r[m]=="function"?function(c,p,h,l,d,y){return r[m](c,p,h,l,d,y)}:function(){return r[m]}:typeof u=="function"?u:function(){return u}}},function(x,N,r){var m=r(150),u=r(18),c=r(57),p=r(45),h=r(98),l=r(337),d=r(148),y=r(5),g=r(149),b=r(151),A=r(153);x.exports=function(T,C,O){O===void 0&&(O=m);for(var L=O.targets?O.targets:d(C),P=l(C),H=h(C,"delay",O.delay),G=h(C,"duration",O.duration),B=y(C,"easeParams",O.easeParams),F=p(y(C,"ease",O.ease),B),D=h(C,"hold",O.hold),V=h(C,"repeat",O.repeat),z=h(C,"repeatDelay",O.repeatDelay),Y=c(C,"yoyo",O.yoyo),j=c(C,"flipX",O.flipX),X=c(C,"flipY",O.flipY),J=[],Q=0;Q<P.length;Q++)for(var se=P[Q].key,te=P[Q].value,ie=0;ie<L.length;ie++){var re=g(se,te),he=A(L[ie],ie,se,re.getEnd,re.getStart,re.getActive,p(y(te,"ease",F),B),h(te,"delay",H),h(te,"duration",G),c(te,"yoyo",Y),h(te,"hold",D),h(te,"repeat",V),h(te,"repeatDelay",z),c(te,"flipX",j),c(te,"flipY",X));J.push(he)}var de=new b(T,J,L);de.offset=u(C,"offset",null),de.completeDelay=u(C,"completeDelay",0),de.loop=Math.round(u(C,"loop",0)),de.loopDelay=Math.round(u(C,"loopDelay",0)),de.paused=c(C,"paused",!1),de.useFrames=c(C,"useFrames",!1);for(var ue=y(C,"callbackScope",de),Te=[de,null],ye=b.TYPES,Ne=0;Ne<ye.length;Ne++){var Ve,we,Ue=ye[Ne],Oe=y(C,Ue,!1);Oe&&(Ve=y(C,Ue+"Scope",ue),we=y(C,Ue+"Params",[]),de.setCallback(Ue,Oe,Te.concat(we),Ve))}return de}},,,,,,,function(x,N){x.exports=function(r,m,u){return u===void 0&&(u=1e-4),Math.abs(r-m)<u}},function(x,N){x.exports=function(r,m,u){return(m-r)*u+r}},function(x,N,r){var m=r(0),u=r(13),c=new m({initialize:function(p){this.name="WebGLPipeline",this.game=p.game,this.view=p.game.canvas,this.resolution=1,this.width=0,this.height=0,this.gl=p.gl,this.vertexCount=0,this.vertexCapacity=p.vertexCapacity,this.renderer=p.renderer,this.vertexData=p.vertices?p.vertices:new ArrayBuffer(p.vertexCapacity*p.vertexSize),this.vertexBuffer=this.renderer.createVertexBuffer(p.vertices?p.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=this.renderer.createProgram(p.vertShader,p.fragShader),this.attributes=p.attributes,this.vertexSize=p.vertexSize,this.topology=p.topology,this.bytes=new Uint8Array(this.vertexData),this.vertexComponentCount=u.getComponentCount(p.attributes,this.gl),this.flushLocked=!1,this.active=!1},boot:function(){},addAttribute:function(p,h,l,d,y){return this.attributes.push({name:p,size:h,type:this.renderer.glFormats[l],normalized:d,offset:y}),this.vertexComponentCount=u.getComponentCount(this.attributes,this.gl),this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(p,h,l){return this.width=p*l,this.height=h*l,this.resolution=l,this},bind:function(){var p=this.gl,h=this.vertexBuffer,l=this.attributes,d=this.program,y=this.renderer,g=this.vertexSize;y.setProgram(d),y.setVertexBuffer(h);for(var b=0;b<l.length;++b){var A=l[b],T=p.getAttribLocation(d,A.name);0<=T?(p.enableVertexAttribArray(T),p.vertexAttribPointer(T,A.size,A.type,A.normalized,g,A.offset)):T!==-1&&p.disableVertexAttribArray(T)}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var p=this.gl,h=this.vertexCount,l=this.topology,d=this.vertexSize;if(h!==0)return p.bufferSubData(p.ARRAY_BUFFER,0,this.bytes.subarray(0,h*d)),p.drawArrays(l,0,h),this.vertexCount=0,this.flushLocked=!1,this;this.flushLocked=!1},destroy:function(){var p=this.gl;return p.deleteProgram(this.program),p.deleteBuffer(this.vertexBuffer),delete this.program,delete this.vertexBuffer,delete this.gl,this},setFloat1:function(p,h){return this.renderer.setFloat1(this.program,p,h),this},setFloat2:function(p,h,l){return this.renderer.setFloat2(this.program,p,h,l),this},setFloat3:function(p,h,l,d){return this.renderer.setFloat3(this.program,p,h,l,d),this},setFloat4:function(p,h,l,d,y){return this.renderer.setFloat4(this.program,p,h,l,d,y),this},setFloat1v:function(p,h){return this.renderer.setFloat1v(this.program,p,h),this},setFloat2v:function(p,h){return this.renderer.setFloat2v(this.program,p,h),this},setFloat3v:function(p,h){return this.renderer.setFloat3v(this.program,p,h),this},setFloat4v:function(p,h){return this.renderer.setFloat4v(this.program,p,h),this},setInt1:function(p,h){return this.renderer.setInt1(this.program,p,h),this},setInt2:function(p,h,l){return this.renderer.setInt2(this.program,p,h,l),this},setInt3:function(p,h,l,d){return this.renderer.setInt3(this.program,p,h,l,d),this},setInt4:function(p,h,l,d,y){return this.renderer.setInt4(this.program,p,h,l,d,y),this},setMatrix2:function(p,h,l){return this.renderer.setMatrix2(this.program,p,h,l),this},setMatrix3:function(p,h,l){return this.renderer.setMatrix3(this.program,p,h,l),this},setMatrix4:function(p,h,l){return this.renderer.setMatrix4(this.program,p,h,l),this}});x.exports=c},function(x,N){x.exports=function(r,m){var u;if(m)typeof m=="string"?u=document.getElementById(m):typeof m=="object"&&m.nodeType===1&&(u=m);else if(r.parentElement||m===null)return r;return(u=u||document.body).appendChild(r),r}},function(x,N,r){var m=r(0),u=r(12),c=r(16),p=new m({initialize:function(h,l,d,y,g,b,A){this.texture=h,this.name=l,this.source=h.source[d],this.sourceIndex=d,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(b,A,y,g)},setSize:function(h,l,d,y){d===void 0&&(d=0),y===void 0&&(y=0),this.cutX=d,this.cutY=y,this.cutWidth=h,this.cutHeight=l,this.width=h,this.height=l,this.halfWidth=Math.floor(.5*h),this.halfHeight=Math.floor(.5*l),this.centerX=Math.floor(h/2),this.centerY=Math.floor(l/2);var g=this.data,b=g.cut;b.x=d,b.y=y,b.w=h,b.h=l,b.r=d+h,b.b=y+l,g.sourceSize.w=h,g.sourceSize.h=l,g.spriteSourceSize.w=h,g.spriteSourceSize.h=l,g.radius=.5*Math.sqrt(h*h+l*l);var A=g.drawImage;return A.x=d,A.y=y,A.width=h,A.height=l,this.updateUVs()},setTrim:function(h,l,d,y,g,b){var A=this.data,T=A.spriteSourceSize;return A.trim=!0,A.sourceSize.w=h,A.sourceSize.h=l,T.x=d,T.y=y,T.w=g,T.h=b,T.r=d+g,T.b=y+b,this.x=d,this.y=y,this.width=g,this.height=b,this.halfWidth=.5*g,this.halfHeight=.5*b,this.centerX=Math.floor(g/2),this.centerY=Math.floor(b/2),this.updateUVs()},setCropUVs:function(h,l,d,y,g,b,A){var T,C,O,L,P,H,G,B=this.cutX,F=this.cutY,D=this.cutWidth,V=this.cutHeight,z=this.realWidth,Y=this.realHeight,j=B+(l=u(l,0,z)),X=F+(d=u(d,0,Y)),J=y=u(y,0,z-l),Q=g=u(g,0,Y-d),se=this.data;se.trim?(T=se.spriteSourceSize,C=l+(y=u(y,0,D-l)),O=d+(g=u(g,0,V-d)),T.r<l||T.b<d||T.x>C||T.y>O?Q=J=X=j=0:(L=Math.max(T.x,l),P=Math.max(T.y,d),J=H=Math.min(T.r,C)-L,Q=G=Math.min(T.b,O)-P,j=b?B+(D-(L-T.x)-H):B+(L-T.x),X=A?F+(V-(P-T.y)-G):F+(P-T.y),l=L,d=P,y=H,g=G)):(b&&(j=B+(D-l-y)),A&&(X=F+(V-d-g)));var te=this.source.width,ie=this.source.height;return h.u0=Math.max(0,j/te),h.v0=Math.max(0,X/ie),h.u1=Math.min(1,(j+J)/te),h.v1=Math.min(1,(X+Q)/ie),h.x=l,h.y=d,h.cx=j,h.cy=X,h.cw=J,h.ch=Q,h.width=y,h.height=g,h.flipX=b,h.flipY=A,h},updateCropUVs:function(h,l,d){return this.setCropUVs(h,h.x,h.y,h.width,h.height,l,d)},updateUVs:function(){var h=this.cutX,l=this.cutY,d=this.cutWidth,y=this.cutHeight,g=this.data.drawImage;g.width=d,g.height=y;var b=this.source.width,A=this.source.height;return this.u0=h/b,this.v0=l/A,this.u1=(h+d)/b,this.v1=(l+y)/A,this},updateUVsInverted:function(){var h=this.source.width,l=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/l,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/l,this},clone:function(){var h=new p(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=c(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});x.exports=p},function(x,N,r){x.exports={DESTROY:r(822),VIDEO_COMPLETE:r(823),VIDEO_CREATED:r(824),VIDEO_ERROR:r(825),VIDEO_LOOP:r(826),VIDEO_PLAY:r(827),VIDEO_SEEKED:r(828),VIDEO_SEEKING:r(829),VIDEO_STOP:r(830),VIDEO_TIMEOUT:r(831),VIDEO_UNLOCKED:r(832)}},function(x,N,r){var m=r(0),u=r(14),c=r(21),p=r(833),h=r(834),l=r(139),d=r(835),y=new m({Extends:c,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,d],initialize:function(g,b,A,T,C,O,L){C===void 0&&(C=""),L===void 0&&(L=0),c.call(this,g,"BitmapText"),this.font=T;var P=this.scene.sys.cache.bitmapFont.get(T);this.fontData=P.data,this._text="",this._fontSize=O||this.fontData.size,this._letterSpacing=0,this._align=L,this._bounds=p(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.setTexture(P.texture,P.frame),this.setPosition(b,A),this.setOrigin(0,0),this.initPipeline(),this.setText(C)},setLeftAlign:function(){return this._align=y.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=y.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=y.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(g){return this._fontSize=g,this._dirty=!0,this},setLetterSpacing:function(g){return g===void 0&&(g=0),this._letterSpacing=g,this._dirty=!0,this},setText:function(g){return g||g===0||(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this.text&&(this._text=g.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},getTextBounds:function(g){var b=this._bounds;return!this._dirty&&this.scaleX===b.scaleX&&this.scaleY===b.scaleY||(p(this,g,b),this._dirty=!1,this.updateDisplayOrigin()),b},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this._dirty=!0,this},setFont:function(g,b,A){var T;return b===void 0&&(b=this._fontSize),A===void 0&&(A=this._align),g===this.font||(T=this.scene.sys.cache.bitmapFont.get(g))&&(this.font=g,this.fontData=T.data,this._fontSize=b,this._align=A,this.setTexture(T.texture,T.frame),p(this,!1,this._bounds)),this},setMaxWidth:function(g,b){return this._maxWidth=g,this._dirty=!0,b!==void 0&&(this.wordWrapCharCode=b),this},align:{set:function(g){this._align=g,this._dirty=!0},get:function(){return this._align}},text:{set:function(g){this.setText(g)},get:function(){return this._text}},fontSize:{set:function(g){this._fontSize=g,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(g){this._letterSpacing=g,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(g){this._maxWidth=g,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var g=u.ToJSON(this),b={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return g.data=b,g}});y.ALIGN_LEFT=0,y.ALIGN_CENTER=1,y.ALIGN_RIGHT=2,y.ParseFromAtlas=h,y.ParseXMLBitmapFont=l,x.exports=y},function(x,N,r){var m=r(0),u=r(14),c=r(21),p=r(869),h=new m({Extends:c,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,p],initialize:function(l,d,y,g,b){c.call(this,l,"Image"),this._crop=this.resetCropObject(),this.setTexture(g,b),this.setPosition(d,y),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});x.exports=h},function(x,N){x.exports=function(r,m){return!!r.url&&(r.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?r.url:m+r.url)}},,,function(x,N,r){var m=r(12),u=r(0),c=r(7),p=r(78),h=r(188),l=r(189),d=r(5),y=new u({Extends:c,initialize:function(g,b,A){c.call(this),this.manager=g,this.key=b,this.type="frame",this.frames=this.getFrames(g.textureManager,d(A,"frames",[]),d(A,"defaultTextureKey",null)),this.frameRate=d(A,"frameRate",null),this.duration=d(A,"duration",null),this.duration===null&&this.frameRate===null?(this.frameRate=24,this.duration=this.frameRate/this.frames.length*1e3):this.duration&&this.frameRate===null?this.frameRate=this.frames.length/(this.duration/1e3):this.duration=this.frames.length/this.frameRate*1e3,this.msPerFrame=1e3/this.frameRate,this.skipMissedFrames=d(A,"skipMissedFrames",!0),this.delay=d(A,"delay",0),this.repeat=d(A,"repeat",0),this.repeatDelay=d(A,"repeatDelay",0),this.yoyo=d(A,"yoyo",!1),this.showOnStart=d(A,"showOnStart",!1),this.hideOnComplete=d(A,"hideOnComplete",!1),this.paused=!1,this.manager.on(p.PAUSE_ALL,this.pause,this),this.manager.on(p.RESUME_ALL,this.resume,this)},addFrame:function(g){return this.addFrameAt(this.frames.length,g)},addFrameAt:function(g,b){var A,T,C=this.getFrames(this.manager.textureManager,b);return 0<C.length&&(g===0?this.frames=C.concat(this.frames):g===this.frames.length?this.frames=this.frames.concat(C):(A=this.frames.slice(0,g),T=this.frames.slice(g),this.frames=A.concat(C,T)),this.updateFrameSequence()),this},checkFrame:function(g){return 0<=g&&g<this.frames.length},completeAnimation:function(g){this.hideOnComplete&&(g.parent.visible=!1),g.stop()},getFirstTick:function(g,b){b===void 0&&(b=!0),g.accumulator=0,g.nextTick=g.msPerFrame+g.currentFrame.duration,b&&(g.nextTick+=g._delay)},getFrameAt:function(g){return this.frames[g]},getFrames:function(g,b,A){var T,C,O,L=[],P=1;if(typeof b=="string"&&(C=b,O=g.get(C).getFrameNames(),b=[],O.forEach(function(Y,j){b.push({key:C,frame:j})})),!Array.isArray(b)||b.length===0)return L;for(z=0;z<b.length;z++){var H,G,B,F=b[z],D=d(F,"key",A);D&&(H=d(F,"frame",0),G=g.getFrame(D,H),(B=new l(D,H,P,G)).duration=d(F,"duration",0),B.isFirst=!T,T&&((T.nextFrame=B).prevFrame=T),L.push(B),T=B,P++)}if(0<L.length){B.isLast=!0,B.nextFrame=L[0],L[0].prevFrame=B;for(var V=1/(L.length-1),z=0;z<L.length;z++)L[z].progress=z*V}return L},getNextTick:function(g){g.accumulator-=g.nextTick,g.nextTick=g.msPerFrame+g.currentFrame.duration},load:function(g,b){b>=this.frames.length&&(b=0),g.currentAnim!==this&&(g.currentAnim=this,g.frameRate=this.frameRate,g.duration=this.duration,g.msPerFrame=this.msPerFrame,g.skipMissedFrames=this.skipMissedFrames,g._delay=this.delay,g._repeat=this.repeat,g._repeatDelay=this.repeatDelay,g._yoyo=this.yoyo);var A=this.frames[b];b!==0||g.forward||(A=this.getLastFrame()),g.updateFrame(A)},getFrameByProgress:function(g){return g=m(g,0,1),h(g,this.frames,"progress")},nextFrame:function(g){var b=g.currentFrame;b.isLast?g._yoyo?this.handleYoyoFrame(g,!1):0<g.repeatCounter?g._reverse&&g.forward?g.forward=!1:this.repeatAnimation(g):this.completeAnimation(g):this.updateAndGetNextTick(g,b.nextFrame)},handleYoyoFrame:function(g,b){if(b=b||!1,g._reverse===!b&&0<g.repeatCounter)return g._repeatDelay&&!g.pendingRepeat||(g.forward=b),void this.repeatAnimation(g);var A;g._reverse===b||g.repeatCounter!==0?(A=(g.forward=b)?g.currentFrame.nextFrame:g.currentFrame.prevFrame,this.updateAndGetNextTick(g,A)):this.completeAnimation(g)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(g){var b=g.currentFrame;b.isFirst?g._yoyo?this.handleYoyoFrame(g,!0):0<g.repeatCounter?(g._reverse&&!g.forward?g.currentFrame=this.getLastFrame():g.forward=!0,this.repeatAnimation(g)):this.completeAnimation(g):this.updateAndGetNextTick(g,b.prevFrame)},updateAndGetNextTick:function(g,b){g.updateFrame(b),this.getNextTick(g)},removeFrame:function(g){var b=this.frames.indexOf(g);return b!==-1&&this.removeFrameAt(b),this},removeFrameAt:function(g){return this.frames.splice(g,1),this.updateFrameSequence(),this},repeatAnimation:function(g){if(g._pendingStop===2)return this.completeAnimation(g);var b,A;0<g._repeatDelay&&g.pendingRepeat===!1?(g.pendingRepeat=!0,g.accumulator-=g.nextTick,g.nextTick+=g._repeatDelay):(g.repeatCounter--,g.updateFrame(g.currentFrame[g.forward?"nextFrame":"prevFrame"]),g.isPlaying&&(this.getNextTick(g),g.pendingRepeat=!1,b=g.currentFrame,A=g.parent,this.emit(p.ANIMATION_REPEAT,this,b),A.emit(p.SPRITE_ANIMATION_KEY_REPEAT+this.key,this,b,g.repeatCounter,A),A.emit(p.SPRITE_ANIMATION_REPEAT,this,b,g.repeatCounter,A)))},setFrame:function(g){g.forward?this.nextFrame(g):this.previousFrame(g)},toJSON:function(){var g={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(b){g.frames.push(b.toJSON())}),g},updateFrameSequence:function(){for(var g,b=this.frames.length,A=1/(b-1),T=0;T<b;T++)(g=this.frames[T]).index=T+1,g.isFirst=!1,g.isLast=!1,g.progress=T*A,T===0?(g.isFirst=!0,b===1?(g.isLast=!0,(g.nextFrame=g).prevFrame=g):(g.isLast=!1,g.prevFrame=this.frames[b-1],g.nextFrame=this.frames[T+1])):T===b-1&&1<b?(g.isLast=!0,g.prevFrame=this.frames[b-2],g.nextFrame=this.frames[0]):1<b&&(g.prevFrame=this.frames[T-1],g.nextFrame=this.frames[T+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.removeAllListeners(),this.manager.off(p.PAUSE_ALL,this.pause,this),this.manager.off(p.RESUME_ALL,this.resume,this),this.manager.remove(this.key);for(var g=0;g<this.frames.length;g++)this.frames[g].destroy();this.frames=[],this.manager=null}});x.exports=y},function(x,N,r){var m=r(79),u=r(3);x.exports=function(c,p,h){if(h===void 0&&(h=new u),p<=0||1<=p)return h.x=c.x,h.y=c.y,h;var l=m(c)*p;return .5<p?(l-=c.width+c.height)<=c.width?(h.x=c.right-l,h.y=c.bottom):(h.x=c.x,h.y=c.bottom-(l-c.width)):l<=c.width?(h.x=c.x+l,h.y=c.y):(h.x=c.right,h.y=c.y+(l-c.width)),h}},function(x,N){x.exports=function(r,m,u){return r.x=m-r.width/2,r.y=u-r.height/2,r}},function(x,N,r){var m=r(81),u=r(82),c=r(23),p={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};x.exports=function(){p.canvas=!!window.CanvasRenderingContext2D;try{p.localStorage=!!localStorage.getItem}catch(g){p.localStorage=!1}p.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),p.fileSystem=!!window.requestFileSystem;var h,l,d,y=!1;return p.webGL=function(){if(window.WebGLRenderingContext)try{var g=c.createWebGL(this),b=g.getContext("webgl")||g.getContext("experimental-webgl"),A=c.create2D(this),T=A.getContext("2d").createImageData(1,1);return y=T.data instanceof Uint8ClampedArray,c.remove(g),c.remove(A),!!b}catch(C){return!1}return!1}(),p.worker=!!window.Worker,p.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,p.getUserMedia=p.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,u.firefox&&u.firefoxVersion<21&&(p.getUserMedia=!1),!m.iOS&&(u.ie||u.firefox||u.chrome)&&(p.canvasBitBltShift=!0),(u.safari||u.mobileSafari)&&(p.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(p.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(p.littleEndian=(h=new ArrayBuffer(4),l=new Uint8Array(h),d=new Uint32Array(h),l[0]=161,l[1]=178,l[2]=195,l[3]=212,d[0]===3569595041||d[0]!==2712847316&&null)),p.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&p.littleEndian!==null&&y,p}()},function(x,N){x.exports=function(r,m,u,c,p){var h=.5*(c-m),l=.5*(p-u),d=r*r;return(2*u-2*c+h+l)*(r*d)+(-3*u+3*c-2*h-l)*d+h*r+u}},function(x,N,r){var m=new(r(0))({initialize:function(u,c,p){this.x=0,this.y=0,this.z=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=c||0,this.z=p||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},clone:function(){return new m(this.x,this.y,this.z)},crossVectors:function(u,c){var p=u.x,h=u.y,l=u.z,d=c.x,y=c.y,g=c.z;return this.x=h*g-l*y,this.y=l*d-p*g,this.z=p*y-h*d,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this},set:function(u,c,p){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=c||0,this.z=p||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u,this.z*=u):(this.x=0,this.y=0,this.z=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(u){var c=u.x-this.x,p=u.y-this.y,h=u.z-this.z||0;return Math.sqrt(c*c+p*p+h*h)},distanceSq:function(u){var c=u.x-this.x,p=u.y-this.y,h=u.z-this.z||0;return c*c+p*p+h*h},length:function(){var u=this.x,c=this.y,p=this.z;return Math.sqrt(u*u+c*c+p*p)},lengthSq:function(){var u=this.x,c=this.y,p=this.z;return u*u+c*c+p*p},normalize:function(){var u=this.x,c=this.y,p=this.z,h=u*u+c*c+p*p;return 0<h&&(h=1/Math.sqrt(h),this.x=u*h,this.y=c*h,this.z=p*h),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){var c=this.x,p=this.y,h=this.z,l=u.x,d=u.y,y=u.z;return this.x=p*y-h*d,this.y=h*l-c*y,this.z=c*d-p*l,this},lerp:function(u,c){c===void 0&&(c=0);var p=this.x,h=this.y,l=this.z;return this.x=p+c*(u.x-p),this.y=h+c*(u.y-h),this.z=l+c*(u.z-l),this},transformMat3:function(u){var c=this.x,p=this.y,h=this.z,l=u.val;return this.x=c*l[0]+p*l[3]+h*l[6],this.y=c*l[1]+p*l[4]+h*l[7],this.z=c*l[2]+p*l[5]+h*l[8],this},transformMat4:function(u){var c=this.x,p=this.y,h=this.z,l=u.val;return this.x=l[0]*c+l[4]*p+l[8]*h+l[12],this.y=l[1]*c+l[5]*p+l[9]*h+l[13],this.z=l[2]*c+l[6]*p+l[10]*h+l[14],this},transformCoordinates:function(u){var c=this.x,p=this.y,h=this.z,l=u.val,d=c*l[0]+p*l[4]+h*l[8]+l[12],y=c*l[1]+p*l[5]+h*l[9]+l[13],g=c*l[2]+p*l[6]+h*l[10]+l[14],b=c*l[3]+p*l[7]+h*l[11]+l[15];return this.x=d/b,this.y=y/b,this.z=g/b,this},transformQuat:function(u){var c=this.x,p=this.y,h=this.z,l=u.x,d=u.y,y=u.z,g=u.w,b=g*c+d*h-y*p,A=g*p+y*c-l*h,T=g*h+l*p-d*c,C=-l*c-d*p-y*h;return this.x=b*g+C*-l+A*-y-T*-d,this.y=A*g+C*-d+T*-l-b*-y,this.z=T*g+C*-y+b*-d-A*-l,this},project:function(u){var c=this.x,p=this.y,h=this.z,l=u.val,d=l[0],y=l[1],g=l[2],b=l[3],A=l[4],T=l[5],C=l[6],O=l[7],L=l[8],P=l[9],H=l[10],G=l[11],B=l[12],F=l[13],D=l[14],V=1/(c*b+p*O+h*G+l[15]);return this.x=(c*d+p*A+h*L+B)*V,this.y=(c*y+p*T+h*P+F)*V,this.z=(c*g+p*C+h*H+D)*V,this},unproject:function(u,c){var p=u.x,h=u.y,l=u.z,d=u.w,y=this.x-p,g=d-this.y-1-h,b=this.z;return this.x=2*y/l-1,this.y=2*g/d-1,this.z=2*b-1,this.project(c)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});m.ZERO=new m,m.RIGHT=new m(1,0,0),m.LEFT=new m(-1,0,0),m.UP=new m(0,-1,0),m.DOWN=new m(0,1,0),m.FORWARD=new m(0,0,1),m.BACK=new m(0,0,-1),m.ONE=new m(1,1,1),x.exports=m},function(x,N,r){var m=r(8),u=r(9);x.exports=function(c,p){if(p===void 0&&(p=new m),c.length===0)return p;for(var h,l,d,y=Number.MAX_VALUE,g=Number.MAX_VALUE,b=u.MIN_SAFE_INTEGER,A=u.MIN_SAFE_INTEGER,T=0;T<c.length;T++)h=c[T],d=Array.isArray(h)?(l=h[0],h[1]):(l=h.x,h.y),y=Math.min(y,l),g=Math.min(g,d),b=Math.max(b,l),A=Math.max(A,d);return p.x=y,p.y=g,p.width=b-y,p.height=A-g,p}},function(x,N,r){var m={CENTER:r(258),ORIENTATION:r(259),SCALE_MODE:r(260),ZOOM:r(261)};x.exports=m},function(x,N){x.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(x,N,r){var m=r(0),u=r(89),c=r(168),p=r(17),h=r(674),l=r(675),d=r(1),y=r(273),g=new m({initialize:function(b,A){this.scene=b,this.game,this.renderer,this.config=A,this.settings=y.create(A),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=d},init:function(b){this.settings.status=u.INIT,this.sceneUpdate=d,this.game=b,this.renderer=b.renderer,this.canvas=b.canvas,this.context=b.context;var A=b.plugins;(this.plugins=A).addToScene(this,c.Global,[c.CoreScene,l(this),h(this)]),this.events.emit(p.BOOT,this),this.settings.isBooted=!0},install:function(b){Array.isArray(b)||(b=[b]),this.plugins.installLocal(this,b)},step:function(b,A){this.events.emit(p.PRE_UPDATE,b,A),this.events.emit(p.UPDATE,b,A),this.sceneUpdate.call(this.scene,b,A),this.events.emit(p.POST_UPDATE,b,A)},render:function(b){var A=this.displayList;A.depthSort(),this.cameras.render(b,A),this.events.emit(p.RENDER,b)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(b){return this.settings.active&&(this.settings.status=u.PAUSED,this.settings.active=!1,this.events.emit(p.PAUSE,this,b)),this},resume:function(b){return this.settings.active||(this.settings.status=u.RUNNING,this.settings.active=!0,this.events.emit(p.RESUME,this,b)),this},sleep:function(b){return this.settings.status=u.SLEEPING,this.settings.active=!1,this.settings.visible=!1,this.events.emit(p.SLEEP,this,b),this},wake:function(b){var A=this.settings;return A.status=u.RUNNING,A.active=!0,A.visible=!0,this.events.emit(p.WAKE,this,b),A.isTransition&&this.events.emit(p.TRANSITION_WAKE,A.transitionFrom,A.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===u.SLEEPING},isActive:function(){return this.settings.status===u.RUNNING},isPaused:function(){return this.settings.status===u.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&0<this.scenePlugin._duration},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(b){return this.settings.visible=b,this},setActive:function(b,A){return b?this.resume(A):this.pause(A)},start:function(b){b&&(this.settings.data=b),this.settings.status=u.START,this.settings.active=!0,this.settings.visible=!0,this.events.emit(p.START,this),this.events.emit(p.READY,this,b)},shutdown:function(b){this.events.off(p.TRANSITION_INIT),this.events.off(p.TRANSITION_START),this.events.off(p.TRANSITION_COMPLETE),this.events.off(p.TRANSITION_OUT),this.settings.status=u.SHUTDOWN,this.settings.active=!1,this.settings.visible=!1,this.events.emit(p.SHUTDOWN,this,b)},destroy:function(){this.settings.status=u.DESTROYED,this.settings.active=!1,this.settings.visible=!1,this.events.emit(p.DESTROY,this),this.events.removeAllListeners();for(var b=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],A=0;A<b.length;A++)this[b[A]]=null}});x.exports=g},function(x,N,r){var m=r(0),u=r(110),c=r(277),p="Texture.frame missing: ",h=new m({initialize:function(l,d,y,g,b){Array.isArray(y)||(y=[y]),this.manager=l,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE";for(var A=this.frameTotal=0;A<y.length;A++)this.source.push(new c(this,y[A],g,b))},add:function(l,d,y,g,b,A){if(this.has(l))return null;var T=new u(this,l,d,y,g,b,A);return this.frames[l]=T,this.firstFrame==="__BASE"&&(this.firstFrame=l),this.frameTotal++,T},remove:function(l){return!!this.has(l)&&(this.get(l).destroy(),delete this.frames[l],!0)},has:function(l){return this.frames[l]},get:function(l){l=l||this.firstFrame;var d=this.frames[l];return d||(console.warn(p+l),d=this.frames[this.firstFrame]),d},getTextureSourceIndex:function(l){for(var d=0;d<this.source.length;d++)if(this.source[d]===l)return d;return-1},getFramesFromTextureSource:function(l,d){d===void 0&&(d=!1);var y,g=[];for(var b in this.frames)b==="__BASE"&&!d||(y=this.frames[b]).sourceIndex===l&&g.push(y);return g},getFrameNames:function(l){l===void 0&&(l=!1);var d,y=Object.keys(this.frames);return l||(d=y.indexOf("__BASE"))!==-1&&y.splice(d,1),y},getSourceImage:function(l){l!=null&&this.frameTotal!==1||(l="__BASE");var d=this.frames[l];return d?d.source.image:(console.warn(p+l),this.frames.__BASE.source.image)},getDataSourceImage:function(l){l!=null&&this.frameTotal!==1||(l="__BASE");var d=this.frames[l],y=d?d.sourceIndex:(console.warn(p+l),this.frames.__BASE.sourceIndex);return this.dataSource[y].image},setDataSource:function(l){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++){var y=this.source[d];this.dataSource.push(new c(this,l[d],y.width,y.height))}},setFilter:function(l){for(var d=0;d<this.source.length;d++)this.source[d].setFilter(l);for(d=0;d<this.dataSource.length;d++)this.dataSource[d].setFilter(l)},destroy:function(){for(var l=0;l<this.source.length;l++)this.source[l].destroy();for(l=0;l<this.dataSource.length;l++)this.dataSource[l].destroy();for(var d in this.frames)this.frames[d].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});x.exports=h},function(x,N,r){var m=r(3);x.exports=function(u,c,p){return p===void 0&&(p=new m),p.x=u.x+u.radius*Math.cos(c),p.y=u.y+u.radius*Math.sin(c),p}},function(x,N,r){var m=r(3);x.exports=function(u,c,p){p===void 0&&(p=new m);var h=u.width/2,l=u.height/2;return p.x=u.x+h*Math.cos(c),p.y=u.y+l*Math.sin(c),p}},function(x,N,r){var m=r(3),u=r(131);x.exports=function(c,p,h){var l,d,y,g,b,A,T,C,O,L,P,H,G,B,F,D,V;return h===void 0&&(h=[]),u(c,p)&&(l=c.x1,d=c.y1,y=c.x2,g=c.y2,(H=(P=2*((A=y-l)*(C=l-p.x)+(T=g-d)*(O=d-p.y)))*P-4*(L=A*A+T*T)*(C*C+O*O-(b=p.radius)*b))==0?(B=l+(G=-P/(2*L))*A,F=d+G*T,0<=G&&G<=1&&h.push(new m(B,F))):0<H&&(B=l+(D=(-P-Math.sqrt(H))/(2*L))*A,F=d+D*T,0<=D&&D<=1&&h.push(new m(B,F)),B=l+(V=(-P+Math.sqrt(H))/(2*L))*A,F=d+V*T,0<=V&&V<=1&&h.push(new m(B,F)))),h}},function(x,N,r){var m=r(44),u=new(r(3));x.exports=function(c,p,h){if(h===void 0&&(h=u),m(p,c.x1,c.y1))return h.x=c.x1,h.y=c.y1,!0;if(m(p,c.x2,c.y2))return h.x=c.x2,h.y=c.y2,!0;var l,d=c.x2-c.x1,y=c.y2-c.y1,g=p.x-c.x1,b=p.y-c.y1,A=d*d+y*y,T=d,C=y;return 0<A&&(T*=l=(g*d+b*y)/A,C*=l),h.x=c.x1+T,h.y=c.y1+C,T*T+C*C<=A&&0<=T*d+C*y&&m(p,h.x,h.y)}},function(x,N,r){var m=r(3),u=r(51),c=r(294);x.exports=function(p,h,l){if(l===void 0&&(l=[]),c(p,h))for(var d=h.getLineA(),y=h.getLineB(),g=h.getLineC(),b=h.getLineD(),A=[new m,new m,new m,new m],T=[u(d,p,A[0]),u(y,p,A[1]),u(g,p,A[2]),u(b,p,A[3])],C=0;C<4;C++)T[C]&&l.push(A[C]);return l}},function(x,N){x.exports=function(r,m,u,c){u===void 0&&(u=!1),c===void 0&&(c=[]);for(var p,h,l,d,y,g,b=r.x3-r.x1,A=r.y3-r.y1,T=r.x2-r.x1,C=r.y2-r.y1,O=b*b+A*A,L=b*T+A*C,P=T*T+C*C,H=O*P-L*L,G=H==0?0:1/H,B=r.x1,F=r.y1,D=0;D<m.length&&(h=(O*(g=T*(l=m[D].x-B)+C*(d=m[D].y-F))-L*(y=b*l+A*d))*G,!(0<=(p=(P*y-L*g)*G)&&0<=h&&p+h<1&&(c.push({x:m[D].x,y:m[D].y}),u)));D++);return c}},function(x,N){x.exports=function(r,m,u,c){var p=Math.cos(c),h=Math.sin(c),l=r.x1-m,d=r.y1-u;return r.x1=l*p-d*h+m,r.y1=l*h+d*p+u,l=r.x2-m,d=r.y2-u,r.x2=l*p-d*h+m,r.y2=l*h+d*p+u,r}},function(x,N){x.exports=function(r,m,u){for(var c=!1,p=-1,h=r.points.length-1;++p<r.points.length;h=p){var l=r.points[p].x,d=r.points[p].y,y=r.points[h].x,g=r.points[h].y;(d<=u&&u<g||g<=u&&u<d)&&m<(y-l)*(u-d)/(g-d)+l&&(c=!c)}return c}},function(x,N){x.exports=function(r){return r.height===0?NaN:r.width/r.height}},function(x,N){x.exports=function(r,m,u,c){var p=Math.cos(c),h=Math.sin(c),l=r.x1-m,d=r.y1-u;return r.x1=l*p-d*h+m,r.y1=l*h+d*p+u,l=r.x2-m,d=r.y2-u,r.x2=l*p-d*h+m,r.y2=l*h+d*p+u,l=r.x3-m,d=r.y3-u,r.x3=l*p-d*h+m,r.y3=l*h+d*p+u,r}},function(x,N,r){var m=r(13);x.exports=function(u,c,p,h,l,d){for(var y=m.getTintAppendFloatAlphaAndSwap(p.fillColor,p.fillAlpha*h),g=p.pathData,b=p.pathIndexes,A=0;A<b.length;A+=3){var T=2*b[A],C=2*b[A+1],O=2*b[A+2],L=g[0+T]-l,P=g[1+T]-d,H=g[0+C]-l,G=g[1+C]-d,B=g[0+O]-l,F=g[1+O]-d,D=c.getX(L,P),V=c.getY(L,P),z=c.getX(H,G),Y=c.getY(H,G),j=c.getX(B,F),X=c.getY(B,F);u.setTexture2D(),u.batchTri(D,V,z,Y,j,X,0,0,1,1,y,y,y,u.tintEffect)}}},function(x,N){function r(m,u){return parseInt(m.getAttribute(u),10)}x.exports=function(m,u,c,p){u===void 0&&(u=0),c===void 0&&(c=0);var h={},l=m.getElementsByTagName("info")[0],d=m.getElementsByTagName("common")[0];h.font=l.getAttribute("face"),h.size=r(l,"size"),h.lineHeight=r(d,"lineHeight")+c,h.chars={};var y,g,b=m.getElementsByTagName("char"),A=p!==void 0&&p.trimmed;A&&(y=p.height,g=p.width);for(var T=0;T<b.length;T++){var C=b[T],O=r(C,"id"),L=r(C,"x"),P=r(C,"y"),H=r(C,"width"),G=r(C,"height");A&&(L<g&&(g=L),P<y&&(y=P)),h.chars[O]={x:L,y:P,width:H,height:G,centerX:Math.floor(H/2),centerY:Math.floor(G/2),xOffset:r(C,"xoffset"),yOffset:r(C,"yoffset"),xAdvance:r(C,"xadvance")+u,data:{},kerning:{}}}if(A&&y!==0&&g!==0)for(var B in h.chars){var F=h.chars[B];F.x-=p.x,F.y-=p.y}for(var D=m.getElementsByTagName("kerning"),T=0;T<D.length;T++){var V=D[T],z=r(V,"first"),Y=r(V,"second"),j=r(V,"amount");h.chars[Y].kerning[z]=j}return h}},function(x,N,r){var m=r(178),u=r(41),c=r(0),p=r(14),h=r(111),l=r(21),d=r(8),y=r(863),g=r(309),b=r(4),A=new c({Extends:l,Mixins:[p.AlphaSingle,p.BlendMode,p.ComputedSize,p.Depth,p.Mask,p.Transform,p.Visible,y],initialize:function(T,C,O,L){l.call(this,T,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new p.TransformMatrix,this.tempTransformMatrix=new p.TransformMatrix,this._displayList=T.sys.displayList,this._sortKey="",this._sysEvents=T.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.setPosition(C,O),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),L&&this.add(L)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return .5*this.width}},displayOriginY:{get:function(){return .5*this.height}},setExclusive:function(T){return T===void 0&&(T=!0),this.exclusive=T,this},getBounds:function(T){var C;if(T===void 0&&(T=new d),T.setTo(this.x,this.y,0,0),this.parentContainer&&(C=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y),T.setTo(C.x,C.y,0,0)),0<this.list.length){var O=this.list,L=new d,P=!1;T.setEmpty();for(var H=0;H<O.length;H++){var G=O[H];G.getBounds&&(G.getBounds(L),P?g(L,T,T):(T.setTo(L.x,L.y,L.width,L.height),P=!0))}}return T},addHandler:function(T){T.once(h.DESTROY,this.remove,this),this.exclusive&&(this._displayList.remove(T),T.parentContainer&&T.parentContainer.remove(T),T.parentContainer=this)},removeHandler:function(T){T.off(h.DESTROY,this.remove),this.exclusive&&(T.parentContainer=null)},pointToContainer:function(T,C){C===void 0&&(C=new b),this.parentContainer?this.parentContainer.pointToContainer(T,C):C=new b(T.x,T.y);var O=this.tempTransformMatrix;return O.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),O.invert(),O.transformPoint(T.x,T.y,C),C},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(T){return m.Add(this.list,T,this.maxSize,this.addHandler,this),this},addAt:function(T,C){return m.AddAt(this.list,T,C,this.maxSize,this.addHandler,this),this},getAt:function(T){return this.list[T]},getIndex:function(T){return this.list.indexOf(T)},sort:function(T,C){return T&&(C===void 0&&(C=function(O,L){return O[T]-L[T]}),m.StableSort.inplace(this.list,C)),this},getByName:function(T){return m.GetFirst(this.list,"name",T)},getRandom:function(T,C){return m.GetRandom(this.list,T,C)},getFirst:function(T,C,O,L){return m.GetFirst(this.list,T,C,O,L)},getAll:function(T,C,O,L){return m.GetAll(this.list,T,C,O,L)},count:function(T,C,O,L){return m.CountAllMatching(this.list,T,C,O,L)},swap:function(T,C){return m.Swap(this.list,T,C),this},moveTo:function(T,C){return m.MoveTo(this.list,T,C),this},remove:function(T,C){var O=m.Remove(this.list,T,this.removeHandler,this);if(C&&O){Array.isArray(O)||(O=[O]);for(var L=0;L<O.length;L++)O[L].destroy()}return this},removeAt:function(T,C){var O=m.RemoveAt(this.list,T,this.removeHandler,this);return C&&O&&O.destroy(),this},removeBetween:function(T,C,O){var L=m.RemoveBetween(this.list,T,C,this.removeHandler,this);if(O)for(var P=0;P<L.length;P++)L[P].destroy();return this},removeAll:function(T){var C=m.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(T)for(var O=0;O<C.length;O++)C[O].destroy();return this},bringToTop:function(T){return m.BringToTop(this.list,T),this},sendToBack:function(T){return m.SendToBack(this.list,T),this},moveUp:function(T){return m.MoveUp(this.list,T),this},moveDown:function(T){return m.MoveDown(this.list,T),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return m.Shuffle(this.list),this},replace:function(T,C,O){return m.Replace(this.list,T,C)&&(this.addHandler(C),this.removeHandler(T),O&&T.destroy()),this},exists:function(T){return-1<this.list.indexOf(T)},setAll:function(T,C,O,L){return m.SetAll(this.list,T,C,O,L),this},each:function(T,C){for(var O=[null],L=this.list.slice(),P=L.length,H=2;H<arguments.length;H++)O.push(arguments[H]);for(H=0;H<P;H++)O[0]=L[H],T.apply(C,O);return this},iterate:function(T,C){for(var O=[null],L=2;L<arguments.length;L++)O.push(arguments[L]);for(L=0;L<this.list.length;L++)O[0]=this.list[L],T.apply(C,O);return this},setScrollFactor:function(T,C,O){return C===void 0&&(C=T),O===void 0&&(O=!1),this.scrollFactorX=T,this.scrollFactorY=C,O&&(m.SetAll(this.list,"scrollFactorX",T),m.SetAll(this.list,"scrollFactorY",C)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null}});x.exports=A},function(x,N){x.exports=function(r){if(!Array.isArray(r)||r.length<2||!Array.isArray(r[0]))return!1;for(var m=r[0].length,u=1;u<r.length;u++)if(r[u].length!==m)return!1;return!0}},function(x,N){x.exports=function(r){for(var m=r.length-1;0<m;m--){var u=Math.floor(Math.random()*(m+1)),c=r[m];r[m]=r[u],r[u]=c}return r}},function(x,N,r){var m=r(178),u=r(0),c=r(1),p=r(94),h=new u({initialize:function(l){this.parent=l,this.list=[],this.position=0,this.addCallback=c,this.removeCallback=c,this._sortKey=""},add:function(l,d){return d?m.Add(this.list,l):m.Add(this.list,l,0,this.addCallback,this)},addAt:function(l,d,y){return y?m.AddAt(this.list,l,d):m.AddAt(this.list,l,d,0,this.addCallback,this)},getAt:function(l){return this.list[l]},getIndex:function(l){return this.list.indexOf(l)},sort:function(l,d){return l&&(d===void 0&&(d=function(y,g){return y[l]-g[l]}),p.inplace(this.list,d)),this},getByName:function(l){return m.GetFirst(this.list,"name",l)},getRandom:function(l,d){return m.GetRandom(this.list,l,d)},getFirst:function(l,d,y,g){return m.GetFirst(this.list,l,d,y,g)},getAll:function(l,d,y,g){return m.GetAll(this.list,l,d,y,g)},count:function(l,d){return m.CountAllMatching(this.list,l,d)},swap:function(l,d){m.Swap(this.list,l,d)},moveTo:function(l,d){return m.MoveTo(this.list,l,d)},remove:function(l,d){return d?m.Remove(this.list,l):m.Remove(this.list,l,this.removeCallback,this)},removeAt:function(l,d){return d?m.RemoveAt(this.list,l):m.RemoveAt(this.list,l,this.removeCallback,this)},removeBetween:function(l,d,y){return y?m.RemoveBetween(this.list,l,d):m.RemoveBetween(this.list,l,d,this.removeCallback,this)},removeAll:function(l){for(var d=this.list.length;d--;)this.remove(this.list[d],l);return this},bringToTop:function(l){return m.BringToTop(this.list,l)},sendToBack:function(l){return m.SendToBack(this.list,l)},moveUp:function(l){return m.MoveUp(this.list,l),l},moveDown:function(l){return m.MoveDown(this.list,l),l},reverse:function(){return this.list.reverse(),this},shuffle:function(){return m.Shuffle(this.list),this},replace:function(l,d){return m.Replace(this.list,l,d)},exists:function(l){return-1<this.list.indexOf(l)},setAll:function(l,d,y,g){return m.SetAll(this.list,l,d,y,g),this},each:function(l,d){for(var y=[null],g=2;g<arguments.length;g++)y.push(arguments[g]);for(g=0;g<this.list.length;g++)y[0]=this.list[g],l.apply(d,y)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}}});x.exports=h},function(x,N,r){var m=r(67),u=r(0),c=r(145),p=r(195),h=r(196),l=r(197),d=r(201),y=r(204),g=r(207),b=r(210),A=r(205),T=r(25),C=r(69),O=r(21),L=r(2),P=r(5),H=r(9),G=r(867),B=new u({Extends:O,Mixins:[p,h,l,d,y,g,b,A,G],initialize:function(F,D){var V=P(D,"x",0),z=P(D,"y",0);O.call(this,F,"Graphics"),this.setPosition(V,z),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this._tempMatrix1=new T,this._tempMatrix2=new T,this._tempMatrix3=new T,this.setDefaultStyles(D)},setDefaultStyles:function(F){return P(F,"lineStyle",null)&&(this.defaultStrokeWidth=P(F,"lineStyle.width",1),this.defaultStrokeColor=P(F,"lineStyle.color",16777215),this.defaultStrokeAlpha=P(F,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),P(F,"fillStyle",null)&&(this.defaultFillColor=P(F,"fillStyle.color",16777215),this.defaultFillAlpha=P(F,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(F,D,V){return V===void 0&&(V=1),this.commandBuffer.push(c.LINE_STYLE,F,D,V),this._lineWidth=F,this},fillStyle:function(F,D){return D===void 0&&(D=1),this.commandBuffer.push(c.FILL_STYLE,F,D),this},fillGradientStyle:function(F,D,V,z,Y){return Y===void 0&&(Y=1),this.commandBuffer.push(c.GRADIENT_FILL_STYLE,Y,F,D,V,z),this},lineGradientStyle:function(F,D,V,z,Y,j){return j===void 0&&(j=1),this.commandBuffer.push(c.GRADIENT_LINE_STYLE,F,j,D,V,z,Y),this},setTexture:function(F,D,V){var z;return V===void 0&&(V=0),F===void 0?this.commandBuffer.push(c.CLEAR_TEXTURE):(z=this.scene.sys.textures.getFrame(F,D))&&(V===2&&(V=3),this.commandBuffer.push(c.SET_TEXTURE,z,V)),this},beginPath:function(){return this.commandBuffer.push(c.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(c.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(c.FILL_PATH),this},fill:function(){return this.commandBuffer.push(c.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(c.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(c.STROKE_PATH),this},fillCircleShape:function(F){return this.fillCircle(F.x,F.y,F.radius)},strokeCircleShape:function(F){return this.strokeCircle(F.x,F.y,F.radius)},fillCircle:function(F,D,V){return this.beginPath(),this.arc(F,D,V,0,H.PI2),this.fillPath(),this},strokeCircle:function(F,D,V){return this.beginPath(),this.arc(F,D,V,0,H.PI2),this.strokePath(),this},fillRectShape:function(F){return this.fillRect(F.x,F.y,F.width,F.height)},strokeRectShape:function(F){return this.strokeRect(F.x,F.y,F.width,F.height)},fillRect:function(F,D,V,z){return this.commandBuffer.push(c.FILL_RECT,F,D,V,z),this},strokeRect:function(F,D,V,z){var Y=this._lineWidth/2,j=F-Y,X=F+Y;return this.beginPath(),this.moveTo(F,D),this.lineTo(F,D+z),this.strokePath(),this.beginPath(),this.moveTo(F+V,D),this.lineTo(F+V,D+z),this.strokePath(),this.beginPath(),this.moveTo(j,D),this.lineTo(X+V,D),this.strokePath(),this.beginPath(),this.moveTo(j,D+z),this.lineTo(X+V,D+z),this.strokePath(),this},fillRoundedRect:function(F,D,V,z,Y){Y===void 0&&(Y=20);var j=Y,X=Y,J=Y,Q=Y;return typeof Y!="number"&&(j=L(Y,"tl",20),X=L(Y,"tr",20),J=L(Y,"bl",20),Q=L(Y,"br",20)),this.beginPath(),this.moveTo(F+j,D),this.lineTo(F+V-X,D),this.arc(F+V-X,D+X,X,-H.TAU,0),this.lineTo(F+V,D+z-Q),this.arc(F+V-Q,D+z-Q,Q,0,H.TAU),this.lineTo(F+J,D+z),this.arc(F+J,D+z-J,J,H.TAU,Math.PI),this.lineTo(F,D+j),this.arc(F+j,D+j,j,-Math.PI,-H.TAU),this.fillPath(),this},strokeRoundedRect:function(F,D,V,z,Y){Y===void 0&&(Y=20);var j=Y,X=Y,J=Y,Q=Y;return typeof Y!="number"&&(j=L(Y,"tl",20),X=L(Y,"tr",20),J=L(Y,"bl",20),Q=L(Y,"br",20)),this.beginPath(),this.moveTo(F+j,D),this.lineTo(F+V-X,D),this.arc(F+V-X,D+X,X,-H.TAU,0),this.lineTo(F+V,D+z-Q),this.arc(F+V-Q,D+z-Q,Q,0,H.TAU),this.lineTo(F+J,D+z),this.arc(F+J,D+z-J,J,H.TAU,Math.PI),this.lineTo(F,D+j),this.arc(F+j,D+j,j,-Math.PI,-H.TAU),this.strokePath(),this},fillPointShape:function(F,D){return this.fillPoint(F.x,F.y,D)},fillPoint:function(F,D,V){return!V||V<1?V=1:(F-=V/2,D-=V/2),this.commandBuffer.push(c.FILL_RECT,F,D,V,V),this},fillTriangleShape:function(F){return this.fillTriangle(F.x1,F.y1,F.x2,F.y2,F.x3,F.y3)},strokeTriangleShape:function(F){return this.strokeTriangle(F.x1,F.y1,F.x2,F.y2,F.x3,F.y3)},fillTriangle:function(F,D,V,z,Y,j){return this.commandBuffer.push(c.FILL_TRIANGLE,F,D,V,z,Y,j),this},strokeTriangle:function(F,D,V,z,Y,j){return this.commandBuffer.push(c.STROKE_TRIANGLE,F,D,V,z,Y,j),this},strokeLineShape:function(F){return this.lineBetween(F.x1,F.y1,F.x2,F.y2)},lineBetween:function(F,D,V,z){return this.beginPath(),this.moveTo(F,D),this.lineTo(V,z),this.strokePath(),this},lineTo:function(F,D){return this.commandBuffer.push(c.LINE_TO,F,D),this},moveTo:function(F,D){return this.commandBuffer.push(c.MOVE_TO,F,D),this},strokePoints:function(F,D,V,z){D===void 0&&(D=!1),V===void 0&&(V=!1),z===void 0&&(z=F.length),this.beginPath(),this.moveTo(F[0].x,F[0].y);for(var Y=1;Y<z;Y++)this.lineTo(F[Y].x,F[Y].y);return D&&this.lineTo(F[0].x,F[0].y),V&&this.closePath(),this.strokePath(),this},fillPoints:function(F,D,V,z){D===void 0&&(D=!1),V===void 0&&(V=!1),z===void 0&&(z=F.length),this.beginPath(),this.moveTo(F[0].x,F[0].y);for(var Y=1;Y<z;Y++)this.lineTo(F[Y].x,F[Y].y);return D&&this.lineTo(F[0].x,F[0].y),V&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(F,D){D===void 0&&(D=32);var V=F.getPoints(D);return this.strokePoints(V,!0)},strokeEllipse:function(F,D,V,z,Y){Y===void 0&&(Y=32);var j=new C(F,D,V,z).getPoints(Y);return this.strokePoints(j,!0)},fillEllipseShape:function(F,D){D===void 0&&(D=32);var V=F.getPoints(D);return this.fillPoints(V,!0)},fillEllipse:function(F,D,V,z,Y){Y===void 0&&(Y=32);var j=new C(F,D,V,z).getPoints(Y);return this.fillPoints(j,!0)},arc:function(F,D,V,z,Y,j,X){return j===void 0&&(j=!1),X===void 0&&(X=0),this.commandBuffer.push(c.ARC,F,D,V,z,Y,j,X),this},slice:function(F,D,V,z,Y,j,X){return j===void 0&&(j=!1),X===void 0&&(X=0),this.commandBuffer.push(c.BEGIN_PATH),this.commandBuffer.push(c.MOVE_TO,F,D),this.commandBuffer.push(c.ARC,F,D,V,z,Y,j,X),this.commandBuffer.push(c.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(c.SAVE),this},restore:function(){return this.commandBuffer.push(c.RESTORE),this},translateCanvas:function(F,D){return this.commandBuffer.push(c.TRANSLATE,F,D),this},scaleCanvas:function(F,D){return this.commandBuffer.push(c.SCALE,F,D),this},rotateCanvas:function(F){return this.commandBuffer.push(c.ROTATE,F),this},clear:function(){return this.commandBuffer.length=0,-1<this.defaultFillColor&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),-1<this.defaultStrokeColor&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(F,D,V){var z,Y,j,X=this.scene.sys,J=X.game.renderer;return D===void 0&&(D=X.scale.width),V===void 0&&(V=X.scale.height),B.TargetCamera.setScene(this.scene),B.TargetCamera.setViewport(0,0,D,V),B.TargetCamera.scrollX=this.x,B.TargetCamera.scrollY=this.y,typeof F=="string"?X.textures.exists(F)?(j=(z=X.textures.get(F)).getSourceImage())instanceof HTMLCanvasElement&&(Y=j.getContext("2d")):Y=(z=X.textures.createCanvas(F,D,V)).getSourceImage().getContext("2d"):F instanceof HTMLCanvasElement&&(Y=F.getContext("2d")),Y&&(this.renderCanvas(J,this,0,B.TargetCamera,null,Y,!1),z&&z.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});B.TargetCamera=new m,x.exports=B},function(x,N){x.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,SET_TEXTURE:19,CLEAR_TEXTURE:20,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(x,N,r){x.exports={BUTTON_DOWN:r(905),BUTTON_UP:r(906),CONNECTED:r(907),DISCONNECTED:r(908),GAMEPAD_BUTTON_DOWN:r(909),GAMEPAD_BUTTON_UP:r(910)}},function(x,N,r){var m=r(16),u=r(97);x.exports=function(c,p){var h=c===void 0?u():m({},c);if(p)for(var l in p)p[l]!==void 0&&(h[l]=p[l]);return h}},function(x,N,r){var m=r(5);x.exports=function(u){var c=m(u,"targets",null);return c===null||(typeof c=="function"&&(c=c.call()),Array.isArray(c)||(c=[c])),c}},function(x,N){function r(p){return!!p.getActive&&typeof p.getActive=="function"}function m(p){return!!p.getStart&&typeof p.getStart=="function"}function u(p){return!!p.getEnd&&typeof p.getEnd=="function"}var c=function(p,h){var l,d,y,g,b,A,T,C=function(B,F,D){return D},O=function(B,F,D){return D},L=null,P=typeof h;if(P=="number")C=function(){return h};else if(P=="string"){var H=h[0],G=parseFloat(h.substr(2));switch(H){case"+":C=function(B,F,D){return D+G};break;case"-":C=function(B,F,D){return D-G};break;case"*":C=function(B,F,D){return D*G};break;case"/":C=function(B,F,D){return D/G};break;default:C=function(){return parseFloat(h)}}}else P=="function"?C=h:P=="object"&&(m(T=h)||u(T)||r(T)?(r(h)&&(L=h.getActive),u(h)&&(C=h.getEnd),m(h)&&(O=h.getStart)):h.hasOwnProperty("value")?A=c(p,h.value):(l=h.hasOwnProperty("to"),d=h.hasOwnProperty("from"),y=h.hasOwnProperty("start"),l&&(d||y)&&(A=c(p,h.to),y&&(g=c(p,h.start),A.getActive=g.getEnd),d&&(b=c(p,h.from),A.getStart=b.getEnd))));return A=A||{getActive:L,getEnd:C,getStart:O}};x.exports=c},function(x,N){x.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(x,N,r){var m=r(0),u=r(7),c=r(152),p=r(20),h=r(6),l=r(58),d=r(9),y=new m({Extends:u,initialize:function(g,b,A){u.call(this),this.parent=g,this.parentIsTimeline=g.hasOwnProperty("isTimeline"),this.data=b,this.totalData=b.length,this.targets=A,this.totalTargets=A.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=l.PENDING_ADD,this._pausedState=l.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(g){return g===void 0&&(g=0),this.data[g].current},setTimeScale:function(g){return this.timeScale=g,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===l.ACTIVE},isPaused:function(){return this.state===l.PAUSED},hasTarget:function(g){return this.targets.indexOf(g)!==-1},updateTo:function(g,b,A){A===void 0&&(A=!1);for(var T=0;T<this.totalData;T++){var C=this.data[T];C.key===g&&(C.end=b,A&&(C.start=C.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===l.ACTIVE?this.seek(0):this.state===l.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===l.PENDING_ADD?this:this.play()},calcDuration:function(){for(var g=0,b=d.MAX_SAFE_INTEGER,A=this.data,T=0;T<this.totalData;T++){var C=A[T];C.t1=C.duration+C.hold,C.yoyo&&(C.t1+=C.duration),C.t2=C.t1+C.repeatDelay,C.totalDuration=C.delay+C.t1,C.repeat===-1?C.totalDuration+=999999999999*C.t2:0<C.repeat&&(C.totalDuration+=C.t2*C.repeat),C.totalDuration>g&&(g=C.totalDuration),C.delay<b&&(b=C.delay)}this.duration=Math.max(g,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,0<this.loopCounter?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=b},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=l.PENDING_ADD,this._pausedState=l.INIT,!1;for(var g=this.data,b=this.totalTargets,A=0;A<this.totalData;A++){var T=g[A],C=T.target,O=T.gen,L=T.key,P=T.index;T.delay=O.delay(C,L,0,P,b,this),T.duration=Math.max(O.duration(C,L,0,P,b,this),.001),T.hold=O.hold(C,L,0,P,b,this),T.repeat=O.repeat(C,L,0,P,b,this),T.repeatDelay=O.repeatDelay(C,L,0,P,b,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=l.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(c.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=l.LOOP_DELAY):(this.state=l.ACTIVE,this.dispatchTweenEvent(c.TWEEN_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=l.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(c.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===l.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=l.PAUSED),this},play:function(g){g===void 0&&(g=!1);var b=this.state;return b!==l.INIT||this.parentIsTimeline?b===l.ACTIVE||b===l.PENDING_ADD&&this._pausedState===l.PENDING_ADD||(this.parentIsTimeline||b!==l.PENDING_REMOVE&&b!==l.REMOVED?this.parentIsTimeline?(this.resetTweenData(g),this.calculatedOffset===0?this.state=l.ACTIVE:(this.countdown=this.calculatedOffset,this.state=l.OFFSET_DELAY)):(this.paused?this.paused=!1:(this.resetTweenData(g),this.state=l.ACTIVE),this.makeActive()):(this.seek(0),this.parent.makeActive(this))):(this.resetTweenData(!1),this.state=l.ACTIVE),this},resetTweenData:function(g){for(var b=this.data,A=this.totalData,T=this.totalTargets,C=0;C<A;C++){var O=b[C],L=O.target,P=O.key,H=O.index;O.progress=0,O.elapsed=0,O.repeatCounter=O.repeat===-1?999999999999:O.repeat,g?(O.start=O.getStartValue(L,P,O.start,H,T,this),O.end=O.getEndValue(L,P,O.end,H,T,this),O.current=O.start,O.state=l.PLAYING_FORWARD):O.state=l.PENDING_RENDER,0<O.delay&&(O.elapsed=O.delay,O.state=l.DELAY),O.getActiveValue&&(L[P]=O.getActiveValue(O.target,O.key,O.start))}},resume:function(){return this.state===l.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(g,b){if(b===void 0&&(b=16.6),36e5<=this.totalDuration)return console.warn("Tween.seek duration too long"),this;this.state===l.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var A=this.data,T=this.totalTargets,C=0;C<this.totalData;C++){var O=A[C],L=O.target,P=O.gen,H=O.key,G=O.index;O.progress=0,O.elapsed=0,O.repeatCounter=O.repeat===-1?999999999999:O.repeat,O.delay=P.delay(L,H,0,G,T,this),O.duration=Math.max(P.duration(L,H,0,G,T,this),.001),O.hold=P.hold(L,H,0,G,T,this),O.repeat=P.repeat(L,H,0,G,T,this),O.repeatDelay=P.repeatDelay(L,H,0,G,T,this),O.current=O.start,O.state=l.PLAYING_FORWARD,this.updateTweenData(this,O,0,G,T),0<O.delay&&(O.elapsed=O.delay,O.state=l.DELAY)}this.calcDuration();var B=!1;for(this.state===l.PAUSED&&(B=!0,this.state=l.ACTIVE),this.isSeeking=!0;this.update(0,b),this.totalProgress<g;);return this.isSeeking=!1,B&&(this.state=l.PAUSED),this},setCallback:function(g,b,A,T){return this.callbacks[g]={func:b,scope:T,params:A},this},complete:function(g){return g===void 0&&(g=0),g?(this.state=l.COMPLETE_DELAY,this.countdown=g):(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(c.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(g){return this.state===l.ACTIVE&&g!==void 0&&this.seek(g),this.state!==l.REMOVED&&(this.state!==l.PAUSED&&this.state!==l.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(c.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=l.PENDING_REMOVE),this},update:function(g,b){if(this.state===l.PAUSED)return!1;switch(this.useFrames&&(b=+this.parent.timeScale),b*=this.timeScale,this.elapsed+=b,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=b,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case l.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=b,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(c.TWEEN_START,this.callbacks.onStart)));for(var A=!1,T=0;T<this.totalData;T++){var C=this.data[T];this.updateTweenData(this,C,b)&&(A=!0)}A||this.nextState();break;case l.LOOP_DELAY:this.countdown-=b,this.countdown<=0&&(this.state=l.ACTIVE,this.dispatchTweenEvent(c.TWEEN_LOOP,this.callbacks.onLoop));break;case l.OFFSET_DELAY:this.countdown-=b,this.countdown<=0&&(this.state=l.ACTIVE);break;case l.COMPLETE_DELAY:this.countdown-=b,this.countdown<=0&&(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(c.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===l.PENDING_REMOVE},dispatchTweenDataEvent:function(g,b,A){this.isSeeking||(this.emit(g,this,A.key,A.target,A.current,A.previous),b&&(b.params[1]=A.target,b.func.apply(b.scope,b.params)))},dispatchTweenEvent:function(g,b){this.isSeeking||(this.emit(g,this,this.targets),b&&(b.params[1]=this.targets,b.func.apply(b.scope,b.params)))},setStateFromEnd:function(g,b,A){return b.yoyo?(b.elapsed=A,b.progress=A/b.duration,b.flipX&&b.target.toggleFlipX(),b.flipY&&b.target.toggleFlipY(),this.dispatchTweenDataEvent(c.TWEEN_YOYO,g.callbacks.onYoyo,b),b.start=b.getStartValue(b.target,b.key,b.start,b.index,g.totalTargets,g),l.PLAYING_BACKWARD):0<b.repeatCounter?(b.repeatCounter--,b.elapsed=A,b.progress=A/b.duration,b.flipX&&b.target.toggleFlipX(),b.flipY&&b.target.toggleFlipY(),b.start=b.getStartValue(b.target,b.key,b.start,b.index,g.totalTargets,g),b.end=b.getEndValue(b.target,b.key,b.start,b.index,g.totalTargets,g),0<b.repeatDelay?(b.elapsed=b.repeatDelay-A,b.current=b.start,b.target[b.key]=b.current,l.REPEAT_DELAY):(this.dispatchTweenDataEvent(c.TWEEN_REPEAT,g.callbacks.onRepeat,b),l.PLAYING_FORWARD)):l.COMPLETE},setStateFromStart:function(g,b,A){return 0<b.repeatCounter?(b.repeatCounter--,b.elapsed=A,b.progress=A/b.duration,b.flipX&&b.target.toggleFlipX(),b.flipY&&b.target.toggleFlipY(),b.end=b.getEndValue(b.target,b.key,b.start,b.index,g.totalTargets,g),0<b.repeatDelay?(b.elapsed=b.repeatDelay-A,b.current=b.start,b.target[b.key]=b.current,l.REPEAT_DELAY):(this.dispatchTweenDataEvent(c.TWEEN_REPEAT,g.callbacks.onRepeat,b),l.PLAYING_FORWARD)):l.COMPLETE},updateTweenData:function(g,b,A){var T=b.target;switch(b.state){case l.PLAYING_FORWARD:case l.PLAYING_BACKWARD:if(!T){b.state=l.COMPLETE;break}var C=b.elapsed,O=b.duration,L=0;O<(C+=A)&&(L=C-O,C=O);var P,H=b.state===l.PLAYING_FORWARD,G=C/O;b.elapsed=C,b.progress=G,b.previous=b.current,G==1?H?(b.current=b.end,T[b.key]=b.end,0<b.hold?(b.elapsed=b.hold-L,b.state=l.HOLD_DELAY):b.state=this.setStateFromEnd(g,b,L)):(b.current=b.start,T[b.key]=b.start,b.state=this.setStateFromStart(g,b,L)):(P=H?b.ease(G):b.ease(1-G),b.current=b.start+(b.end-b.start)*P,T[b.key]=b.current),this.dispatchTweenDataEvent(c.TWEEN_UPDATE,g.callbacks.onUpdate,b);break;case l.DELAY:b.elapsed-=A,b.elapsed<=0&&(b.elapsed=Math.abs(b.elapsed),b.state=l.PENDING_RENDER);break;case l.REPEAT_DELAY:b.elapsed-=A,b.elapsed<=0&&(b.elapsed=Math.abs(b.elapsed),b.state=l.PLAYING_FORWARD,this.dispatchTweenDataEvent(c.TWEEN_REPEAT,g.callbacks.onRepeat,b));break;case l.HOLD_DELAY:b.elapsed-=A,b.elapsed<=0&&(b.state=this.setStateFromEnd(g,b,Math.abs(b.elapsed)));break;case l.PENDING_RENDER:T?(b.start=b.getStartValue(T,b.key,T[b.key],b.index,g.totalTargets,g),b.end=b.getEndValue(T,b.key,b.start,b.index,g.totalTargets,g),b.current=b.start,T[b.key]=b.start,b.state=l.PLAYING_FORWARD):b.state=l.COMPLETE}return b.state!==l.COMPLETE}});y.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],h.register("tween",function(g){return this.scene.sys.tweens.add(g)}),p.register("tween",function(g){return this.scene.sys.tweens.create(g)}),x.exports=y},function(x,N,r){x.exports={TIMELINE_COMPLETE:r(950),TIMELINE_LOOP:r(951),TIMELINE_PAUSE:r(952),TIMELINE_RESUME:r(953),TIMELINE_START:r(954),TIMELINE_UPDATE:r(955),TWEEN_ACTIVE:r(956),TWEEN_COMPLETE:r(957),TWEEN_LOOP:r(958),TWEEN_REPEAT:r(959),TWEEN_START:r(960),TWEEN_STOP:r(961),TWEEN_UPDATE:r(962),TWEEN_YOYO:r(963)}},function(x,N){x.exports=function(r,m,u,c,p,h,l,d,y,g,b,A,T,C,O){return{target:r,index:m,key:u,getActiveValue:h,getEndValue:c,getStartValue:p,ease:l,duration:0,totalDuration:0,delay:0,yoyo:g,hold:0,repeat:0,repeatDelay:0,flipX:C,flipY:O,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:d,duration:y,hold:b,repeat:A,repeatDelay:T},state:0}}},,,function(x,N,r){var m=new(r(0))({initialize:function(u){if(this.entries={},this.size=0,Array.isArray(u))for(var c=0;c<u.length;c++)this.set(u[c][0],u[c][1])},set:function(u,c){return this.has(u)||this.size++,this.entries[u]=c,this},get:function(u){if(this.has(u))return this.entries[u]},getArray:function(){var u=[],c=this.entries;for(var p in c)u.push(c[p]);return u},has:function(u){return this.entries.hasOwnProperty(u)},delete:function(u){return this.has(u)&&(delete this.entries[u],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(u){delete this.entries[u]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var u=[],c=this.entries;for(var p in c)u.push(c[p]);return u},dump:function(){var u=this.entries;for(var c in console.group("Map"),u)console.log(c,u[c]);console.groupEnd()},each:function(u){var c=this.entries;for(var p in c)if(u(p,c[p])===!1)break;return this},contains:function(u){var c=this.entries;for(var p in c)if(c[p]===u)return!0;return!1},merge:function(u,c){c===void 0&&(c=!1);var p=this.entries,h=u.entries;for(var l in h)p.hasOwnProperty(l)&&c?p[l]=h[l]:this.set(l,h[l]);return this}});x.exports=m},function(x,N){x.exports=function(r,m,u,c){m===void 0&&(m=0),u===void 0&&(u=" "),c===void 0&&(c=3);var p;if(m+1>=(r=r.toString()).length)switch(c){case 1:r=new Array(m+1-r.length).join(u)+r;break;case 3:var h=Math.ceil((p=m-r.length)/2);r=new Array(1+(p-h)).join(u)+r+new Array(h+1).join(u);break;default:r+=new Array(m+1-r.length).join(u)}return r}},function(x,N,r){var m=r(34),u=r(3);x.exports=function(c,p,h,l){l===void 0&&(l=[]),!p&&0<h&&(p=m(c)/h);for(var d=c.x1,y=c.y1,g=c.x2,b=c.y2,A=0;A<p;A++){var T=A/p,C=d+(g-d)*T,O=y+(b-y)*T;l.push(new u(C,O))}return l}},function(x,N,r){var m=r(3);x.exports=function(u,c){c===void 0&&(c=new m);var p=Math.random();return c.x=u.x1+p*(u.x2-u.x1),c.y=u.y1+p*(u.y2-u.y1),c}},function(x,N,r){var m=r(3);x.exports=function(u,c){return c===void 0&&(c=new m),c.x=u.x+Math.random()*u.width,c.y=u.y+Math.random()*u.height,c}},function(x,N,r){var m=r(348),u=r(351),c=r(353),p=r(354);x.exports=function(h){switch(typeof h){case"string":return(h.substr(0,3).toLowerCase()==="rgb"?p:m)(h);case"number":return u(h);case"object":return c(h)}}},function(x,N){x.exports=function(r,m,u){return r<<16|m<<8|u}},function(x,N,r){var m=r(9),u=r(16)(!1,u={Angle:r(547),Distance:r(556),Easing:r(561),Fuzzy:r(562),Interpolation:r(565),Pow2:r(570),Snap:r(572),RandomDataGenerator:r(574),Average:r(575),Bernstein:r(232),Between:r(166),CatmullRom:r(121),CeilTo:r(576),Clamp:r(12),DegToRad:r(32),Difference:r(577),Factorial:r(233),FloatBetween:r(83),FloorTo:r(578),FromPercent:r(60),GetSpeed:r(579),IsEven:r(580),IsEvenStrict:r(581),Linear:r(107),MaxAdd:r(582),MinSub:r(583),Percent:r(584),RadToDeg:r(167),RandomXY:r(585),RandomXYZ:r(586),RandomXYZW:r(587),Rotate:r(361),RotateAround:r(200),RotateAroundDistance:r(237),RotateTo:r(588),RoundAwayFromZero:r(238),RoundTo:r(589),SinCosTableGenerator:r(590),SmootherStep:r(165),SmoothStep:r(164),ToXY:r(591),TransformXY:r(239),Within:r(592),Wrap:r(42),Vector2:r(4),Vector3:r(122),Vector4:r(362),Matrix3:r(240),Matrix4:r(241),Quaternion:r(242),RotateVec3:r(593)},m);x.exports=u},function(x,N){x.exports=function(r,m,u){return r<=m?0:u<=r?1:(r=(r-m)/(u-m))*r*(3-2*r)}},function(x,N){x.exports=function(r,m,u){return(r=Math.max(0,Math.min(1,(r-m)/(u-m))))*r*r*(r*(6*r-15)+10)}},function(x,N){x.exports=function(r,m){return Math.floor(Math.random()*(m-r+1)+r)}},function(x,N,r){var m=r(9);x.exports=function(u){return u*m.RAD_TO_DEG}},function(x,N,r){x.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(x,N,r){var m=r(0),u=r(61),c=r(2),p=r(170),h=r(244),l=r(245),d=r(25),y=r(13),g=r(108),b=new m({Extends:g,Mixins:[p],initialize:function(A){var T=A.renderer.config;g.call(this,{game:A.game,renderer:A.renderer,gl:A.renderer.gl,topology:c(A,"topology",A.renderer.gl.TRIANGLES),vertShader:c(A,"vertShader",l),fragShader:c(A,"fragShader",h),vertexCapacity:c(A,"vertexCapacity",6*T.batchSize),vertexSize:c(A,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:A.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:A.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:A.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:A.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=T.batchSize,this.batches=[],this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this._tempMatrix4=new d,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.tintEffect=2,this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[],this.mvpInit()},onBind:function(){return g.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(A,T,C){return g.prototype.resize.call(this,A,T,C),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(A,T){return A===void 0&&(A=this.renderer.blankTexture.glTexture),T===void 0&&(T=0),this.requireTextureBatch(A,T)&&this.pushBatch(A,T),this},requireTextureBatch:function(A,T){var C=this.batches,O=C.length;return!(0<O)||(0<T?C[O-1].textures[T-1]:C[O-1].texture)!==A},pushBatch:function(A,T){var C;T===0?this.batches.push({first:this.vertexCount,texture:A,textures:[]}):((C=[])[T-1]=A,this.batches.push({first:this.vertexCount,texture:null,textures:C}))},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var A,T,C,O=this.gl,L=this.vertexCount,P=this.topology,H=this.vertexSize,G=this.renderer,B=this.batches,F=B.length,D=0,V=null;if(F===0||L===0)return this.flushLocked=!1,this;O.bufferSubData(O.ARRAY_BUFFER,0,this.bytes.subarray(0,L*H));for(var z=0;z<F-1;z++){if(V=B[z],A=B[z+1],0<V.textures.length){for(T=0;T<V.textures.length;++T)(C=V.textures[T])&&G.setTexture2D(C,1+T,!1);O.activeTexture(O.TEXTURE0)}D=A.first-V.first,V.texture===null||D<=0||(G.setTexture2D(V.texture,0,!1),O.drawArrays(P,V.first,D))}if(0<(V=B[F-1]).textures.length){for(T=0;T<V.textures.length;++T)(C=V.textures[T])&&G.setTexture2D(C,1+T,!1);O.activeTexture(O.TEXTURE0)}return D=L-V.first,V.texture&&0<D&&(G.setTexture2D(V.texture,0,!1),O.drawArrays(P,V.first,D)),this.vertexCount=0,B.length=0,this.flushLocked=!1,this},batchSprite:function(A,T,C){this.renderer.setPipeline(this);var O,L=this._tempMatrix1,P=this._tempMatrix2,H=this._tempMatrix3,G=A.frame,B=G.glTexture,F=G.u0,D=G.v0,V=G.u1,z=G.v1,Y=G.x,j=G.y,X=G.cutWidth,J=G.cutHeight,Q=G.customPivot,se=A.displayOriginX,te=A.displayOriginY,ie=-se+Y,re=-te+j;A.isCropped&&((O=A._crop).flipX===A.flipX&&O.flipY===A.flipY||G.updateCropUVs(O,A.flipX,A.flipY),F=O.u0,D=O.v0,V=O.u1,z=O.v1,X=O.width,J=O.height,ie=-se+O.x,re=-te+O.y);var he=1,de=1;A.flipX&&(Q||(ie+=-G.realWidth+2*se),he=-1),(A.flipY||G.source.isGLTexture&&!B.flipY)&&(Q||(re+=-G.realHeight+2*te),de=-1),P.applyITRS(A.x,A.y,A.rotation,A.scaleX*he,A.scaleY*de),L.copyFrom(T.matrix),C?(L.multiplyWithOffset(C,-T.scrollX*A.scrollFactorX,-T.scrollY*A.scrollFactorY),P.e=A.x,P.f=A.y):(P.e-=T.scrollX*A.scrollFactorX,P.f-=T.scrollY*A.scrollFactorY),L.multiply(P,H);var ue=ie+X,Te=re+J,ye=H.getX(ie,re),Ne=H.getY(ie,re),Ve=H.getX(ie,Te),we=H.getY(ie,Te),Ue=H.getX(ue,Te),Oe=H.getY(ue,Te),Ye=H.getX(ue,re),st=H.getY(ue,re),lt=y.getTintAppendFloatAlpha(A._tintTL,T.alpha*A._alphaTL),Ke=y.getTintAppendFloatAlpha(A._tintTR,T.alpha*A._alphaTR),et=y.getTintAppendFloatAlpha(A._tintBL,T.alpha*A._alphaBL),Xe=y.getTintAppendFloatAlpha(A._tintBR,T.alpha*A._alphaBR);T.roundPixels&&(ye=Math.round(ye),Ne=Math.round(Ne),Ve=Math.round(Ve),we=Math.round(we),Ue=Math.round(Ue),Oe=Math.round(Oe),Ye=Math.round(Ye),st=Math.round(st)),this.setTexture2D(B,0);var nt=A._isTinted&&A.tintFill;this.batchQuad(ye,Ne,Ve,we,Ue,Oe,Ye,st,F,D,V,z,lt,Ke,et,Xe,nt,B,0)},batchQuad:function(A,T,C,O,L,P,H,G,B,F,D,V,z,Y,j,X,J,Q,se){var te=!1;this.vertexCount+6>this.vertexCapacity&&(this.flush(),te=!0,this.setTexture2D(Q,se));var ie=this.vertexViewF32,re=this.vertexViewU32,he=this.vertexCount*this.vertexComponentCount-1;return ie[++he]=A,ie[++he]=T,ie[++he]=B,ie[++he]=F,ie[++he]=J,re[++he]=z,ie[++he]=C,ie[++he]=O,ie[++he]=B,ie[++he]=V,ie[++he]=J,re[++he]=j,ie[++he]=L,ie[++he]=P,ie[++he]=D,ie[++he]=V,ie[++he]=J,re[++he]=X,ie[++he]=A,ie[++he]=T,ie[++he]=B,ie[++he]=F,ie[++he]=J,re[++he]=z,ie[++he]=L,ie[++he]=P,ie[++he]=D,ie[++he]=V,ie[++he]=J,re[++he]=X,ie[++he]=H,ie[++he]=G,ie[++he]=D,ie[++he]=F,ie[++he]=J,re[++he]=Y,this.vertexCount+=6,te},batchTri:function(A,T,C,O,L,P,H,G,B,F,D,V,z,Y,j,X){var J=!1;this.vertexCount+3>this.vertexCapacity&&(this.flush(),this.setTexture2D(j,X),J=!0);var Q=this.vertexViewF32,se=this.vertexViewU32,te=this.vertexCount*this.vertexComponentCount-1;return Q[++te]=A,Q[++te]=T,Q[++te]=H,Q[++te]=G,Q[++te]=Y,se[++te]=D,Q[++te]=C,Q[++te]=O,Q[++te]=H,Q[++te]=F,Q[++te]=Y,se[++te]=V,Q[++te]=L,Q[++te]=P,Q[++te]=B,Q[++te]=F,Q[++te]=Y,se[++te]=z,this.vertexCount+=3,J},batchTexture:function(A,T,C,O,L,P,H,G,B,F,D,V,z,Y,j,X,J,Q,se,te,ie,re,he,de,ue,Te,ye,Ne,Ve,we,Ue){this.renderer.setPipeline(this,A);var Oe,Ye,st,lt=this._tempMatrix1,Ke=this._tempMatrix2,et=this._tempMatrix3,Xe=Q/C+ye,nt=se/O+Ne,Se=(Q+te)/C+ye,Wt=(se+ie)/O+Ne,Ht=H,zt=G,wt=-X,Mt=-J;A.isCropped&&(Ht=(Oe=A._crop).width,zt=Oe.height,H=Oe.width,G=Oe.height,Ye=Q=Oe.x,st=se=Oe.y,V&&(Ye=te-Oe.x-Oe.width),z&&!T.isRenderTexture&&(st=ie-Oe.y-Oe.height),Xe=Ye/C+ye,nt=st/O+Ne,Se=(Ye+Oe.width)/C+ye,Wt=(st+Oe.height)/O+Ne,wt=-X+Q,Mt=-J+se),V&&(Ht*=-1,wt+=H),(z^=!Ue&&T.isRenderTexture?1:0)&&(zt*=-1,Mt+=G);var Et=wt+Ht,Jt=Mt+zt;Ke.applyITRS(L,P,D,B,F),lt.copyFrom(Ve.matrix),we?(lt.multiplyWithOffset(we,-Ve.scrollX*Y,-Ve.scrollY*j),Ke.e=L,Ke.f=P):(Ke.e-=Ve.scrollX*Y,Ke.f-=Ve.scrollY*j),lt.multiply(Ke,et);var jt=et.getX(wt,Mt),yi=et.getY(wt,Mt),Qt=et.getX(wt,Jt),Yi=et.getY(wt,Jt),Fi=et.getX(Et,Jt),Tn=et.getY(Et,Jt),Ci=et.getX(Et,Mt),zn=et.getY(Et,Mt);Ve.roundPixels&&(jt=Math.round(jt),yi=Math.round(yi),Qt=Math.round(Qt),Yi=Math.round(Yi),Fi=Math.round(Fi),Tn=Math.round(Tn),Ci=Math.round(Ci),zn=Math.round(zn)),this.setTexture2D(T,0),this.batchQuad(jt,yi,Qt,Yi,Fi,Tn,Ci,zn,Xe,nt,Se,Wt,re,he,de,ue,Te,T,0)},batchTextureFrame:function(A,T,C,O,L,P,H){this.renderer.setPipeline(this);var G=this._tempMatrix1.copyFrom(P),B=this._tempMatrix2,F=T+A.width,D=C+A.height;H?G.multiply(H,B):B=G;var V=B.getX(T,C),z=B.getY(T,C),Y=B.getX(T,D),j=B.getY(T,D),X=B.getX(F,D),J=B.getY(F,D),Q=B.getX(F,C),se=B.getY(F,C);this.setTexture2D(A.glTexture,0),O=y.getTintAppendFloatAlpha(O,L),this.batchQuad(V,z,Y,j,X,J,Q,se,A.u0,A.v0,A.u1,A.v1,O,O,O,O,0,A.glTexture,0)},drawFillRect:function(A,T,C,O,L,P){var H=A+C,G=T+O;this.setTexture2D();var B=y.getTintAppendFloatAlphaAndSwap(L,P);this.batchQuad(A,T,A,G,H,G,H,T,0,0,1,1,B,B,B,B,2)},batchFillRect:function(A,T,C,O,L,P){this.renderer.setPipeline(this);var H=this._tempMatrix3;P&&P.multiply(L,H);var G=A+C,B=T+O,F=H.getX(A,T),D=H.getY(A,T),V=H.getX(A,B),z=H.getY(A,B),Y=H.getX(G,B),j=H.getY(G,B),X=H.getX(G,T),J=H.getY(G,T),Q=this.currentFrame,se=Q.u0,te=Q.v0,ie=Q.u1,re=Q.v1;this.batchQuad(F,D,V,z,Y,j,X,J,se,te,ie,re,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function(A,T,C,O,L,P,H,G){this.renderer.setPipeline(this);var B=this._tempMatrix3;G&&G.multiply(H,B);var F=B.getX(A,T),D=B.getY(A,T),V=B.getX(C,O),z=B.getY(C,O),Y=B.getX(L,P),j=B.getY(L,P),X=this.currentFrame,J=X.u0,Q=X.v0,se=X.u1,te=X.v1;this.batchTri(F,D,V,z,Y,j,J,Q,se,te,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function(A,T,C,O,L,P,H,G,B){var F=this.tempTriangle;F[0].x=A,F[0].y=T,F[0].width=H,F[1].x=C,F[1].y=O,F[1].width=H,F[2].x=L,F[2].y=P,F[2].width=H,F[3].x=A,F[3].y=T,F[3].width=H,this.batchStrokePath(F,H,!1,G,B)},batchFillPath:function(A,T,C){this.renderer.setPipeline(this);var O=this._tempMatrix3;C&&C.multiply(T,O);for(var L,P,H=A.length,G=this.polygonCache,B=this.fillTint.TL,F=this.fillTint.TR,D=this.fillTint.BL,V=this.tintEffect,z=0;z<H;++z)P=A[z],G.push(P.x,P.y);H=(L=u(G)).length;for(var Y=this.currentFrame,j=0;j<H;j+=3){var X=2*L[j+0],J=2*L[j+1],Q=2*L[j+2],se=G[0+X],te=G[1+X],ie=G[0+J],re=G[1+J],he=G[0+Q],de=G[1+Q],ue=O.getX(se,te),Te=O.getY(se,te),ye=O.getX(ie,re),Ne=O.getY(ie,re),Ve=O.getX(he,de),we=O.getY(he,de),Ue=Y.u0,Oe=Y.v0,Ye=Y.u1,st=Y.v1;this.batchTri(ue,Te,ye,Ne,Ve,we,Ue,Oe,Ye,st,B,F,D,V)}G.length=0},batchStrokePath:function(A,T,C,O,L){this.renderer.setPipeline(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var P=A.length-1,H=0;H<P;H++){var G=A[H],B=A[H+1];this.batchLine(G.x,G.y,B.x,B.y,G.width/2,B.width/2,T,H,!C&&H===P-1,O,L)}},batchLine:function(A,T,C,O,L,P,H,G,B,F,D){this.renderer.setPipeline(this);var V=this._tempMatrix3;D&&D.multiply(F,V);var z,Y,j=C-A,X=O-T,J=Math.sqrt(j*j+X*X),Q=L*(O-T)/J,se=L*(A-C)/J,te=P*(O-T)/J,ie=P*(A-C)/J,re=C-te,he=O-ie,de=A-Q,ue=T-se,Te=C+te,ye=O+ie,Ne=A+Q,Ve=T+se,we=V.getX(re,he),Ue=V.getY(re,he),Oe=V.getX(de,ue),Ye=V.getY(de,ue),st=V.getX(Te,ye),lt=V.getY(Te,ye),Ke=V.getX(Ne,Ve),et=V.getY(Ne,Ve),Xe=this.strokeTint,nt=this.tintEffect,Se=Xe.TL,Wt=Xe.TR,Ht=Xe.BL,zt=Xe.BR,wt=this.currentFrame,Mt=wt.u0,Et=wt.v0,Jt=wt.u1,jt=wt.v1;this.batchQuad(Ke,et,Oe,Ye,we,Ue,st,lt,Mt,Et,Jt,jt,Se,Wt,Ht,zt,nt),H<=2||(z=this.prevQuad,Y=this.firstQuad,0<G&&z[4]?this.batchQuad(Ke,et,Oe,Ye,z[0],z[1],z[2],z[3],Mt,Et,Jt,jt,Se,Wt,Ht,zt,nt):(Y[0]=Ke,Y[1]=et,Y[2]=Oe,Y[3]=Ye,Y[4]=1),B&&Y[4]?this.batchQuad(we,Ue,st,lt,Y[0],Y[1],Y[2],Y[3],Mt,Et,Jt,jt,Se,Wt,Ht,zt,nt):(z[0]=we,z[1]=Ue,z[2]=st,z[3]=lt,z[4]=1))}});x.exports=b},function(x,N){var r={modelMatrixDirty:!1,viewMatrixDirty:!1,projectionMatrixDirty:!1,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function(){return this.modelMatrixDirty=!0,this.viewMatrixDirty=!0,this.projectionMatrixDirty=!0,this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},mvpUpdate:function(){var m=this.program;return this.modelMatrixDirty&&(this.renderer.setMatrix4(m,"uModelMatrix",!1,this.modelMatrix),this.modelMatrixDirty=!1),this.viewMatrixDirty&&(this.renderer.setMatrix4(m,"uViewMatrix",!1,this.viewMatrix),this.viewMatrixDirty=!1),this.projectionMatrixDirty&&(this.renderer.setMatrix4(m,"uProjectionMatrix",!1,this.projectionMatrix),this.projectionMatrixDirty=!1),this},modelIdentity:function(){var m=this.modelMatrix;return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,this.modelMatrixDirty=!0,this},modelScale:function(m,u,c){var p=this.modelMatrix;return p[0]=p[0]*m,p[1]=p[1]*m,p[2]=p[2]*m,p[3]=p[3]*m,p[4]=p[4]*u,p[5]=p[5]*u,p[6]=p[6]*u,p[7]=p[7]*u,p[8]=p[8]*c,p[9]=p[9]*c,p[10]=p[10]*c,p[11]=p[11]*c,this.modelMatrixDirty=!0,this},modelTranslate:function(m,u,c){var p=this.modelMatrix;return p[12]=p[0]*m+p[4]*u+p[8]*c+p[12],p[13]=p[1]*m+p[5]*u+p[9]*c+p[13],p[14]=p[2]*m+p[6]*u+p[10]*c+p[14],p[15]=p[3]*m+p[7]*u+p[11]*c+p[15],this.modelMatrixDirty=!0,this},modelRotateX:function(m){var u=this.modelMatrix,c=Math.sin(m),p=Math.cos(m),h=u[4],l=u[5],d=u[6],y=u[7],g=u[8],b=u[9],A=u[10],T=u[11];return u[4]=h*p+g*c,u[5]=l*p+b*c,u[6]=d*p+A*c,u[7]=y*p+T*c,u[8]=g*p-h*c,u[9]=b*p-l*c,u[10]=A*p-d*c,u[11]=T*p-y*c,this.modelMatrixDirty=!0,this},modelRotateY:function(m){var u=this.modelMatrix,c=Math.sin(m),p=Math.cos(m),h=u[0],l=u[1],d=u[2],y=u[3],g=u[8],b=u[9],A=u[10],T=u[11];return u[0]=h*p-g*c,u[1]=l*p-b*c,u[2]=d*p-A*c,u[3]=y*p-T*c,u[8]=h*c+g*p,u[9]=l*c+b*p,u[10]=d*c+A*p,u[11]=y*c+T*p,this.modelMatrixDirty=!0,this},modelRotateZ:function(m){var u=this.modelMatrix,c=Math.sin(m),p=Math.cos(m),h=u[0],l=u[1],d=u[2],y=u[3],g=u[4],b=u[5],A=u[6],T=u[7];return u[0]=h*p+g*c,u[1]=l*p+b*c,u[2]=d*p+A*c,u[3]=y*p+T*c,u[4]=g*p-h*c,u[5]=b*p-l*c,u[6]=A*p-d*c,u[7]=T*p-y*c,this.modelMatrixDirty=!0,this},viewIdentity:function(){var m=this.viewMatrix;return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,this.viewMatrixDirty=!0,this},viewScale:function(m,u,c){var p=this.viewMatrix;return p[0]=p[0]*m,p[1]=p[1]*m,p[2]=p[2]*m,p[3]=p[3]*m,p[4]=p[4]*u,p[5]=p[5]*u,p[6]=p[6]*u,p[7]=p[7]*u,p[8]=p[8]*c,p[9]=p[9]*c,p[10]=p[10]*c,p[11]=p[11]*c,this.viewMatrixDirty=!0,this},viewTranslate:function(m,u,c){var p=this.viewMatrix;return p[12]=p[0]*m+p[4]*u+p[8]*c+p[12],p[13]=p[1]*m+p[5]*u+p[9]*c+p[13],p[14]=p[2]*m+p[6]*u+p[10]*c+p[14],p[15]=p[3]*m+p[7]*u+p[11]*c+p[15],this.viewMatrixDirty=!0,this},viewRotateX:function(m){var u=this.viewMatrix,c=Math.sin(m),p=Math.cos(m),h=u[4],l=u[5],d=u[6],y=u[7],g=u[8],b=u[9],A=u[10],T=u[11];return u[4]=h*p+g*c,u[5]=l*p+b*c,u[6]=d*p+A*c,u[7]=y*p+T*c,u[8]=g*p-h*c,u[9]=b*p-l*c,u[10]=A*p-d*c,u[11]=T*p-y*c,this.viewMatrixDirty=!0,this},viewRotateY:function(m){var u=this.viewMatrix,c=Math.sin(m),p=Math.cos(m),h=u[0],l=u[1],d=u[2],y=u[3],g=u[8],b=u[9],A=u[10],T=u[11];return u[0]=h*p-g*c,u[1]=l*p-b*c,u[2]=d*p-A*c,u[3]=y*p-T*c,u[8]=h*c+g*p,u[9]=l*c+b*p,u[10]=d*c+A*p,u[11]=y*c+T*p,this.viewMatrixDirty=!0,this},viewRotateZ:function(m){var u=this.viewMatrix,c=Math.sin(m),p=Math.cos(m),h=u[0],l=u[1],d=u[2],y=u[3],g=u[4],b=u[5],A=u[6],T=u[7];return u[0]=h*p+g*c,u[1]=l*p+b*c,u[2]=d*p+A*c,u[3]=y*p+T*c,u[4]=g*p-h*c,u[5]=b*p-l*c,u[6]=A*p-d*c,u[7]=T*p-y*c,this.viewMatrixDirty=!0,this},viewLoad2D:function(m){var u=this.viewMatrix;return u[0]=m[0],u[1]=m[1],u[2]=0,u[3]=0,u[4]=m[2],u[5]=m[3],u[6]=0,u[7]=0,u[8]=m[4],u[9]=m[5],u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this.viewMatrixDirty=!0,this},viewLoad:function(m){var u=this.viewMatrix;return u[0]=m[0],u[1]=m[1],u[2]=m[2],u[3]=m[3],u[4]=m[4],u[5]=m[5],u[6]=m[6],u[7]=m[7],u[8]=m[8],u[9]=m[9],u[10]=m[10],u[11]=m[11],u[12]=m[12],u[13]=m[13],u[14]=m[14],u[15]=m[15],this.viewMatrixDirty=!0,this},projIdentity:function(){var m=this.projectionMatrix;return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,this.projectionMatrixDirty=!0,this},projOrtho:function(m,u,c,p,h,l){var d=this.projectionMatrix,y=1/(m-u),g=1/(c-p),b=1/(h-l);return d[0]=-2*y,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*g,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*b,d[11]=0,d[12]=(m+u)*y,d[13]=(p+c)*g,d[14]=(l+h)*b,d[15]=1,this.projectionMatrixDirty=!0,this},projPersp:function(m,u,c,p){var h=this.projectionMatrix,l=1/Math.tan(m/2),d=1/(c-p);return h[0]=l/u,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=l,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=(p+c)*d,h[11]=-1,h[12]=0,h[13]=0,h[14]=2*p*c*d,h[15]=0,this.projectionMatrixDirty=!0,this}};x.exports=r},function(x,N){x.exports=function(r){return r&&r[0].toUpperCase()+r.slice(1)}},function(x,N,r){var m=r(3);x.exports=function(u,c){c===void 0&&(c=new m);var p=2*Math.PI*Math.random(),h=Math.random()+Math.random(),l=1<h?2-h:h,d=l*Math.cos(p),y=l*Math.sin(p);return c.x=u.x+d*u.radius,c.y=u.y+y*u.radius,c}},function(x,N,r){var m=r(3);x.exports=function(u,c){c===void 0&&(c=new m);var p=Math.random()*Math.PI*2,h=Math.sqrt(Math.random());return c.x=u.x+h*Math.cos(p)*u.width/2,c.y=u.y+h*Math.sin(p)*u.height/2,c}},function(x,N,r){var m=r(46);x.exports=function(u,c){return m(u.x,u.y,c.x,c.y)<=u.radius+c.radius}},function(x,N){x.exports=function(r,m){var u=m.width/2,c=m.height/2,p=Math.abs(r.x-m.x-u),h=Math.abs(r.y-m.y-c),l=u+r.radius,d=c+r.radius;if(l<p||d<h)return!1;if(p<=u||h<=c)return!0;var y=p-u,g=h-c;return y*y+g*g<=r.radius*r.radius}},function(x,N,r){var m=r(0),u=r(135),c=r(306),p=r(31),h=new m({initialize:function(l){this.type=p.POLYGON,this.area=0,this.points=[],l&&this.setTo(l)},contains:function(l,d){return u(this,l,d)},setTo:function(l){if(this.area=0,this.points=[],typeof l=="string"&&(l=l.split(" ")),!Array.isArray(l))return this;for(var d,y=Number.MAX_VALUE,g=0;g<l.length;g++)d={x:0,y:0},typeof l[g]=="number"||typeof l[g]=="string"?(d.x=parseFloat(l[g]),d.y=parseFloat(l[g+1]),g++):Array.isArray(l[g])?(d.x=l[g][0],d.y=l[g][1]):(d.x=l[g].x,d.y=l[g].y),this.points.push(d),d.y<y&&(y=d.y);return this.calculateArea(y),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var l,d,y=0,g=0;g<this.points.length-1;g++)l=this.points[g],y+=((d=this.points[g+1]).x-l.x)*(l.y+d.y);return l=this.points[0],d=this.points[this.points.length-1],y+=(l.x-d.x)*(d.y+l.y),this.area=.5*-y,this.area},getPoints:function(l,d,y){return c(this,l,d,y)}});x.exports=h},function(x,N,r){var m=r(3);x.exports=function(u,c){c===void 0&&(c=new m);var p=u.x2-u.x1,h=u.y2-u.y1,l=u.x3-u.x1,d=u.y3-u.y1,y=Math.random(),g=Math.random();return 1<=y+g&&(y=1-y,g=1-g),c.x=u.x1+(p*y+l*g),c.y=u.y1+(h*y+d*g),c}},function(x,N,r){x.exports={Matrix:r(838),Add:r(845),AddAt:r(846),BringToTop:r(847),CountAllMatching:r(848),Each:r(849),EachInRange:r(850),FindClosestInSorted:r(188),GetAll:r(281),GetFirst:r(282),GetRandom:r(179),MoveDown:r(851),MoveTo:r(852),MoveUp:r(853),NumberArray:r(854),NumberArrayStep:r(855),QuickSelect:r(384),Range:r(385),Remove:r(87),RemoveAt:r(856),RemoveBetween:r(857),RemoveRandomElement:r(858),Replace:r(859),RotateLeft:r(386),RotateRight:r(387),SafeRange:r(43),SendToBack:r(860),SetAll:r(861),Shuffle:r(142),SpliceOne:r(56),StableSort:r(94),Swap:r(862)}},function(x,N){x.exports=function(r,m,u){m===void 0&&(m=0),u===void 0&&(u=r.length);var c=m+Math.floor(Math.random()*u);return r[c]===void 0?null:r[c]}},function(x,N){x.exports=function(r,m){return r.hasOwnProperty(m)}},function(x,N,r){var m=r(0),u=r(14),c=r(21),p=r(321),h=r(143),l=r(323),d=r(879),y=new m({Extends:c,Mixins:[u.Depth,u.Mask,u.Pipeline,u.Transform,u.Visible,d],initialize:function(g,b,A,T){if(c.call(this,g,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],A===null||typeof A!="object"&&!Array.isArray(A)||(T=A,A=null),this.setTexture(b,A),this.initPipeline(),this.emitters=new h(this),this.wells=new h(this),T){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++)this.createEmitter(T[C])}},setTexture:function(g,b){return this.texture=this.scene.sys.textures.get(g),this.setFrame(b)},setFrame:function(g){this.frame=this.texture.get(g);var b=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),A=[];return b.forEach(function(T){A.push(T.name)}),this.frameNames=A,this.defaultFrame=this.frame,this},setEmitterFrames:function(g,b){Array.isArray(g)||(g=[g]);for(var A=b.frames,T=A.length=0;T<g.length;T++){var C=g[T];this.frameNames.indexOf(C)!==-1&&A.push(this.texture.get(C))}return 0<A.length?b.defaultFrame=A[0]:b.defaultFrame=this.defaultFrame,this},addEmitter:function(g){return this.emitters.add(g)},createEmitter:function(g){return this.addEmitter(new l(this,g))},removeEmitter:function(g){return this.emitters.remove(g,!0)},addGravityWell:function(g){return this.wells.add(g)},createGravityWell:function(g){return this.addGravityWell(new p(g))},emitParticle:function(g,b,A){for(var T=this.emitters.list,C=0;C<T.length;C++){var O=T[C];O.active&&O.emitParticle(g,b,A)}return this},emitParticleAt:function(g,b,A){return this.emitParticle(A,g,b)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(g,b){b*=this.timeScale;for(var A=this.emitters.list,T=0;T<A.length;T++){var C=A[T];C.active&&C.preUpdate(g,b)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});x.exports=y},function(x,N,r){var m=new(r(0))({initialize:function(u){if(this.entries=[],Array.isArray(u))for(var c=0;c<u.length;c++)this.set(u[c])},set:function(u){return this.entries.indexOf(u)===-1&&this.entries.push(u),this},get:function(u,c){for(var p=0;p<this.entries.length;p++){var h=this.entries[p];if(h[u]===c)return h}},getArray:function(){return this.entries.slice(0)},delete:function(u){var c=this.entries.indexOf(u);return-1<c&&this.entries.splice(c,1),this},dump:function(){console.group("Set");for(var u=0;u<this.entries.length;u++){var c=this.entries[u];console.log(c)}console.groupEnd()},each:function(u,c){var p,h=this.entries.slice(),l=h.length;if(c)for(p=0;p<l&&u.call(c,h[p],p)!==!1;p++);else for(p=0;p<l&&u(h[p],p)!==!1;p++);return this},iterate:function(u,c){var p,h=this.entries.length;if(c)for(p=0;p<h&&u.call(c,this.entries[p],p)!==!1;p++);else for(p=0;p<h&&u(this.entries[p],p)!==!1;p++);return this},iterateLocal:function(u){for(var c=[],p=1;p<arguments.length;p++)c.push(arguments[p]);var h=this.entries.length;for(p=0;p<h;p++){var l=this.entries[p];l[u].apply(l,c)}return this},clear:function(){return this.entries.length=0,this},contains:function(u){return-1<this.entries.indexOf(u)},union:function(u){var c=new m;return u.entries.forEach(function(p){c.set(p)}),this.entries.forEach(function(p){c.set(p)}),c},intersect:function(u){var c=new m;return this.entries.forEach(function(p){u.contains(p)&&c.set(p)}),c},difference:function(u){var c=new m;return this.entries.forEach(function(p){u.contains(p)||c.set(p)}),c},size:{get:function(){return this.entries.length},set:function(u){return u<this.entries.length?this.entries.length=u:this.entries.length}}});x.exports=m},,,,,function(x,N){x.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(x,N){x.exports=function(r,m,u){if(!m.length)return NaN;if(m.length===1)return m[0];var c,p,h=1;if(u){if(r<m[0][u])return m[0];for(;m[h][u]<r;)h++}else for(;m[h]<r;)h++;return h>m.length&&(h=m.length),u?(c=m[h-1][u],(p=m[h][u])-r<=r-c?m[h]:m[h-1]):(c=m[h-1],(p=m[h])-r<=r-c?p:c)}},function(x,N,r){var m=new(r(0))({initialize:function(u,c,p,h){this.textureKey=u,this.textureFrame=c,this.index=p,this.frame=h,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function(){this.frame=void 0}});x.exports=m},function(x,N,r){var m=r(117),u=r(0),c=r(156),p=r(7),h=r(78),l=r(15),d=r(5),y=r(157),g=new u({Extends:p,initialize:function(b){p.call(this),this.game=b,this.textureManager=null,this.globalTimeScale=1,this.anims=new c,this.paused=!1,this.name="AnimationManager",b.events.once(l.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(l.DESTROY,this.destroy,this)},add:function(b,A){return this.anims.has(b)?console.warn("Animation key exists: "+b):(A.key=b,this.anims.set(b,A),this.emit(h.ADD_ANIMATION,b,A)),this},exists:function(b){return this.anims.has(b)},create:function(b){var A=b.key,T=!1;return A&&((T=this.get(A))||(T=new m(this,A,b),this.anims.set(A,T),this.emit(h.ADD_ANIMATION,A,T))),T},fromJSON:function(b,A){A===void 0&&(A=!1),A&&this.anims.clear(),typeof b=="string"&&(b=JSON.parse(b));var T=[];if(b.hasOwnProperty("anims")&&Array.isArray(b.anims)){for(var C=0;C<b.anims.length;C++)T.push(this.create(b.anims[C]));b.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=b.globalTimeScale)}else b.hasOwnProperty("key")&&b.type==="frame"&&T.push(this.create(b));return T},generateFrameNames:function(b,A){var T=d(A,"prefix",""),C=d(A,"start",0),O=d(A,"end",0),L=d(A,"suffix",""),P=d(A,"zeroPad",0),H=d(A,"outputArray",[]),G=d(A,"frames",!1),B=this.textureManager.get(b);if(!B)return H;var F,D,V=C<O?1:-1;if(O+=V,A)if(Array.isArray(G))for(F=0;F<G.length;F++)D=T+y(G[F],P,"0",1)+L,B.has(D)&&H.push({key:b,frame:D});else for(F=C;F!==O;F+=V)D=T+y(F,P,"0",1)+L,B.has(D)&&H.push({key:b,frame:D});else for(G=B.getFrameNames(),F=0;F<G.length;F++)H.push({key:b,frame:G[F]});return H},generateFrameNumbers:function(b,A){var T,C=d(A,"start",0),O=d(A,"end",-1),L=d(A,"first",!1),P=d(A,"outputArray",[]),H=d(A,"frames",!1),G=this.textureManager.get(b);if(!G)return P;if(L&&G.has(L)&&P.push({key:b,frame:L}),Array.isArray(H))for(T=0;T<H.length;T++)G.has(H[T])&&P.push({key:b,frame:H[T]});else{O===-1&&(O=G.frameTotal);var B=C<O?1:-1;for(O+=B,T=C;T!==O;T+=B)G.has(T)&&P.push({key:b,frame:T})}return P},get:function(b){return this.anims.get(b)},load:function(b,A,T){var C=this.get(A);return C?C.load(b,T):console.warn("Missing animation: "+A),b},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(b,A){if(Array.isArray(A)||(A=[A]),!this.get(b))return this;for(var T=0;T<A.length;T++)A[T].anims.play(b);return this},remove:function(b){var A=this.get(b);return A&&(this.emit(h.REMOVE_ANIMATION,b,A),this.anims.delete(b)),A},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},staggerPlay:function(b,A,T){if(T===void 0&&(T=0),Array.isArray(A)||(A=[A]),!this.get(b))return this;for(var C=0;C<A.length;C++)A[C].anims.delayedPlay(T*C,b);return this},toJSON:function(b){var A={anims:[],globalTimeScale:this.globalTimeScale};return b!==void 0&&b!==""?A.anims.push(this.anims.get(b).toJSON()):this.anims.each(function(T,C){A.anims.push(C.toJSON())}),A},destroy:function(){this.anims.clear(),this.textureManager=null,this.game=null}});x.exports=g},function(x,N,r){var m=r(0),u=r(156),c=r(7),p=r(192),h=new m({initialize:function(){this.entries=new u,this.events=new c},add:function(l,d){return this.entries.set(l,d),this.events.emit(p.ADD,this,l,d),this},has:function(l){return this.entries.has(l)},exists:function(l){return this.entries.has(l)},get:function(l){return this.entries.get(l)},remove:function(l){var d=this.get(l);return d&&(this.entries.delete(l),this.events.emit(p.REMOVE,this,l,d.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});x.exports=h},function(x,N,r){x.exports={ADD:r(445),REMOVE:r(446)}},function(x,N,r){var m=r(191),u=r(0),c=r(15),p=new u({initialize:function(h){this.game=h,this.binary=new m,this.bitmapFont=new m,this.json=new m,this.physics=new m,this.shader=new m,this.audio=new m,this.video=new m,this.text=new m,this.html=new m,this.obj=new m,this.tilemap=new m,this.xml=new m,this.custom={},this.game.events.once(c.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new m),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],l=0;l<h.length;l++)this[h[l]].destroy(),this[h[l]]=null;for(var d in this.custom)this.custom[d].destroy();this.custom=null,this.game=null}});x.exports=p},function(x,N,r){var m=r(67),u=r(23),c=r(119),p=r(12),h=r(0),l=r(14),d=r(213),y=r(107),g=r(8),b=r(4),A=new h({Extends:m,Mixins:[l.Flip,l.Tint],initialize:function(T,C,O,L){m.call(this,T,C,O,L),this.inputEnabled=!0,this.fadeEffect=new d.Fade(this),this.flashEffect=new d.Flash(this),this.shakeEffect=new d.Shake(this),this.panEffect=new d.Pan(this),this.rotateToEffect=new d.RotateTo(this),this.zoomEffect=new d.Zoom(this),this.lerp=new b(1,1),this.followOffset=new b,this.deadzone=null,this._follow=null,this.renderToTexture=!1,this.renderToGame=!0,this.canvas=null,this.context=null,this.glTexture=null,this.framebuffer=null,this.pipeline=null},setRenderToTexture:function(T,C){C===void 0&&(C=!0);var O=this.scene.sys.game.renderer;return O.gl?(this.glTexture=O.createTextureFromSource(null,this.width,this.height,0),this.framebuffer=O.createFramebuffer(this.width,this.height,this.glTexture,!1)):(this.canvas=u.create2D(this,this.width,this.height),this.context=this.canvas.getContext("2d")),this.renderToTexture=!0,this.renderToGame=C,T&&this.setPipeline(T),this},setPipeline:function(T){var C;return typeof T=="string"?(C=this.scene.sys.game.renderer).gl&&C.hasPipeline(T)&&(this.pipeline=C.getPipeline(T)):this.pipeline=T,this},clearRenderToTexture:function(){if(this.scene){var T=this.scene.sys.game.renderer;if(T)return T.gl?(this.framebuffer&&T.deleteFramebuffer(this.framebuffer),this.glTexture&&T.deleteTexture(this.glTexture),this.framebuffer=null,this.glTexture=null,this.pipeline=null):(u.remove(this),this.canvas=null,this.context=null),this.renderToTexture=!1,this}},setDeadzone:function(T,C){var O,L,P,H;return T===void 0?this.deadzone=null:(this.deadzone?(this.deadzone.width=T,this.deadzone.height=C):this.deadzone=new g(0,0,T,C),this._follow&&(O=this.width/2,L=this.height/2,P=this._follow.x-this.followOffset.x,H=this._follow.y-this.followOffset.y,this.midPoint.set(P,H),this.scrollX=P-O,this.scrollY=H-L),c(this.deadzone,this.midPoint.x,this.midPoint.y)),this},fadeIn:function(T,C,O,L,P,H){return this.fadeEffect.start(!1,T,C,O,L,!0,P,H)},fadeOut:function(T,C,O,L,P,H){return this.fadeEffect.start(!0,T,C,O,L,!0,P,H)},fadeFrom:function(T,C,O,L,P,H,G){return this.fadeEffect.start(!1,T,C,O,L,P,H,G)},fade:function(T,C,O,L,P,H,G){return this.fadeEffect.start(!0,T,C,O,L,P,H,G)},flash:function(T,C,O,L,P,H,G){return this.flashEffect.start(T,C,O,L,P,H,G)},shake:function(T,C,O,L,P){return this.shakeEffect.start(T,C,O,L,P)},pan:function(T,C,O,L,P,H,G){return this.panEffect.start(T,C,O,L,P,H,G)},rotateTo:function(T,C,O,L,P,H,G){return this.rotateToEffect.start(T,C,O,L,P,H,G)},zoomTo:function(T,C,O,L,P,H){return this.zoomEffect.start(T,C,O,L,P,H)},preRender:function(T){var C,O,L=this.width,P=this.height,H=.5*L,G=.5*P,B=this.zoom*T,F=this.matrix,D=L*this.originX,V=P*this.originY,z=this._follow,Y=this.deadzone,j=this.scrollX,X=this.scrollY;Y&&c(Y,this.midPoint.x,this.midPoint.y),z&&!this.panEffect.isRunning&&(C=z.x-this.followOffset.x,O=z.y-this.followOffset.y,Y?(C<Y.x?j=y(j,j-(Y.x-C),this.lerp.x):C>Y.right&&(j=y(j,j+(C-Y.right),this.lerp.x)),O<Y.y?X=y(X,X-(Y.y-O),this.lerp.y):O>Y.bottom&&(X=y(X,X+(O-Y.bottom),this.lerp.y))):(j=y(j,C-D,this.lerp.x),X=y(X,O-V,this.lerp.y))),this.useBounds&&(j=this.clampX(j),X=this.clampY(X)),this.roundPixels&&(D=Math.round(D),V=Math.round(V));var J=(this.scrollX=j)+H,Q=(this.scrollY=X)+G;this.midPoint.set(J,Q);var se=L/B,te=P/B;this.worldView.setTo(J-se/2,Q-te/2,se,te),F.applyITRS(this.x+D,this.y+V,this.rotation,B,B),F.translate(-D,-V),this.shakeEffect.preRender()},setLerp:function(T,C){return T===void 0&&(T=1),C===void 0&&(C=T),this.lerp.set(T,C),this},setFollowOffset:function(T,C){return T===void 0&&(T=0),C===void 0&&(C=0),this.followOffset.set(T,C),this},startFollow:function(T,C,O,L,P,H){C===void 0&&(C=!1),O===void 0&&(O=1),L===void 0&&(L=O),P===void 0&&(P=0),H===void 0&&(H=P),this._follow=T,this.roundPixels=C,O=p(O,0,1),L=p(L,0,1),this.lerp.set(O,L),this.followOffset.set(P,H);var G=this.width/2,B=this.height/2,F=T.x-P,D=T.y-H;return this.midPoint.set(F,D),this.scrollX=F-G,this.scrollY=D-B,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(T,C){this.visible&&(this.rotateToEffect.update(T,C),this.panEffect.update(T,C),this.zoomEffect.update(T,C),this.shakeEffect.update(T,C),this.flashEffect.update(T,C),this.fadeEffect.update(T,C))},destroy:function(){this.clearRenderToTexture(),this.resetFX(),m.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});x.exports=A},function(x,N,r){var m=r(12),u={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(c){return c===void 0&&(c=1),this.alpha=c,this},alpha:{get:function(){return this._alpha},set:function(c){var p=m(c,0,1);(this._alpha=p)===0?this.renderFlags&=-3:this.renderFlags|=2}}};x.exports=u},function(x,N,r){var m=r(41),u={_blendMode:m.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(c){typeof c=="string"&&(c=m[c]),-1<=(c|=0)&&(this._blendMode=c)}},setBlendMode:function(c){return this.blendMode=c,this}};x.exports=u},function(x,N){var r={_depth:0,depth:{get:function(){return this._depth},set:function(m){this.scene.sys.queueDepthSort(),this._depth=m}},setDepth:function(m){return m===void 0&&(m=0),this.depth=m,this}};x.exports=r},function(x,N,r){var m=r(118),u=r(79);x.exports=function(c,p,h,l){l===void 0&&(l=[]),!p&&0<h&&(p=u(c)/h);for(var d=0;d<p;d++){var y=d/p;l.push(m(c,y))}return l}},function(x,N,r){var m=r(3);x.exports=function(u,c,p){return p===void 0&&(p=new m),p.x=u.x1+(u.x2-u.x1)*c,p.y=u.y1+(u.y2-u.y1)*c,p}},function(x,N){x.exports=function(r,m,u,c){var p=Math.cos(c),h=Math.sin(c),l=r.x-m,d=r.y-u;return r.x=l*p-d*h+m,r.y=l*h+d*p+u,r}},function(x,N,r){var m=r(202),u=r(203),c={mask:null,setMask:function(p){return this.mask=p,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(p){return p===void 0&&(this.texture||this.shader)&&(p=this),new m(this.scene,p)},createGeometryMask:function(p){return p===void 0&&this.type==="Graphics"&&(p=this),new u(this.scene,p)}};x.exports=c},function(x,N,r){var m=r(0),u=r(15),c=new m({initialize:function(p,h){var l,d,y,g,b,A,T=p.sys.game.renderer;this.renderer=T,this.bitmapMask=h,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,T&&T.gl&&(l=T.width,d=T.height,y=(l&l-1)==0&&(d&d-1)==0,g=T.gl,b=y?g.REPEAT:g.CLAMP_TO_EDGE,A=g.LINEAR,this.mainTexture=T.createTexture2D(0,A,A,b,b,g.RGBA,null,l,d),this.maskTexture=T.createTexture2D(0,A,A,b,b,g.RGBA,null,l,d),this.mainFramebuffer=T.createFramebuffer(l,d,this.mainTexture,!0),this.maskFramebuffer=T.createFramebuffer(l,d,this.maskTexture,!0),p.sys.game.events.on(u.CONTEXT_RESTORED,function(C){var O=C.width,L=C.height,P=(O&O-1)==0&&(L&L-1)==0,H=C.gl,G=P?H.REPEAT:H.CLAMP_TO_EDGE,B=H.LINEAR;this.mainTexture=C.createTexture2D(0,B,B,G,G,H.RGBA,null,O,L),this.maskTexture=C.createTexture2D(0,B,B,G,G,H.RGBA,null,O,L),this.mainFramebuffer=C.createFramebuffer(O,L,this.mainTexture,!0),this.maskFramebuffer=C.createFramebuffer(O,L,this.maskTexture,!0)},this))},setBitmap:function(p){this.bitmapMask=p},preRenderWebGL:function(p,h,l){p.pipelines.BitmapMaskPipeline.beginMask(this,h,l)},postRenderWebGL:function(p,h){p.pipelines.BitmapMaskPipeline.endMask(this,h)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null;var p=this.renderer;p&&p.gl&&(p.deleteTexture(this.mainTexture),p.deleteTexture(this.maskTexture),p.deleteFramebuffer(this.mainFramebuffer),p.deleteFramebuffer(this.maskFramebuffer)),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.renderer=null}});x.exports=c},function(x,N,r){var m=new(r(0))({initialize:function(u,c){this.geometryMask=c,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(u){return this.geometryMask=u,this},setInvertAlpha:function(u){return u===void 0&&(u=!0),this.invertAlpha=u,this},preRenderWebGL:function(u,c,p){var h=u.gl;u.flush(),u.maskStack.length===0&&(h.enable(h.STENCIL_TEST),h.clear(h.STENCIL_BUFFER_BIT),u.maskCount=0),u.currentCameraMask.mask!==this&&(u.currentMask.mask=this),u.maskStack.push({mask:this,camera:p}),this.applyStencil(u,p,!0),u.maskCount++},applyStencil:function(u,c,p){var h=u.gl,l=this.geometryMask,d=u.maskCount;h.colorMask(!1,!1,!1,!1),p?(h.stencilFunc(h.EQUAL,d,255),h.stencilOp(h.KEEP,h.KEEP,h.INCR)):(h.stencilFunc(h.EQUAL,d+1,255),h.stencilOp(h.KEEP,h.KEEP,h.DECR)),l.renderWebGL(u,l,0,c),u.flush(),h.colorMask(!0,!0,!0,!0),h.stencilOp(h.KEEP,h.KEEP,h.KEEP),p?this.invertAlpha?h.stencilFunc(h.NOTEQUAL,d+1,255):h.stencilFunc(h.EQUAL,d+1,255):this.invertAlpha?h.stencilFunc(h.NOTEQUAL,d,255):h.stencilFunc(h.EQUAL,d,255)},postRenderWebGL:function(u){var c,p=u.gl;u.maskStack.pop(),u.maskCount--,u.maskStack.length===0?(u.flush(),u.currentMask.mask=null,p.disable(p.STENCIL_TEST)):(u.flush(),(c=u.maskStack[u.maskStack.length-1]).mask.applyStencil(u,c.camera,!1),u.currentCameraMask.mask!==c.mask?(u.currentMask.mask=c.mask,u.currentMask.camera=c.camera):u.currentMask.mask=null)},preRenderCanvas:function(u,c,p){var h=this.geometryMask;u.currentContext.save(),h.renderCanvas(u,h,0,p,null,null,!0),u.currentContext.clip()},postRenderCanvas:function(u){u.currentContext.restore()},destroy:function(){this.geometryMask=null}});x.exports=m},function(x,N){var r={defaultPipeline:null,pipeline:null,initPipeline:function(m){m===void 0&&(m="TextureTintPipeline");var u=this.scene.sys.game.renderer;return!!(u&&u.gl&&u.hasPipeline(m))&&(this.defaultPipeline=u.getPipeline(m),this.pipeline=this.defaultPipeline,!0)},setPipeline:function(m){var u=this.scene.sys.game.renderer;return u&&u.gl&&u.hasPipeline(m)&&(this.pipeline=u.getPipeline(m)),this},resetPipeline:function(){return this.pipeline=this.defaultPipeline,this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};x.exports=r},function(x,N){var r={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(m,u){return u===void 0&&(u=m),this.scrollFactorX=m,this.scrollFactorY=u,this}};x.exports=r},function(x,N){x.exports=function(r){var m={name:r.name,type:r.type,x:r.x,y:r.y,depth:r.depth,scale:{x:r.scaleX,y:r.scaleY},origin:{x:r.originX,y:r.originY},flipX:r.flipX,flipY:r.flipY,rotation:r.rotation,alpha:r.alpha,visible:r.visible,blendMode:r.blendMode,textureKey:"",frameKey:"",data:{}};return r.texture&&(m.textureKey=r.texture.key,m.frameKey=r.frame.name),m}},function(x,N,r){var m=r(9),u=r(25),c=r(208),p=r(209),h={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,(this._scaleY=l)===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(l){(this._scaleX=l)===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(l){(this._scaleY=l)===0?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return p(this._rotation*m.RAD_TO_DEG)},set:function(l){this.rotation=p(l)*m.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=c(l)}},setPosition:function(l,d,y,g){return l===void 0&&(l=0),d===void 0&&(d=l),y===void 0&&(y=0),g===void 0&&(g=0),this.x=l,this.y=d,this.z=y,this.w=g,this},setRandomPosition:function(l,d,y,g){return l===void 0&&(l=0),d===void 0&&(d=0),y===void 0&&(y=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=l+Math.random()*y,this.y=d+Math.random()*g,this},setRotation:function(l){return l===void 0&&(l=0),this.rotation=l,this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,this},setScale:function(l,d){return l===void 0&&(l=1),d===void 0&&(d=l),this.scaleX=l,this.scaleY=d,this},setX:function(l){return l===void 0&&(l=0),this.x=l,this},setY:function(l){return l===void 0&&(l=0),this.y=l,this},setZ:function(l){return l===void 0&&(l=0),this.z=l,this},setW:function(l){return l===void 0&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return l===void 0&&(l=new u),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,d){l===void 0&&(l=new u),d===void 0&&(d=new u);var y=this.parentContainer;if(!y)return this.getLocalTransformMatrix(l);for(l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);y;)d.applyITRS(y.x,y.y,y._rotation,y._scaleX,y._scaleY),d.multiply(l,l),y=y.parentContainer;return l},getParentRotation:function(){for(var l=0,d=this.parentContainer;d;)l+=d.rotation,d=d.parentContainer;return l}};x.exports=h},function(x,N,r){var m=r(42);x.exports=function(u){return m(u,-Math.PI,Math.PI)}},function(x,N,r){var m=r(42);x.exports=function(u){return m(u,-180,180)}},function(x,N){var r={_visible:!0,visible:{get:function(){return this._visible},set:function(m){m?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(m){return this.visible=m,this}};x.exports=r},function(x,N,r){var m=r(162);x.exports=function(u,c,p,h){c===void 0&&(c=1),p===void 0&&(p=1);var l=Math.floor(6*u),d=6*u-l,y=Math.floor(p*(1-c)*255),g=Math.floor(p*(1-d*c)*255),b=Math.floor(p*(1-(1-d)*c)*255),A=p=Math.floor(p*=255),T=p,C=p,O=l%6;return O==0?(T=b,C=y):O==1?(A=g,C=y):O==2?(A=y,C=b):O==3?(A=y,T=g):O==4?(A=b,T=y):O==5&&(T=y,C=g),h?h.setTo?h.setTo(A,T,C,h.alpha,!1):(h.r=A,h.g=T,h.b=C,h.color=m(A,T,C),h):{r:A,g:T,b:C,color:m(A,T,C)}}},function(x,N){var r="";function m(u){for(var c=["i","webkitI","msI","mozI","oI"],p=0;p<c.length;p++){var h=c[p]+"mageSmoothingEnabled";if(h in u)return h}return null}x.exports={disable:function(u){return r===""&&(r=m(u)),r&&(u[r]=!1),u},enable:function(u){return r===""&&(r=m(u)),r&&(u[r]=!0),u},getPrefix:m,isEnabled:function(u){return r!==null?u[r]:null}}},function(x,N,r){x.exports={Fade:r(477),Flash:r(478),Pan:r(479),Shake:r(512),RotateTo:r(513),Zoom:r(514)}},function(x,N,r){x.exports={In:r(480),Out:r(481),InOut:r(482)}},function(x,N,r){x.exports={In:r(483),Out:r(484),InOut:r(485)}},function(x,N,r){x.exports={In:r(486),Out:r(487),InOut:r(488)}},function(x,N,r){x.exports={In:r(489),Out:r(490),InOut:r(491)}},function(x,N,r){x.exports={In:r(492),Out:r(493),InOut:r(494)}},function(x,N,r){x.exports={In:r(495),Out:r(496),InOut:r(497)}},function(x,N,r){x.exports=r(498)},function(x,N,r){x.exports={In:r(499),Out:r(500),InOut:r(501)}},function(x,N,r){x.exports={In:r(502),Out:r(503),InOut:r(504)}},function(x,N,r){x.exports={In:r(505),Out:r(506),InOut:r(507)}},function(x,N,r){x.exports={In:r(508),Out:r(509),InOut:r(510)}},function(x,N,r){x.exports=r(511)},function(x,N,r){var m=r(0),u=r(29),c=r(227),p=r(2),h=r(5),l=r(10),d=r(163),y=r(1),g=r(168),b=r(161),A=new m({initialize:function(T){T===void 0&&(T={}),this.width=h(T,"width",1024),this.height=h(T,"height",768),this.zoom=h(T,"zoom",1),this.resolution=h(T,"resolution",1),this.parent=h(T,"parent",void 0),this.scaleMode=h(T,"scaleMode",0),this.expandParent=h(T,"expandParent",!0),this.autoRound=h(T,"autoRound",!1),this.autoCenter=h(T,"autoCenter",0),this.resizeInterval=h(T,"resizeInterval",500),this.fullscreenTarget=h(T,"fullscreenTarget",null),this.minWidth=h(T,"minWidth",0),this.maxWidth=h(T,"maxWidth",0),this.minHeight=h(T,"minHeight",0),this.maxHeight=h(T,"maxHeight",0);var C=h(T,"scale",null);C&&(this.width=h(C,"width",this.width),this.height=h(C,"height",this.height),this.zoom=h(C,"zoom",this.zoom),this.resolution=h(C,"resolution",this.resolution),this.parent=h(C,"parent",this.parent),this.scaleMode=h(C,"mode",this.scaleMode),this.expandParent=h(C,"expandParent",this.expandParent),this.autoRound=h(C,"autoRound",this.autoRound),this.autoCenter=h(C,"autoCenter",this.autoCenter),this.resizeInterval=h(C,"resizeInterval",this.resizeInterval),this.fullscreenTarget=h(C,"fullscreenTarget",this.fullscreenTarget),this.minWidth=h(C,"min.width",this.minWidth),this.maxWidth=h(C,"max.width",this.maxWidth),this.minHeight=h(C,"min.height",this.minHeight),this.maxHeight=h(C,"max.height",this.maxHeight)),this.renderType=h(T,"type",u.AUTO),this.canvas=h(T,"canvas",null),this.context=h(T,"context",null),this.canvasStyle=h(T,"canvasStyle",null),this.customEnvironment=h(T,"customEnvironment",!1),this.sceneConfig=h(T,"scene",null),this.seed=h(T,"seed",[(Date.now()*Math.random()).toString()]),d.RND=new d.RandomDataGenerator(this.seed),this.gameTitle=h(T,"title",""),this.gameURL=h(T,"url","https://phaser.io"),this.gameVersion=h(T,"version",""),this.autoFocus=h(T,"autoFocus",!0),this.domCreateContainer=h(T,"dom.createContainer",!1),this.domBehindCanvas=h(T,"dom.behindCanvas",!1),this.inputKeyboard=h(T,"input.keyboard",!0),this.inputKeyboardEventTarget=h(T,"input.keyboard.target",window),this.inputKeyboardCapture=h(T,"input.keyboard.capture",[]),this.inputMouse=h(T,"input.mouse",!0),this.inputMouseEventTarget=h(T,"input.mouse.target",null),this.inputMouseCapture=h(T,"input.mouse.capture",!0),this.inputTouch=h(T,"input.touch",c.input.touch),this.inputTouchEventTarget=h(T,"input.touch.target",null),this.inputTouchCapture=h(T,"input.touch.capture",!0),this.inputActivePointers=h(T,"input.activePointers",1),this.inputSmoothFactor=h(T,"input.smoothFactor",0),this.inputWindowEvents=h(T,"input.windowEvents",!0),this.inputGamepad=h(T,"input.gamepad",!1),this.inputGamepadEventTarget=h(T,"input.gamepad.target",window),this.disableContextMenu=h(T,"disableContextMenu",!1),this.audio=h(T,"audio"),this.hideBanner=h(T,"banner",null)===!1,this.hidePhaser=h(T,"banner.hidePhaser",!1),this.bannerTextColor=h(T,"banner.text","#ffffff"),this.bannerBackgroundColor=h(T,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=h(T,"fps",null);var O=h(T,"render",T);this.antialias=h(O,"antialias",!0),this.antialiasGL=h(O,"antialiasGL",!0),this.mipmapFilter=h(O,"mipmapFilter","LINEAR"),this.desynchronized=h(O,"desynchronized",!1),this.roundPixels=h(O,"roundPixels",!1),this.pixelArt=h(O,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.roundPixels=!0),this.transparent=h(O,"transparent",!1),this.clearBeforeRender=h(O,"clearBeforeRender",!0),this.premultipliedAlpha=h(O,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=h(O,"failIfMajorPerformanceCaveat",!1),this.powerPreference=h(O,"powerPreference","default"),this.batchSize=h(O,"batchSize",2e3),this.maxLights=h(O,"maxLights",10);var L=h(T,"backgroundColor",0);this.backgroundColor=b(L),L===0&&this.transparent&&(this.backgroundColor.alpha=0),this.preBoot=h(T,"callbacks.preBoot",y),this.postBoot=h(T,"callbacks.postBoot",y),this.physics=h(T,"physics",{}),this.defaultPhysicsSystem=h(this.physics,"default",!1),this.loaderBaseURL=h(T,"loader.baseURL",""),this.loaderPath=h(T,"loader.path",""),this.loaderMaxParallelDownloads=h(T,"loader.maxParallelDownloads",32),this.loaderCrossOrigin=h(T,"loader.crossOrigin",void 0),this.loaderResponseType=h(T,"loader.responseType",""),this.loaderAsync=h(T,"loader.async",!0),this.loaderUser=h(T,"loader.user",""),this.loaderPassword=h(T,"loader.password",""),this.loaderTimeout=h(T,"loader.timeout",0),this.loaderWithCredentials=h(T,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=h(T,"plugins",null),H=g.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:l(P)&&(this.installGlobalPlugins=p(P,"global",[]),this.installScenePlugins=p(P,"scene",[]),Array.isArray(P.default)?H=P.default:Array.isArray(P.defaultMerge)&&(H=H.concat(P.defaultMerge)))),this.defaultPlugins=H;var G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=h(T,"images.default",G+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=h(T,"images.missing",G+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),window&&(window.FORCE_WEBGL?this.renderType=u.WEBGL:window.FORCE_CANVAS&&(this.renderType=u.CANVAS))}});x.exports=A},function(x,N,r){x.exports={os:r(81),browser:r(82),features:r(120),input:r(543),audio:r(544),video:r(545),fullscreen:r(546),canvasFeatures:r(228)}},function(x,N,r){var m,u,c,p=r(23),h={supportInverseAlpha:!1,supportNewBlendModes:!1};x.exports=(document!==void 0&&(h.supportNewBlendModes=(m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",u="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(c=new Image).onload=function(){var l=new Image;l.onload=function(){var d=p.create(l,6,1).getContext("2d");if(d.globalCompositeOperation="multiply",d.drawImage(c,0,0),d.drawImage(l,2,0),!d.getImageData(2,0,1,1))return!1;var y=d.getImageData(2,0,1,1).data;p.remove(l),h.supportNewBlendModes=y[0]===255&&y[1]===0&&y[2]===0},l.src=m+"/wCKxvRF"+u},c.src=m+"AP804Oa6"+u,!1),h.supportInverseAlpha=function(){var l=p.create(this,2,1).getContext("2d");l.fillStyle="rgba(10, 20, 30, 0.5)",l.fillRect(0,0,1,1);var d=l.getImageData(0,0,1,1);if(d===null)return!1;l.putImageData(d,1,0);var y=l.getImageData(1,0,1,1);return y.data[0]===d.data[0]&&y.data[1]===d.data[1]&&y.data[2]===d.data[2]&&y.data[3]===d.data[3]}()),h)},function(x,N){x.exports=function(r,m,u,c){return Math.atan2(c-m,u-r)}},function(x,N){x.exports=function(r){return 0<=(r%=2*Math.PI)?r:r+2*Math.PI}},function(x,N){x.exports=function(r,m){var u=r.x-m.x,c=r.y-m.y;return Math.sqrt(u*u+c*c)}},function(x,N,r){var m=r(233);x.exports=function(u,c){return m(u)/m(c)/m(u-c)}},function(x,N){x.exports=function(r){if(r===0)return 1;for(var m=r;--r;)m*=r;return m}},function(x,N){x.exports=function(r,m,u,c,p){return(g=1-r)*g*g*m+3*(y=1-(d=r))*y*d*u+3*(1-(l=r))*l*l*c+(h=r)*h*h*p;var h,l,d,y,g}},function(x,N){x.exports=function(r,m,u,c){return(l=1-r)*l*m+2*(1-(h=r))*h*u+(p=r)*p*c;var p,h,l}},function(x,N,r){var m=r(164);x.exports=function(u,c,p){return c+(p-c)*m(u,0,1)}},function(x,N){x.exports=function(r,m,u,c,p){var h=c+Math.atan2(r.y-u,r.x-m);return r.x=m+p*Math.cos(h),r.y=u+p*Math.sin(h),r}},function(x,N){x.exports=function(r){return 0<r?Math.ceil(r):Math.floor(r)}},function(x,N,r){var m=r(4);x.exports=function(u,c,p,h,l,d,y,g){g===void 0&&(g=new m);var b=Math.sin(l),A=Math.cos(l),T=A*d,C=b*d,O=-b*y,L=A*y,P=1/(T*L+O*-C);return g.x=L*P*u+-O*P*c+(h*O-p*L)*P,g.y=T*P*c+-C*P*u+(-h*T+p*C)*P,g}},function(x,N,r){var m=new(r(0))({initialize:function(u){this.val=new Float32Array(9),u?this.copy(u):this.identity()},clone:function(){return new m(this)},set:function(u){return this.copy(u)},copy:function(u){var c=this.val,p=u.val;return c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=p[6],c[7]=p[7],c[8]=p[8],this},fromMat4:function(u){var c=u.val,p=this.val;return p[0]=c[0],p[1]=c[1],p[2]=c[2],p[3]=c[4],p[4]=c[5],p[5]=c[6],p[6]=c[8],p[7]=c[9],p[8]=c[10],this},fromArray:function(u){var c=this.val;return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],this},identity:function(){var u=this.val;return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,this},transpose:function(){var u=this.val,c=u[1],p=u[2],h=u[5];return u[1]=u[3],u[2]=u[6],u[3]=c,u[5]=u[7],u[6]=p,u[7]=h,this},invert:function(){var u=this.val,c=u[0],p=u[1],h=u[2],l=u[3],d=u[4],y=u[5],g=u[6],b=u[7],A=u[8],T=A*d-y*b,C=-A*l+y*g,O=b*l-d*g,L=c*T+p*C+h*O;return L?(L=1/L,u[0]=T*L,u[1]=(-A*p+h*b)*L,u[2]=(y*p-h*d)*L,u[3]=C*L,u[4]=(A*c-h*g)*L,u[5]=(-y*c+h*l)*L,u[6]=O*L,u[7]=(-b*c+p*g)*L,u[8]=(d*c-p*l)*L,this):null},adjoint:function(){var u=this.val,c=u[0],p=u[1],h=u[2],l=u[3],d=u[4],y=u[5],g=u[6],b=u[7],A=u[8];return u[0]=d*A-y*b,u[1]=h*b-p*A,u[2]=p*y-h*d,u[3]=y*g-l*A,u[4]=c*A-h*g,u[5]=h*l-c*y,u[6]=l*b-d*g,u[7]=p*g-c*b,u[8]=c*d-p*l,this},determinant:function(){var u=this.val,c=u[0],p=u[1],h=u[2],l=u[3],d=u[4],y=u[5],g=u[6],b=u[7],A=u[8];return c*(A*d-y*b)+p*(-A*l+y*g)+h*(b*l-d*g)},multiply:function(u){var c=this.val,p=c[0],h=c[1],l=c[2],d=c[3],y=c[4],g=c[5],b=c[6],A=c[7],T=c[8],C=u.val,O=C[0],L=C[1],P=C[2],H=C[3],G=C[4],B=C[5],F=C[6],D=C[7],V=C[8];return c[0]=O*p+L*d+P*b,c[1]=O*h+L*y+P*A,c[2]=O*l+L*g+P*T,c[3]=H*p+G*d+B*b,c[4]=H*h+G*y+B*A,c[5]=H*l+G*g+B*T,c[6]=F*p+D*d+V*b,c[7]=F*h+D*y+V*A,c[8]=F*l+D*g+V*T,this},translate:function(u){var c=this.val,p=u.x,h=u.y;return c[6]=p*c[0]+h*c[3]+c[6],c[7]=p*c[1]+h*c[4]+c[7],c[8]=p*c[2]+h*c[5]+c[8],this},rotate:function(u){var c=this.val,p=c[0],h=c[1],l=c[2],d=c[3],y=c[4],g=c[5],b=Math.sin(u),A=Math.cos(u);return c[0]=A*p+b*d,c[1]=A*h+b*y,c[2]=A*l+b*g,c[3]=A*d-b*p,c[4]=A*y-b*h,c[5]=A*g-b*l,this},scale:function(u){var c=this.val,p=u.x,h=u.y;return c[0]=p*c[0],c[1]=p*c[1],c[2]=p*c[2],c[3]=h*c[3],c[4]=h*c[4],c[5]=h*c[5],this},fromQuat:function(u){var c=u.x,p=u.y,h=u.z,l=u.w,d=c+c,y=p+p,g=h+h,b=c*d,A=c*y,T=c*g,C=p*y,O=p*g,L=h*g,P=l*d,H=l*y,G=l*g,B=this.val;return B[0]=1-(C+L),B[3]=A+G,B[6]=T-H,B[1]=A-G,B[4]=1-(b+L),B[7]=O+P,B[2]=T+H,B[5]=O-P,B[8]=1-(b+C),this},normalFromMat4:function(u){var c=u.val,p=this.val,h=c[0],l=c[1],d=c[2],y=c[3],g=c[4],b=c[5],A=c[6],T=c[7],C=c[8],O=c[9],L=c[10],P=c[11],H=c[12],G=c[13],B=c[14],F=c[15],D=h*b-l*g,V=h*A-d*g,z=h*T-y*g,Y=l*A-d*b,j=l*T-y*b,X=d*T-y*A,J=C*G-O*H,Q=C*B-L*H,se=C*F-P*H,te=O*B-L*G,ie=O*F-P*G,re=L*F-P*B,he=D*re-V*ie+z*te+Y*se-j*Q+X*J;return he?(he=1/he,p[0]=(b*re-A*ie+T*te)*he,p[1]=(A*se-g*re-T*Q)*he,p[2]=(g*ie-b*se+T*J)*he,p[3]=(d*ie-l*re-y*te)*he,p[4]=(h*re-d*se+y*Q)*he,p[5]=(l*se-h*ie-y*J)*he,p[6]=(G*X-B*j+F*Y)*he,p[7]=(B*z-H*X-F*V)*he,p[8]=(H*j-G*z+F*D)*he,this):null}});x.exports=m},function(x,N,r){var m=r(0),u=new m({initialize:function(h){this.val=new Float32Array(16),h?this.copy(h):this.identity()},clone:function(){return new u(this)},set:function(h){return this.copy(h)},copy:function(h){var l=this.val,d=h.val;return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=d[7],l[8]=d[8],l[9]=d[9],l[10]=d[10],l[11]=d[11],l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15],this},fromArray:function(h){var l=this.val;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],l[9]=h[9],l[10]=h[10],l[11]=h[11],l[12]=h[12],l[13]=h[13],l[14]=h[14],l[15]=h[15],this},zero:function(){var h=this.val;return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=0,this},xyz:function(h,l,d){this.identity();var y=this.val;return y[12]=h,y[13]=l,y[14]=d,this},scaling:function(h,l,d){this.zero();var y=this.val;return y[0]=h,y[5]=l,y[10]=d,y[15]=1,this},identity:function(){var h=this.val;return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this},transpose:function(){var h=this.val,l=h[1],d=h[2],y=h[3],g=h[6],b=h[7],A=h[11];return h[1]=h[4],h[2]=h[8],h[3]=h[12],h[4]=l,h[6]=h[9],h[7]=h[13],h[8]=d,h[9]=g,h[11]=h[14],h[12]=y,h[13]=b,h[14]=A,this},invert:function(){var h=this.val,l=h[0],d=h[1],y=h[2],g=h[3],b=h[4],A=h[5],T=h[6],C=h[7],O=h[8],L=h[9],P=h[10],H=h[11],G=h[12],B=h[13],F=h[14],D=h[15],V=l*A-d*b,z=l*T-y*b,Y=l*C-g*b,j=d*T-y*A,X=d*C-g*A,J=y*C-g*T,Q=O*B-L*G,se=O*F-P*G,te=O*D-H*G,ie=L*F-P*B,re=L*D-H*B,he=P*D-H*F,de=V*he-z*re+Y*ie+j*te-X*se+J*Q;return de?(de=1/de,h[0]=(A*he-T*re+C*ie)*de,h[1]=(y*re-d*he-g*ie)*de,h[2]=(B*J-F*X+D*j)*de,h[3]=(P*X-L*J-H*j)*de,h[4]=(T*te-b*he-C*se)*de,h[5]=(l*he-y*te+g*se)*de,h[6]=(F*Y-G*J-D*z)*de,h[7]=(O*J-P*Y+H*z)*de,h[8]=(b*re-A*te+C*Q)*de,h[9]=(d*te-l*re-g*Q)*de,h[10]=(G*X-B*Y+D*V)*de,h[11]=(L*Y-O*X-H*V)*de,h[12]=(A*se-b*ie-T*Q)*de,h[13]=(l*ie-d*se+y*Q)*de,h[14]=(B*z-G*j-F*V)*de,h[15]=(O*j-L*z+P*V)*de,this):null},adjoint:function(){var h=this.val,l=h[0],d=h[1],y=h[2],g=h[3],b=h[4],A=h[5],T=h[6],C=h[7],O=h[8],L=h[9],P=h[10],H=h[11],G=h[12],B=h[13],F=h[14],D=h[15];return h[0]=A*(P*D-H*F)-L*(T*D-C*F)+B*(T*H-C*P),h[1]=-(d*(P*D-H*F)-L*(y*D-g*F)+B*(y*H-g*P)),h[2]=d*(T*D-C*F)-A*(y*D-g*F)+B*(y*C-g*T),h[3]=-(d*(T*H-C*P)-A*(y*H-g*P)+L*(y*C-g*T)),h[4]=-(b*(P*D-H*F)-O*(T*D-C*F)+G*(T*H-C*P)),h[5]=l*(P*D-H*F)-O*(y*D-g*F)+G*(y*H-g*P),h[6]=-(l*(T*D-C*F)-b*(y*D-g*F)+G*(y*C-g*T)),h[7]=l*(T*H-C*P)-b*(y*H-g*P)+O*(y*C-g*T),h[8]=b*(L*D-H*B)-O*(A*D-C*B)+G*(A*H-C*L),h[9]=-(l*(L*D-H*B)-O*(d*D-g*B)+G*(d*H-g*L)),h[10]=l*(A*D-C*B)-b*(d*D-g*B)+G*(d*C-g*A),h[11]=-(l*(A*H-C*L)-b*(d*H-g*L)+O*(d*C-g*A)),h[12]=-(b*(L*F-P*B)-O*(A*F-T*B)+G*(A*P-T*L)),h[13]=l*(L*F-P*B)-O*(d*F-y*B)+G*(d*P-y*L),h[14]=-(l*(A*F-T*B)-b*(d*F-y*B)+G*(d*T-y*A)),h[15]=l*(A*P-T*L)-b*(d*P-y*L)+O*(d*T-y*A),this},determinant:function(){var h=this.val,l=h[0],d=h[1],y=h[2],g=h[3],b=h[4],A=h[5],T=h[6],C=h[7],O=h[8],L=h[9],P=h[10],H=h[11],G=h[12],B=h[13],F=h[14],D=h[15];return(l*A-d*b)*(P*D-H*F)-(l*T-y*b)*(L*D-H*B)+(l*C-g*b)*(L*F-P*B)+(d*T-y*A)*(O*D-H*G)-(d*C-g*A)*(O*F-P*G)+(y*C-g*T)*(O*B-L*G)},multiply:function(h){var l=this.val,d=l[0],y=l[1],g=l[2],b=l[3],A=l[4],T=l[5],C=l[6],O=l[7],L=l[8],P=l[9],H=l[10],G=l[11],B=l[12],F=l[13],D=l[14],V=l[15],z=h.val,Y=z[0],j=z[1],X=z[2],J=z[3];return l[0]=Y*d+j*A+X*L+J*B,l[1]=Y*y+j*T+X*P+J*F,l[2]=Y*g+j*C+X*H+J*D,l[3]=Y*b+j*O+X*G+J*V,Y=z[4],j=z[5],X=z[6],J=z[7],l[4]=Y*d+j*A+X*L+J*B,l[5]=Y*y+j*T+X*P+J*F,l[6]=Y*g+j*C+X*H+J*D,l[7]=Y*b+j*O+X*G+J*V,Y=z[8],j=z[9],X=z[10],J=z[11],l[8]=Y*d+j*A+X*L+J*B,l[9]=Y*y+j*T+X*P+J*F,l[10]=Y*g+j*C+X*H+J*D,l[11]=Y*b+j*O+X*G+J*V,Y=z[12],j=z[13],X=z[14],J=z[15],l[12]=Y*d+j*A+X*L+J*B,l[13]=Y*y+j*T+X*P+J*F,l[14]=Y*g+j*C+X*H+J*D,l[15]=Y*b+j*O+X*G+J*V,this},multiplyLocal:function(h){var l=[],d=this.val,y=h.val;return l[0]=d[0]*y[0]+d[1]*y[4]+d[2]*y[8]+d[3]*y[12],l[1]=d[0]*y[1]+d[1]*y[5]+d[2]*y[9]+d[3]*y[13],l[2]=d[0]*y[2]+d[1]*y[6]+d[2]*y[10]+d[3]*y[14],l[3]=d[0]*y[3]+d[1]*y[7]+d[2]*y[11]+d[3]*y[15],l[4]=d[4]*y[0]+d[5]*y[4]+d[6]*y[8]+d[7]*y[12],l[5]=d[4]*y[1]+d[5]*y[5]+d[6]*y[9]+d[7]*y[13],l[6]=d[4]*y[2]+d[5]*y[6]+d[6]*y[10]+d[7]*y[14],l[7]=d[4]*y[3]+d[5]*y[7]+d[6]*y[11]+d[7]*y[15],l[8]=d[8]*y[0]+d[9]*y[4]+d[10]*y[8]+d[11]*y[12],l[9]=d[8]*y[1]+d[9]*y[5]+d[10]*y[9]+d[11]*y[13],l[10]=d[8]*y[2]+d[9]*y[6]+d[10]*y[10]+d[11]*y[14],l[11]=d[8]*y[3]+d[9]*y[7]+d[10]*y[11]+d[11]*y[15],l[12]=d[12]*y[0]+d[13]*y[4]+d[14]*y[8]+d[15]*y[12],l[13]=d[12]*y[1]+d[13]*y[5]+d[14]*y[9]+d[15]*y[13],l[14]=d[12]*y[2]+d[13]*y[6]+d[14]*y[10]+d[15]*y[14],l[15]=d[12]*y[3]+d[13]*y[7]+d[14]*y[11]+d[15]*y[15],this.fromArray(l)},translate:function(h){var l=h.x,d=h.y,y=h.z,g=this.val;return g[12]=g[0]*l+g[4]*d+g[8]*y+g[12],g[13]=g[1]*l+g[5]*d+g[9]*y+g[13],g[14]=g[2]*l+g[6]*d+g[10]*y+g[14],g[15]=g[3]*l+g[7]*d+g[11]*y+g[15],this},translateXYZ:function(h,l,d){var y=this.val;return y[12]=y[0]*h+y[4]*l+y[8]*d+y[12],y[13]=y[1]*h+y[5]*l+y[9]*d+y[13],y[14]=y[2]*h+y[6]*l+y[10]*d+y[14],y[15]=y[3]*h+y[7]*l+y[11]*d+y[15],this},scale:function(h){var l=h.x,d=h.y,y=h.z,g=this.val;return g[0]=g[0]*l,g[1]=g[1]*l,g[2]=g[2]*l,g[3]=g[3]*l,g[4]=g[4]*d,g[5]=g[5]*d,g[6]=g[6]*d,g[7]=g[7]*d,g[8]=g[8]*y,g[9]=g[9]*y,g[10]=g[10]*y,g[11]=g[11]*y,this},scaleXYZ:function(h,l,d){var y=this.val;return y[0]=y[0]*h,y[1]=y[1]*h,y[2]=y[2]*h,y[3]=y[3]*h,y[4]=y[4]*l,y[5]=y[5]*l,y[6]=y[6]*l,y[7]=y[7]*l,y[8]=y[8]*d,y[9]=y[9]*d,y[10]=y[10]*d,y[11]=y[11]*d,this},makeRotationAxis:function(h,l){var d=Math.cos(l),y=Math.sin(l),g=1-d,b=h.x,A=h.y,T=h.z,C=g*b,O=g*A;return this.fromArray([C*b+d,C*A-y*T,C*T+y*A,0,C*A+y*T,O*A+d,O*T-y*b,0,C*T-y*A,O*T+y*b,g*T*T+d,0,0,0,0,1]),this},rotate:function(h,l){var d=this.val,y=l.x,g=l.y,b=l.z,A=Math.sqrt(y*y+g*g+b*b);if(Math.abs(A)<1e-6)return null;y*=A=1/A,g*=A,b*=A;var T=Math.sin(h),C=Math.cos(h),O=1-C,L=d[0],P=d[1],H=d[2],G=d[3],B=d[4],F=d[5],D=d[6],V=d[7],z=d[8],Y=d[9],j=d[10],X=d[11],J=y*y*O+C,Q=g*y*O+b*T,se=b*y*O-g*T,te=y*g*O-b*T,ie=g*g*O+C,re=b*g*O+y*T,he=y*b*O+g*T,de=g*b*O-y*T,ue=b*b*O+C;return d[0]=L*J+B*Q+z*se,d[1]=P*J+F*Q+Y*se,d[2]=H*J+D*Q+j*se,d[3]=G*J+V*Q+X*se,d[4]=L*te+B*ie+z*re,d[5]=P*te+F*ie+Y*re,d[6]=H*te+D*ie+j*re,d[7]=G*te+V*ie+X*re,d[8]=L*he+B*de+z*ue,d[9]=P*he+F*de+Y*ue,d[10]=H*he+D*de+j*ue,d[11]=G*he+V*de+X*ue,this},rotateX:function(h){var l=this.val,d=Math.sin(h),y=Math.cos(h),g=l[4],b=l[5],A=l[6],T=l[7],C=l[8],O=l[9],L=l[10],P=l[11];return l[4]=g*y+C*d,l[5]=b*y+O*d,l[6]=A*y+L*d,l[7]=T*y+P*d,l[8]=C*y-g*d,l[9]=O*y-b*d,l[10]=L*y-A*d,l[11]=P*y-T*d,this},rotateY:function(h){var l=this.val,d=Math.sin(h),y=Math.cos(h),g=l[0],b=l[1],A=l[2],T=l[3],C=l[8],O=l[9],L=l[10],P=l[11];return l[0]=g*y-C*d,l[1]=b*y-O*d,l[2]=A*y-L*d,l[3]=T*y-P*d,l[8]=g*d+C*y,l[9]=b*d+O*y,l[10]=A*d+L*y,l[11]=T*d+P*y,this},rotateZ:function(h){var l=this.val,d=Math.sin(h),y=Math.cos(h),g=l[0],b=l[1],A=l[2],T=l[3],C=l[4],O=l[5],L=l[6],P=l[7];return l[0]=g*y+C*d,l[1]=b*y+O*d,l[2]=A*y+L*d,l[3]=T*y+P*d,l[4]=C*y-g*d,l[5]=O*y-b*d,l[6]=L*y-A*d,l[7]=P*y-T*d,this},fromRotationTranslation:function(h,l){var d=this.val,y=h.x,g=h.y,b=h.z,A=h.w,T=y+y,C=g+g,O=b+b,L=y*T,P=y*C,H=y*O,G=g*C,B=g*O,F=b*O,D=A*T,V=A*C,z=A*O;return d[0]=1-(G+F),d[1]=P+z,d[2]=H-V,d[3]=0,d[4]=P-z,d[5]=1-(L+F),d[6]=B+D,d[7]=0,d[8]=H+V,d[9]=B-D,d[10]=1-(L+G),d[11]=0,d[12]=l.x,d[13]=l.y,d[14]=l.z,d[15]=1,this},fromQuat:function(h){var l=this.val,d=h.x,y=h.y,g=h.z,b=h.w,A=d+d,T=y+y,C=g+g,O=d*A,L=d*T,P=d*C,H=y*T,G=y*C,B=g*C,F=b*A,D=b*T,V=b*C;return l[0]=1-(H+B),l[1]=L+V,l[2]=P-D,l[3]=0,l[4]=L-V,l[5]=1-(O+B),l[6]=G+F,l[7]=0,l[8]=P+D,l[9]=G-F,l[10]=1-(O+H),l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this},frustum:function(h,l,d,y,g,b){var A=this.val,T=1/(l-h),C=1/(y-d),O=1/(g-b);return A[0]=2*g*T,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=2*g*C,A[6]=0,A[7]=0,A[8]=(l+h)*T,A[9]=(y+d)*C,A[10]=(b+g)*O,A[11]=-1,A[12]=0,A[13]=0,A[14]=b*g*2*O,A[15]=0,this},perspective:function(h,l,d,y){var g=this.val,b=1/Math.tan(h/2),A=1/(d-y);return g[0]=b/l,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=b,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=(y+d)*A,g[11]=-1,g[12]=0,g[13]=0,g[14]=2*y*d*A,g[15]=0,this},perspectiveLH:function(h,l,d,y){var g=this.val;return g[0]=2*d/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*d/l,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=-y/(d-y),g[11]=1,g[12]=0,g[13]=0,g[14]=d*y/(d-y),g[15]=0,this},ortho:function(h,l,d,y,g,b){var A=this.val,T=(T=h-l)===0?T:1/T,C=(C=d-y)===0?C:1/C,O=(O=g-b)===0?O:1/O;return A[0]=-2*T,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*C,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*O,A[11]=0,A[12]=(h+l)*T,A[13]=(y+d)*C,A[14]=(b+g)*O,A[15]=1,this},lookAt:function(h,l,d){var y=this.val,g=h.x,b=h.y,A=h.z,T=d.x,C=d.y,O=d.z,L=l.x,P=l.y,H=l.z;if(Math.abs(g-L)<1e-6&&Math.abs(b-P)<1e-6&&Math.abs(A-H)<1e-6)return this.identity();var G=g-L,B=b-P,F=A-H,D=1/Math.sqrt(G*G+B*B+F*F),V=C*(F*=D)-O*(B*=D),z=O*(G*=D)-T*F,Y=T*B-C*G;(D=Math.sqrt(V*V+z*z+Y*Y))?(V*=D=1/D,z*=D,Y*=D):Y=z=V=0;var j=B*Y-F*z,X=F*V-G*Y,J=G*z-B*V;return(D=Math.sqrt(j*j+X*X+J*J))?(j*=D=1/D,X*=D,J*=D):J=X=j=0,y[0]=V,y[1]=j,y[2]=G,y[3]=0,y[4]=z,y[5]=X,y[6]=B,y[7]=0,y[8]=Y,y[9]=J,y[10]=F,y[11]=0,y[12]=-(V*g+z*b+Y*A),y[13]=-(j*g+X*b+J*A),y[14]=-(G*g+B*b+F*A),y[15]=1,this},yawPitchRoll:function(h,l,d){this.zero(),c.zero(),p.zero();var y=this.val,g=c.val,b=p.val,A=Math.sin(d),T=Math.cos(d);return y[10]=1,y[15]=1,y[0]=T,y[1]=A,y[4]=-A,y[5]=T,A=Math.sin(l),T=Math.cos(l),g[0]=1,g[15]=1,g[5]=T,g[10]=T,g[9]=-A,g[6]=A,A=Math.sin(h),T=Math.cos(h),b[5]=1,b[15]=1,b[0]=T,b[2]=-A,b[8]=A,b[10]=T,this.multiplyLocal(c),this.multiplyLocal(p),this},setWorldMatrix:function(h,l,d,y,g){return this.yawPitchRoll(h.y,h.x,h.z),c.scaling(d.x,d.y,d.z),p.xyz(l.x,l.y,l.z),this.multiplyLocal(c),this.multiplyLocal(p),y!==void 0&&this.multiplyLocal(y),g!==void 0&&this.multiplyLocal(g),this}}),c=new u,p=new u;x.exports=u},function(x,N,r){var m=r(0),u=r(122),c=r(240),p=new Int8Array([1,2,0]),h=new Float32Array([0,0,0]),l=new u(1,0,0),d=new u(0,1,0),y=new u,g=new c,b=new m({initialize:function(A,T,C,O){typeof A=="object"?(this.x=A.x||0,this.y=A.y||0,this.z=A.z||0,this.w=A.w||0):(this.x=A||0,this.y=T||0,this.z=C||0,this.w=O||0)},copy:function(A){return this.x=A.x,this.y=A.y,this.z=A.z,this.w=A.w,this},set:function(A,T,C,O){return typeof A=="object"?(this.x=A.x||0,this.y=A.y||0,this.z=A.z||0,this.w=A.w||0):(this.x=A||0,this.y=T||0,this.z=C||0,this.w=O||0),this},add:function(A){return this.x+=A.x,this.y+=A.y,this.z+=A.z,this.w+=A.w,this},subtract:function(A){return this.x-=A.x,this.y-=A.y,this.z-=A.z,this.w-=A.w,this},scale:function(A){return this.x*=A,this.y*=A,this.z*=A,this.w*=A,this},length:function(){var A=this.x,T=this.y,C=this.z,O=this.w;return Math.sqrt(A*A+T*T+C*C+O*O)},lengthSq:function(){var A=this.x,T=this.y,C=this.z,O=this.w;return A*A+T*T+C*C+O*O},normalize:function(){var A=this.x,T=this.y,C=this.z,O=this.w,L=A*A+T*T+C*C+O*O;return 0<L&&(L=1/Math.sqrt(L),this.x=A*L,this.y=T*L,this.z=C*L,this.w=O*L),this},dot:function(A){return this.x*A.x+this.y*A.y+this.z*A.z+this.w*A.w},lerp:function(A,T){T===void 0&&(T=0);var C=this.x,O=this.y,L=this.z,P=this.w;return this.x=C+T*(A.x-C),this.y=O+T*(A.y-O),this.z=L+T*(A.z-L),this.w=P+T*(A.w-P),this},rotationTo:function(A,T){var C=A.x*T.x+A.y*T.y+A.z*T.z;return C<-.999999?(y.copy(l).cross(A).length()<1e-6&&y.copy(d).cross(A),y.normalize(),this.setAxisAngle(y,Math.PI)):.999999<C?(this.x=0,this.y=0,this.z=0,this.w=1,this):(y.copy(A).cross(T),this.x=y.x,this.y=y.y,this.z=y.z,this.w=1+C,this.normalize())},setAxes:function(A,T,C){var O=g.val;return O[0]=T.x,O[3]=T.y,O[6]=T.z,O[1]=C.x,O[4]=C.y,O[7]=C.z,O[2]=-A.x,O[5]=-A.y,O[8]=-A.z,this.fromMat3(g).normalize()},identity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},setAxisAngle:function(A,T){T*=.5;var C=Math.sin(T);return this.x=C*A.x,this.y=C*A.y,this.z=C*A.z,this.w=Math.cos(T),this},multiply:function(A){var T=this.x,C=this.y,O=this.z,L=this.w,P=A.x,H=A.y,G=A.z,B=A.w;return this.x=T*B+L*P+C*G-O*H,this.y=C*B+L*H+O*P-T*G,this.z=O*B+L*G+T*H-C*P,this.w=L*B-T*P-C*H-O*G,this},slerp:function(A,T){var C=this.x,O=this.y,L=this.z,P=this.w,H=A.x,G=A.y,B=A.z,F=A.w,D=C*H+O*G+L*B+P*F;D<0&&(D=-D,H=-H,G=-G,B=-B,F=-F);var V,z,Y=1-T,j=T;return 1e-6<1-D&&(V=Math.acos(D),z=Math.sin(V),Y=Math.sin((1-T)*V)/z,j=Math.sin(T*V)/z),this.x=Y*C+j*H,this.y=Y*O+j*G,this.z=Y*L+j*B,this.w=Y*P+j*F,this},invert:function(){var A=this.x,T=this.y,C=this.z,O=this.w,L=A*A+T*T+C*C+O*O,P=L?1/L:0;return this.x=-A*P,this.y=-T*P,this.z=-C*P,this.w=O*P,this},conjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},rotateX:function(A){A*=.5;var T=this.x,C=this.y,O=this.z,L=this.w,P=Math.sin(A),H=Math.cos(A);return this.x=T*H+L*P,this.y=C*H+O*P,this.z=O*H-C*P,this.w=L*H-T*P,this},rotateY:function(A){A*=.5;var T=this.x,C=this.y,O=this.z,L=this.w,P=Math.sin(A),H=Math.cos(A);return this.x=T*H-O*P,this.y=C*H+L*P,this.z=O*H+T*P,this.w=L*H-C*P,this},rotateZ:function(A){A*=.5;var T=this.x,C=this.y,O=this.z,L=this.w,P=Math.sin(A),H=Math.cos(A);return this.x=T*H+C*P,this.y=C*H-T*P,this.z=O*H+L*P,this.w=L*H-O*P,this},calculateW:function(){var A=this.x,T=this.y,C=this.z;return this.w=-Math.sqrt(1-A*A-T*T-C*C),this},fromMat3:function(A){var T,C,O,L,P=A.val,H=P[0]+P[4]+P[8];return 0<H?(L=Math.sqrt(H+1),this.w=.5*L,L=.5/L,this.x=(P[7]-P[5])*L,this.y=(P[2]-P[6])*L,this.z=(P[3]-P[1])*L):(T=0,P[4]>P[0]&&(T=1),P[8]>P[3*T+T]&&(T=2),C=p[T],O=p[C],L=Math.sqrt(P[3*T+T]-P[3*C+C]-P[3*O+O]+1),h[T]=.5*L,L=.5/L,h[C]=(P[3*C+T]+P[3*T+C])*L,h[O]=(P[3*O+T]+P[3*T+O])*L,this.x=h[0],this.y=h[1],this.z=h[2],this.w=(P[3*O+C]-P[3*C+O])*L),this}});x.exports=b},function(x,N,r){var m=r(363),u=r(23),c=r(29),p=r(120);x.exports=function(h){var l=h.config;if((l.customEnvironment||l.canvas)&&l.renderType===c.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!l.customEnvironment&&!l.canvas&&l.renderType!==c.HEADLESS)if(l.renderType===c.CANVAS||l.renderType!==c.CANVAS&&!p.webGL){if(!p.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");l.renderType=c.CANVAS}else l.renderType=c.WEBGL;l.antialias||u.disableSmoothing();var d,y,g=h.scale.baseSize,b=g.width,A=g.height;l.canvas?(h.canvas=l.canvas,h.canvas.width=b,h.canvas.height=A):h.canvas=u.create(h,b,A,l.renderType),l.canvasStyle&&(h.canvas.style=l.canvasStyle),l.antialias||m.setCrisp(h.canvas),l.renderType!==c.HEADLESS&&(d=r(364),y=r(367),l.renderType===c.WEBGL?h.renderer=new y(h):(h.renderer=new d(h),h.context=h.renderer.gameContext))}},function(x,N){x.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.rgb * outTint.a, outTint.a);","    vec4 color = texture;","","    if (outTintEffect == 0.0)","    {","        //  Multiply texture tint","        color = texture * texel;","    }","    else if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.rgb * outTint.a, texture.a);","        color.a = texture.a * texel.a;","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(x,N){x.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform mat4 uModelMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}","",""].join(`
`)},function(x,N,r){var m=r(29);x.exports=function(u){var c,p,h,l,d,y,g,b=u.config;b.hideBanner||(c="WebGL",b.renderType===m.CANVAS?c="Canvas":b.renderType===m.HEADLESS&&(c="Headless"),p=b.audio,g=!(h=u.device.audio).webAudio||p&&p.disableWebAudio?p&&p.noAudio||!h.webAudio&&!h.audioData?"No Audio":"HTML5 Audio":"Web Audio",u.device.browser.ie?window.console&&console.log("Phaser v"+m.VERSION+" / https://phaser.io"):(d=[l=""],Array.isArray(b.bannerBackgroundColor)?(b.bannerBackgroundColor.forEach(function(A){l=l.concat("%c "),d.push("background: "+A),y=A}),d[d.length-1]="color: "+b.bannerTextColor+"; background: "+y):(l=l.concat("%c "),d.push("color: "+b.bannerTextColor+"; background: "+b.bannerBackgroundColor)),d.push("background: #fff"),b.gameTitle&&(l=l.concat(b.gameTitle),b.gameVersion&&(l=l.concat(" v"+b.gameVersion)),b.hidePhaser||(l=l.concat(" / "))),b.hidePhaser||(l=l.concat("Phaser v"+m.VERSION+" ("+c+" | "+g+")")),l=l.concat(" %c "+b.gameURL),d[0]=l,console.log.apply(console,d)))}},function(x,N,r){var m=r(0),u=r(5),c=r(1),p=r(248),h=new m({initialize:function(l,d){this.game=l,this.raf=new p,this.started=!1,this.running=!1,this.minFps=u(d,"min",5),this.targetFps=u(d,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=c,this.forceSetTimeOut=u(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=u(d,"deltaHistory",10),this.panicMax=u(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=u(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var l=window.performance.now();this.time=l,this.lastTime=l,this.nextFpsUpdate=l+1e3;for(var d=this.framesThisSecond=0;d<this.deltaSmoothingMax;d++)this.deltaHistory[d]=Math.min(this._target,this.deltaHistory[d]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(l){if(this.started)return this;this.started=!0,this.running=!0;for(var d=0;d<this.deltaSmoothingMax;d++)this.deltaHistory[d]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=l,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var l=window.performance.now(),d=(this.now=l)-this.lastTime;d<0&&(d=0),this.rawDelta=d;var y=this.deltaIndex,g=this.deltaHistory,b=this.deltaSmoothingMax,A=d,T=d;if(this.smoothStep){(0<this._coolDown||!this.inFocus)&&(this._coolDown--,A=Math.min(A,this._target)),A>this._min&&(A=g[y],A=Math.min(A,this._min)),g[y]=A,this.deltaIndex++,this.deltaIndex>b&&(this.deltaIndex=0);for(var C=T=0;C<b;C++)T+=g[C];T/=b}this.delta=T,this.time+=this.rawDelta,l>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0),this.framesThisSecond++;var O=T/this._target;this.callback(l,T,O),this.lastTime=l,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(l){this.running||(l&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=c,this.raf=null,this.game=null}});x.exports=h},function(x,N,r){var m=r(0),u=r(1),c=new m({initialize:function(){this.isRunning=!1,this.callback=u,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var p=this;this.step=function h(){var l=window.performance.now();p.lastTime=p.tick,p.tick=l,p.callback(l),p.timeOutID=window.requestAnimationFrame(h)},this.stepTimeout=function h(){var l=Date.now(),d=Math.min(Math.max(2*p.target+p.tick-l,0),p.target);p.lastTime=p.tick,p.tick=l,p.callback(l),p.timeOutID=window.setTimeout(h,d)}},start:function(p,h,l){this.isRunning||(this.callback=p,this.isSetTimeOut=h,this.target=l,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=u}});x.exports=c},function(x,N,r){var m=r(15);x.exports=function(u){var c,p=u.events;document.hidden!==void 0?c="visibilitychange":["webkit","moz","ms"].forEach(function(h){document[h+"Hidden"]!==void 0&&(document.hidden=function(){return document[h+"Hidden"]},c=h+"visibilitychange")}),c&&document.addEventListener(c,function(h){document.hidden||h.type==="pause"?p.emit(m.HIDDEN):p.emit(m.VISIBLE)},!1),window.onblur=function(){p.emit(m.BLUR)},window.onfocus=function(){p.emit(m.FOCUS)},window.focus&&u.config.autoFocus&&window.focus()}},function(x,N,r){var m=r(0),u=r(234),c=r(48),p=r(4),h=new m({Extends:c,initialize:function(l,d,y,g){c.call(this,"CubicBezierCurve"),Array.isArray(l)&&(g=new p(l[6],l[7]),y=new p(l[4],l[5]),d=new p(l[2],l[3]),l=new p(l[0],l[1])),this.p0=l,this.p1=d,this.p2=y,this.p3=g},getStartPoint:function(l){return l===void 0&&(l=new p),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,d){d===void 0&&(d=new p);var y=this.p0,g=this.p1,b=this.p2,A=this.p3;return d.set(u(l,y.x,g.x,b.x,A.x),u(l,y.y,g.y,b.y,A.y))},draw:function(l,d){d===void 0&&(d=32);var y=this.getPoints(d);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var g=1;g<y.length;g++)l.lineTo(y[g].x,y[g].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(l){var d=l.points,y=new p(d[0],d[1]),g=new p(d[2],d[3]),b=new p(d[4],d[5]),A=new p(d[6],d[7]);return new h(y,g,b,A)},x.exports=h},function(x,N,r){var m=r(0),u=r(48),c=r(32),p=r(5),h=r(167),l=r(4),d=new m({Extends:u,initialize:function(y,g,b,A,T,C,O,L){var P;typeof y=="object"?(y=p(P=y,"x",0),g=p(P,"y",0),b=p(P,"xRadius",0),A=p(P,"yRadius",b),T=p(P,"startAngle",0),C=p(P,"endAngle",360),O=p(P,"clockwise",!1),L=p(P,"rotation",0)):(A===void 0&&(A=b),T===void 0&&(T=0),C===void 0&&(C=360),O===void 0&&(O=!1),L===void 0&&(L=0)),u.call(this,"EllipseCurve"),this.p0=new l(y,g),this._xRadius=b,this._yRadius=A,this._startAngle=c(T),this._endAngle=c(C),this._clockwise=O,this._rotation=c(L)},getStartPoint:function(y){return y===void 0&&(y=new l),this.getPoint(0,y)},getResolution:function(y){return 2*y},getPoint:function(y,g){g===void 0&&(g=new l);for(var b=2*Math.PI,A=this._endAngle-this._startAngle,T=Math.abs(A)<Number.EPSILON;A<0;)A+=b;for(;b<A;)A-=b;A<Number.EPSILON&&(A=T?0:b),this._clockwise&&!T&&(A===b?A=-b:A-=b);var C,O,L,P,H=this._startAngle+y*A,G=this.p0.x+this._xRadius*Math.cos(H),B=this.p0.y+this._yRadius*Math.sin(H);return this._rotation!==0&&(C=Math.cos(this._rotation),O=Math.sin(this._rotation),G=(L=G-this.p0.x)*C-(P=B-this.p0.y)*O+this.p0.x,B=L*O+P*C+this.p0.y),g.set(G,B)},setXRadius:function(y){return this.xRadius=y,this},setYRadius:function(y){return this.yRadius=y,this},setWidth:function(y){return this.xRadius=y/2,this},setHeight:function(y){return this.yRadius=y/2,this},setStartAngle:function(y){return this.startAngle=y,this},setEndAngle:function(y){return this.endAngle=y,this},setClockwise:function(y){return this.clockwise=y,this},setRotation:function(y){return this.rotation=y,this},x:{get:function(){return this.p0.x},set:function(y){this.p0.x=y}},y:{get:function(){return this.p0.y},set:function(y){this.p0.y=y}},xRadius:{get:function(){return this._xRadius},set:function(y){this._xRadius=y}},yRadius:{get:function(){return this._yRadius},set:function(y){this._yRadius=y}},startAngle:{get:function(){return h(this._startAngle)},set:function(y){this._startAngle=c(y)}},endAngle:{get:function(){return h(this._endAngle)},set:function(y){this._endAngle=c(y)}},clockwise:{get:function(){return this._clockwise},set:function(y){this._clockwise=y}},angle:{get:function(){return h(this._rotation)},set:function(y){this._rotation=c(y)}},rotation:{get:function(){return this._rotation},set:function(y){this._rotation=y}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});d.fromJSON=function(y){return new d(y)},x.exports=d},function(x,N,r){var m=r(0),u=r(48),c=r(123),p=r(8),h=r(4),l=new h,d=new m({Extends:u,initialize:function(y,g){u.call(this,"LineCurve"),Array.isArray(y)&&(g=new h(y[2],y[3]),y=new h(y[0],y[1])),this.p0=y,this.p1=g,this.arcLengthDivisions=1},getBounds:function(y){return y===void 0&&(y=new p),c([this.p0,this.p1],y)},getStartPoint:function(y){return y===void 0&&(y=new h),y.copy(this.p0)},getResolution:function(y){return y===void 0&&(y=1),y},getPoint:function(y,g){return g===void 0&&(g=new h),y===1?g.copy(this.p1):(g.copy(this.p1).subtract(this.p0).scale(y).add(this.p0),g)},getPointAt:function(y,g){return this.getPoint(y,g)},getTangent:function(){return l.copy(this.p1).subtract(this.p0).normalize()},getUtoTmapping:function(y,g,b){var A,T;return g?(T=(A=this.getLengths(b))[A.length-1],Math.min(g,T)/T):y},draw:function(y){return y.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),y},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});d.fromJSON=function(y){var g=y.points,b=new h(g[0],g[1]),A=new h(g[2],g[3]);return new d(b,A)},x.exports=d},function(x,N,r){var m=r(0),u=r(48),c=r(235),p=r(4),h=new m({Extends:u,initialize:function(l,d,y){u.call(this,"QuadraticBezier"),Array.isArray(l)&&(y=new p(l[4],l[5]),d=new p(l[2],l[3]),l=new p(l[0],l[1])),this.p0=l,this.p1=d,this.p2=y},getStartPoint:function(l){return l===void 0&&(l=new p),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,d){d===void 0&&(d=new p);var y=this.p0,g=this.p1,b=this.p2;return d.set(c(l,y.x,g.x,b.x),c(l,y.y,g.y,b.y))},draw:function(l,d){d===void 0&&(d=32);var y=this.getPoints(d);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var g=1;g<y.length;g++)l.lineTo(y[g].x,y[g].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(l){var d=l.points,y=new p(d[0],d[1]),g=new p(d[2],d[3]),b=new p(d[4],d[5]);return new h(y,g,b)},x.exports=h},function(x,N,r){var m=r(121),u=r(0),c=r(48),p=r(4),h=new u({Extends:c,initialize:function(l){l===void 0&&(l=[]),c.call(this,"SplineCurve"),this.points=[],this.addPoints(l)},addPoints:function(l){for(var d=0;d<l.length;d++){var y=new p;typeof l[d]=="number"?(y.x=l[d],y.y=l[d+1],d++):Array.isArray(l[d])?(y.x=l[d][0],y.y=l[d][1]):(y.x=l[d].x,y.y=l[d].y),this.points.push(y)}return this},addPoint:function(l,d){var y=new p(l,d);return this.points.push(y),y},getStartPoint:function(l){return l===void 0&&(l=new p),l.copy(this.points[0])},getResolution:function(l){return l*this.points.length},getPoint:function(l,d){d===void 0&&(d=new p);var y=this.points,g=(y.length-1)*l,b=Math.floor(g),A=g-b,T=y[b===0?b:b-1],C=y[b],O=y[b>y.length-2?y.length-1:b+1],L=y[b>y.length-3?y.length-1:b+2];return d.set(m(A,T.x,C.x,O.x,L.x),m(A,T.y,C.y,O.y,L.y))},toJSON:function(){for(var l=[],d=0;d<this.points.length;d++)l.push(this.points[d].x),l.push(this.points[d].y);return{type:this.type,points:l}}});h.fromJSON=function(l){return new h(l.points)},x.exports=h},function(x,N,r){x.exports={CHANGE_DATA:r(606),CHANGE_DATA_KEY:r(607),REMOVE_DATA:r(608),SET_DATA:r(609)}},function(x,N,r){var m=r(81);x.exports=function(u){var c;document.readyState!=="complete"&&document.readyState!=="interactive"?(c=function(){document.removeEventListener("deviceready",c,!0),document.removeEventListener("DOMContentLoaded",c,!0),window.removeEventListener("load",c,!0),u()},document.body?m.cordova?document.addEventListener("deviceready",c,!1):(document.addEventListener("DOMContentLoaded",c,!0),window.addEventListener("load",c,!0)):window.setTimeout(c,20)):u()}},function(x,N,r){var m=r(124);x.exports=function(u,c){var p=window.screen,h=!!p&&(p.orientation||p.mozOrientation||p.msOrientation);if(h&&typeof h.type=="string")return h.type;if(typeof h=="string")return h;if(p)return p.height>p.width?m.ORIENTATION.PORTRAIT:m.ORIENTATION.LANDSCAPE;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?m.ORIENTATION.PORTRAIT:m.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return m.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return m.ORIENTATION.LANDSCAPE}return u<c?m.ORIENTATION.PORTRAIT:m.ORIENTATION.LANDSCAPE}},function(x,N){x.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(x,N){x.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(x,N){x.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(x,N){x.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(x,N){x.exports=function(r){var m;return r!==""&&(typeof r=="string"?m=document.getElementById(r):r&&r.nodeType===1&&(m=r)),m=m||document.body}},function(x,N){x.exports=function(r){var m="";try{window.DOMParser?m=new DOMParser().parseFromString(r,"text/xml"):(m=new ActiveXObject("Microsoft.XMLDOM")).loadXML(r)}catch(u){m=null}return m&&m.documentElement&&!m.getElementsByTagName("parsererror").length?m:null}},function(x,N){x.exports=function(r){r.parentNode&&r.parentNode.removeChild(r)}},function(x,N,r){var m=r(0),u=r(125),c=r(7),p=r(35),h=r(15),l=r(266),d=r(267),y=r(268),g=r(269),b=r(25),A=r(239),T=new m({initialize:function(C,O){this.game=C,this.scaleManager,this.canvas,this.config=O,this.enabled=!0,this.events=new c,this.isOver=!0,this.defaultCursor="",this.keyboard=O.inputKeyboard?new l(this):null,this.mouse=O.inputMouse?new d(this):null,this.touch=O.inputTouch?new g(this):null,this.pointers=[],this.pointersTotal=O.inputActivePointers,O.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var L=0;L<=this.pointersTotal;L++){var P=new y(this,L);P.smoothFactor=O.inputSmoothFactor,this.pointers.push(P)}this.mousePointer=O.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new b,this._tempMatrix2=new b,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],C.events.once(h.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(p.MANAGER_BOOT),this.game.events.on(h.PRE_RENDER,this.preRender,this),this.game.events.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(C){this.isOver=!0,this.events.emit(p.GAME_OVER,C)},setCanvasOut:function(C){this.isOver=!1,this.events.emit(p.GAME_OUT,C)},preRender:function(){var C=this.game.loop.now,O=this.game.loop.delta,L=this.game.scene.getScenes(!0,!0);this.time=C,this.events.emit(p.MANAGER_UPDATE);for(var P=0;P<L.length;P++){var H=L[P];if(H.sys.input&&H.sys.input.updatePoll(C,O)&&this.globalTopOnly)return}},setDefaultCursor:function(C){this.defaultCursor=C,this.canvas.style.cursor!==C&&(this.canvas.style.cursor=C)},setCursor:function(C){C.cursor&&(this.canvas.style.cursor=C.cursor)},resetCursor:function(C){C.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(C){C===void 0&&(C=1);var O=[];10<this.pointersTotal+C&&(C=10-this.pointersTotal);for(var L=0;L<C;L++){var P=this.pointers.length,H=new y(this,P);H.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(H),this.pointersTotal++,O.push(H)}return O},updateInputPlugins:function(C,O){var L=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var P=0;P<L.length;P++){var H=L[P];if(H.sys.input&&(H.sys.input.update(C,O)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(C){for(var O=this.pointers,L=[],P=0;P<C.changedTouches.length;P++)for(var H=C.changedTouches[P],G=1;G<this.pointersTotal;G++){var B=O[G];if(!B.active){B.touchstart(H,C),this.activePointer=B,L.push(B);break}}this.updateInputPlugins(u.TOUCH_START,L)},onTouchMove:function(C){for(var O=this.pointers,L=[],P=0;P<C.changedTouches.length;P++)for(var H=C.changedTouches[P],G=1;G<this.pointersTotal;G++){var B=O[G];if(B.active&&B.identifier===H.identifier){B.touchmove(H,C),this.activePointer=B,L.push(B);break}}this.updateInputPlugins(u.TOUCH_MOVE,L)},onTouchEnd:function(C){for(var O=this.pointers,L=[],P=0;P<C.changedTouches.length;P++)for(var H=C.changedTouches[P],G=1;G<this.pointersTotal;G++){var B=O[G];if(B.active&&B.identifier===H.identifier){B.touchend(H,C),L.push(B);break}}this.updateInputPlugins(u.TOUCH_END,L)},onTouchCancel:function(C){for(var O=this.pointers,L=[],P=0;P<C.changedTouches.length;P++)for(var H=C.changedTouches[P],G=1;G<this.pointersTotal;G++){var B=O[G];if(B.active&&B.identifier===H.identifier){B.touchcancel(H,C),L.push(B);break}}this.updateInputPlugins(u.TOUCH_CANCEL,L)},onMouseDown:function(C){this.mousePointer.down(C),this.mousePointer.updateMotion(),this.updateInputPlugins(u.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(C){this.mousePointer.move(C),this.mousePointer.updateMotion(),this.updateInputPlugins(u.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(C){this.mousePointer.up(C),this.mousePointer.updateMotion(),this.updateInputPlugins(u.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(C){this.mousePointer.wheel(C),this.updateInputPlugins(u.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(C){var O=this.mouse.locked;this.mousePointer.locked=O,this.events.emit(p.POINTERLOCK_CHANGE,C,O)},inputCandidate:function(C,O){var L=C.input;if(!L||!L.enabled||!L.alwaysEnabled&&!C.willRender(O))return!1;var P=!0,H=C.parentContainer;if(H)do{if(!H.willRender(O)){P=!1;break}H=H.parentContainer}while(H);return P},hitTest:function(C,O,L,P){P===void 0&&(P=this._tempHitTest);var H=this._tempPoint,G=L.scrollX,B=L.scrollY;P.length=0;var F=C.x,D=C.y;L.resolution!==1&&(F+=L._x,D+=L._y),L.getWorldPoint(F,D,H),C.worldX=H.x,C.worldY=H.y;for(var V={x:0,y:0},z=this._tempMatrix,Y=this._tempMatrix2,j=0;j<O.length;j++){var X,J,Q=O[j];this.inputCandidate(Q,L)&&(X=H.x+G*Q.scrollFactorX-G,J=H.y+B*Q.scrollFactorY-B,Q.parentContainer?(Q.getWorldTransformMatrix(z,Y),z.applyInverse(X,J,V)):A(X,J,Q.x,Q.y,Q.rotation,Q.scaleX,Q.scaleY,V),this.pointWithinHitArea(Q,V.x,V.y)&&P.push(Q))}return P},pointWithinHitArea:function(C,O,L){O+=C.displayOriginX,L+=C.displayOriginY;var P=C.input;return!(!P||!P.hitAreaCallback(P.hitArea,O,L,C))&&(P.localX=O,P.localY=L,!0)},pointWithinInteractiveObject:function(C,O,L){return!!C.hitArea&&(O+=C.gameObject.displayOriginX,L+=C.gameObject.displayOriginY,C.localX=O,C.localY=L,C.hitAreaCallback(C.hitArea,O,L,C))},transformPointer:function(C,O,L,P){var H=C.position,G=C.prevPosition;G.x=H.x,G.y=H.y;var B=this.scaleManager.transformX(O),F=this.scaleManager.transformY(L),D=C.smoothFactor;P&&D!==0?(H.x=B*D+G.x*(1-D),H.y=F*D+G.y*(1-D)):(H.x=B,H.y=F)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var C=0;C<this.pointers.length;C++)this.pointers[C].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});x.exports=T},function(x,N,r){var m=r(87),u=r(0),c=r(15),p=r(35),h=r(88),l=r(1),d=new u({initialize:function(y){this.manager=y,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=l,this.onKeyUp=l,y.events.once(p.MANAGER_BOOT,this.boot,this)},boot:function(){var y=this.manager.config;this.enabled=y.inputKeyboard,this.target=y.inputKeyboardEventTarget,this.addCapture(y.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(c.POST_STEP,this.postUpdate,this)},startListeners:function(){var y=this;this.onKeyDown=function(b){var A;!b.defaultPrevented&&y.enabled&&y.manager&&(y.queue.push(b),y.manager.useQueue||y.manager.events.emit(p.MANAGER_PROCESS),A=b.altKey||b.ctrlKey||b.shiftKey||b.metaKey,y.preventDefault&&!A&&-1<y.captures.indexOf(b.keyCode)&&b.preventDefault())},this.onKeyUp=function(b){var A;!b.defaultPrevented&&y.enabled&&y.manager&&(y.queue.push(b),y.manager.useQueue||y.manager.events.emit(p.MANAGER_PROCESS),A=b.altKey||b.ctrlKey||b.shiftKey||b.metaKey,y.preventDefault&&!A&&-1<y.captures.indexOf(b.keyCode)&&b.preventDefault())};var g=this.target;g&&(g.addEventListener("keydown",this.onKeyDown,!1),g.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var y=this.target;y.removeEventListener("keydown",this.onKeyDown,!1),y.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(y){typeof y=="string"&&(y=y.split(",")),Array.isArray(y)||(y=[y]);for(var g=this.captures,b=0;b<y.length;b++){var A=y[b];typeof A=="string"&&(A=h[A.trim().toUpperCase()]),g.indexOf(A)===-1&&g.push(A)}this.preventDefault=0<g.length},removeCapture:function(y){typeof y=="string"&&(y=y.split(",")),Array.isArray(y)||(y=[y]);for(var g=this.captures,b=0;b<y.length;b++){var A=y[b];typeof A=="string"&&(A=h[A.toUpperCase()]),m(g,A)}this.preventDefault=0<g.length},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(c.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});x.exports=d},function(x,N,r){var m=r(0),u=r(120),c=r(35),p=r(1),h=new m({initialize:function(l){this.manager=l,this.capture=!0,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=p,this.onMouseDown=p,this.onMouseUp=p,this.onMouseDownWindow=p,this.onMouseUpWindow=p,this.onMouseOver=p,this.onMouseOut=p,this.onMouseWheel=p,this.pointerLockChange=p,l.events.once(c.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputMouse,this.target=l.inputMouseEventTarget,this.capture=l.inputMouseCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},requestPointerLock:function(){var l;u.pointerLock&&((l=this.target).requestPointerLock=l.requestPointerLock||l.mozRequestPointerLock||l.webkitRequestPointerLock,l.requestPointerLock())},releasePointerLock:function(){u.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var l=this,d=this.manager.canvas,y=window&&window.focus&&this.manager.game.config.autoFocus;this.onMouseMove=function(T){!T.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onMouseMove(T),l.capture&&T.preventDefault())},this.onMouseDown=function(T){y&&window.focus(),!T.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onMouseDown(T),l.capture&&T.target===d&&T.preventDefault())},this.onMouseDownWindow=function(T){!T.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&T.target!==d&&l.manager.onMouseDown(T)},this.onMouseUp=function(T){!T.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onMouseUp(T),l.capture&&T.target===d&&T.preventDefault())},this.onMouseUpWindow=function(T){!T.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&T.target!==d&&l.manager.onMouseUp(T)},this.onMouseOver=function(T){!T.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.setCanvasOver(T)},this.onMouseOut=function(T){!T.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.setCanvasOut(T)},this.onMouseWheel=function(T){!T.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.onMouseWheel(T)};var g,b,A=this.target;A&&(b={passive:!(g={passive:!0})},A.addEventListener("mousemove",this.onMouseMove,this.capture?b:g),A.addEventListener("mousedown",this.onMouseDown,this.capture?b:g),A.addEventListener("mouseup",this.onMouseUp,this.capture?b:g),A.addEventListener("mouseover",this.onMouseOver,this.capture?b:g),A.addEventListener("mouseout",this.onMouseOut,this.capture?b:g),A.addEventListener("wheel",this.onMouseWheel,this.capture?b:g),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("mousedown",this.onMouseDownWindow,b),window.addEventListener("mouseup",this.onMouseUpWindow,b)),u.pointerLock&&(this.pointerLockChange=function(T){var C=l.target;l.locked=document.pointerLockElement===C||document.mozPointerLockElement===C||document.webkitPointerLockElement===C,l.manager.onPointerLockChange(T)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0)},stopListeners:function(){var l=this.target;l.removeEventListener("mousemove",this.onMouseMove),l.removeEventListener("mousedown",this.onMouseDown),l.removeEventListener("mouseup",this.onMouseUp),l.removeEventListener("mouseover",this.onMouseOver),l.removeEventListener("mouseout",this.onMouseOut),window&&(window.removeEventListener("mousedown",this.onMouseDownWindow),window.removeEventListener("mouseup",this.onMouseUpWindow)),u.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});x.exports=h},function(x,N,r){var m=r(229),u=r(0),c=r(46),p=r(106),h=r(236),l=r(4),d=new u({initialize:function(y,g){this.manager=y,this.id=g,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new l,this.prevPosition=new l,this.midPoint=new l(-1,-1),this.velocity=new l,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=g===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(y){var g=this.x,b=this.y;y.resolution!==1&&(g+=y._x,b+=y._y);var A=y.getWorldPoint(g,b);return this.worldX=A.x,this.worldY=A.y,this},positionToCamera:function(y,g){return y.getWorldPoint(this.x,this.y,g)},updateMotion:function(){var y,g,b,A,T=this.position.x,C=this.position.y,O=this.midPoint.x,L=this.midPoint.y;T===O&&C===L||(y=h(this.motionFactor,O,T),g=h(this.motionFactor,L,C),p(y,T,.1)&&(y=T),p(g,C,.1)&&(g=C),this.midPoint.set(y,g),b=T-y,A=C-g,this.velocity.set(b,A),this.angle=m(y,g,T,C),this.distance=Math.sqrt(b*b+A*A))},up:function(y){"buttons"in y&&(this.buttons=y.buttons),this.event=y,this.button=y.button,this.upElement=y.target,this.manager.transformPointer(this,y.pageX,y.pageY,!1),y.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=y.timeStamp),this.isDown=!1,this.wasTouch=!1},down:function(y){"buttons"in y&&(this.buttons=y.buttons),this.event=y,this.button=y.button,this.downElement=y.target,this.manager.transformPointer(this,y.pageX,y.pageY,!1),y.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=y.timeStamp),this.isDown=!0,this.wasTouch=!1},move:function(y){"buttons"in y&&(this.buttons=y.buttons),this.event=y,this.manager.transformPointer(this,y.pageX,y.pageY,!0),this.locked&&(this.movementX=y.movementX||y.mozMovementX||y.webkitMovementX||0,this.movementY=y.movementY||y.mozMovementY||y.webkitMovementY||0),this.moveTime=y.timeStamp,this.wasTouch=!1},wheel:function(y){"buttons"in y&&(this.buttons=y.buttons),this.event=y,this.manager.transformPointer(this,y.pageX,y.pageY,!1),this.deltaX=y.deltaX,this.deltaY=y.deltaY,this.deltaZ=y.deltaZ,this.wasTouch=!1},touchstart:function(y,g){y.pointerId&&(this.pointerId=y.pointerId),this.identifier=y.identifier,this.target=y.target,this.active=!0,this.buttons=1,this.event=g,this.downElement=y.target,this.manager.transformPointer(this,y.pageX,y.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=g.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(y,g){this.event=g,this.manager.transformPointer(this,y.pageX,y.pageY,!0),this.moveTime=g.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(y,g){this.buttons=0,this.event=g,this.upElement=y.target,this.manager.transformPointer(this,y.pageX,y.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=g.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(y,g){this.buttons=0,this.event=g,this.upElement=y.target,this.manager.transformPointer(this,y.pageX,y.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=g.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?c(this.downX,this.downY,this.x,this.y):c(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?m(this.downX,this.downY,this.x,this.y):m(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(y,g){y===void 0&&(y=10),g===void 0&&(g=[]);for(var b=this.prevPosition.x,A=this.prevPosition.y,T=this.position.x,C=this.position.y,O=0;O<y;O++){var L=1/y*O;g[O]={x:h(L,b,T),y:h(L,A,C)}}return g},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(y){this.position.x=y}},y:{get:function(){return this.position.y},set:function(y){this.position.y=y}},time:{get:function(){return this.event?this.event.timeStamp:0}}});x.exports=d},function(x,N,r){var m=r(0),u=r(35),c=r(1),p=new m({initialize:function(h){this.manager=h,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=c,this.onTouchStartWindow=c,this.onTouchMove=c,this.onTouchEnd=c,this.onTouchEndWindow=c,this.onTouchCancel=c,this.onTouchCancelWindow=c,this.onTouchOver=c,this.onTouchOut=c,h.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this,l=this.manager.canvas,d=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(A){d&&window.focus(),!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchStart(A),h.capture&&A.cancelable&&A.target===l&&A.preventDefault())},this.onTouchStartWindow=function(A){!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&A.target!==l&&h.manager.onTouchStart(A)},this.onTouchMove=function(A){!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchMove(A),h.capture&&A.cancelable&&A.preventDefault())},this.onTouchEnd=function(A){!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchEnd(A),h.capture&&A.cancelable&&A.target===l&&A.preventDefault())},this.onTouchEndWindow=function(A){!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&A.target!==l&&h.manager.onTouchEnd(A)},this.onTouchCancel=function(A){!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchCancel(A),h.capture&&A.preventDefault())},this.onTouchCancelWindow=function(A){!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.onTouchCancel(A)},this.onTouchOver=function(A){!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.setCanvasOver(A)},this.onTouchOut=function(A){!A.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.setCanvasOut(A)};var y,g,b=this.target;b&&(g={passive:!(y={passive:!0})},b.addEventListener("touchstart",this.onTouchStart,this.capture?g:y),b.addEventListener("touchmove",this.onTouchMove,this.capture?g:y),b.addEventListener("touchend",this.onTouchEnd,this.capture?g:y),b.addEventListener("touchcancel",this.onTouchCancel,this.capture?g:y),b.addEventListener("touchover",this.onTouchOver,this.capture?g:y),b.addEventListener("touchout",this.onTouchOut,this.capture?g:y),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,g),window.addEventListener("touchend",this.onTouchEndWindow,g),window.addEventListener("touchcancel",this.onTouchCancelWindow,g)),this.enabled=!0)},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),h.removeEventListener("touchover",this.onTouchOver),h.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});x.exports=p},function(x,N,r){var m=r(124),u=r(0),c=r(7),p=r(59),h=r(15),l=r(663),d=r(262),y=r(257),g=r(1),b=r(8),A=r(373),T=r(68),C=r(4),O=new u({Extends:c,initialize:function(L){c.call(this),this.game=L,this.canvas,this.canvasBounds=new b,this.parent=null,this.parentIsWindow=!1,this.parentSize=new A,this.gameSize=new A,this.baseSize=new A,this.displaySize=new A,this.scaleMode=m.SCALE_MODE.NONE,this.resolution=1,this.zoom=1,this._resetZoom=!1,this.displayScale=new C(1,1),this.autoRound=!1,this.autoCenter=m.CENTER.NO_CENTER,this.orientation=m.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:g,windowResize:g,fullScreenChange:g,fullScreenError:g}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once("boot",this.boot,this)},boot:function(){var L=this.game;this.canvas=L.canvas,this.fullscreen=L.device.fullscreen,this.scaleMode!==m.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===m.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),0<this.parentSize.width&&0<this.parentSize.height&&this.displaySize.setParent(this.parentSize),this.refresh()),L.events.on(h.PRE_STEP,this.step,this),L.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(L){this.getParent(L),this.getParentBounds();var P,H,G,B,F=L.width,D=L.height,V=L.scaleMode,z=L.resolution,Y=L.zoom,j=L.autoRound;typeof F=="string"&&((P=this.parentSize.width)===0&&(P=window.innerWidth),H=parseInt(F,10)/100,F=Math.floor(P*H)),typeof D=="string"&&((G=this.parentSize.height)===0&&(G=window.innerHeight),B=parseInt(D,10)/100,D=Math.floor(G*B)),this.resolution=1,this.scaleMode=V,this.autoRound=j,this.autoCenter=L.autoCenter,this.resizeInterval=L.resizeInterval,j&&(F=Math.floor(F),D=Math.floor(D)),this.gameSize.setSize(F,D),Y===m.ZOOM.MAX_ZOOM&&(Y=this.getMaxZoom()),(this.zoom=Y)!==1&&(this._resetZoom=!0),this.baseSize.setSize(F*z,D*z),j&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),0<L.minWidth&&this.displaySize.setMin(L.minWidth*Y,L.minHeight*Y),0<L.maxWidth&&this.displaySize.setMax(L.maxWidth*Y,L.maxHeight*Y),this.displaySize.setSize(F,D),this.orientation=y(F,D)},getParent:function(L){var P,H=L.parent;H!==null&&(this.parent=d(H),this.parentIsWindow=this.parent===document.body,L.expandParent&&L.scaleMode!==m.SCALE_MODE.NONE&&(P=this.parent.getBoundingClientRect(),!this.parentIsWindow&&P.height!==0||(document.documentElement.style.height="100%",document.body.style.height="100%",P=this.parent.getBoundingClientRect(),this.parentIsWindow||P.height!==0||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))),L.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=d(L.fullscreenTarget)))},getParentBounds:function(){if(!this.parent)return!1;var L=this.parentSize,P=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(P.height=l(!0));var H=this.resolution,G=P.width*H,B=P.height*H;return(L.width!==G||L.height!==B)&&(L.setSize(G,B),!0)},lockOrientation:function(L){var P=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!P&&P.call(screen,L)},setParentSize:function(L,P){return this.parentSize.setSize(L,P),this.refresh()},setGameSize:function(L,P){var H=this.autoRound,G=this.resolution;H&&(L=Math.floor(L),P=Math.floor(P));var B=this.width,F=this.height;return this.gameSize.resize(L,P),this.baseSize.resize(L*G,P*G),H&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(L/P),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(B,F)},resize:function(L,P){var H=this.zoom,G=this.resolution,B=this.autoRound;B&&(L=Math.floor(L),P=Math.floor(P));var F=this.width,D=this.height;this.gameSize.resize(L,P),this.baseSize.resize(L*G,P*G),B&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(L*H*G,P*H*G),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var V=this.canvas.style,z=L*H,Y=P*H;return B&&(z=Math.floor(z),Y=Math.floor(Y)),z===L&&Y===P||(V.width=z+"px",V.height=Y+"px"),this.refresh(F,D)},setZoom:function(L){return this.zoom=L,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(L,P){L===void 0&&(L=this.width),P===void 0&&(P=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var H,G,B=this.game.domContainer;return B&&(this.baseSize.setCSS(B),H=this.canvas.style,(G=B.style).transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",G.marginLeft=H.marginLeft,G.marginTop=H.marginTop),this.emit(p.RESIZE,this.gameSize,this.baseSize,this.displaySize,this.resolution,L,P),this},updateOrientation:function(){var L;this._checkOrientation&&(this._checkOrientation=!1,(L=y(this.width,this.height))!==this.orientation&&(this.orientation=L,this.emit(p.ORIENTATION_CHANGE,L)))},updateScale:function(){var L,P,H=this.canvas.style,G=this.gameSize.width,B=this.gameSize.height,F=this.zoom,D=this.autoRound;this.scaleMode===m.SCALE_MODE.NONE?(this.displaySize.setSize(G*F*1,B*F*1),L=+this.displaySize.width,P=+this.displaySize.height,D&&(L=Math.floor(L),P=Math.floor(P)),this._resetZoom&&(H.width=L+"px",H.height=P+"px",this._resetZoom=!1)):this.scaleMode===m.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(+this.displaySize.width,+this.displaySize.height),L=+this.displaySize.width,P=+this.displaySize.height,D&&(L=Math.floor(L),P=Math.floor(P)),this.canvas.width=L,this.canvas.height=P):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),L=+this.displaySize.width,P=+this.displaySize.height,D&&(L=Math.floor(L),P=Math.floor(P)),H.width=L+"px",H.height=P+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var L=T(this.parentSize.width,this.gameSize.width,0,!0),P=T(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(L,P),1)},updateCenter:function(){var L,P,H,G,B,F,D,V=this.autoCenter;V!==m.CENTER.NO_CENTER&&(P=(L=this.canvas).style,G=(H=L.getBoundingClientRect()).width,B=H.height,F=Math.floor((this.parentSize.width-G)/2),D=Math.floor((this.parentSize.height-B)/2),V===m.CENTER.CENTER_HORIZONTALLY?D=0:V===m.CENTER.CENTER_VERTICALLY&&(F=0),P.marginLeft=F+"px",P.marginTop=D+"px")},updateBounds:function(){var L=this.canvasBounds,P=this.canvas.getBoundingClientRect();L.x=P.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),L.y=P.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),L.width=P.width,L.height=P.height},transformX:function(L){return(L-this.canvasBounds.left)*this.displayScale.x},transformY:function(L){return(L-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(L){L===void 0&&(L={navigationUI:"hide"});var P,H=this.fullscreen;H.available?H.active||(P=this.getFullscreenTarget(),H.keyboard?P[H.request](Element.ALLOW_KEYBOARD_INPUT):P[H.request](L)):this.emit(p.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(p.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(L){this.removeFullscreenTarget(),this.emit(p.FULLSCREEN_FAILED,L)},getFullscreenTarget:function(){var L;return this.fullscreenTarget||((L=document.createElement("div")).style.margin="0",L.style.padding="0",L.style.width="100%",L.style.height="100%",this.fullscreenTarget=L,this._createdFullscreenTarget=!0),this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){var L,P;!this._createdFullscreenTarget||(L=this.fullscreenTarget)&&L.parentNode&&((P=L.parentNode).insertBefore(this.canvas,L),P.removeChild(L))},stopFullscreen:function(){var L=this.fullscreen;if(!L.available)return this.emit(p.FULLSCREEN_UNSUPPORTED),!1;L.active&&document[L.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(p.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(L){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(L)},startListeners:function(){var L=this,P=this.listeners;P.orientationChange=function(){L._checkOrientation=!0,L.dirty=!0},P.windowResize=function(){L.dirty=!0},window.addEventListener("orientationchange",P.orientationChange,!1),window.addEventListener("resize",P.windowResize,!1),this.fullscreen.available&&(P.fullScreenChange=function(H){return L.onFullScreenChange(H)},P.fullScreenError=function(H){return L.onFullScreenError(H)},["webkit","moz",""].forEach(function(H){document.addEventListener(H+"fullscreenchange",P.fullScreenChange,!1),document.addEventListener(H+"fullscreenerror",P.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",P.fullScreenChange,!1),document.addEventListener("MSFullscreenError",P.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(L,P){this.parent&&(this._lastCheck+=P,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var L=this.listeners;window.removeEventListener("orientationchange",L.orientationChange,!1),window.removeEventListener("resize",L.windowResize,!1),["webkit","moz",""].forEach(function(P){document.removeEventListener(P+"fullscreenchange",L.fullScreenChange,!1),document.removeEventListener(P+"fullscreenerror",L.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",L.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",L.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===m.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===m.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});x.exports=O},function(x,N,r){var m=r(0),u=r(89),c=r(17),p=r(15),h=r(5),l=r(62),d=r(1),y=r(272),g=r(126),b=new m({initialize:function(A,T){if(this.game=A,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,T){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++)this._pending.push({key:"default",scene:T[C],autoStart:C===0,data:{}})}A.events.once(p.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){for(var A=0;A<this._pending.length;A++){var T,C,O,L=(C=this._pending[A]).key;(O=C.scene)instanceof y?T=this.createSceneFromInstance(L,O):typeof O=="object"?T=this.createSceneFromObject(L,O):typeof O=="function"&&(T=this.createSceneFromFunction(L,O)),L=T.sys.settings.key,this.keys[L]=T,this.scenes.push(T),this._data[L]&&(T.sys.settings.data=this._data[L].data,this._data[L].autoStart&&(C.autoStart=!0)),(C.autoStart||T.sys.settings.active)&&this._start.push(L)}for(this._pending.length=0,this._data={},this.isBooted=!0,A=0;A<this._start.length;A++)C=this._start[A],this.start(C);this._start.length=0}},processQueue:function(){var A,T,C=this._pending.length,O=this._queue.length;if(C!==0||O!==0){if(C){for(A=0;A<C;A++)T=this._pending[A],this.add(T.key,T.scene,T.autoStart,T.data);for(A=0;A<this._start.length;A++)T=this._start[A],this.start(T);return this._start.length=0,void(this._pending.length=0)}for(A=0;A<this._queue.length;A++)this[(T=this._queue[A]).op](T.keyA,T.keyB);this._queue.length=0}},add:function(A,T,C,O){return C===void 0&&(C=!1),O===void 0&&(O={}),this.isProcessing||!this.isBooted?(this._pending.push({key:A,scene:T,autoStart:C,data:O}),this.isBooted||(this._data[A]={data:O}),null):(A=this.getKey(A,T),T instanceof y?L=this.createSceneFromInstance(A,T):typeof T=="object"?(T.key=A,L=this.createSceneFromObject(A,T)):typeof T=="function"&&(L=this.createSceneFromFunction(A,T)),L.sys.settings.data=O,A=L.sys.settings.key,this.keys[A]=L,this.scenes.push(L),(C||L.sys.settings.active)&&(this._pending.length?this._start.push(A):this.start(A)),L);var L},remove:function(A){if(this.isProcessing)this._queue.push({op:"remove",keyA:A,keyB:null});else{var T=this.getScene(A);if(!T||T.sys.isTransitioning())return this;var C=this.scenes.indexOf(T),O=T.sys.settings.key;-1<C&&(delete this.keys[O],this.scenes.splice(C,1),-1<this._start.indexOf(O)&&(C=this._start.indexOf(O),this._start.splice(C,1)),T.sys.destroy())}return this},bootScene:function(A){var T,C=A.sys,O=C.settings;C.sceneUpdate=d,A.init&&(A.init.call(A,O.data),O.status=u.INIT,O.isTransition&&C.events.emit(c.TRANSITION_INIT,O.transitionFrom,O.transitionDuration)),C.load&&(T=C.load).reset(),T&&A.preload?(A.preload.call(A),T.list.size===0?this.create(A):(O.status=u.LOADING,T.once(l.COMPLETE,this.loadComplete,this),T.start())):this.create(A)},loadComplete:function(A){var T=A.scene;this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(T)},payloadComplete:function(A){this.bootScene(A.scene)},update:function(A,T){this.processQueue(),this.isProcessing=!0;for(var C=this.scenes.length-1;0<=C;C--){var O=this.scenes[C].sys;O.settings.status>u.START&&O.settings.status<=u.RUNNING&&O.step(A,T)}},render:function(A){for(var T=0;T<this.scenes.length;T++){var C=this.scenes[T].sys;C.settings.visible&&C.settings.status>=u.LOADING&&C.settings.status<u.SLEEPING&&C.render(A)}this.isProcessing=!1},create:function(A){var T=A.sys,C=T.settings;A.create&&(C.status=u.CREATING,A.create.call(A,C.data),C.status===u.DESTROYED)||(C.isTransition&&T.events.emit(c.TRANSITION_START,C.transitionFrom,C.transitionDuration),A.update&&(T.sceneUpdate=A.update),C.status=u.RUNNING,T.events.emit(c.CREATE,A))},createSceneFromFunction:function(A,T){var C=new T;if(C instanceof y){var O=C.sys.settings.key;if(O!==""&&(A=O),this.keys.hasOwnProperty(A))throw new Error("Cannot add a Scene with duplicate key: "+A);return this.createSceneFromInstance(A,C)}return C.sys=new g(C),C.sys.settings.key=A,C.sys.init(this.game),C},createSceneFromInstance:function(A,T){return T.sys.settings.key===""&&(T.sys.settings.key=A),T.sys.init(this.game),T},createSceneFromObject:function(A,T){var C=new y(T),O=C.sys.settings.key;O!==""?A=O:C.sys.settings.key=A,C.sys.init(this.game);for(var L,P=["init","preload","create","update","render"],H=0;H<P.length;H++){var G=h(T,P[H],null);G&&(C[P[H]]=G)}if(T.hasOwnProperty("extend"))for(var B in T.extend)T.extend.hasOwnProperty(B)&&(L=T.extend[B],B==="data"&&C.hasOwnProperty("data")&&typeof L=="object"?C.data.merge(L):B!=="sys"&&(C[B]=L));return C},getKey:function(A,T){if(A=A||"default",typeof T=="function")return A;if(T instanceof y?A=T.sys.settings.key:typeof T=="object"&&T.hasOwnProperty("key")&&(A=T.key),this.keys.hasOwnProperty(A))throw new Error("Cannot add a Scene with duplicate key: "+A);return A},getScenes:function(A,T){A===void 0&&(A=!0),T===void 0&&(T=!1);for(var C=[],O=this.scenes,L=0;L<O.length;L++){var P=O[L];P&&(!A||A&&P.sys.isActive())&&C.push(P)}return T?C.reverse():C},getScene:function(A){if(typeof A=="string"){if(this.keys[A])return this.keys[A]}else for(var T=0;T<this.scenes.length;T++)if(A===this.scenes[T])return A;return null},isActive:function(A){var T=this.getScene(A);return T?T.sys.isActive():null},isPaused:function(A){var T=this.getScene(A);return T?T.sys.isPaused():null},isVisible:function(A){var T=this.getScene(A);return T?T.sys.isVisible():null},isSleeping:function(A){var T=this.getScene(A);return T?T.sys.isSleeping():null},pause:function(A,T){var C=this.getScene(A);return C&&C.sys.pause(T),this},resume:function(A,T){var C=this.getScene(A);return C&&C.sys.resume(T),this},sleep:function(A,T){var C=this.getScene(A);return C&&!C.sys.isTransitioning()&&C.sys.sleep(T),this},wake:function(A,T){var C=this.getScene(A);return C&&C.sys.wake(T),this},run:function(A,T){var C=this.getScene(A);if(!C){for(var O=0;O<this._pending.length;O++)if(this._pending[O].key===A){this.queueOp("start",A,T);break}return this}C.sys.isSleeping()?C.sys.wake(T):C.sys.isPaused()?C.sys.resume(T):this.start(A,T)},start:function(A,T){if(!this.isBooted)return this._data[A]={autoStart:!0,data:T},this;var C,O=this.getScene(A);if(O){if(O.sys.isActive()||O.sys.isPaused())O.sys.shutdown(),O.sys.start(T);else if(O.sys.start(T),O.sys.load&&(C=O.sys.load),C&&O.sys.settings.hasOwnProperty("pack")&&(C.reset(),C.addPack({payload:O.sys.settings.pack})))return O.sys.settings.status=u.LOADING,C.once(l.COMPLETE,this.payloadComplete,this),C.start(),this;this.bootScene(O)}return this},stop:function(A,T){var C=this.getScene(A);return C&&!C.sys.isTransitioning()&&C.sys.shutdown(T),this},switch:function(A,T){var C=this.getScene(A),O=this.getScene(T);return C&&O&&C!==O&&(this.sleep(A),this.isSleeping(T)?this.wake(T):this.start(T)),this},getAt:function(A){return this.scenes[A]},getIndex:function(A){var T=this.getScene(A);return this.scenes.indexOf(T)},bringToTop:function(A){var T,C;return this.isProcessing?this._queue.push({op:"bringToTop",keyA:A,keyB:null}):(T=this.getIndex(A))!==-1&&T<this.scenes.length&&(C=this.getScene(A),this.scenes.splice(T,1),this.scenes.push(C)),this},sendToBack:function(A){var T,C;return this.isProcessing?this._queue.push({op:"sendToBack",keyA:A,keyB:null}):(T=this.getIndex(A))!==-1&&0<T&&(C=this.getScene(A),this.scenes.splice(T,1),this.scenes.unshift(C)),this},moveDown:function(A){var T,C,O,L;return this.isProcessing?this._queue.push({op:"moveDown",keyA:A,keyB:null}):0<(T=this.getIndex(A))&&(C=T-1,O=this.getScene(A),L=this.getAt(C),this.scenes[T]=L,this.scenes[C]=O),this},moveUp:function(A){var T,C,O,L;return this.isProcessing?this._queue.push({op:"moveUp",keyA:A,keyB:null}):(T=this.getIndex(A))<this.scenes.length-1&&(C=T+1,O=this.getScene(A),L=this.getAt(C),this.scenes[T]=L,this.scenes[C]=O),this},moveAbove:function(A,T){return A===T||(this.isProcessing?this._queue.push({op:"moveAbove",keyA:A,keyB:T}):(C=this.getIndex(A),O=this.getIndex(T),C!==-1&&O!==-1&&(L=this.getAt(O),this.scenes.splice(O,1),this.scenes.splice(C+1,0,L)))),this;var C,O,L},moveBelow:function(A,T){return A===T||(this.isProcessing?this._queue.push({op:"moveBelow",keyA:A,keyB:T}):(C=this.getIndex(A),O=this.getIndex(T),C!==-1&&O!==-1&&(L=this.getAt(O),this.scenes.splice(O,1),C===0?this.scenes.unshift(L):this.scenes.splice(C,0,L)))),this;var C,O,L},queueOp:function(A,T,C){return this._queue.push({op:A,keyA:T,keyB:C}),this},swapPosition:function(A,T){return A===T||(this.isProcessing?this._queue.push({op:"swapPosition",keyA:A,keyB:T}):(C=this.getIndex(A))!==(O=this.getIndex(T))&&C!==-1&&O!==-1&&(L=this.getAt(C),this.scenes[C]=this.scenes[O],this.scenes[O]=L)),this;var C,O,L},dump:function(){for(var A=[],T=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],C=0;C<this.scenes.length;C++){var O=this.scenes[C].sys,L=!O.settings.visible||O.settings.status!==u.RUNNING&&O.settings.status!==u.PAUSED?"[-] ":"[*] ";L+=O.settings.key+" ("+T[O.settings.status]+")",A.push(L)}console.log(A.join(`
`))},destroy:function(){for(var A=0;A<this.scenes.length;A++)this.scenes[A].sys.destroy();this.update=d,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});x.exports=b},function(x,N,r){var m=r(0),u=r(126),c=new m({initialize:function(p){this.sys=new u(this,p),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins},update:function(){}});x.exports=c},function(x,N,r){var m=r(89),u=r(5),c=r(274),p=r(676),h={create:function(l){return typeof l=="string"?l={key:l}:l===void 0&&(l={}),{status:m.PENDING,key:u(l,"key",""),active:u(l,"active",!1),visible:u(l,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:u(l,"pack",!1),cameras:u(l,"cameras",null),map:u(l,"map",c(p,u(l,"mapAdd",{}))),physics:u(l,"physics",{}),loader:u(l,"loader",{}),plugins:u(l,"plugins",!1),input:u(l,"input",{})}}};x.exports=h},function(x,N,r){var m=r(49);x.exports=function(u,c){var p=m(u);for(var h in c)p.hasOwnProperty(h)||(p[h]=c[h]);return p}},function(x,N,r){var m=r(23),u=r(276),c=r(0),p=r(30),h=r(29),l=r(7),d=r(85),y=r(15),g=r(374),b=r(5),A=r(278),T=r(127),C=new c({Extends:l,initialize:function(O){l.call(this),this.game=O,this.name="TextureManager",this.list={},this._tempCanvas=m.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,O.events.once(y.BOOT,this.boot,this)},boot:function(){this._pending=2,this.on(d.LOAD,this.updatePending,this),this.on(d.ERROR,this.updatePending,this),this.addBase64("__DEFAULT",this.game.config.defaultImage),this.addBase64("__MISSING",this.game.config.missingImage),this.game.events.once(y.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(d.LOAD),this.off(d.ERROR),this.emit(d.READY))},checkKey:function(O){return!this.exists(O)||(console.error("Texture key already in use: "+O),!1)},remove:function(O){if(typeof O=="string"){if(!this.exists(O))return console.warn("No texture found matching key: "+O),this;O=this.get(O)}return this.list.hasOwnProperty(O.key)&&(O.destroy(),this.emit(d.REMOVE,O.key)),this},removeKey:function(O){return this.list.hasOwnProperty(O)&&delete this.list[O],this},addBase64:function(O,L){var P,H;return this.checkKey(O)&&(P=this,(H=new Image).onerror=function(){P.emit(d.ERROR,O)},H.onload=function(){var G=P.create(O,H);A.Image(G,0),P.emit(d.ADD,O,G),P.emit(d.LOAD,O,G)},H.src=L),this},getBase64:function(O,L,P,H){P===void 0&&(P="image/png"),H===void 0&&(H=.92);var G,B,F="",D=this.getFrame(O,L);return D&&(D.source.isRenderTexture||D.source.isGLTexture)?console.warn("Cannot getBase64 from WebGL Texture"):D&&(G=D.canvasData,(B=m.create2D(this,G.width,G.height)).getContext("2d").drawImage(D.source.image,G.x,G.y,G.width,G.height,0,0,G.width,G.height),F=B.toDataURL(P,H),m.remove(B)),F},addImage:function(O,L,P){var H=null;return this.checkKey(O)&&(H=this.create(O,L),A.Image(H,0),P&&H.setDataSource(P),this.emit(d.ADD,O,H)),H},addGLTexture:function(O,L,P,H){var G=null;return this.checkKey(O)&&((G=this.create(O,L,P,H)).add("__BASE",0,0,0,P,H),this.emit(d.ADD,O,G)),G},addRenderTexture:function(O,L){var P=null;return this.checkKey(O)&&((P=this.create(O,L)).add("__BASE",0,0,0,L.width,L.height),this.emit(d.ADD,O,P)),P},generate:function(O,L){if(this.checkKey(O)){var P=m.create(this,1,1);return L.canvas=P,g(L),this.addCanvas(O,P)}return null},createCanvas:function(O,L,P){if(L===void 0&&(L=256),P===void 0&&(P=256),this.checkKey(O)){var H=m.create(this,L,P,h.CANVAS,!0);return this.addCanvas(O,H)}return null},addCanvas:function(O,L,P){P===void 0&&(P=!1);var H=null;return P?H=new u(this,O,L,L.width,L.height):this.checkKey(O)&&(H=new u(this,O,L,L.width,L.height),this.list[O]=H,this.emit(d.ADD,O,H)),H},addAtlas:function(O,L,P,H){return Array.isArray(P.textures)||Array.isArray(P.frames)?this.addAtlasJSONArray(O,L,P,H):this.addAtlasJSONHash(O,L,P,H)},addAtlasJSONArray:function(O,L,P,H){var G=null;if(this.checkKey(O)){if(G=this.create(O,L),Array.isArray(P))for(var B=P.length===1,F=0;F<G.source.length;F++){var D=B?P[0]:P[F];A.JSONArray(G,F,D)}else A.JSONArray(G,0,P);H&&G.setDataSource(H),this.emit(d.ADD,O,G)}return G},addAtlasJSONHash:function(O,L,P,H){var G=null;if(this.checkKey(O)){if(G=this.create(O,L),Array.isArray(P))for(var B=0;B<P.length;B++)A.JSONHash(G,B,P[B]);else A.JSONHash(G,0,P);H&&G.setDataSource(H),this.emit(d.ADD,O,G)}return G},addAtlasXML:function(O,L,P,H){var G=null;return this.checkKey(O)&&(G=this.create(O,L),A.AtlasXML(G,0,P),H&&G.setDataSource(H),this.emit(d.ADD,O,G)),G},addUnityAtlas:function(O,L,P,H){var G=null;return this.checkKey(O)&&(G=this.create(O,L),A.UnityYAML(G,0,P),H&&G.setDataSource(H),this.emit(d.ADD,O,G)),G},addSpriteSheet:function(O,L,P){var H,G,B=null;return this.checkKey(O)&&(H=(B=this.create(O,L)).source[0].width,G=B.source[0].height,A.SpriteSheet(B,0,0,0,H,G,P),this.emit(d.ADD,O,B)),B},addSpriteSheetFromAtlas:function(O,L){if(!this.checkKey(O))return null;var P=b(L,"atlas",null),H=b(L,"frame",null);if(P&&H){var G=this.get(P).get(H);if(G){var B=this.create(O,G.source.image);return G.trimmed?A.SpriteSheetFromAtlas(B,G,L):A.SpriteSheet(B,0,G.cutX,G.cutY,G.cutWidth,G.cutHeight,L),this.emit(d.ADD,O,B),B}}},create:function(O,L,P,H){var G=null;return this.checkKey(O)&&(G=new T(this,O,L,P,H),this.list[O]=G),G},exists:function(O){return this.list.hasOwnProperty(O)},get:function(O){return O===void 0&&(O="__DEFAULT"),this.list[O]?this.list[O]:O instanceof T?O:this.list.__MISSING},cloneFrame:function(O,L){if(this.list[O])return this.list[O].get(L).clone()},getFrame:function(O,L){if(this.list[O])return this.list[O].get(L)},getTextureKeys:function(){var O=[];for(var L in this.list)L!=="__DEFAULT"&&L!=="__MISSING"&&O.push(L);return O},getPixel:function(O,L,P,H){var G=this.getFrame(P,H);if(G){O-=G.x,L-=G.y;var B=G.data.cut;if(O+=B.x,L+=B.y,O>=B.x&&O<B.r&&L>=B.y&&L<B.b){var F=this._tempContext;F.clearRect(0,0,1,1),F.drawImage(G.source.image,O,L,1,1,0,0,1,1);var D=F.getImageData(0,0,1,1);return new p(D.data[0],D.data[1],D.data[2],D.data[3])}}return null},getPixelAlpha:function(O,L,P,H){var G=this.getFrame(P,H);if(G){O-=G.x,L-=G.y;var B=G.data.cut;if(O+=B.x,L+=B.y,O>=B.x&&O<B.r&&L>=B.y&&L<B.b){var F=this._tempContext;return F.clearRect(0,0,1,1),F.drawImage(G.source.image,O,L,1,1,0,0,1,1),F.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(O,L,P){return this.list[L]&&(O.texture=this.list[L],O.frame=O.texture.get(P)),O},renameTexture:function(O,L){var P=this.get(O);return!(!P||O===L)&&(P.key=L,this.list[L]=P,delete this.list[O],!0)},each:function(O,L){for(var P=[null],H=1;H<arguments.length;H++)P.push(arguments[H]);for(var G in this.list)P[0]=this.list[G],O.apply(L,P)},destroy:function(){for(var O in this.list)this.list[O].destroy();this.list={},this.game=null,m.remove(this._tempCanvas)}});x.exports=C},function(x,N,r){var m=r(0),u=r(12),c=r(30),p=r(29),h=r(84),l=r(127),d=new m({Extends:l,initialize:function(y,g,b,A,T){l.call(this,y,g,b,A,T),this.add("__BASE",0,0,0,A,T),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=A,this.height=T,this.imageData=this.context.getImageData(0,0,A,T),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===p.WEBGL&&this.refresh(),this},draw:function(y,g,b){return this.context.drawImage(b,y,g),this.update()},drawFrame:function(y,g,b,A){b===void 0&&(b=0),A===void 0&&(A=0);var T=this.manager.getFrame(y,g);if(T){var C=T.canvasData,O=T.cutWidth,L=T.cutHeight,P=T.source.resolution;return this.context.drawImage(T.source.image,C.x,C.y,O,L,b,A,O/P,L/P),this.update()}return this},setPixel:function(y,g,b,A,T,C){var O;return C===void 0&&(C=255),y=Math.abs(Math.floor(y)),g=Math.abs(Math.floor(g)),-1<this.getIndex(y,g)&&((O=this.context.getImageData(y,g,1,1)).data[0]=b,O.data[1]=A,O.data[2]=T,O.data[3]=C,this.context.putImageData(O,y,g)),this},putData:function(y,g,b,A,T,C,O){return A===void 0&&(A=0),T===void 0&&(T=0),C===void 0&&(C=y.width),O===void 0&&(O=y.height),this.context.putImageData(y,g,b,A,T,C,O),this},getData:function(y,g,b,A){return y=u(Math.floor(y),0,this.width-1),g=u(Math.floor(g),0,this.height-1),b=u(b,1,this.width-y),A=u(A,1,this.height-g),this.context.getImageData(y,g,b,A)},getPixel:function(y,g,b){b=b||new c;var A,T,C,O,L,P=this.getIndex(y,g);return-1<P&&(T=(A=this.data)[P+0],C=A[P+1],O=A[P+2],L=A[P+3],b.setTo(T,C,O,L)),b},getPixels:function(y,g,b,A){y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=this.width),A===void 0&&(A=b),y=Math.abs(Math.round(y)),g=Math.abs(Math.round(g));for(var T=u(y,0,this.width),C=u(y+b,0,this.width),O=u(g,0,this.height),L=u(g+A,0,this.height),P=new c,H=[],G=O;G<L;G++){for(var B=[],F=T;F<C;F++)P=this.getPixel(F,G,P),B.push({x:F,y:G,color:P.color,alpha:P.alphaGL});H.push(B)}return H},getIndex:function(y,g){return y=Math.abs(Math.round(y)),g=Math.abs(Math.round(g)),y<this.width&&g<this.height?4*(y+g*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(y,g,b,A){return y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=this.width),A===void 0&&(A=this.height),this.context.clearRect(y,g,b,A),this.update()},setSize:function(y,g){return g===void 0&&(g=y),y===this.width&&g===this.height||(this.canvas.width=y,this.canvas.height=g,this._source.width=y,this._source.height=g,this._source.isPowerOf2=h(y,g),this.frames.__BASE.setSize(y,g,0,0),this.width=y,this.height=g,this.refresh()),this},destroy:function(){l.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});x.exports=d},function(x,N,r){var m=r(23),u=r(0),c=r(84),p=r(187),h=new u({initialize:function(l,d,y,g,b){b===void 0&&(b=!1);var A=l.manager.game;this.renderer=A.renderer,this.texture=l,this.source=d,this.image=d,this.compressionAlgorithm=null,this.resolution=1,this.width=y||d.naturalWidth||d.videoWidth||d.width||0,this.height=g||d.naturalHeight||d.videoHeight||d.height||0,this.scaleMode=p.DEFAULT,this.isCanvas=d instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement,this.isRenderTexture=d.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&d instanceof WebGLTexture,this.isPowerOf2=c(this.width,this.height),this.glTexture=null,this.flipY=b,this.init(A)},init:function(l){this.renderer&&(this.renderer.gl?this.isCanvas?this.glTexture=this.renderer.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=this.renderer.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=this.renderer.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=this.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),l.config.antialias||this.setFilter(1)},setFilter:function(l){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,l),this.scaleMode=l},setFlipY:function(l){return l===void 0&&(l=!0),this.flipY=l,this},update:function(){var l=this.renderer.gl;l&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):l&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&m.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});x.exports=h},function(x,N,r){x.exports={AtlasXML:r(677),Canvas:r(678),Image:r(679),JSONArray:r(680),JSONHash:r(681),SpriteSheet:r(682),SpriteSheetFromAtlas:r(683),UnityYAML:r(684)}},function(x,N,r){var m=r(280),u=r(284),c=r(286),p={create:function(h){var l=h.config.audio,d=h.device.audio;return new(l&&l.noAudio||!d.webAudio&&!d.audioData?u:!d.webAudio||l&&l.disableWebAudio?m:c)(h)}};x.exports=p},function(x,N,r){var m=r(90),u=r(0),c=r(38),p=r(283),h=new u({Extends:m,initialize:function(l){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,m.call(this,l)},add:function(l,d){var y=new p(this,l,d);return this.sounds.push(y),y},unlock:function(){this.locked=!1;var l,d,y,g=this;this.game.cache.audio.entries.each(function(b,A){for(var T=0;T<A.length;T++)if(A[T].dataset.locked==="true")return!(g.locked=!0);return!0}),this.locked&&(l=!1,d=function(){l=!0},y=function(){var b,A;l?l=!1:(document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",y),b=[],g.game.cache.audio.entries.each(function(T,C){for(var O=0;O<C.length;O++){var L=C[O];L.dataset.locked==="true"&&b.push(L)}return!0}),b.length!==0&&((A=b[b.length-1]).oncanplaythrough=function(){A.oncanplaythrough=null,b.forEach(function(T){T.dataset.locked="false"}),g.unlocked=!0},b.forEach(function(T){T.load()})))},this.once(c.UNLOCKED,function(){for(this.forEachActiveSound(function(A){A.currentMarker===null&&A.duration===0&&(A.duration=A.tags[0].duration),A.totalDuration=A.tags[0].duration});this.lockedActionsQueue.length;){var b=this.lockedActionsQueue.shift();b.sound[b.prop].apply?b.sound[b.prop].apply(b.sound,b.value||[]):b.sound[b.prop]=b.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",y,!1))},onBlur:function(){this.forEachActiveSound(function(l){l.isPlaying&&(this.onBlurPausedSounds.push(l),l.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(l){l.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){m.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(l,d,y){return l.tags[0].dataset.locked==="true"&&(this.lockedActionsQueue.push({sound:l,prop:d,value:y}),!0)},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this._mute},set:function(l){this._mute=l,this.forEachActiveSound(function(d){d.updateMute()}),this.emit(c.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this._volume},set:function(l){this._volume=l,this.forEachActiveSound(function(d){d.updateVolume()}),this.emit(c.GLOBAL_VOLUME,this,l)}}});x.exports=h},function(x,N,r){var m=r(43);x.exports=function(u,c,p,h,l){h===void 0&&(h=0),l===void 0&&(l=u.length);var d=[];if(m(u,h,l))for(var y=h;y<l;y++){var g=u[y];(!c||c&&p===void 0&&g.hasOwnProperty(c)||c&&p!==void 0&&g[c]===p)&&d.push(g)}return d}},function(x,N,r){var m=r(43);x.exports=function(u,c,p,h,l){if(h===void 0&&(h=0),l===void 0&&(l=u.length),m(u,h,l))for(var d=h;d<l;d++){var y=u[d];if(!c||c&&p===void 0&&y.hasOwnProperty(c)||c&&p!==void 0&&y[c]===p)return y}return null}},function(x,N,r){var m=r(91),u=r(0),c=r(38),p=r(12),h=new u({Extends:m,initialize:function(l,d,y){if(y===void 0&&(y={}),this.tags=l.game.cache.audio.get(d),!this.tags)throw new Error('There is no audio asset with key "'+d+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,m.call(this,l,d,y)},play:function(l,d){return!this.manager.isLocked(this,"play",[l,d])&&!!m.prototype.play.call(this,l,d)&&!!this.pickAndPlayAudioTag()&&(this.emit(c.PLAY,this),!0)},pause:function(){return!this.manager.isLocked(this,"pause")&&!(0<this.startTime)&&!!m.prototype.pause.call(this)&&(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(c.PAUSE,this),!0)},resume:function(){return!this.manager.isLocked(this,"resume")&&!(0<this.startTime)&&!!m.prototype.resume.call(this)&&!!this.pickAndPlayAudioTag()&&(this.emit(c.RESUME,this),!0)},stop:function(){return!this.manager.isLocked(this,"stop")&&!!m.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(c.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var l=this.currentConfig.seek,d=this.currentConfig.delay,y=(this.currentMarker?this.currentMarker.start:0)+l;return this.previousTime=y,this.audio.currentTime=y,this.applyConfig(),d===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*d,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var l=0;l<this.tags.length;l++){var d=this.tags[l];if(d.dataset.used==="false")return d.dataset.used="true",this.audio=d,!0}if(!this.manager.override)return!1;var y=[];this.manager.forEachActiveSound(function(b){b.key===this.key&&b.audio&&y.push(b)},this),y.sort(function(b,A){return b.loop===A.loop?A.seek/A.duration-b.seek/b.duration:b.loop?1:-1});var g=y[0];return this.audio=g.audio,g.reset(),g.audio=null,g.startTime=0,!(g.previousTime=0)},playCatchPromise:function(){var l=this.audio.play();l&&l.catch(function(d){console.warn(d)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){m.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(l,d){if(this.isPlaying)if(0<this.startTime)this.startTime<l-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,l-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var y=this.currentMarker?this.currentMarker.start:0,g=y+this.duration,b=this.audio.currentTime;if(this.currentConfig.loop)b>=g-this.manager.loopEndOffset?(this.audio.currentTime=y+Math.max(0,b-g),b=this.audio.currentTime):b<y&&(this.audio.currentTime+=y,b=this.audio.currentTime),b<this.previousTime&&this.emit(c.LOOPED,this);else if(g<=b)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(c.COMPLETE,this);this.previousTime=b}},destroy:function(){m.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=p(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){m.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(l){this.currentConfig.mute=l,this.manager.isLocked(this,"mute",l)||(this.updateMute(),this.emit(c.MUTE,this,l))}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.currentConfig.volume},set:function(l){this.currentConfig.volume=l,this.manager.isLocked(this,"volume",l)||(this.updateVolume(),this.emit(c.VOLUME,this,l))}},setVolume:function(l){return this.volume=l,this},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,this.manager.isLocked(this,c.RATE,l)||(this.calculateRate(),this.emit(c.RATE,this,l))}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,this.manager.isLocked(this,c.DETUNE,l)||(this.calculateRate(),this.emit(c.DETUNE,this,l))}},setDetune:function(l){return this.detune=l,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.isLocked(this,"seek",l)||0<this.startTime||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.isPlaying?(this.previousTime=l,this.audio.currentTime=l):this.isPaused&&(this.currentConfig.seek=l),this.emit(c.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,this.manager.isLocked(this,"loop",l)||(this.audio&&(this.audio.loop=l),this.emit(c.LOOP,this,l))}},setLoop:function(l){return this.loop=l,this}});x.exports=h},function(x,N,r){var m=r(90),u=r(0),c=r(7),p=r(285),h=r(1),l=new u({Extends:c,initialize:function(d){c.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(d,y){var g=new p(this,d,y);return this.sounds.push(g),g},addAudioSprite:function(d,y){var g=this.add(d,y);return g.spritemap={},g},play:function(d,y){return!1},playAudioSprite:function(d,y,g){return!1},remove:function(d){return m.prototype.remove.call(this,d)},removeByKey:function(d){return m.prototype.removeByKey.call(this,d)},pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,forEachActiveSound:function(d,y){m.prototype.forEachActiveSound.call(this,d,y)},destroy:function(){m.prototype.destroy.call(this)}});x.exports=l},function(x,N,r){function m(){return!1}function u(){return this}var c=r(91),p=r(0),h=r(7),l=r(16),d=new p({Extends:h,initialize:function(y,g,b){b===void 0&&(b={}),h.call(this),this.manager=y,this.key=g,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},b),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:m,updateMarker:m,removeMarker:function(){return null},play:m,pause:m,resume:m,stop:m,destroy:function(){c.prototype.destroy.call(this)},setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u});x.exports=d},function(x,N,r){var m=r(376),u=r(90),c=r(0),p=r(38),h=r(287),l=new c({Extends:u,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),u.call(this,d),this.locked&&this.unlock()},createAudioContext:function(d){var y=d.config.audio;return y&&y.context?(y.context.resume(),y.context):new AudioContext},setAudioContext:function(d){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=d,this.masterMuteNode=d.createGain(),this.masterVolumeNode=d.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(d.destination),this.destination=this.masterMuteNode,this},add:function(d,y){var g=new h(this,d,y);return this.sounds.push(g),g},decodeAudio:function(d,y){for(var g=Array.isArray(d)?d:[{key:d,data:y}],b=this.game.cache.audio,A=g.length,T=0;T<g.length;T++){var C=g[T],O=C.key,L=C.data;typeof L=="string"&&(L=m(L));var P=function(G,B){b.add(G,B),this.emit(p.DECODED,G),--A===0&&this.emit(p.DECODED_ALL)}.bind(this,O),H=function(G,B){console.error("Error decoding audio: "+G+" - ",B?B.message:""),--A===0&&this.emit(p.DECODED_ALL)}.bind(this,O);this.context.decodeAudioData(L,P,H)}},unlock:function(){function d(){y.context&&y.context.resume().then(function(){g.removeEventListener("touchstart",d),g.removeEventListener("touchend",d),g.removeEventListener("click",d),g.removeEventListener("keydown",d),y.unlocked=!0},function(){g.removeEventListener("touchstart",d),g.removeEventListener("touchend",d),g.removeEventListener("click",d),g.removeEventListener("keydown",d)})}var y=this,g=document.body;g&&(g.addEventListener("touchstart",d,!1),g.addEventListener("touchend",d,!1),g.addEventListener("click",d,!1),g.addEventListener("keydown",d,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){this.locked||this.context.resume()},destroy:function(){var d;this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio&&this.game.config.audio.context?this.context.suspend():(d=this).context.close().then(function(){d.context=null}),u.prototype.destroy.call(this)},setMute:function(d){return this.mute=d,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(d){this.masterMuteNode.gain.setValueAtTime(d?0:1,0),this.emit(p.GLOBAL_MUTE,this,d)}},setVolume:function(d){return this.volume=d,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(d){this.masterVolumeNode.gain.setValueAtTime(d,0),this.emit(p.GLOBAL_VOLUME,this,d)}}});x.exports=l},function(x,N,r){var m=r(91),u=r(0),c=r(38),p=new u({Extends:m,initialize:function(h,l,d){if(d===void 0&&(d={}),this.audioBuffer=h.game.cache.audio.get(l),!this.audioBuffer)throw new Error('There is no audio asset with key "'+l+'" in the audio cache');this.source=null,this.loopSource=null,this.muteNode=h.context.createGain(),this.volumeNode=h.context.createGain(),this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),this.volumeNode.connect(h.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,m.call(this,h,l,d)},play:function(h,l){return!!m.prototype.play.call(this,h,l)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(c.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime)&&!!m.prototype.pause.call(this)&&(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(c.PAUSE,this),!0)},resume:function(){return!(this.manager.context.currentTime<this.startTime)&&!!m.prototype.resume.call(this)&&(this.createAndStartBufferSource(),this.emit(c.RESUME,this),!0)},stop:function(){return!!m.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(c.STOP,this),!0)},createAndStartBufferSource:function(){var h=this.currentConfig.seek,l=this.currentConfig.delay,d=this.manager.context.currentTime+l,y=(this.currentMarker?this.currentMarker.start:0)+h,g=this.duration-h;this.playTime=d-h,this.startTime=d,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,d),Math.max(0,y),Math.max(0,g)),this.resetConfig()},createAndStartLoopBufferSource:function(){var h=this.getLoopTime(),l=this.currentMarker?this.currentMarker.start:0,d=this.duration;this.loopTime=h,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,h),Math.max(0,l),Math.max(0,d))},createBufferSource:function(){var h=this,l=this.manager.context.createBufferSource();return l.buffer=this.audioBuffer,l.connect(this.muteNode),l.onended=function(d){d.target===h.source&&(h.currentConfig.loop?h.hasLooped=!0:h.hasEnded=!0)},l},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),m.prototype.applyConfig.call(this)},update:function(h,l){this.hasEnded?(this.hasEnded=!1,m.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(c.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(c.LOOPED,this))},destroy:function(){m.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){m.prototype.calculateRate.call(this);var h=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,h),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,h)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var h=0,l=0;l<this.rateUpdates.length;l++)h+=((l<this.rateUpdates.length-1?this.rateUpdates[l+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[l].time)*this.rateUpdates[l].rate;return h},getLoopTime:function(){for(var h=0,l=0;l<this.rateUpdates.length-1;l++)h+=(this.rateUpdates[l+1].time-this.rateUpdates[l].time)*this.rateUpdates[l].rate;var d=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+d.time+(this.duration-h)/d.rate},rate:{get:function(){return this.currentConfig.rate},set:function(h){this.currentConfig.rate=h,this.calculateRate(),this.emit(c.RATE,this,h)}},setRate:function(h){return this.rate=h,this},detune:{get:function(){return this.currentConfig.detune},set:function(h){this.currentConfig.detune=h,this.calculateRate(),this.emit(c.DETUNE,this,h)}},setDetune:function(h){return this.detune=h,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(h){this.currentConfig.mute=h,this.muteNode.gain.setValueAtTime(h?0:1,0),this.emit(c.MUTE,this,h)}},setMute:function(h){return this.mute=h,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(h){this.currentConfig.volume=h,this.volumeNode.gain.setValueAtTime(h,0),this.emit(c.VOLUME,this,h)}},setVolume:function(h){return this.volume=h,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(h){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(h=Math.min(Math.max(0,h),this.duration),this.currentConfig.seek=h,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(c.SEEK,this,h))}},setSeek:function(h){return this.seek=h,this},loop:{get:function(){return this.currentConfig.loop},set:function(h){this.currentConfig.loop=h,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),h&&this.createAndStartLoopBufferSource()),this.emit(c.LOOP,this,h)}},setLoop:function(h){return this.loop=h,this}});x.exports=p},function(x,N,r){var m=r(128),u=r(60),c=r(9),p=r(3);x.exports=function(h,l,d){d===void 0&&(d=new p);var y=u(l,0,c.PI2);return m(h,y,d)}},function(x,N,r){var m=r(290),u=r(128),c=r(60),p=r(9);x.exports=function(h,l,d,y){y===void 0&&(y=[]),!l&&0<d&&(l=m(h)/d);for(var g=0;g<l;g++){var b=c(g/l,0,p.PI2);y.push(u(h,b))}return y}},function(x,N){x.exports=function(r){return Math.PI*r.radius*2}},function(x,N,r){var m=r(129),u=r(60),c=r(9),p=r(3);x.exports=function(h,l,d){d===void 0&&(d=new p);var y=u(l,0,c.PI2);return m(h,y,d)}},function(x,N,r){var m=r(293),u=r(129),c=r(60),p=r(9);x.exports=function(h,l,d,y){y===void 0&&(y=[]),!l&&0<d&&(l=m(h)/d);for(var g=0;g<l;g++){var b=c(g/l,0,p.PI2);y.push(u(h,b))}return y}},function(x,N){x.exports=function(r){var m=r.width/2,u=r.height/2,c=Math.pow(m-u,2)/Math.pow(m+u,2);return Math.PI*(m+u)*(1+3*c/(10+Math.sqrt(4-3*c)))}},function(x,N){x.exports=function(r,m){var u=r.x1,c=r.y1,p=r.x2,h=r.y2,l=m.x,d=m.y,y=m.right,g=m.bottom,b=0;if(l<=u&&u<=y&&d<=c&&c<=g||l<=p&&p<=y&&d<=h&&h<=g)return!0;if(u<l&&l<=p){if(d<(b=c+(h-c)*(l-u)/(p-u))&&b<=g)return!0}else if(y<u&&p<=y&&d<=(b=c+(h-c)*(y-u)/(p-u))&&b<=g)return!0;if(c<d&&d<=h){if(l<=(b=u+(p-u)*(d-c)/(h-c))&&b<=y)return!0}else if(g<c&&h<=g&&l<=(b=u+(p-u)*(g-c)/(h-c))&&b<=y)return!0;return!1}},function(x,N,r){var m=r(51),u=r(37),c=r(133),p=r(296);x.exports=function(h,l){if(l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top)return!1;var d=l.getLineA(),y=l.getLineB(),g=l.getLineC();if(u(h,d.x1,d.y1)||u(h,d.x2,d.y2)||u(h,y.x1,y.y1)||u(h,y.x2,y.y2)||u(h,g.x1,g.y1)||u(h,g.x2,g.y2))return!0;var b=h.getLineA(),A=h.getLineB(),T=h.getLineC(),C=h.getLineD();if(m(d,b)||m(d,A)||m(d,T)||m(d,C)||m(y,b)||m(y,A)||m(y,T)||m(y,C)||m(g,b)||m(g,A)||m(g,T)||m(g,C))return!0;var O=p(h);return 0<c(l,O,!0).length}},function(x,N){x.exports=function(r,m){return m===void 0&&(m=[]),m.push({x:r.x,y:r.y}),m.push({x:r.right,y:r.y}),m.push({x:r.right,y:r.bottom}),m.push({x:r.x,y:r.bottom}),m}},function(x,N,r){var m=r(131),u=r(52);x.exports=function(c,p){return!(c.left>p.right||c.right<p.left||c.top>p.bottom||c.bottom<p.top)&&(!!u(c,p.x,p.y)||!!m(c.getLineA(),p)||!!m(c.getLineB(),p)||!!m(c.getLineC(),p))}},function(x,N,r){var m=r(3),u=r(299),c=r(51);x.exports=function(p,h,l){if(l===void 0&&(l=[]),u(p,h))for(var d=p.getLineA(),y=p.getLineB(),g=p.getLineC(),b=[new m,new m,new m],A=[c(d,h,b[0]),c(y,h,b[1]),c(g,h,b[2])],T=0;T<3;T++)A[T]&&l.push(b[T]);return l}},function(x,N,r){var m=r(52),u=r(51);x.exports=function(c,p){return!(!m(c,p.getPointA())&&!m(c,p.getPointB()))||!!u(c.getLineA(),p)||!!u(c.getLineB(),p)||!!u(c.getLineC(),p)}},function(x,N,r){var m=r(133),u=r(301),c=r(51);x.exports=function(p,h){if(p.left>h.right||p.right<h.left||p.top>h.bottom||p.bottom<h.top)return!1;var l=p.getLineA(),d=p.getLineB(),y=p.getLineC(),g=h.getLineA(),b=h.getLineB(),A=h.getLineC();if(c(l,g)||c(l,b)||c(l,A)||c(d,g)||c(d,b)||c(d,A)||c(y,g)||c(y,b)||c(y,A))return!0;var T=u(p),C=m(h,T,!0);return 0<C.length||(T=u(h),0<m(p,T,!0).length)}},function(x,N){x.exports=function(r,m){return m===void 0&&(m=[]),m.push({x:r.x1,y:r.y1}),m.push({x:r.x2,y:r.y2}),m.push({x:r.x3,y:r.y3}),m}},function(x,N){x.exports=function(r,m,u){u===void 0&&(u=1);var c=m.x1,p=m.y1,h=m.x2,l=m.y2,d=r.x,y=r.y,g=(h-c)*(h-c)+(l-p)*(l-p);if(g==0)return!1;var b=((d-c)*(h-c)+(y-p)*(l-p))/g;if(b<0)return Math.sqrt((c-d)*(c-d)+(p-y)*(p-y))<=u;if(0<=b&&b<=1){var A=((p-y)*(h-c)-(c-d)*(l-p))/g;return Math.abs(A)*Math.sqrt(g)<=u}return Math.sqrt((h-d)*(h-d)+(l-y)*(l-y))<=u}},function(x,N,r){var m=r(9),u=r(42),c=r(53);x.exports=function(p){var h=c(p)-m.TAU;return u(h,-Math.PI,Math.PI)}},function(x,N){x.exports=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)}},function(x,N){x.exports=function(r){return r.x*r.x+r.y*r.y}},function(x,N,r){var m=r(34),u=r(33),c=r(307);x.exports=function(p,h,l,d){d===void 0&&(d=[]);var y=p.points,g=c(p);!h&&0<l&&(h=g/l);for(var b=0;b<h;b++)for(var A=g*(b/h),T=0,C=0;C<y.length;C++){var O=y[C],L=y[(C+1)%y.length],P=new u(O.x,O.y,L.x,L.y),H=m(P);if(!(A<T||T+H<A)){var G=P.getPoint((A-T)/H);d.push(G);break}T+=H}return d}},function(x,N,r){var m=r(34),u=r(33);x.exports=function(c){for(var p=c.points,h=0,l=0;l<p.length;l++){var d=p[l],y=p[(l+1)%p.length],g=new u(d.x,d.y,y.x,y.y);h+=m(g)}return h}},function(x,N){x.exports=function(r,m){return!(m.width*m.height>r.width*r.height)&&m.x>r.x&&m.x<r.right&&m.right>r.x&&m.right<r.right&&m.y>r.y&&m.y<r.bottom&&m.bottom>r.y&&m.bottom<r.bottom}},function(x,N,r){var m=r(8);x.exports=function(u,c,p){p===void 0&&(p=new m);var h=Math.min(u.x,c.x),l=Math.min(u.y,c.y),d=Math.max(u.right,c.right)-h,y=Math.max(u.bottom,c.bottom)-l;return p.setTo(h,l,d,y)}},function(x,N,r){var m=r(3),u=r(34);x.exports=function(c,p,h){h===void 0&&(h=new m);var l=c.getLineA(),d=c.getLineB(),y=c.getLineC();if(p<=0||1<=p)return h.x=l.x1,h.y=l.y1,h;var g=u(l),b=u(d),A=u(y),T=(g+b+A)*p,C=0;return T<g?(C=T/g,h.x=l.x1+(l.x2-l.x1)*C,h.y=l.y1+(l.y2-l.y1)*C):g+b<T?(C=(T-=g+b)/A,h.x=y.x1+(y.x2-y.x1)*C,h.y=y.y1+(y.y2-y.y1)*C):(C=(T-=g)/b,h.x=d.x1+(d.x2-d.x1)*C,h.y=d.y1+(d.y2-d.y1)*C),h}},function(x,N,r){var m=r(34),u=r(3);x.exports=function(c,p,h,l){l===void 0&&(l=[]);var d=c.getLineA(),y=c.getLineB(),g=c.getLineC(),b=m(d),A=m(y),T=m(g),C=b+A+T;!p&&0<h&&(p=C/h);for(var O=0;O<p;O++){var L=C*(O/p),P=0,H=new u;L<b?(P=L/b,H.x=d.x1+(d.x2-d.x1)*P,H.y=d.y1+(d.y2-d.y1)*P):b+A<L?(P=(L-=b+A)/T,H.x=g.x1+(g.x2-g.x1)*P,H.y=g.y1+(g.y2-g.y1)*P):(P=(L-=b)/A,H.x=y.x1+(y.x2-y.x1)*P,H.y=y.y1+(y.y2-y.y1)*P),l.push(H)}return l}},function(x,N,r){var m=r(3);x.exports=function(u,c){return c===void 0&&(c=new m),c.x=(u.x1+u.x2+u.x3)/3,c.y=(u.y1+u.y2+u.y3)/3,c}},function(x,N){x.exports=function(r,m,u){return r.x1+=m,r.y1+=u,r.x2+=m,r.y2+=u,r.x3+=m,r.y3+=u,r}},function(x,N,r){var m=r(3);function u(c,p,h,l){var d=c-h,y=p-l,g=d*d+y*y;return Math.sqrt(g)}x.exports=function(c,p){p===void 0&&(p=new m);var h=c.x1,l=c.y1,d=c.x2,y=c.y2,g=c.x3,b=c.y3,A=u(g,b,d,y),T=u(h,l,g,b),C=u(d,y,h,l),O=A+T+C;return p.x=(h*A+d*T+g*C)/O,p.y=(l*A+y*T+b*C)/O,p}},function(x,N,r){var m=r(819),u=r(0),c=r(32),p=r(61),h=r(50),l=r(9),d=r(39),y=new u({Extends:d,Mixins:[m],initialize:function(g,b,A,T,C,O,L,P,H){b===void 0&&(b=0),A===void 0&&(A=0),T===void 0&&(T=128),C===void 0&&(C=0),O===void 0&&(O=360),L===void 0&&(L=!1),d.call(this,g,"Arc",new h(0,0,T)),this._startAngle=C,this._endAngle=O,this._anticlockwise=L,this._iterations=.01,this.setPosition(b,A);var G=2*this.geom.radius;this.setSize(G,G),P!==void 0&&this.setFillStyle(P,H),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(g){this._iterations=g,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(g){var b=2*(this.geom.radius=g);this.setSize(b,b),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(g){this._startAngle=g,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(g){this._endAngle=g,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(g){this._anticlockwise=g,this.updateData()}},setRadius:function(g){return this.radius=g,this},setIterations:function(g){return g===void 0&&(g=.01),this.iterations=g,this},setStartAngle:function(g,b){return this._startAngle=g,b!==void 0&&(this._anticlockwise=b),this.updateData()},setEndAngle:function(g,b){return this._endAngle=g,b!==void 0&&(this._anticlockwise=b),this.updateData()},updateData:function(){var g=this._iterations,b=g,A=this.geom.radius,T=c(this._startAngle),C=c(this._endAngle),O=A,L=A;C-=T,this._anticlockwise?C<-l.PI2?C=-l.PI2:0<C&&(C=-l.PI2+C%l.PI2):C>l.PI2?C=l.PI2:C<0&&(C=l.PI2+C%l.PI2);for(var P,H=[O+Math.cos(T)*A,L+Math.sin(T)*A];b<1;)P=C*b+T,H.push(O+Math.cos(P)*A,L+Math.sin(P)*A),b+=g;return P=C+T,H.push(O+Math.cos(P)*A,L+Math.sin(P)*A),H.push(O+Math.cos(T)*A,L+Math.sin(T)*A),this.pathIndexes=p(H),this.pathData=H,this}});x.exports=y},function(x,N,r){var m=r(18);x.exports=function(u,c){var p,h,l,d,y,g,b,A,T,C=m(c,"anims",null);return C===null||(typeof C=="string"?u.anims.play(C):typeof C=="object"&&(p=u.anims,h=m(C,"key",void 0),l=m(C,"startFrame",void 0),d=m(C,"delay",0),y=m(C,"repeat",0),g=m(C,"repeatDelay",0),b=m(C,"yoyo",!1),A=m(C,"play",!1),T=m(C,"delayedPlay",0),p.setDelay(d),p.setRepeat(y),p.setRepeatDelay(g),p.setYoyo(b),A?p.play(h,l):0<T?p.delayedPlay(T,h,l):p.load(h))),u}},function(x,N){x.exports=function(r){for(var m=r.length,u=r[0].length,c=new Array(u),p=0;p<u;p++){c[p]=new Array(m);for(var h=m-1;-1<h;h--)c[p][h]=r[h][p]}return c}},function(x,N,r){var m=r(145),u=r(27);x.exports=function(c,p,h,l,d,y,g){var b=p.commandBuffer,A=b.length,T=y||c.currentContext;if(A!==0&&u(c,T,p,l,d)){var C,O,L,P,H,G=0,B=0,F=0;T.beginPath();for(var D=0;D<A;++D)switch(b[D]){case m.ARC:T.arc(b[D+1],b[D+2],b[D+3],b[D+4],b[D+5],b[D+6]),D+=7;break;case m.LINE_STYLE:H=b[D+1],L=b[D+2],C=b[D+3],G=(16711680&L)>>>16,B=(65280&L)>>>8,F=255&L,T.strokeStyle="rgba("+G+","+B+","+F+","+C+")",T.lineWidth=H,D+=3;break;case m.FILL_STYLE:P=b[D+1],O=b[D+2],G=(16711680&P)>>>16,B=(65280&P)>>>8,F=255&P,T.fillStyle="rgba("+G+","+B+","+F+","+O+")",D+=2;break;case m.BEGIN_PATH:T.beginPath();break;case m.CLOSE_PATH:T.closePath();break;case m.FILL_PATH:g||T.fill();break;case m.STROKE_PATH:g||T.stroke();break;case m.FILL_RECT:g?T.rect(b[D+1],b[D+2],b[D+3],b[D+4]):T.fillRect(b[D+1],b[D+2],b[D+3],b[D+4]),D+=4;break;case m.FILL_TRIANGLE:T.beginPath(),T.moveTo(b[D+1],b[D+2]),T.lineTo(b[D+3],b[D+4]),T.lineTo(b[D+5],b[D+6]),T.closePath(),g||T.fill(),D+=6;break;case m.STROKE_TRIANGLE:T.beginPath(),T.moveTo(b[D+1],b[D+2]),T.lineTo(b[D+3],b[D+4]),T.lineTo(b[D+5],b[D+6]),T.closePath(),g||T.stroke(),D+=6;break;case m.LINE_TO:T.lineTo(b[D+1],b[D+2]),D+=2;break;case m.MOVE_TO:T.moveTo(b[D+1],b[D+2]),D+=2;break;case m.LINE_FX_TO:T.lineTo(b[D+1],b[D+2]),D+=5;break;case m.MOVE_FX_TO:T.moveTo(b[D+1],b[D+2]),D+=5;break;case m.SAVE:T.save();break;case m.RESTORE:T.restore();break;case m.TRANSLATE:T.translate(b[D+1],b[D+2]),D+=2;break;case m.SCALE:T.scale(b[D+1],b[D+2]),D+=2;break;case m.ROTATE:T.rotate(b[D+1]),D+=1;break;case m.GRADIENT_FILL_STYLE:D+=5;break;case m.GRADIENT_LINE_STYLE:D+=6;break;case m.SET_TEXTURE:D+=2}T.restore()}}},function(x,N,r){var m=r(0),u=r(39),c=r(33),p=r(872),h=new m({Extends:u,Mixins:[p],initialize:function(l,d,y,g,b,A,T,C,O){d===void 0&&(d=0),y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=0),A===void 0&&(A=128),T===void 0&&(T=0),u.call(this,l,"Line",new c(g,b,A,T));var L=this.geom.right-this.geom.left,P=this.geom.bottom-this.geom.top;this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,y),this.setSize(L,P),C!==void 0&&this.setStrokeStyle(1,C,O),this.updateDisplayOrigin()},setLineWidth:function(l,d){return d===void 0&&(d=l),this._startWidth=l,this._endWidth=d,this.lineWidth=l,this},setTo:function(l,d,y,g){return this.geom.setTo(l,d,y,g),this}});x.exports=h},function(x,N,r){var m=r(0),u=r(8),c=r(39),p=r(875),h=new m({Extends:c,Mixins:[p],initialize:function(l,d,y,g,b,A,T){d===void 0&&(d=0),y===void 0&&(y=0),g===void 0&&(g=128),b===void 0&&(b=128),c.call(this,l,"Rectangle",new u(0,0,g,b)),this.setPosition(d,y),this.setSize(g,b),A!==void 0&&this.setFillStyle(A,T),this.updateDisplayOrigin(),this.updateData()},updateData:function(){var l=[],d=this.geom,y=this._tempLine;return d.getLineA(y),l.push(y.x1,y.y1,y.x2,y.y2),d.getLineB(y),l.push(y.x2,y.y2),d.getLineC(y),l.push(y.x2,y.y2),d.getLineD(y),l.push(y.x2,y.y2),this.pathData=l,this}});x.exports=h},function(x,N,r){var m=r(0),u=r(2),c=new m({initialize:function(p,h,l,d,y){var g;typeof p=="object"?(p=u(g=p,"x",0),h=u(g,"y",0),l=u(g,"power",0),d=u(g,"epsilon",100),y=u(g,"gravity",50)):(p===void 0&&(p=0),h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=100),y===void 0&&(y=50)),this.x=p,this.y=h,this.active=!0,this._gravity=y,this._power=0,this._epsilon=0,this.power=l,this.epsilon=d},update:function(p,h){var l,d,y=this.x-p.x,g=this.y-p.y,b=y*y+g*g;b!==0&&(l=Math.sqrt(b),b<this._epsilon&&(b=this._epsilon),d=this._power*h/(b*l)*100,p.velocityX+=y*d,p.velocityY+=g*d)},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(p){this._epsilon=p*p}},power:{get:function(){return this._power/this._gravity},set:function(p){this._power=p*this._gravity}},gravity:{get:function(){return this._gravity},set:function(p){var h=this.power;this._gravity=p,this.power=h}}});x.exports=c},function(x,N,r){var m=r(0),u=r(32),c=r(46),p=new m({initialize:function(h){this.emitter=h,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return 0<this.lifeCurrent},resetPosition:function(){this.x=0,this.y=0},fire:function(h,l){var d=this.emitter;this.frame=d.getFrame(),d.emitZone&&d.emitZone.getPoint(this),h===void 0?(d.follow&&(this.x+=d.follow.x+d.followOffset.x),this.x+=d.x.onEmit(this,"x")):this.x+=h,l===void 0?(d.follow&&(this.y+=d.follow.y+d.followOffset.y),this.y+=d.y.onEmit(this,"y")):this.y+=l,this.life=d.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var y,g,b,A,T,C=d.speedX.onEmit(this,"speedX"),O=d.speedY?d.speedY.onEmit(this,"speedY"):C;d.radial?(y=u(d.angle.onEmit(this,"angle")),this.velocityX=Math.cos(y)*Math.abs(C),this.velocityY=Math.sin(y)*Math.abs(O)):d.moveTo?(g=d.moveToX.onEmit(this,"moveToX"),b=d.moveToY?d.moveToY.onEmit(this,"moveToY"):g,A=Math.atan2(b-this.y,g-this.x),T=c(this.x,this.y,g,b)/(this.life/1e3),this.velocityX=Math.cos(A)*T,this.velocityY=Math.sin(A)*T):(this.velocityX=C,this.velocityY=O),d.acceleration&&(this.accelerationX=d.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=d.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=d.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=d.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=d.delay.onEmit(this,"delay"),this.scaleX=d.scaleX.onEmit(this,"scaleX"),this.scaleY=d.scaleY?d.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=d.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),this.bounce=d.bounce.onEmit(this,"bounce"),this.alpha=d.alpha.onEmit(this,"alpha"),this.tint=d.tint.onEmit(this,"tint")},computeVelocity:function(h,l,d,y){var g=this.velocityX,b=this.velocityY,A=this.accelerationX,T=this.accelerationY,C=this.maxVelocityX,O=this.maxVelocityY;g+=h.gravityX*d,b+=h.gravityY*d,A&&(g+=A*d),T&&(b+=T*d),C<g?g=C:g<-C&&(g=-C),O<b?b=O:b<-O&&(b=-O),this.velocityX=g,this.velocityY=b;for(var L=0;L<y.length;L++)y[L].update(this,l,d)},checkBounds:function(h){var l=h.bounds,d=-this.bounce;this.x<l.x&&h.collideLeft?(this.x=l.x,this.velocityX*=d):this.x>l.right&&h.collideRight&&(this.x=l.right,this.velocityX*=d),this.y<l.y&&h.collideTop?(this.y=l.y,this.velocityY*=d):this.y>l.bottom&&h.collideBottom&&(this.y=l.bottom,this.velocityY*=d)},update:function(h,l,d){if(0<this.delayCurrent)return this.delayCurrent-=h,!1;var y=this.emitter,g=1-this.lifeCurrent/this.life;return this.lifeT=g,this.computeVelocity(y,h,l,d),this.x+=this.velocityX*l,this.y+=this.velocityY*l,y.bounds&&this.checkBounds(y),y.deathZone&&y.deathZone.willKill(this)?!(this.lifeCurrent=0):(this.scaleX=y.scaleX.onUpdate(this,"scaleX",g,this.scaleX),y.scaleY?this.scaleY=y.scaleY.onUpdate(this,"scaleY",g,this.scaleY):this.scaleY=this.scaleX,this.angle=y.rotate.onUpdate(this,"rotate",g,this.angle),this.rotation=u(this.angle),this.alpha=y.alpha.onUpdate(this,"alpha",g,this.alpha),this.tint=y.tint.onUpdate(this,"tint",g,this.tint),this.lifeCurrent-=h,this.lifeCurrent<=0)}});x.exports=p},function(x,N,r){var m=r(41),u=r(0),c=r(14),p=r(324),h=r(325),l=r(878),d=r(2),y=r(179),g=r(388),b=r(180),A=r(322),T=r(326),C=r(8),O=r(94),L=r(4),P=r(42),H=new u({Mixins:[c.BlendMode,c.Mask,c.ScrollFactor,c.Visible],initialize:function(G,B){this.manager=G,this.texture=G.texture,this.frames=[G.defaultFrame],this.defaultFrame=G.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=A,this.x=new l(B,"x",0,!0),this.y=new l(B,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new l(B,"accelerationX",0,!0),this.accelerationY=new l(B,"accelerationY",0,!0),this.maxVelocityX=new l(B,"maxVelocityX",1e4,!0),this.maxVelocityY=new l(B,"maxVelocityY",1e4,!0),this.speedX=new l(B,"speedX",0,!0),this.speedY=new l(B,"speedY",0,!0),this.moveTo=!1,this.moveToX=new l(B,"moveToX",0,!0),this.moveToY=new l(B,"moveToY",0,!0),this.bounce=new l(B,"bounce",0,!0),this.scaleX=new l(B,"scaleX",1),this.scaleY=new l(B,"scaleY",1),this.tint=new l(B,"tint",4294967295),this.alpha=new l(B,"alpha",1),this.lifespan=new l(B,"lifespan",1e3,!0),this.angle=new l(B,"angle",{min:0,max:360},!0),this.rotate=new l(B,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new l(B,"quantity",1,!0),this.delay=new l(B,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=m.NORMAL,this.follow=null,this.followOffset=new L,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,B&&this.fromJSON(B)},fromJSON:function(G){if(!G)return this;for(var B,D=0,F="",D=0;D<this.configFastMap.length;D++)F=this.configFastMap[D],b(G,F)&&(this[F]=d(G,F));for(D=0;D<this.configOpMap.length;D++)F=this.configOpMap[D],b(G,F)&&this[F].loadConfig(G);return this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,b(G,"speed")&&(this.speedX.loadConfig(G,"speed"),this.speedY=null),(g(G,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),b(G,"scale")&&(this.scaleX.loadConfig(G,"scale"),this.scaleY=null),b(G,"callbackScope")&&(B=d(G,"callbackScope",null),this.emitCallbackScope=B,this.deathCallbackScope=B),b(G,"emitZone")&&this.setEmitZone(G.emitZone),b(G,"deathZone")&&this.setDeathZone(G.deathZone),b(G,"bounds")&&this.setBounds(G.bounds),b(G,"followOffset")&&this.followOffset.setFromObject(d(G,"followOffset",0)),b(G,"frame")&&this.setFrame(G.frame),this},toJSON:function(G){G===void 0&&(G={});for(var F=0,B="",F=0;F<this.configFastMap.length;F++)G[B=this.configFastMap[F]]=this[B];for(F=0;F<this.configOpMap.length;F++)this[B=this.configOpMap[F]]&&(G[B]=this[B].toJSON());return this.speedY||(delete G.speedX,G.speed=this.speedX.toJSON()),this.scaleY||(delete G.scaleX,G.scale=this.scaleX.toJSON()),G},startFollow:function(G,B,F,D){return B===void 0&&(B=0),F===void 0&&(F=0),D===void 0&&(D=!1),this.follow=G,this.followOffset.set(B,F),this.trackVisible=D,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return y(this.frames);var G=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=P(this.currentFrame+1,0,this._frameLength)),G},setFrame:function(G,B,F){B===void 0&&(B=!0),F===void 0&&(F=1),this.randomFrame=B,this.frameQuantity=F,this.currentFrame=0,this._frameCounter=0;var D,V,z=typeof G;return Array.isArray(G)||z=="string"||z=="number"?this.manager.setEmitterFrames(G,this):z=="object"&&((G=d(D=G,"frames",null))&&this.manager.setEmitterFrames(G,this),V=d(D,"cycle",!1),this.randomFrame=!V,this.frameQuantity=d(D,"quantity",F)),this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(G){return G===void 0&&(G=!0),this.radial=G,this},setPosition:function(G,B){return this.x.onChange(G),this.y.onChange(B),this},setBounds:function(G,B,F,D){var V;return typeof G=="object"&&(G=(V=G).x,B=V.y,F=b(V,"w")?V.w:V.width,D=b(V,"h")?V.h:V.height),this.bounds?this.bounds.setTo(G,B,F,D):this.bounds=new C(G,B,F,D),this},setSpeedX:function(G){return this.speedX.onChange(G),this.radial=!1,this},setSpeedY:function(G){return this.speedY&&(this.speedY.onChange(G),this.radial=!1),this},setSpeed:function(G){return this.speedX.onChange(G),this.speedY=null,this.radial=!0,this},setScaleX:function(G){return this.scaleX.onChange(G),this},setScaleY:function(G){return this.scaleY.onChange(G),this},setScale:function(G){return this.scaleX.onChange(G),this.scaleY=null,this},setGravityX:function(G){return this.gravityX=G,this},setGravityY:function(G){return this.gravityY=G,this},setGravity:function(G,B){return this.gravityX=G,this.gravityY=B,this},setAlpha:function(G){return this.alpha.onChange(G),this},setTint:function(G){return this.tint.onChange(G),this},setEmitterAngle:function(G){return this.angle.onChange(G),this},setAngle:function(G){return this.angle.onChange(G),this},setLifespan:function(G){return this.lifespan.onChange(G),this},setQuantity:function(G){return this.quantity.onChange(G),this},setFrequency:function(G,B){return this.frequency=G,this._counter=0,B&&this.quantity.onChange(B),this},setEmitZone:function(G){if(G===void 0)this.emitZone=null;else{var B=d(G,"type","random"),F=d(G,"source",null);switch(B){case"random":this.emitZone=new T(F);break;case"edge":var D=d(G,"quantity",1),V=d(G,"stepRate",0),z=d(G,"yoyo",!1),Y=d(G,"seamless",!0);this.emitZone=new h(F,D,V,z,Y)}}return this},setDeathZone:function(G){var B,F,D;return G===void 0?this.deathZone=null:(B=d(G,"type","onEnter"),(F=d(G,"source",null))&&typeof F.contains=="function"&&(D=B==="onEnter",this.deathZone=new p(F,D))),this},reserve:function(G){for(var B=this.dead,F=0;F<G;F++)B.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return 0<this.maxParticles&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(G,B){return G===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof G=="function"&&(this.emitCallback=G,B&&(this.emitCallbackScope=B)),this},onParticleDeath:function(G,B){return G===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof G=="function"&&(this.deathCallback=G,B&&(this.deathCallbackScope=B)),this},killAll:function(){for(var G=this.dead,B=this.alive;0<B.length;)G.push(B.pop());return this},forEachAlive:function(G,B){for(var F=this.alive,D=F.length,V=0;V<D;++V)G.call(B,F[V],this);return this},forEachDead:function(G,B){for(var F=this.dead,D=F.length,V=0;V<D;++V)G.call(B,F[V],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return O.inplace(this.alive,this.depthSortCallback),this},flow:function(G,B){return B===void 0&&(B=1),this.frequency=G,this.quantity.onChange(B),this.start()},explode:function(G,B,F){return this.frequency=-1,this.emitParticle(G,B,F)},emitParticleAt:function(G,B,F){return this.emitParticle(F,G,B)},emitParticle:function(G,B,F){if(!this.atLimit()){G===void 0&&(G=this.quantity.onEmit());for(var D=this.dead,V=0;V<G;V++){var z=D.pop();if((z=z||new this.particleClass(this)).fire(B,F),this.particleBringToTop?this.alive.push(z):this.alive.unshift(z),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,z,this),this.atLimit())break}return z}},preUpdate:function(G,B){var F=(B*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var D=this.manager.getProcessors(),V=this.alive,z=this.dead,Y=0,j=[],X=V.length;for(Y=0;Y<X;Y++){var J=V[Y];J.update(B,F,D)&&j.push({index:Y,particle:J})}if(0<(X=j.length))for(var Q=this.deathCallback,se=this.deathCallbackScope,Y=X-1;0<=Y;Y--){var te=j[Y];V.splice(te.index,1),z.push(te.particle),Q&&Q.call(se,te.particle),te.particle.resetPosition()}this.on&&(this.frequency===0?this.emitParticle():0<this.frequency&&(this._counter-=B,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(G,B){return G.y-B.y}});x.exports=H},function(x,N,r){var m=new(r(0))({initialize:function(u,c){this.source=u,this.killOnEnter=c},willKill:function(u){var c=this.source.contains(u.x,u.y);return c&&this.killOnEnter||!c&&!this.killOnEnter}});x.exports=m},function(x,N,r){var m=new(r(0))({initialize:function(u,c,p,h,l){h===void 0&&(h=!1),l===void 0&&(l=!0),this.source=u,this.points=[],this.quantity=c,this.stepRate=p,this.yoyo=h,this.counter=-1,this.seamless=l,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){var u,c;this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless&&(u=this.points[0],c=this.points[this.points.length-1],u.x===c.x&&u.y===c.y&&this.points.pop());var p=this._length;return this._length=this.points.length,this._length<p&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(u){return this.source=u,this.updateSource()},getPoint:function(u){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var c=this.points[this.counter];c&&(u.x=c.x,u.y=c.y)}});x.exports=m},function(x,N,r){var m=r(0),u=r(4),c=new m({initialize:function(p){this.source=p,this._tempVec=new u},getPoint:function(p){var h=this._tempVec;this.source.getRandomPoint(h),p.x=h.x,p.y=h.y}});x.exports=c},function(x,N,r){var m=r(0),u=r(7),c=r(886),p=new m({Extends:u,initialize:function(){u.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},add:function(h){return this._pending.push(h),this._toProcess++,h},remove:function(h){return this._destroy.push(h),this._toProcess++,h},removeAll:function(){for(var h=this._active,l=this._destroy,d=h.length;d--;)l.push(h[d]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;for(var h,l=this._destroy,d=this._active,y=0;y<l.length;y++){h=l[y];var g=d.indexOf(h);g!==-1&&(d.splice(g,1),this.emit(c.REMOVE,h))}for(l.length=0,l=this._pending,y=0;y<l.length;y++)h=l[y],this._active.push(h),this.emit(c.ADD,h);return l.length=0,this._toProcess=0,this._active},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});x.exports=p},function(x,N){x.exports=function(r,m,u){return{gameObject:r,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:m,hitAreaCallback:u,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(x,N,r){var m=new(r(0))({initialize:function(u,c){this.pad=u,this.events=u.events,this.index=c,this.value=0,this.threshold=.1},update:function(u){this.value=u},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});x.exports=m},function(x,N,r){var m=r(0),u=r(146),c=new m({initialize:function(p,h){this.pad=p,this.events=p.manager,this.index=h,this.value=0,this.threshold=1,this.pressed=!1},update:function(p){this.value=p;var h=this.pad,l=this.index;p>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(u.BUTTON_DOWN,h,this,p),this.pad.emit(u.GAMEPAD_BUTTON_DOWN,l,p,this)):this.pressed&&(this.pressed=!1,this.events.emit(u.BUTTON_UP,h,this,p),this.pad.emit(u.GAMEPAD_BUTTON_UP,l,p,this))},destroy:function(){this.pad=null,this.events=null}});x.exports=c},function(x,N,r){var m=r(329),u=r(330),c=r(0),p=r(7),h=r(4),l=new c({Extends:p,initialize:function(d,y){p.call(this),this.manager=d,this.pad=y,this.id=y.id,this.index=y.index;for(var g=[],b=0;b<y.buttons.length;b++)g.push(new u(this,b));this.buttons=g;for(var A=[],b=0;b<y.axes.length;b++)A.push(new m(this,b));this.axes=A,this.vibration=y.vibrationActuator;var T={value:0,pressed:!1};this._LCLeft=g[14]?g[14]:T,this._LCRight=g[15]?g[15]:T,this._LCTop=g[12]?g[12]:T,this._LCBottom=g[13]?g[13]:T,this._RCLeft=g[2]?g[2]:T,this._RCRight=g[1]?g[1]:T,this._RCTop=g[3]?g[3]:T,this._RCBottom=g[0]?g[0]:T,this._FBLeftTop=g[4]?g[4]:T,this._FBLeftBottom=g[6]?g[6]:T,this._FBRightTop=g[5]?g[5]:T,this._FBRightBottom=g[7]?g[7]:T;var C={value:0};this._HAxisLeft=A[0]?A[0]:C,this._VAxisLeft=A[1]?A[1]:C,this._HAxisRight=A[2]?A[2]:C,this._VAxisRight=A[3]?A[3]:C,this.leftStick=new h,this.rightStick=new h},getAxisTotal:function(){return this.axes.length},getAxisValue:function(d){return this.axes[d].getValue()},setAxisThreshold:function(d){for(var y=0;y<this.axes.length;y++)this.axes[y].threshold=d},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(d){return this.buttons[d].value},isButtonDown:function(d){return this.buttons[d].pressed},update:function(d){for(var y=this.buttons,g=d.buttons,C=y.length,b=0;b<C;b++)y[b].update(g[b].value);var A=this.axes,T=d.axes,C=A.length;for(b=0;b<C;b++)A[b].update(T[b]);2<=C&&(this.leftStick.set(A[0].getValue(),A[1].getValue()),4<=C&&this.rightStick.set(A[2].getValue(),A[3].getValue()))},destroy:function(){var d;for(this.removeAllListeners(),this.manager=null,this.pad=null,d=0;d<this.buttons.length;d++)this.buttons[d].destroy();for(d=0;d<this.axes.length;d++)this.axes[d].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});x.exports=l},function(x,N,r){var m=r(0),u=r(7),c=r(96),p=new m({Extends:u,initialize:function(h,l){u.call(this),this.plugin=h,this.keyCode=l,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(c.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(c.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(c.UP,this,h))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});x.exports=p},function(x,N,r){var m=r(0),u=r(96),c=r(2),p=r(927),h=r(929),l=new m({initialize:function(d,y,g){if(g===void 0&&(g={}),y.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var b=0;b<y.length;b++){var A=y[b];typeof A=="string"?this.keyCodes.push(A.toUpperCase().charCodeAt(0)):typeof A=="number"?this.keyCodes.push(A):A.hasOwnProperty("keyCode")&&this.keyCodes.push(A.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=c(g,"resetOnWrongKey",!0),this.maxKeyDelay=c(g,"maxKeyDelay",0),this.resetOnMatch=c(g,"resetOnMatch",!1),this.deleteOnMatch=c(g,"deleteOnMatch",!1);var T=this;this.onKeyDown=function(C){!T.matched&&T.enabled&&p(C,T)&&(T.manager.emit(u.COMBO_MATCH,T,C),T.resetOnMatch?h(T):T.deleteOnMatch&&T.destroy())},this.manager.on(u.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(u.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});x.exports=l},function(x,N,r){var m=r(147);x.exports=function(u,c){var p=m(c,u.xhrSettings),h=new XMLHttpRequest;if(h.open("GET",u.src,p.async,p.user,p.password),h.responseType=u.xhrSettings.responseType,h.timeout=p.timeout,p.headers)for(var l in p.headers)h.setRequestHeader(l,p.headers[l]);return p.header&&p.headerValue&&h.setRequestHeader(p.header,p.headerValue),p.requestedWith&&h.setRequestHeader("X-Requested-With",p.requestedWith),p.overrideMimeType&&h.overrideMimeType(p.overrideMimeType),p.withCredentials&&(h.withCredentials=!0),h.onload=u.onLoad.bind(u,h),h.onerror=u.onError.bind(u,h),h.onprogress=u.onProgress.bind(u),h.send(),h}},function(x,N,r){var m=r(0),u=r(22),c=r(24),p=r(11),h=r(2),l=r(10),d=r(263),y=new m({Extends:c,initialize:function(g,b,A,T){var C,O="xml";l(b)&&(b=h(C=b,"key"),A=h(C,"url"),T=h(C,"xhrSettings"),O=h(C,"extension",O));var L={type:"xml",cache:g.cacheManager.xml,extension:O,responseType:"text",key:b,url:A,xhrSettings:T};c.call(this,g,L)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=d(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});p.register("xml",function(g,b,A){if(Array.isArray(g))for(var T=0;T<g.length;T++)this.addFile(new y(this,g[T]));else this.addFile(new y(this,g,b,A));return this}),x.exports=y},function(x,N,r){var m=r(0),u=r(2),c=new m({initialize:function(p){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(p)},reset:function(p){return this.delay=u(p,"delay",0),this.repeat=u(p,"repeat",0),this.loop=u(p,"loop",!1),this.callback=u(p,"callback",void 0),this.callbackScope=u(p,"callbackScope",this.callback),this.args=u(p,"args",[]),this.timeScale=u(p,"timeScale",1),this.startAt=u(p,"startAt",0),this.paused=u(p,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(0<this.repeat){var p=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/p}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return .001*this.elapsed},remove:function(p){p===void 0&&(p=!1),this.elapsed=this.delay,this.hasDispatched=!p,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});x.exports=c},function(x,N,r){var m=r(949);x.exports=function(u){var c,p=[];if(u.hasOwnProperty("props"))for(c in u.props)c.substr(0,1)!=="_"&&p.push({key:c,value:u.props[c]});else for(c in u)m.indexOf(c)===-1&&c.substr(0,1)!=="_"&&p.push({key:c,value:u[c]});return p}},function(x,N,r){var m=r(5);x.exports=function(u){var c=m(u,"tweens",null);return c===null?[]:(typeof c=="function"&&(c=c.call()),Array.isArray(c)||(c=[c]),c)}},function(x,N,r){var m=r(150),u=r(18),c=r(57),p=r(45),h=r(98),l=r(5),d=r(149),y=r(151),g=r(153);x.exports=function(b,A,T){T===void 0&&(T=m);var C=l(A,"from",0),O=l(A,"to",1),L=[{value:C}],P=h(A,"delay",T.delay),H=h(A,"duration",T.duration),G=l(A,"easeParams",T.easeParams),B=p(l(A,"ease",T.ease),G),F=h(A,"hold",T.hold),D=h(A,"repeat",T.repeat),V=h(A,"repeatDelay",T.repeatDelay),z=c(A,"yoyo",T.yoyo),Y=[],j=d("value",O),X=g(L[0],0,"value",j.getEnd,j.getStart,j.getActive,B,P,H,z,F,D,V,!1,!1);X.start=C,X.current=C,X.to=O,Y.push(X);var J=new y(b,Y,L);J.offset=u(A,"offset",null),J.completeDelay=u(A,"completeDelay",0),J.loop=Math.round(u(A,"loop",0)),J.loopDelay=Math.round(u(A,"loopDelay",0)),J.paused=c(A,"paused",!1),J.useFrames=c(A,"useFrames",!1);for(var Q=l(A,"callbackScope",J),se=[J,null],te=y.TYPES,ie=0;ie<te.length;ie++){var re,he,de=te[ie],ue=l(A,de,!1);ue&&(re=l(A,de+"Scope",Q),he=l(A,de+"Params",[]),J.setCallback(de,ue,se.concat(he),re))}return J}},function(x,N,r){var m=r(45),u=r(5),c=r(9);x.exports=function(p,h){h===void 0&&(h={});var l=u(h,"start",0),d=u(h,"ease",null),y=u(h,"grid",null),g=u(h,"from",0),b=g==="first",A=g==="center",T=g==="last",C=typeof g=="number",O=Array.isArray(p),L=parseFloat(O?p[0]:p),P=O?parseFloat(p[1]):0,H=Math.max(L,P);if(O&&(l+=L),y){var G,B,F=y[0],D=y[1],V=0,z=0,Y=[];T?(V=F-1,z=D-1):C?(V=g%F,z=Math.floor(g/F)):A&&(V=(F-1)/2,z=(D-1)/2);for(var j=c.MIN_SAFE_INTEGER,X=0;X<D;X++){Y[X]=[];for(var J=0;J<F;J++){G=V-J,B=z-X;var Q=Math.sqrt(G*G+B*B);j<Q&&(j=Q),Y[X][J]=Q}}}var se=d?m(d):null;return y?function(te,ie,re,he){var de,ue=0,Te=he%F,ye=Math.floor(he/F);return 0<=Te&&Te<F&&0<=ye&&ye<D&&(ue=Y[ye][Te]),(O?(de=P-L,se?ue/j*de*se(ue/j):ue/j*de):se?ue*L*se(ue/j):ue*L)+l}:function(te,ie,re,he,de){var ue,Te;return de--,b?ue=he:A?ue=Math.abs(de/2-he):T?ue=de-he:C&&(ue=Math.abs(g-he)),(O?(Te=A?(P-L)/de*(2*ue):(P-L)/de*ue,se?Te*se(ue/de):Te):se?de*H*se(ue/de):ue*L)+l}}},function(x,N,r){var m=r(49),u=r(150),c=r(18),p=r(57),h=r(45),l=r(98),d=r(148),y=r(338),g=r(5),b=r(342),A=r(99);x.exports=function(T,C){var O=new b(T);O.completeDelay=c(C,"completeDelay",0),O.loop=Math.round(c(C,"loop",0)),O.loopDelay=Math.round(c(C,"loopDelay",0)),O.paused=p(C,"paused",!1),O.useFrames=p(C,"useFrames",!1);var L,P,H=g(C,"callbackScope",O),G=[O],B=g(C,"onStart",!1);B&&(L=g(C,"onStartScope",H),P=g(C,"onStartParams",[]),O.setCallback("onStart",B,G.concat(P),L));var F,D,V=g(C,"onUpdate",!1);V&&(F=g(C,"onUpdateScope",H),D=g(C,"onUpdateParams",[]),O.setCallback("onUpdate",V,G.concat(D),F));var z,Y,j=g(C,"onLoop",!1);j&&(z=g(C,"onLoopScope",H),Y=g(C,"onLoopParams",[]),O.setCallback("onLoop",j,G.concat(Y),z));var X,J,Q=g(C,"onYoyo",!1);Q&&(X=g(C,"onYoyoScope",H),J=g(C,"onYoyoParams",[]),O.setCallback("onYoyo",Q,G.concat(null,J),X));var se,te,ie=g(C,"onComplete",!1);ie&&(se=g(C,"onCompleteScope",H),te=g(C,"onCompleteParams",[]),O.setCallback("onComplete",ie,G.concat(te),se));var re=y(C);if(re.length===0)return O.paused=!0,O;var he=m(u);he.targets=d(C);var de=c(C,"totalDuration",0);he.duration=0<de?Math.floor(de/re.length):l(C,"duration",he.duration),he.delay=l(C,"delay",he.delay),he.easeParams=g(C,"easeParams",he.easeParams),he.ease=h(g(C,"ease",he.ease),he.easeParams),he.hold=l(C,"hold",he.hold),he.repeat=l(C,"repeat",he.repeat),he.repeatDelay=l(C,"repeatDelay",he.repeatDelay),he.yoyo=p(C,"yoyo",he.yoyo),he.flipX=p(C,"flipX",he.flipX),he.flipY=p(C,"flipY",he.flipY);for(var ue=0;ue<re.length;ue++)O.queue(A(O,re[ue],he));return O}},function(x,N,r){var m=r(0),u=r(7),c=r(152),p=r(99),h=r(58),l=new m({Extends:u,initialize:function(d){u.call(this),this.manager=d,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=h.PENDING_ADD,this._pausedState=h.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(d,y){this.emit(d,this),y&&y.func.apply(y.scope,y.params)},setTimeScale:function(d){return this.timeScale=d,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},add:function(d){return this.queue(p(this,d))},queue:function(d){return this.isPlaying()||(d.parent=this,d.parentIsTimeline=!0,this.data.push(d),this.totalData=this.data.length),this},hasOffset:function(d){return d.offset!==null},isOffsetAbsolute:function(d){return typeof d=="number"},isOffsetRelative:function(d){if(typeof d=="string"){var y=d[0];if(y==="-"||y==="+")return!0}return!1},getRelativeOffset:function(d,y){var g=d[0],b=parseFloat(d.substr(2)),A=y;switch(g){case"+":A+=b;break;case"-":A-=b}return Math.max(0,A)},calcDuration:function(){for(var d=0,y=0,g=0,b=0;b<this.totalData;b++){var A=this.data[b];A.init(),this.hasOffset(A)?this.isOffsetAbsolute(A.offset)?(A.calculatedOffset=A.offset,A.offset===0&&(g=0)):this.isOffsetRelative(A.offset)&&(A.calculatedOffset=this.getRelativeOffset(A.offset,d)):A.calculatedOffset=g,d=A.totalDuration+A.calculatedOffset,y+=A.totalDuration,g+=A.totalDuration}this.duration=y,this.loopCounter=this.loop===-1?999999999999:this.loop,0<this.loopCounter?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=h.PAUSED,!1)},resetTweens:function(d){for(var y=0;y<this.totalData;y++)this.data[y].play(d)},setCallback:function(d,y,g,b){return l.TYPES.indexOf(d)!==-1&&(this.callbacks[d]={func:y,scope:b,params:g}),this},makeActive:function(d){return this.manager.makeActive(d)},play:function(){if(this.state!==h.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=h.ACTIVE,this.dispatchTimelineEvent(c.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTimelineEvent(c.TIMELINE_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTimelineEvent(c.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(d,y){if(this.state!==h.PAUSED){switch(this.useFrames&&(y=+this.manager.timeScale),y*=this.timeScale,this.elapsed+=y,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=y,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:for(var g=this.totalData,b=0;b<this.totalData;b++)this.data[b].update(d,y)&&g--;this.dispatchTimelineEvent(c.TIMELINE_UPDATE,this.callbacks.onUpdate),g===0&&this.nextState();break;case h.LOOP_DELAY:this.countdown-=y,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTimelineEvent(c.TIMELINE_LOOP,this.callbacks.onLoop));break;case h.COMPLETE_DELAY:this.countdown-=y,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTimelineEvent(c.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===h.PENDING_REMOVE}},stop:function(){this.state=h.PENDING_REMOVE},pause:function(){if(this.state!==h.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED,this.emit(c.TIMELINE_PAUSE,this),this},resume:function(){return this.state===h.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(c.TIMELINE_RESUME,this)),this},hasTarget:function(d){for(var y=0;y<this.data.length;y++)if(this.data[y].hasTarget(d))return!0;return!1},destroy:function(){for(var d=0;d<this.data.length;d++)this.data[d].stop()}});l.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],x.exports=l},,,,,,function(x,N,r){var m=r(30);x.exports=function(u){var c=new m;u=u.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(y,g,b,A){return g+g+b+b+A+A});var p,h,l,d=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return d&&(p=parseInt(d[1],16),h=parseInt(d[2],16),l=parseInt(d[3],16),c.setTo(p,h,l)),c}},function(x,N){x.exports=function(r,m,u,c){return c<<24|r<<16|m<<8|u}},function(x,N){x.exports=function(r,m,u,c){c===void 0&&(c={h:0,s:0,v:0}),r/=255,m/=255,u/=255;var p=Math.min(r,m,u),h=Math.max(r,m,u),l=h-p,d=0,y=h===0?0:l/h,g=h;return h!==p&&(h===r?d=(m-u)/l+(m<u?6:0):h===m?d=(u-r)/l+2:h===u&&(d=(r-m)/l+4),d/=6),c.hasOwnProperty("_h")?(c._h=d,c._s=y,c._v=g):(c.h=d,c.s=y,c.v=g),c}},function(x,N,r){var m=r(30),u=r(352);x.exports=function(c){var p=u(c);return new m(p.r,p.g,p.b,p.a)}},function(x,N){x.exports=function(r){return 16777215<r?{a:r>>>24,r:r>>16&255,g:r>>8&255,b:255&r}:{a:255,r:r>>16&255,g:r>>8&255,b:255&r}}},function(x,N,r){var m=r(30);x.exports=function(u){return new m(u.r,u.g,u.b,u.a)}},function(x,N,r){var m=r(30);x.exports=function(u){var c,p,h,l,d=new m,y=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(u.toLowerCase());return y&&(c=parseInt(y[1],10),p=parseInt(y[2],10),h=parseInt(y[3],10),l=y[4]!==void 0?parseFloat(y[4]):1,d.setTo(c,p,h,255*l)),d}},function(x,N){x.exports=function(r,m){return Math.atan2(m.y-r.y,m.x-r.x)}},function(x,N){x.exports=function(r,m,u,c){var p=r-u,h=m-c;return p*p+h*h}},function(x,N){x.exports=function(r,m,u){return u===void 0&&(u=1e-4),m-u<r}},function(x,N){x.exports=function(r,m,u){return u===void 0&&(u=1e-4),r<m+u}},function(x,N){x.exports=function(r){var m=Math.log(r)/.6931471805599453;return 1<<Math.ceil(m)}},function(x,N){x.exports=function(r,m,u,c){return u===void 0&&(u=0),m===0?r:(r-=u,r=m*Math.ceil(r/m),c?(u+r)/m:u+r)}},function(x,N){x.exports=function(r,m){var u=r.x,c=r.y;return r.x=u*Math.cos(m)-c*Math.sin(m),r.y=u*Math.sin(m)+c*Math.cos(m),r}},function(x,N,r){var m=new(r(0))({initialize:function(u,c,p,h){this.x=0,this.y=0,this.z=0,this.w=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=c||0,this.z=p||0,this.w=h||0)},clone:function(){return new m(this.x,this.y,this.z,this.w)},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this.w=u.w||0,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},set:function(u,c,p,h){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=c||0,this.z=p||0,this.w=h||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this.w+=u.w||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this.w-=u.w||0,this},scale:function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},length:function(){var u=this.x,c=this.y,p=this.z,h=this.w;return Math.sqrt(u*u+c*c+p*p+h*h)},lengthSq:function(){var u=this.x,c=this.y,p=this.z,h=this.w;return u*u+c*c+p*p+h*h},normalize:function(){var u=this.x,c=this.y,p=this.z,h=this.w,l=u*u+c*c+p*p+h*h;return 0<l&&(l=1/Math.sqrt(l),this.x=u*l,this.y=c*l,this.z=p*l,this.w=h*l),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,c){c===void 0&&(c=0);var p=this.x,h=this.y,l=this.z,d=this.w;return this.x=p+c*(u.x-p),this.y=h+c*(u.y-h),this.z=l+c*(u.z-l),this.w=d+c*(u.w-d),this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this.w*=u.w||1,this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this.w/=u.w||1,this},distance:function(u){var c=u.x-this.x,p=u.y-this.y,h=u.z-this.z||0,l=u.w-this.w||0;return Math.sqrt(c*c+p*p+h*h+l*l)},distanceSq:function(u){var c=u.x-this.x,p=u.y-this.y,h=u.z-this.z||0,l=u.w-this.w||0;return c*c+p*p+h*h+l*l},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(u){var c=this.x,p=this.y,h=this.z,l=this.w,d=u.val;return this.x=d[0]*c+d[4]*p+d[8]*h+d[12]*l,this.y=d[1]*c+d[5]*p+d[9]*h+d[13]*l,this.z=d[2]*c+d[6]*p+d[10]*h+d[14]*l,this.w=d[3]*c+d[7]*p+d[11]*h+d[15]*l,this},transformQuat:function(u){var c=this.x,p=this.y,h=this.z,l=u.x,d=u.y,y=u.z,g=u.w,b=g*c+d*h-y*p,A=g*p+y*c-l*h,T=g*h+l*p-d*c,C=-l*c-d*p-y*h;return this.x=b*g+C*-l+A*-y-T*-d,this.y=A*g+C*-d+T*-l-b*-y,this.z=T*g+C*-y+b*-d-A*-l,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});m.prototype.sub=m.prototype.subtract,m.prototype.mul=m.prototype.multiply,m.prototype.div=m.prototype.divide,m.prototype.dist=m.prototype.distance,m.prototype.distSq=m.prototype.distanceSq,m.prototype.len=m.prototype.length,m.prototype.lenSq=m.prototype.lengthSq,x.exports=m},function(x,N){x.exports={setCrisp:function(r){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(m){r.style["image-rendering"]=m}),r.style.msInterpolationMode="nearest-neighbor",r},setBicubic:function(r){return r.style["image-rendering"]="auto",r.style.msInterpolationMode="bicubic",r}}},function(x,N,r){var m=r(365),u=r(26),c=r(0),p=r(29),h=r(366),l=r(59),d=r(25),y=new c({initialize:function(g){this.game=g,this.type=p.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.config={clearBeforeRender:g.config.clearBeforeRender,backgroundColor:g.config.backgroundColor,resolution:g.config.resolution,antialias:g.config.antialias,roundPixels:g.config.roundPixels},this.gameCanvas=g.canvas;var b={alpha:g.config.transparent,desynchronized:g.config.desynchronized};this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext("2d",b),this.currentContext=this.gameContext,this.antialias=g.config.antialias,this.blendModes=h(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this._tempMatrix4=new d,this.init()},init:function(){this.game.scale.on(l.RESIZE,this.onResize,this);var g=this.game.scale.baseSize;this.resize(g.width,g.height)},onResize:function(g,b){b.width===this.width&&b.height===this.height||this.resize(b.width,b.height)},resize:function(g,b){this.width=g,this.height=b},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,b=this.config,A=this.width,T=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),b.clearBeforeRender&&g.clearRect(0,0,A,T),b.transparent||(g.fillStyle=b.backgroundColor.rgba,g.fillRect(0,0,A,T)),g.save(),this.drawCount=0},render:function(g,b,A,T){var C=b.list,O=C.length,L=T._cx,P=T._cy,H=T._cw,G=T._ch,B=T.renderToTexture?T.context:g.sys.context;B.save(),this.game.scene.customViewports&&(B.beginPath(),B.rect(L,P,H,G),B.clip()),this.currentContext=B;var F=T.mask;F&&F.preRenderCanvas(this,null,T._maskCamera),T.transparent||(B.fillStyle=T.backgroundColor.rgba,B.fillRect(L,P,H,G)),B.globalAlpha=T.alpha,B.globalCompositeOperation="source-over",this.drawCount+=C.length,T.renderToTexture&&T.emit(u.PRE_RENDER,T),T.matrix.copyToContext(B);for(var D=0;D<O;D++){var V=C[D];V.willRender(T)&&(V.mask&&V.mask.preRenderCanvas(this,V,T),V.renderCanvas(this,V,A,T),V.mask&&V.mask.postRenderCanvas(this,V,T))}B.setTransform(1,0,0,1,0,0),B.globalCompositeOperation="source-over",B.globalAlpha=1,T.flashEffect.postRenderCanvas(B),T.fadeEffect.postRenderCanvas(B),T.dirty=!1,F&&F.postRenderCanvas(this),B.restore(),T.renderToTexture&&(T.emit(u.POST_RENDER,T),T.renderToGame&&g.sys.context.drawImage(T.canvas,L,P))},postRender:function(){this.gameContext.restore();var g=this.snapshotState;g.callback&&(m(this.gameCanvas,g),g.callback=null)},snapshotCanvas:function(g,b,A,T,C,O,L,P,H){A===void 0&&(A=!1),this.snapshotArea(T,C,O,L,b,P,H);var G=this.snapshotState;return G.getPixel=A,m(this.canvas,G),G.callback=null,this},snapshot:function(g,b,A){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,b,A)},snapshotArea:function(g,b,A,T,C,O,L){var P=this.snapshotState;return P.callback=C,P.type=O,P.encoder=L,P.getPixel=!1,P.x=g,P.y=b,P.width=Math.min(A,this.gameCanvas.width),P.height=Math.min(T,this.gameCanvas.height),this},snapshotPixel:function(g,b,A){return this.snapshotArea(g,b,1,1,A),this.snapshotState.getPixel=!0,this},batchSprite:function(g,b,A,T){var C,O,L,P,H,G,B,F,D,V,z,Y,j,X,J,Q,se,te,ie=A.alpha*g.alpha;ie!=0&&(C=this.currentContext,O=this._tempMatrix1,L=this._tempMatrix2,P=this._tempMatrix3,G=(H=b.canvasData).x,B=H.y,F=b.cutWidth,D=b.cutHeight,V=b.customPivot,z=b.source.resolution,Y=g.displayOriginX,j=g.displayOriginY,X=-Y+b.x,J=-j+b.y,g.isCropped&&((Q=g._crop).flipX===g.flipX&&Q.flipY===g.flipY||b.updateCropUVs(Q,g.flipX,g.flipY),F=Q.cw,D=Q.ch,G=Q.cx,B=Q.cy,X=-Y+Q.x,J=-j+Q.y,g.flipX&&(0<=X?X=-(X+F):X<0&&(X=Math.abs(X)-F)),g.flipY&&(0<=J?J=-(J+D):J<0&&(J=Math.abs(J)-D))),te=se=1,g.flipX&&(V||(X+=-b.realWidth+2*Y),se=-1),g.flipY&&(V||(J+=-b.realHeight+2*j),te=-1),L.applyITRS(g.x,g.y,g.rotation,g.scaleX*se,g.scaleY*te),O.copyFrom(A.matrix),T?(O.multiplyWithOffset(T,-A.scrollX*g.scrollFactorX,-A.scrollY*g.scrollFactorY),L.e=g.x,L.f=g.y):(L.e-=A.scrollX*g.scrollFactorX,L.f-=A.scrollY*g.scrollFactorY),O.multiply(L,P),C.save(),P.setToContext(C),C.globalCompositeOperation=this.blendModes[g.blendMode],C.globalAlpha=ie,C.imageSmoothingEnabled=!(!this.antialias||b.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,A),C.drawImage(b.source.image,G,B,F,D,X,J,F/z,D/z),g.mask&&g.mask.postRenderCanvas(this,g,A),C.restore())},destroy:function(){this.gameCanvas=null,this.gameContext=null,this.game=null}});x.exports=y},function(x,N,r){var m=r(23),u=r(30),c=r(2);x.exports=function(p,h){var l,d,y,g,b=c(h,"callback"),A=c(h,"type","image/png"),T=c(h,"encoder",.92),C=Math.abs(Math.round(c(h,"x",0))),O=Math.abs(Math.round(c(h,"y",0))),L=c(h,"width",p.width),P=c(h,"height",p.height);c(h,"getPixel",!1)?(l=p.getContext("2d").getImageData(C,O,1,1).data,b.call(null,new u(l[0],l[1],l[2],l[3]/255))):C!==0||O!==0||L!==p.width||P!==p.height?((d=m.createWebGL(this,L,P)).getContext("2d").drawImage(p,C,O,L,P,0,0,L,P),(y=new Image).onerror=function(){b.call(null),m.remove(d)},y.onload=function(){b.call(null,y),m.remove(d)},y.src=d.toDataURL(A,T)):((g=new Image).onerror=function(){b.call(null)},g.onload=function(){b.call(null,g)},g.src=p.toDataURL(A,T))}},function(x,N,r){var m=r(41),u=r(228);x.exports=function(){var c=[],p=u.supportNewBlendModes,h="source-over";return c[m.NORMAL]=h,c[m.ADD]="lighter",c[m.MULTIPLY]=p?"multiply":h,c[m.SCREEN]=p?"screen":h,c[m.OVERLAY]=p?"overlay":h,c[m.DARKEN]=p?"darken":h,c[m.LIGHTEN]=p?"lighten":h,c[m.COLOR_DODGE]=p?"color-dodge":h,c[m.COLOR_BURN]=p?"color-burn":h,c[m.HARD_LIGHT]=p?"hard-light":h,c[m.SOFT_LIGHT]=p?"soft-light":h,c[m.DIFFERENCE]=p?"difference":h,c[m.EXCLUSION]=p?"exclusion":h,c[m.HUE]=p?"hue":h,c[m.SATURATION]=p?"saturation":h,c[m.COLOR]=p?"color":h,c[m.LUMINOSITY]=p?"luminosity":h,c[m.ERASE]="destination-out",c[m.SOURCE_IN]="source-in",c[m.SOURCE_OUT]="source-out",c[m.SOURCE_ATOP]="source-atop",c[m.DESTINATION_OVER]="destination-over",c[m.DESTINATION_IN]="destination-in",c[m.DESTINATION_OUT]="destination-out",c[m.DESTINATION_ATOP]="destination-atop",c[m.LIGHTER]="lighter",c[m.COPY]="copy",c[m.XOR]="xor",c}},function(x,N,r){var m=r(67),u=r(26),c=r(0),p=r(29),h=r(15),l=r(84),d=r(1),y=r(59),g=r(56),b=r(85),A=r(25),T=r(13),C=r(368),O=r(369),L=r(370),P=r(169),H=r(371),G=new c({initialize:function(B){var F=B.config,D={alpha:F.transparent,desynchronized:F.desynchronized,depth:!1,antialias:F.antialiasGL,premultipliedAlpha:F.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:F.failIfMajorPerformanceCaveat,powerPreference:F.powerPreference};this.config={clearBeforeRender:F.clearBeforeRender,antialias:F.antialias,backgroundColor:F.backgroundColor,contextCreation:D,resolution:F.resolution,roundPixels:F.roundPixels,maxTextures:F.maxTextures,maxTextureSize:F.maxTextureSize,batchSize:F.batchSize,maxLights:F.maxLights,mipmapFilter:F.mipmapFilter},this.game=B,this.type=p.WEBGL,this.width=0,this.height=0,this.canvas=B.canvas,this.blendModes=[],this.nativeTextures=[],this.contextLost=!1,this.pipelines=null,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTextureUnit=0,this.currentTextures=new Array(16),this.currentFramebuffer=null,this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=d,this.contextRestoredHandler=d,this.gl=null,this.supportedExtensions=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.defaultCamera=new m(0,0,0,0),this._tempMatrix1=new A,this._tempMatrix2=new A,this._tempMatrix3=new A,this._tempMatrix4=new A,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.mipmapFilter=null,this.init(this.config)},init:function(B){var F=this.game,D=this.canvas,V=B.backgroundColor,z=F.config.context?F.config.context:D.getContext("webgl",B.contextCreation)||D.getContext("experimental-webgl",B.contextCreation);if(!z||z.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=z;var Y=this;this.contextLostHandler=function(te){Y.contextLost=!0,Y.game.events.emit(h.CONTEXT_LOST,Y),te.preventDefault()},this.contextRestoredHandler=function(){Y.contextLost=!1,Y.init(Y.config),Y.game.events.emit(h.CONTEXT_RESTORED,Y)},D.addEventListener("webglcontextlost",this.contextLostHandler,!1),D.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),F.context=z;for(var j=0;j<=27;j++)this.blendModes.push({func:[z.ONE,z.ONE_MINUS_SRC_ALPHA],equation:z.FUNC_ADD});this.blendModes[1].func=[z.ONE,z.DST_ALPHA],this.blendModes[2].func=[z.DST_COLOR,z.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[z.ONE,z.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[z.ZERO,z.ONE_MINUS_SRC_ALPHA],equation:z.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=z.BYTE,this.glFormats[1]=z.SHORT,this.glFormats[2]=z.UNSIGNED_BYTE,this.glFormats[3]=z.UNSIGNED_SHORT,this.glFormats[4]=z.FLOAT,this.glFuncMap={mat2:{func:z.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:z.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:z.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:z.uniform1f,length:1},"1fv":{func:z.uniform1fv,length:1},"1i":{func:z.uniform1i,length:1},"1iv":{func:z.uniform1iv,length:1},"2f":{func:z.uniform2f,length:2},"2fv":{func:z.uniform2fv,length:1},"2i":{func:z.uniform2i,length:2},"2iv":{func:z.uniform2iv,length:1},"3f":{func:z.uniform3f,length:3},"3fv":{func:z.uniform3fv,length:1},"3i":{func:z.uniform3i,length:3},"3iv":{func:z.uniform3iv,length:1},"4f":{func:z.uniform4f,length:4},"4fv":{func:z.uniform4fv,length:1},"4i":{func:z.uniform4i,length:4},"4iv":{func:z.uniform4iv,length:1}};var X=z.getSupportedExtensions();B.maxTextures||(B.maxTextures=z.getParameter(z.MAX_TEXTURE_IMAGE_UNITS)),B.maxTextureSize||(B.maxTextureSize=z.getParameter(z.MAX_TEXTURE_SIZE));var J="WEBGL_compressed_texture_",Q="WEBKIT_"+J;this.compression.ETC1=z.getExtension(J+"etc1")||z.getExtension(Q+"etc1"),this.compression.PVRTC=z.getExtension(J+"pvrtc")||z.getExtension(Q+"pvrtc"),this.compression.S3TC=z.getExtension(J+"s3tc")||z.getExtension(Q+"s3tc"),this.supportedExtensions=X,z.disable(z.DEPTH_TEST),z.disable(z.CULL_FACE),z.enable(z.BLEND),z.clearColor(V.redGL,V.greenGL,V.blueGL,V.alphaGL),this.mipmapFilter=z[B.mipmapFilter];for(var se=0;se<this.currentTextures.length;++se)this.currentTextures[se]=null;return this.pipelines={},this.addPipeline("TextureTintPipeline",new P({game:F,renderer:this})),this.addPipeline("TextureTintStripPipeline",new H({game:F,renderer:this})),this.addPipeline("BitmapMaskPipeline",new O({game:F,renderer:this})),this.addPipeline("Light2D",new L({game:F,renderer:this,maxLights:B.maxLights})),this.setBlendMode(p.BlendModes.NORMAL),F.textures.once(b.READY,this.boot,this),this},boot:function(){for(var B in this.pipelines)this.pipelines[B].boot();var F=this.game.textures.getFrame("__DEFAULT");this.pipelines.TextureTintPipeline.currentFrame=F,this.blankTexture=F;var D=this.gl;D.bindFramebuffer(D.FRAMEBUFFER,null),D.enable(D.SCISSOR_TEST),this.setPipeline(this.pipelines.TextureTintPipeline),this.game.scale.on(y.RESIZE,this.onResize,this);var V=this.game.scale.baseSize;this.resize(V.width,V.height,this.game.scale.resolution)},onResize:function(B,F,D,V){F.width===this.width&&F.height===this.height&&V===this.resolution||this.resize(F.width,F.height,V)},resize:function(B,F,D){var V=this.gl,z=this.pipelines;for(var Y in this.width=B,this.height=F,this.resolution=D,V.viewport(0,0,B,F),z)z[Y].resize(B,F,D);return this.drawingBufferHeight=V.drawingBufferHeight,V.scissor(0,V.drawingBufferHeight-F,B,F),this.defaultCamera.setSize(B,F),this},hasExtension:function(B){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(B)},getExtension:function(B){return this.hasExtension(B)?(B in this.extensions||(this.extensions[B]=this.gl.getExtension(B)),this.extensions[B]):null},flush:function(){this.currentPipeline&&this.currentPipeline.flush()},hasPipeline:function(B){return B in this.pipelines},getPipeline:function(B){return this.hasPipeline(B)?this.pipelines[B]:null},removePipeline:function(B){return delete this.pipelines[B],this},addPipeline:function(B,F){return this.hasPipeline(B)?console.warn("Pipeline exists: "+B):this.pipelines[B]=F,F.name=B,this.pipelines[B].resize(this.width,this.height,this.config.resolution),F},pushScissor:function(B,F,D,V,z){z===void 0&&(z=this.drawingBufferHeight);var Y=[B,F,D,V];return this.scissorStack.push(Y),this.setScissor(B,F,D,V,z),this.currentScissor=Y},setScissor:function(B,F,D,V,z){z===void 0&&(z=this.drawingBufferHeight);var Y,j,X,J,Q=this.gl,se=this.currentScissor,te=0<D&&0<V;se&&te&&(Y=se[0],j=se[1],X=se[2],J=se[3],te=Y!==B||j!==F||X!==D||J!==V),te&&(this.flush(),Q.scissor(B,z-F-V,D,V))},popScissor:function(){var B=this.scissorStack;B.pop();var F=B[B.length-1];F&&this.setScissor(F[0],F[1],F[2],F[3]),this.currentScissor=F},setPipeline:function(B,F){return this.currentPipeline===B&&this.currentPipeline.vertexBuffer===this.currentVertexBuffer&&this.currentPipeline.program===this.currentProgram||(this.flush(),this.currentPipeline=B,this.currentPipeline.bind()),this.currentPipeline.onBind(F),this.currentPipeline},hasActiveStencilMask:function(){var B=this.currentMask.mask,F=this.currentCameraMask.mask;return B&&B.isStencil||F&&F.isStencil},rebindPipeline:function(B){var F=this.gl;F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),this.hasActiveStencilMask()?F.clear(F.DEPTH_BUFFER_BIT):(F.disable(F.STENCIL_TEST),F.clear(F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)),F.viewport(0,0,this.width,this.height),this.setBlendMode(0,!0),F.activeTexture(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,this.blankTexture.glTexture),this.currentActiveTextureUnit=0,this.currentTextures[0]=this.blankTexture.glTexture,this.currentPipeline=B,this.currentPipeline.bind(),this.currentPipeline.onBind()},clearPipeline:function(){this.flush(),this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.setBlendMode(0,!0)},setBlendMode:function(B,F){F===void 0&&(F=!1);var D=this.gl,V=this.blendModes[B];return!!(F||B!==p.BlendModes.SKIP_CHECK&&this.currentBlendMode!==B)&&(this.flush(),D.enable(D.BLEND),D.blendEquation(V.equation),2<V.func.length?D.blendFuncSeparate(V.func[0],V.func[1],V.func[2],V.func[3]):D.blendFunc(V.func[0],V.func[1]),this.currentBlendMode=B,!0)},addBlendMode:function(B,F){return this.blendModes.push({func:B,equation:F})-1},updateBlendMode:function(B,F,D){return this.blendModes[B]&&(this.blendModes[B].func=F,D&&(this.blendModes[B].equation=D)),this},removeBlendMode:function(B){return 17<B&&this.blendModes[B]&&this.blendModes.splice(B,1),this},setBlankTexture:function(B){B===void 0&&(B=!1),!B&&this.currentActiveTextureUnit===0&&this.currentTextures[0]||this.setTexture2D(this.blankTexture.glTexture,0)},setTexture2D:function(B,F,D){D===void 0&&(D=!0);var V=this.gl;return B!==this.currentTextures[F]&&(D&&this.flush(),this.currentActiveTextureUnit!==F&&(V.activeTexture(V.TEXTURE0+F),this.currentActiveTextureUnit=F),V.bindTexture(V.TEXTURE_2D,B),this.currentTextures[F]=B),this},setFramebuffer:function(B,F){F===void 0&&(F=!1);var D=this.gl,V=this.width,z=this.height;return B!==this.currentFramebuffer&&(B&&B.renderTexture?(V=B.renderTexture.width,z=B.renderTexture.height):this.flush(),D.bindFramebuffer(D.FRAMEBUFFER,B),D.viewport(0,0,V,z),F&&(B?(this.drawingBufferHeight=z,this.pushScissor(0,0,V,z)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=B),this},setProgram:function(B){var F=this.gl;return B!==this.currentProgram&&(this.flush(),F.useProgram(B),this.currentProgram=B),this},setVertexBuffer:function(B){var F=this.gl;return B!==this.currentVertexBuffer&&(this.flush(),F.bindBuffer(F.ARRAY_BUFFER,B),this.currentVertexBuffer=B),this},setIndexBuffer:function(B){var F=this.gl;return B!==this.currentIndexBuffer&&(this.flush(),F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,B),this.currentIndexBuffer=B),this},createTextureFromSource:function(B,F,D,V){var z=this.gl,Y=z.NEAREST,j=z.NEAREST,X=z.CLAMP_TO_EDGE;F=B?B.width:F,D=B?B.height:D;var J=l(F,D);return J&&(X=z.REPEAT),V===p.ScaleModes.LINEAR&&this.config.antialias&&(Y=J?this.mipmapFilter:z.LINEAR,j=z.LINEAR),B||typeof F!="number"||typeof D!="number"?this.createTexture2D(0,Y,j,X,X,z.RGBA,B):this.createTexture2D(0,Y,j,X,X,z.RGBA,null,F,D)},createTexture2D:function(B,F,D,V,z,Y,j,X,J,Q,se,te){Q=Q==null||Q,se===void 0&&(se=!1),te===void 0&&(te=!1);var ie=this.gl,re=ie.createTexture();return this.setTexture2D(re,0),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,F),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,D),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,z),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,V),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,te),j==null?ie.texImage2D(ie.TEXTURE_2D,B,Y,X,J,0,Y,ie.UNSIGNED_BYTE,null):(se||(X=j.width,J=j.height),ie.texImage2D(ie.TEXTURE_2D,B,Y,Y,ie.UNSIGNED_BYTE,j)),l(X,J)&&ie.generateMipmap(ie.TEXTURE_2D),this.setTexture2D(null,0),re.isAlphaPremultiplied=Q,re.isRenderTexture=!1,re.width=X,re.height=J,this.nativeTextures.push(re),re},createFramebuffer:function(B,F,D,V){var z,Y,j=this.gl,X=j.createFramebuffer();if(this.setFramebuffer(X),V&&(Y=j.createRenderbuffer(),j.bindRenderbuffer(j.RENDERBUFFER,Y),j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,B,F),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,Y)),D.isRenderTexture=!0,D.isAlphaPremultiplied=!1,j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,D,0),(z=j.checkFramebufferStatus(j.FRAMEBUFFER))===j.FRAMEBUFFER_COMPLETE)return X.renderTexture=D,this.setFramebuffer(null),X;throw new Error("Framebuffer incomplete. Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[z])},createProgram:function(B,F){var D=this.gl,V=D.createProgram(),z=D.createShader(D.VERTEX_SHADER),Y=D.createShader(D.FRAGMENT_SHADER);if(D.shaderSource(z,B),D.shaderSource(Y,F),D.compileShader(z),D.compileShader(Y),!D.getShaderParameter(z,D.COMPILE_STATUS))throw new Error(`Failed to compile Vertex Shader:
`+D.getShaderInfoLog(z));if(!D.getShaderParameter(Y,D.COMPILE_STATUS))throw new Error(`Failed to compile Fragment Shader:
`+D.getShaderInfoLog(Y));if(D.attachShader(V,z),D.attachShader(V,Y),D.linkProgram(V),!D.getProgramParameter(V,D.LINK_STATUS))throw new Error(`Failed to link program:
`+D.getProgramInfoLog(V));return V},createVertexBuffer:function(B,F){var D=this.gl,V=D.createBuffer();return this.setVertexBuffer(V),D.bufferData(D.ARRAY_BUFFER,B,F),this.setVertexBuffer(null),V},createIndexBuffer:function(B,F){var D=this.gl,V=D.createBuffer();return this.setIndexBuffer(V),D.bufferData(D.ELEMENT_ARRAY_BUFFER,B,F),this.setIndexBuffer(null),V},deleteTexture:function(B){var F=this.nativeTextures.indexOf(B);return F!==-1&&g(this.nativeTextures,F),this.gl.deleteTexture(B),this.currentTextures[0]!==B||this.game.pendingDestroy||this.setBlankTexture(!0),this},deleteFramebuffer:function(B){return this.gl.deleteFramebuffer(B),this},deleteProgram:function(B){return this.gl.deleteProgram(B),this},deleteBuffer:function(B){return this.gl.deleteBuffer(B),this},preRenderCamera:function(B){var F,D=B._cx,V=B._cy,z=B._cw,Y=B._ch,j=this.pipelines.TextureTintPipeline,X=B.backgroundColor;B.renderToTexture?(this.flush(),this.pushScissor(D,V,z,-Y),this.setFramebuffer(B.framebuffer),(F=this.gl).clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT),j.projOrtho(D,z+D,V,Y+V,-1e3,1e3),B.mask&&(this.currentCameraMask.mask=B.mask,this.currentCameraMask.camera=B._maskCamera,B.mask.preRenderWebGL(this,B,B._maskCamera)),0<X.alphaGL&&j.drawFillRect(D,V,z+D,Y+V,T.getTintFromFloats(X.redGL,X.greenGL,X.blueGL,1),X.alphaGL),B.emit(u.PRE_RENDER,B)):(this.pushScissor(D,V,z,Y),B.mask&&(this.currentCameraMask.mask=B.mask,this.currentCameraMask.camera=B._maskCamera,B.mask.preRenderWebGL(this,B,B._maskCamera)),0<X.alphaGL&&j.drawFillRect(D,V,z,Y,T.getTintFromFloats(X.redGL,X.greenGL,X.blueGL,1),X.alphaGL))},getCurrentStencilMask:function(){var B=null,F=this.maskStack,D=this.currentCameraMask;return 0<F.length?B=F[F.length-1]:D.mask&&D.mask.isStencil&&(B=D),B},postRenderCamera:function(B){this.setPipeline(this.pipelines.TextureTintPipeline);var F,D=this.pipelines.TextureTintPipeline;B.flashEffect.postRenderWebGL(D,T.getTintFromFloats),B.fadeEffect.postRenderWebGL(D,T.getTintFromFloats),B.dirty=!1,this.popScissor(),B.renderToTexture&&(D.flush(),this.setFramebuffer(null),B.emit(u.POST_RENDER,B),B.renderToGame&&(D.projOrtho(0,D.width,D.height,0,-1e3,1e3),F=T.getTintAppendFloatAlpha,(B.pipeline?B.pipeline:D).batchTexture(B,B.glTexture,B.width,B.height,B.x,B.y,B.width,B.height,B.zoom,B.zoom,B.rotation,B.flipX,!B.flipY,1,1,0,0,0,0,B.width,B.height,F(B._tintTL,B._alphaTL),F(B._tintTR,B._alphaTR),F(B._tintBL,B._alphaBL),F(B._tintBR,B._alphaBR),B._isTinted&&B.tintFill,0,0,this.defaultCamera,null)),this.setBlankTexture(!0)),B.mask&&(this.currentCameraMask.mask=null,B.mask.postRenderWebGL(this,B._maskCamera))},preRender:function(){if(!this.contextLost){var B,F=this.gl,D=this.pipelines;for(var V in F.bindFramebuffer(F.FRAMEBUFFER,null),this.config.clearBeforeRender&&(B=this.config.backgroundColor,F.clearColor(B.redGL,B.greenGL,B.blueGL,B.alphaGL),F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)),F.enable(F.SCISSOR_TEST),D)D[V].onPreRender();this.currentScissor=[0,0,this.width,this.height],this.scissorStack=[this.currentScissor],this.game.scene.customViewports&&F.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.setPipeline(this.pipelines.TextureTintPipeline)}},render:function(B,F,D,V){if(!this.contextLost){var z=F.list,Y=z.length,j=this.pipelines;for(var X in j)j[X].onRender(B,V);if(this.preRenderCamera(V),Y===0)return this.setBlendMode(p.BlendModes.NORMAL),void this.postRenderCamera(V);this.currentType="";for(var J=this.currentMask,Q=0;Q<Y;Q++){var se,te,ie=z[Q];ie.willRender(V)&&(ie.blendMode!==this.currentBlendMode&&this.setBlendMode(ie.blendMode),se=ie.mask,(J=this.currentMask).mask&&J.mask!==se&&J.mask.postRenderWebGL(this,J.camera),se&&J.mask!==se&&se.preRenderWebGL(this,ie,V),(te=ie.type)!==this.currentType&&(this.newType=!0,this.currentType=te),this.nextTypeMatch=Q<Y-1&&z[Q+1].type===this.currentType,ie.renderWebGL(this,ie,D,V),this.newType=!1)}(J=this.currentMask).mask&&J.mask.postRenderWebGL(this,J.camera),this.setBlendMode(p.BlendModes.NORMAL),this.postRenderCamera(V)}},postRender:function(){if(!this.contextLost){this.flush();var B=this.snapshotState;B.callback&&(C(this.canvas,B),B.callback=null);var F=this.pipelines;for(var D in F)F[D].onPostRender()}},snapshot:function(B,F,D){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,B,F,D)},snapshotArea:function(B,F,D,V,z,Y,j){var X=this.snapshotState;return X.callback=z,X.type=Y,X.encoder=j,X.getPixel=!1,X.x=B,X.y=F,X.width=Math.min(D,this.gl.drawingBufferWidth),X.height=Math.min(V,this.gl.drawingBufferHeight),this},snapshotPixel:function(B,F,D){return this.snapshotArea(B,F,1,1,D),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(B,F,D,V,z,Y,j,X,J,Q,se){z===void 0&&(z=!1),Y===void 0&&(Y=0),j===void 0&&(j=0),X===void 0&&(X=F),J===void 0&&(J=D);var te=this.currentFramebuffer;this.snapshotArea(Y,j,X,J,V,Q,se);var ie=this.snapshotState;return ie.getPixel=z,ie.isFramebuffer=!0,ie.bufferWidth=F,ie.bufferHeight=D,this.setFramebuffer(B),C(this.canvas,ie),this.setFramebuffer(te),ie.callback=null,ie.isFramebuffer=!1,this},canvasToTexture:function(B,F,D,V){return D===void 0&&(D=!1),V===void 0&&(V=!1),F?this.updateCanvasTexture(B,F,V):this.createCanvasTexture(B,D,V)},createCanvasTexture:function(B,F,D){F===void 0&&(F=!1),D===void 0&&(D=!1);var V=this.gl,z=V.NEAREST,Y=V.NEAREST,j=B.width,X=B.height,J=V.CLAMP_TO_EDGE,Q=l(j,X);return!F&&Q&&(J=V.REPEAT),this.config.antialias&&(z=Q?this.mipmapFilter:V.LINEAR,Y=V.LINEAR),this.createTexture2D(0,z,Y,J,J,V.RGBA,B,j,X,!0,!1,D)},updateCanvasTexture:function(B,F,D){D===void 0&&(D=!1);var V=this.gl,z=B.width,Y=B.height;return 0<z&&0<Y&&(this.setTexture2D(F,0),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,D),V.texImage2D(V.TEXTURE_2D,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,B),F.width=z,F.height=Y,this.setTexture2D(null,0)),F},createVideoTexture:function(B,F,D){F===void 0&&(F=!1),D===void 0&&(D=!1);var V=this.gl,z=V.NEAREST,Y=V.NEAREST,j=B.videoWidth,X=B.videoHeight,J=V.CLAMP_TO_EDGE,Q=l(j,X);return!F&&Q&&(J=V.REPEAT),this.config.antialias&&(z=Q?this.mipmapFilter:V.LINEAR,Y=V.LINEAR),this.createTexture2D(0,z,Y,J,J,V.RGBA,B,j,X,!0,!0,D)},updateVideoTexture:function(B,F,D){D===void 0&&(D=!1);var V=this.gl,z=B.videoWidth,Y=B.videoHeight;return 0<z&&0<Y&&(this.setTexture2D(F,0),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,D),V.texImage2D(V.TEXTURE_2D,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,B),F.width=z,F.height=Y,this.setTexture2D(null,0)),F},setTextureFilter:function(B,F){var D=this.gl,V=[D.LINEAR,D.NEAREST][F];return this.setTexture2D(B,0),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,V),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,V),this.setTexture2D(null,0),this},setFloat1:function(B,F,D){return this.setProgram(B),this.gl.uniform1f(this.gl.getUniformLocation(B,F),D),this},setFloat2:function(B,F,D,V){return this.setProgram(B),this.gl.uniform2f(this.gl.getUniformLocation(B,F),D,V),this},setFloat3:function(B,F,D,V,z){return this.setProgram(B),this.gl.uniform3f(this.gl.getUniformLocation(B,F),D,V,z),this},setFloat4:function(B,F,D,V,z,Y){return this.setProgram(B),this.gl.uniform4f(this.gl.getUniformLocation(B,F),D,V,z,Y),this},setFloat1v:function(B,F,D){return this.setProgram(B),this.gl.uniform1fv(this.gl.getUniformLocation(B,F),D),this},setFloat2v:function(B,F,D){return this.setProgram(B),this.gl.uniform2fv(this.gl.getUniformLocation(B,F),D),this},setFloat3v:function(B,F,D){return this.setProgram(B),this.gl.uniform3fv(this.gl.getUniformLocation(B,F),D),this},setFloat4v:function(B,F,D){return this.setProgram(B),this.gl.uniform4fv(this.gl.getUniformLocation(B,F),D),this},setInt1:function(B,F,D){return this.setProgram(B),this.gl.uniform1i(this.gl.getUniformLocation(B,F),D),this},setInt2:function(B,F,D,V){return this.setProgram(B),this.gl.uniform2i(this.gl.getUniformLocation(B,F),D,V),this},setInt3:function(B,F,D,V,z){return this.setProgram(B),this.gl.uniform3i(this.gl.getUniformLocation(B,F),D,V,z),this},setInt4:function(B,F,D,V,z,Y){return this.setProgram(B),this.gl.uniform4i(this.gl.getUniformLocation(B,F),D,V,z,Y),this},setMatrix2:function(B,F,D,V){return this.setProgram(B),this.gl.uniformMatrix2fv(this.gl.getUniformLocation(B,F),D,V),this},setMatrix3:function(B,F,D,V){return this.setProgram(B),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(B,F),D,V),this},setMatrix4:function(B,F,D,V){return this.setProgram(B),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(B,F),D,V),this},getMaxTextures:function(){return this.config.maxTextures},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){for(var B=0;B<this.nativeTextures.length;B++)this.gl.deleteTexture(this.nativeTextures[B]);for(var F in this.nativeTextures=[],this.pipelines)this.pipelines[F].destroy(),delete this.pipelines[F];this.defaultCamera.destroy(),this.currentMask=null,this.currentCameraMask=null,this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.game=null,this.gl=null,this.canvas=null,this.maskStack=[],this.contextLost=!0,this.extensions={}}});x.exports=G},function(x,N,r){var m=r(23),u=r(30),c=r(2);x.exports=function(p,h){var l=p.getContext("experimental-webgl"),d=c(h,"callback"),y=c(h,"type","image/png"),g=c(h,"encoder",.92),b=c(h,"x",0),A=c(h,"y",0),T=c(h,"getPixel",!1),C=c(h,"isFramebuffer",!1),O=C?c(h,"bufferWidth",1):l.drawingBufferWidth,L=C?c(h,"bufferHeight",1):l.drawingBufferHeight;if(T){var P=new Uint8Array(4),H=C?A:L-A;l.readPixels(b,H,1,1,l.RGBA,l.UNSIGNED_BYTE,P),d.call(null,new u(P[0],P[1],P[2],P[3]/255))}else{var G=c(h,"width",O),B=c(h,"height",L),F=G*B*4,D=new Uint8Array(F);l.readPixels(b,L-A-B,G,B,l.RGBA,l.UNSIGNED_BYTE,D);for(var V=m.createWebGL(this,G,B),z=V.getContext("2d"),Y=z.getImageData(0,0,G,B),j=Y.data,X=0;X<B;X++)for(var J=0;J<G;J++){var Q=4*((B-X)*G+J),se=C?F-4*(X*G+(G-J)):4*(X*G+J);j[0+se]=D[0+Q],j[1+se]=D[1+Q],j[2+se]=D[2+Q],j[3+se]=D[3+Q]}z.putImageData(Y,0,0);var te=new Image;te.onerror=function(){d.call(null),m.remove(V)},te.onload=function(){d.call(null,te),m.remove(V)},te.src=V.toDataURL(y,g)}}},function(x,N,r){var m=r(0),u=r(599),c=r(600),p=r(108),h=new m({Extends:p,initialize:function(l){p.call(this,{game:l.game,renderer:l.renderer,gl:l.renderer.gl,topology:l.topology?l.topology:l.renderer.gl.TRIANGLES,vertShader:l.vertShader?l.vertShader:c,fragShader:l.fragShader?l.fragShader:u,vertexCapacity:l.vertexCapacity?l.vertexCapacity:3,vertexSize:l.vertexSize?l.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:new Float32Array([-1,1,-1,-7,7,1]).buffer,attributes:[{name:"inPosition",size:2,type:l.renderer.gl.FLOAT,normalized:!1,offset:0}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.maxQuads=1,this.resolutionDirty=!0},onBind:function(){p.prototype.onBind.call(this);var l=this.renderer,d=this.program;return this.resolutionDirty&&(l.setFloat2(d,"uResolution",this.width,this.height),l.setInt1(d,"uMainSampler",0),l.setInt1(d,"uMaskSampler",1),this.resolutionDirty=!1),this},resize:function(l,d,y){return p.prototype.resize.call(this,l,d,y),this.resolutionDirty=!0,this},beginMask:function(l,d,y){var g=this.renderer,b=this.gl;l.bitmapMask&&b&&(g.flush(),l.prevFramebuffer=g.currentFramebuffer,g.setFramebuffer(l.mainFramebuffer),b.disable(b.STENCIL_TEST),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==l&&(g.currentMask.mask=l,g.currentMask.camera=y))},endMask:function(l,d){var y,g=this.gl,b=this.renderer,A=l.bitmapMask;A&&g&&(b.flush(),b.setFramebuffer(l.maskFramebuffer),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),b.setBlendMode(0,!0),A.renderWebGL(b,A,0,d),b.flush(),b.setFramebuffer(l.prevFramebuffer),(y=b.getCurrentStencilMask())?(g.enable(g.STENCIL_TEST),y.mask.applyStencil(b,y.camera,!0)):b.currentMask.mask=null,b.setPipeline(this),g.activeTexture(g.TEXTURE1),g.bindTexture(g.TEXTURE_2D,l.maskTexture),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,l.mainTexture),g.uniform1i(g.getUniformLocation(this.program,"uInvertMaskAlpha"),l.invertAlpha),g.drawArrays(this.topology,0,3))}});x.exports=h},function(x,N,r){var m=r(0),u=r(601),c=r(169),p=10,h=new m({Extends:c,initialize:function(l){p=l.maxLights,l.fragShader=u.replace("%LIGHT_COUNT%",p.toString()),c.call(this,l),this.defaultNormalMap,this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function(){this.defaultNormalMap=this.game.textures.getFrame("__DEFAULT")},onBind:function(l){c.prototype.onBind.call(this);var d=this.renderer,y=this.program;return this.mvpUpdate(),d.setInt1(y,"uNormSampler",1),d.setFloat2(y,"uResolution",this.width,this.height),l&&this.setNormalMap(l),this},onRender:function(l,d){this.active=!1;var y=l.sys.lights;if(!y||y.lights.length<=0||!y.active)return this;var g=y.cull(d),b=Math.min(g.length,p);if(b===0)return this;this.active=!0;for(var A=this.renderer,T=this.program,C=d.matrix,O={x:0,y:0},L=A.height,P=0;P<p;++P)A.setFloat1(T,"uLights["+P+"].radius",0);for(A.setFloat4(T,"uCamera",d.x,d.y,d.rotation,d.zoom),A.setFloat3(T,"uAmbientLightColor",y.ambientColor.r,y.ambientColor.g,y.ambientColor.b),P=0;P<b;++P){var H=g[P],G="uLights["+P+"].";C.transformPoint(H.x,H.y,O),A.setFloat2(T,G+"position",O.x-d.scrollX*H.scrollFactorX*d.zoom,L-(O.y-d.scrollY*H.scrollFactorY*d.zoom)),A.setFloat3(T,G+"color",H.r,H.g,H.b),A.setFloat1(T,G+"intensity",H.intensity),A.setFloat1(T,G+"radius",H.radius)}return this.currentNormalMapRotation=null,this},batchTexture:function(l,d,y,g,b,A,T,C,O,L,P,H,G,B,F,D,V,z,Y,j,X,J,Q,se,te,ie,re,he,de,ue){var Te,ye,Ne,Ve,we,Ue,Oe,Ye,st,lt,Ke,et,Xe,nt,Se,Wt,Ht,zt,wt,Mt,Et,Jt,jt,yi,Qt;this.active&&(this.renderer.setPipeline(this),l.displayTexture?Te=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?Te=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(Te=Array.isArray(l.tileset)?l.tileset[0].image.dataSource[0]:l.tileset.image.dataSource[0]),Te?(this.setTexture2D(Te.glTexture,1),this.setNormalMapRotation(P),ye=this._tempMatrix1,Ne=this._tempMatrix2,Ve=this._tempMatrix3,we=z/y+re,Ue=Y/g+he,Oe=(z+j)/y+re,Ye=(Y+X)/g+he,et=T,Xe=C,st=-D,lt=-V,l.isCropped&&(et=(Ke=l._crop).width,Xe=Ke.height,T=Ke.width,C=Ke.height,nt=z=Ke.x,Se=Y=Ke.y,H&&(nt=j-Ke.x-Ke.width),G&&!d.isRenderTexture&&(Se=X-Ke.y-Ke.height),we=nt/y+re,Ue=Se/g+he,Oe=(nt+Ke.width)/y+re,Ye=(Se+Ke.height)/g+he,st=-D+z,lt=-V+Y),H&&(et*=-1,st+=T),(G^=d.isRenderTexture?1:0)&&(Xe*=-1,lt+=C),Wt=st+et,Ht=lt+Xe,Ne.applyITRS(b,A,P,O,L),ye.copyFrom(de.matrix),ue?(ye.multiplyWithOffset(ue,-de.scrollX*B,-de.scrollY*F),Ne.e=b,Ne.f=A):(Ne.e-=de.scrollX*B,Ne.f-=de.scrollY*F),ye.multiply(Ne,Ve),zt=Ve.getX(st,lt),wt=Ve.getY(st,lt),Mt=Ve.getX(st,Ht),Et=Ve.getY(st,Ht),Jt=Ve.getX(Wt,Ht),jt=Ve.getY(Wt,Ht),yi=Ve.getX(Wt,lt),Qt=Ve.getY(Wt,lt),de.roundPixels&&(zt=Math.round(zt),wt=Math.round(wt),Mt=Math.round(Mt),Et=Math.round(Et),Jt=Math.round(Jt),jt=Math.round(jt),yi=Math.round(yi),Qt=Math.round(Qt)),this.setTexture2D(d,0),this.batchQuad(zt,wt,Mt,Et,Jt,jt,yi,Qt,we,Ue,Oe,Ye,J,Q,se,te,ie,d,0)):console.warn("Normal map missing or invalid"))},setNormalMap:function(l){var d;this.active&&l&&(l.texture&&(d=l.texture.dataSource[l.frame.sourceIndex]),d=d||this.defaultNormalMap,this.setTexture2D(d.glTexture,1),this.renderer.setPipeline(l.defaultPipeline))},setNormalMapRotation:function(l){var d,y,g,b;l===this.currentNormalMapRotation&&this.batches.length!==0||(0<this.batches.length&&this.flush(),d=this.inverseRotationMatrix,l?(y=-l,g=Math.cos(y),b=Math.sin(y),d[1]=b,d[3]=-b,d[0]=d[4]=g):(d[0]=d[4]=1,d[1]=d[3]=0),this.renderer.setMatrix3(this.program,"uInverseRotationMatrix",!1,d),this.currentNormalMapRotation=l)},batchSprite:function(l,d,y){var g;!this.active||(g=l.texture.dataSource[l.frame.sourceIndex])&&(this.renderer.setPipeline(this),this.setTexture2D(g.glTexture,1),this.setNormalMapRotation(l.rotation),c.prototype.batchSprite.call(this,l,d,y))}});h.LIGHT_COUNT=p,x.exports=h},function(x,N,r){var m=r(0),u=r(2),c=r(170),p=r(244),h=r(245),l=r(25),d=r(108),y=new m({Extends:d,Mixins:[c],initialize:function(g){var b=g.renderer.config;d.call(this,{game:g.game,renderer:g.renderer,gl:g.renderer.gl,topology:g.renderer.gl.TRIANGLE_STRIP,vertShader:u(g,"vertShader",h),fragShader:u(g,"fragShader",p),vertexCapacity:u(g,"vertexCapacity",6*b.batchSize),vertexSize:u(g,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:g.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:g.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:g.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:g.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=b.batchSize,this.batches=[],this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.mvpInit()},onBind:function(){return d.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(g,b,A){return d.prototype.resize.call(this,g,b,A),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(g,b){return g===void 0&&(g=this.renderer.blankTexture.glTexture),b===void 0&&(b=0),this.requireTextureBatch(g,b)&&this.pushBatch(g,b),this},requireTextureBatch:function(g,b){var A=this.batches,T=A.length;return!(0<T)||(0<b?A[T-1].textures[b-1]:A[T-1].texture)!==g},pushBatch:function(g,b){var A;b===0?this.batches.push({first:this.vertexCount,texture:g,textures:[]}):((A=[])[b-1]=g,this.batches.push({first:this.vertexCount,texture:null,textures:A}))},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var g,b,A,T=this.gl,C=this.vertexCount,O=this.topology,L=this.vertexSize,P=this.renderer,H=this.batches,G=H.length,B=0,F=null;if(G===0||C===0)return this.flushLocked=!1,this;T.bufferSubData(T.ARRAY_BUFFER,0,this.bytes.subarray(0,C*L));for(var D=0;D<G-1;D++){if(F=H[D],g=H[D+1],0<F.textures.length){for(b=0;b<F.textures.length;++b)(A=F.textures[b])&&P.setTexture2D(A,1+b,!1);T.activeTexture(T.TEXTURE0)}B=g.first-F.first,F.texture===null||B<=0||(P.setTexture2D(F.texture,0,!1),T.drawArrays(O,F.first,B))}if(0<(F=H[G-1]).textures.length){for(b=0;b<F.textures.length;++b)(A=F.textures[b])&&P.setTexture2D(A,1+b,!1);T.activeTexture(T.TEXTURE0)}return B=C-F.first,F.texture&&0<B&&(P.setTexture2D(F.texture,0,!1),T.drawArrays(O,F.first,B)),this.vertexCount=0,H.length=0,this.flushLocked=!1,this}});x.exports=y},function(x,N,r){var m=r(0),u=r(15),c=r(7),p=r(11),h=r(20),l=r(6),d=r(2),y=r(19),g=r(87),b=new m({Extends:c,initialize:function(A){c.call(this),this.game=A,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],A.isBooted?this.boot():A.events.once(u.BOOT,this.boot,this)},boot:function(){for(var A,T,C,O,L,P,H=this.game.config,G=(G=H.installGlobalPlugins).concat(this._pendingGlobal),B=0;B<G.length;B++)A=G[B],T=d(A,"key",null),C=d(A,"plugin",null),O=d(A,"start",!1),L=d(A,"mapping",null),P=d(A,"data",null),T&&(C?this.install(T,C,O,L,P):console.warn("Missing `plugin` for key: "+T));for(G=(G=H.installScenePlugins).concat(this._pendingScene),B=0;B<G.length;B++)A=G[B],T=d(A,"key",null),C=d(A,"plugin",null),L=d(A,"mapping",null),T&&(C?this.installScenePlugin(T,C,L):console.warn("Missing `plugin` for key: "+T));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(u.DESTROY,this.destroy,this)},addToScene:function(A,T,C){for(var O,L=this.game,P=A.scene,H=A.settings.map,G=A.settings.isBooted,B=0;B<T.length;B++)L[z=T[B]]?(A[z]=L[z],H.hasOwnProperty(z)&&(P[H[z]]=A[z])):z==="game"&&H.hasOwnProperty(z)&&(P[H[z]]=L);for(var F=0;F<C.length;F++)for(O=C[F],B=0;B<O.length;B++){var D,V,z=O[B];y.hasCore(z)&&(V=new(D=y.getCore(z)).plugin(P,this),A[D.mapping]=V,D.custom?P[D.mapping]=V:H.hasOwnProperty(D.mapping)&&(P[H[D.mapping]]=V),G&&V.boot())}for(O=this.plugins,B=0;B<O.length;B++){var Y=O[B];Y.mapping&&(P[Y.mapping]=Y.plugin)}},getDefaultScenePlugins:function(){return this.game.config.defaultPlugins.concat(this.scenePlugins)},installScenePlugin:function(A,T,C,O,L){if(L===void 0&&(L=!1),typeof T=="function"){if(y.hasCore(A)){if(!L&&y.hasCore(A))return void console.warn("Scene Plugin key in use: "+A)}else y.register(A,T,C,!0),this.scenePlugins.push(A);var P;O&&(P=new T(O,this),O.sys[A]=P,C&&C!==""&&(O[C]=P),P.boot())}else console.warn("Invalid Scene Plugin: "+A)},install:function(A,T,C,O,L){if(C===void 0&&(C=!1),O===void 0&&(O=null),L===void 0&&(L=null),typeof T!="function")return console.warn("Invalid Plugin: "+A),null;if(y.hasCustom(A))return console.warn("Plugin key in use: "+A),null;if(O!==null&&(C=!0),this.game.isBooted){if(y.registerCustom(A,T,O,L),C)return this.start(A)}else this._pendingGlobal.push({key:A,plugin:T,start:C,mapping:O,data:L});return null},getIndex:function(A){for(var T=this.plugins,C=0;C<T.length;C++)if(T[C].key===A)return C;return-1},getEntry:function(A){var T=this.getIndex(A);if(T!==-1)return this.plugins[T]},isActive:function(A){var T=this.getEntry(A);return T&&T.active},start:function(A,T){T===void 0&&(T=A);var C=this.getEntry(T);return C&&!C.active?(C.active=!0,C.plugin.start()):C=C||this.createEntry(A,T),C?C.plugin:null},createEntry:function(A,T){var C,O=y.getCustom(A);return O&&(O={key:T,plugin:C=new O.plugin(this),active:!0,mapping:O.mapping,data:O.data},this.plugins.push(O),C.init(O.data),C.start()),O},stop:function(A){var T=this.getEntry(A);return T&&T.active&&(T.active=!1,T.plugin.stop()),this},get:function(A,T){T===void 0&&(T=!0);var C=this.getEntry(A);if(C)return C.plugin;var O=this.getClass(A);return O&&T?(C=this.createEntry(A,A))?C.plugin:null:O||null},getClass:function(A){return y.getCustomClass(A)},removeGlobalPlugin:function(A){var T=this.getEntry(A);T&&g(this.plugins,T),y.removeCustom(A)},removeScenePlugin:function(A){g(this.scenePlugins,A),y.remove(A)},registerGameObject:function(A,T,C){return T&&l.register(A,T),C&&h.register(A,C),this},removeGameObject:function(A,T,C){return T===void 0&&(T=!0),C===void 0&&(C=!0),T&&l.remove(A),C&&h.remove(A),this},registerFileType:function(A,T,C){p.register(A,T),C&&C.sys.load&&(C.sys.load[A]=T)},destroy:function(){for(var A=0;A<this.plugins.length;A++)this.plugins[A].plugin.destroy();y.destroyCustomPlugins(),this.game.noReturn&&y.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});x.exports=b},function(x,N,r){var m=r(12),u=r(0),c=r(68),p=r(4),h=new u({initialize:function(l,d,y,g){l===void 0&&(l=0),d===void 0&&(d=l),y===void 0&&(y=0),g===void 0&&(g=null),this._width=l,this._height=d,this._parent=g,this.aspectMode=y,this.aspectRatio=d===0?1:l/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new p},setAspectMode:function(l){return l===void 0&&(l=0),this.aspectMode=l,this.setSize(this._width,this._height)},setSnap:function(l,d){return l===void 0&&(l=0),d===void 0&&(d=l),this.snapTo.set(l,d),this.setSize(this._width,this._height)},setParent:function(l){return this._parent=l,this.setSize(this._width,this._height)},setMin:function(l,d){return l===void 0&&(l=0),d===void 0&&(d=l),this.minWidth=m(l,0,this.maxWidth),this.minHeight=m(d,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(l,d){return l===void 0&&(l=Number.MAX_VALUE),d===void 0&&(d=l),this.maxWidth=m(l,this.minWidth,Number.MAX_VALUE),this.maxHeight=m(d,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(l,d){switch(l===void 0&&(l=0),d===void 0&&(d=l),this.aspectMode){case h.NONE:this._width=this.getNewWidth(c(l,this.snapTo.x)),this._height=this.getNewHeight(c(d,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(c(l,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(c(d,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(l,d,!0);break;case h.ENVELOP:this.constrain(l,d,!1)}return this},setAspectRatio:function(l){return this.aspectRatio=l,this.setSize(this._width,this._height)},resize:function(l,d){return this._width=this.getNewWidth(c(l,this.snapTo.x)),this._height=this.getNewHeight(c(d,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(l,d){return d===void 0&&(d=!0),l=m(l,this.minWidth,this.maxWidth),d&&this._parent&&l>this._parent.width&&(l=Math.max(this.minWidth,this._parent.width)),l},getNewHeight:function(l,d){return d===void 0&&(d=!0),l=m(l,this.minHeight,this.maxHeight),d&&this._parent&&l>this._parent.height&&(l=Math.max(this.minHeight,this._parent.height)),l},constrain:function(l,d,y){l===void 0&&(l=0),d===void 0&&(d=l),y===void 0&&(y=!0),l=this.getNewWidth(l),d=this.getNewHeight(d);var g=this.snapTo,b=d===0?1:l/d;return y&&this.aspectRatio>b||!y&&this.aspectRatio<b?(d=(l=c(l,g.x))/this.aspectRatio,0<g.y&&(l=(d=c(d,g.y))*this.aspectRatio)):(y&&this.aspectRatio<b||!y&&this.aspectRatio>b)&&(l=(d=c(d,g.y))*this.aspectRatio,0<g.x&&(d=(l=c(l,g.x))*(1/this.aspectRatio))),this._width=l,this._height=d,this},fitTo:function(l,d){return this.constrain(l,d,!0)},envelop:function(l,d){return this.constrain(l,d,!1)},setWidth:function(l){return this.setSize(l,this._height)},setHeight:function(l){return this.setSize(this._width,l)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(l){l&&l.style&&(l.style.width=this._width+"px",l.style.height=this._height+"px")},copy:function(l){return l.setAspectMode(this.aspectMode),l.aspectRatio=this.aspectRatio,l.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(l){this.setSize(l,this._height)}},height:{get:function(){return this._height},set:function(l){this.setSize(this._width,l)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,x.exports=h},function(x,N,r){var m=r(375),u=r(23),c=r(5);x.exports=function(p){var h=c(p,"data",[]),l=c(p,"canvas",null),d=c(p,"palette",m),y=c(p,"pixelWidth",1),g=c(p,"pixelHeight",y),b=c(p,"resizeCanvas",!0),A=c(p,"clearCanvas",!0),T=c(p,"preRender",null),C=c(p,"postRender",null),O=Math.floor(Math.abs(h[0].length*y)),L=Math.floor(Math.abs(h.length*g));l||(l=u.create2D(this,O,L),A=b=!1),b&&(l.width=O,l.height=L);var P=l.getContext("2d");A&&P.clearRect(0,0,O,L),T&&T(l,P);for(var H=0;H<h.length;H++)for(var G=h[H],B=0;B<G.length;B++){var F=G[B];F!=="."&&F!==" "&&(P.fillStyle=d[F],P.fillRect(B*y,H*g,y,g))}return C&&C(l,P),l}},function(x,N){x.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(x,N){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=new Uint8Array(256),u=0;u<r.length;u++)m[r.charCodeAt(u)]=u;x.exports=function(c){var p,h,l,d,y=(c=c.substr(c.indexOf(",")+1)).length,g=.75*y,b=0;c[y-1]==="="&&(g--,c[y-2]==="="&&g--);for(var A=new ArrayBuffer(g),T=new Uint8Array(A),C=0;C<y;C+=4)p=m[c.charCodeAt(C)],h=m[c.charCodeAt(C+1)],l=m[c.charCodeAt(C+2)],d=m[c.charCodeAt(C+3)],T[b++]=p<<2|h>>4,T[b++]=(15&h)<<4|l>>2,T[b++]=(3&l)<<6|63&d;return A}},function(x,N,r){var m=r(31),u=r(16)(!1,u={Circle:r(708),Ellipse:r(718),Intersects:r(378),Line:r(737),Point:r(759),Polygon:r(773),Rectangle:r(382),Triangle:r(804)},m);x.exports=u},function(x,N,r){x.exports={CircleToCircle:r(174),CircleToRectangle:r(175),GetCircleToCircle:r(728),GetCircleToRectangle:r(729),GetLineToCircle:r(130),GetLineToRectangle:r(132),GetRectangleIntersection:r(730),GetRectangleToRectangle:r(731),GetRectangleToTriangle:r(732),GetTriangleToCircle:r(733),GetTriangleToLine:r(298),GetTriangleToTriangle:r(734),LineToCircle:r(131),LineToLine:r(51),LineToRectangle:r(294),PointToLine:r(302),PointToLineSegment:r(735),RectangleToRectangle:r(92),RectangleToTriangle:r(295),RectangleToValues:r(736),TriangleToCircle:r(297),TriangleToLine:r(299),TriangleToTriangle:r(300)}},function(x,N){x.exports=function(r,m,u){m===void 0&&(m=1),u===void 0&&(u=[]);var c=Math.round(r.x1),p=Math.round(r.y1),h=Math.round(r.x2),l=Math.round(r.y2),d=Math.abs(h-c),y=Math.abs(l-p),g=c<h?1:-1,b=p<l?1:-1,A=d-y;u.push({x:c,y:p});for(var T=1;c!==h||p!==l;){var C=A<<1;-y<C&&(A-=y,c+=g),C<d&&(A+=d,p+=b),T%m==0&&u.push({x:c,y:p}),T++}return u}},function(x,N,r){var m=r(8);x.exports=function(u,c){c===void 0&&(c=new m);for(var p,h=1/0,l=1/0,d=-h,y=-l,g=0;g<u.points.length;g++)p=u.points[g],h=Math.min(h,p.x),l=Math.min(l,p.y),d=Math.max(d,p.x),y=Math.max(y,p.y);return c.x=h,c.y=l,c.width=d-h,c.height=y-l,c}},function(x,N){function r(m,u){return m[0]=u[0],m[1]=u[1],m}x.exports=function(m){for(var u=[],c=m.points,p=0;p<c.length;p++)u.push([c[p].x,c[p].y]);var h=[];for(0<u.length&&h.push(r([0,0],u[0])),p=0;p<u.length-1;p++){var l=u[p],d=u[p+1],y=l[0],g=l[1],b=d[0],A=d[1];h.push([.85*y+.15*b,.85*g+.15*A]),h.push([.15*y+.85*b,.15*g+.85*A])}return 1<u.length&&h.push(r([0,0],u[u.length-1])),m.setTo(h)}},function(x,N,r){var m=r(8);m.Area=r(778),m.Ceil=r(779),m.CeilAll=r(780),m.CenterOn=r(119),m.Clone=r(781),m.Contains=r(37),m.ContainsPoint=r(782),m.ContainsRect=r(308),m.CopyFrom=r(783),m.Decompose=r(296),m.Equals=r(784),m.FitInside=r(785),m.FitOutside=r(786),m.Floor=r(787),m.FloorAll=r(788),m.FromPoints=r(123),m.FromXY=r(789),m.GetAspectRatio=r(136),m.GetCenter=r(790),m.GetPoint=r(118),m.GetPoints=r(198),m.GetSize=r(791),m.Inflate=r(792),m.Intersection=r(793),m.MarchingAnts=r(383),m.MergePoints=r(794),m.MergeRect=r(795),m.MergeXY=r(796),m.Offset=r(797),m.OffsetPoint=r(798),m.Overlaps=r(799),m.Perimeter=r(79),m.PerimeterPoint=r(800),m.Random=r(160),m.RandomOutside=r(801),m.SameDimensions=r(802),m.Scale=r(803),m.Union=r(309),x.exports=m},function(x,N,r){var m=r(79),u=r(3);x.exports=function(c,p,h,l){if(l===void 0&&(l=[]),!p&&!h)return l;p?h=Math.round(m(c)/p):p=m(c)/h;for(var d=c.x,y=c.y,g=0,b=0;b<h;b++)switch(l.push(new u(d,y)),g){case 0:(d+=p)>=c.right&&(g=1,y+=d-c.right,d=c.right);break;case 1:(y+=p)>=c.bottom&&(g=2,d-=y-c.bottom,y=c.bottom);break;case 2:(d-=p)<=c.left&&(g=3,y-=c.left-d,d=c.left);break;case 3:(y-=p)<=c.top&&(g=0,y=c.top)}return l}},function(x,N){function r(c,p,h){var l=c[p];c[p]=c[h],c[h]=l}function m(c,p){return c<p?-1:p<c?1:0}var u=function(c,p,h,l,d){for(h===void 0&&(h=0),l===void 0&&(l=c.length-1),d===void 0&&(d=m);h<l;){var y,g,b,A,T,C,O;600<l-h&&(y=l-h+1,g=p-h+1,b=Math.log(y),A=.5*Math.exp(2*b/3),T=.5*Math.sqrt(b*A*(y-A)/y)*(g-y/2<0?-1:1),C=Math.max(h,Math.floor(p-g*A/y+T)),O=Math.min(l,Math.floor(p+(y-g)*A/y+T)),u(c,p,C,O,d));var L=c[p],P=h,H=l;for(r(c,h,p),0<d(c[l],L)&&r(c,h,l);P<H;){for(r(c,P,H),P++,H--;d(c[P],L)<0;)P++;for(;0<d(c[H],L);)H--}d(c[h],L)===0?r(c,h,H):r(c,++H,l),H<=p&&(h=H+1),p<=H&&(l=H-1)}};x.exports=u},function(x,N,r){var m=r(5),u=r(142);x.exports=function(c,p,h){var l,d=m(h,"max",0),y=m(h,"qty",1),g=m(h,"random",!1),b=m(h,"randomB",!1),A=m(h,"repeat",0),T=m(h,"yoyo",!1),C=[];b&&u(p),A===-1&&(A=d===0?0:(l=c.length*p.length*y,T&&(l*=2),Math.ceil(d/l)));for(var O=0;O<=A;O++){var L=function(P,H,G){for(var B=[],F=0;F<P.length;F++)for(var D=0;D<H.length;D++)for(var V=0;V<G;V++)B.push({a:P[F],b:H[D]});return B}(c,p,y);g&&u(L),C=C.concat(L),T&&(L.reverse(),C=C.concat(L))}return d&&C.splice(d),C}},function(x,N){x.exports=function(r,m){m===void 0&&(m=1);for(var u=null,c=0;c<m;c++)u=r.shift(),r.push(u);return u}},function(x,N){x.exports=function(r,m){m===void 0&&(m=1);for(var u=null,c=0;c<m;c++)u=r.pop(),r.unshift(u);return u}},function(x,N){x.exports=function(r,m){for(var u=0;u<m.length;u++)if(r.hasOwnProperty(m[u]))return!0;return!1}},function(x,N,r){var m=r(0),u=r(22),c=r(24),p=r(11),h=r(2),l=r(390),d=r(10),y=new m({Extends:c,initialize:function(g,b,A,T,C){var O;d(b)&&(b=h(O=b,"key"),T=h(O,"xhrSettings"),C=h(O,"context",C));var L={type:"audio",cache:g.cacheManager.audio,extension:A.type,responseType:"arraybuffer",key:b,url:A.url,xhrSettings:T,config:{context:C}};c.call(this,g,L)},onProcess:function(){this.state=u.FILE_PROCESSING;var g=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(b){g.data=b,g.onProcessComplete()},function(b){console.error("Error decoding audio: "+g.key+" - ",b?b.message:null),g.onProcessError()}),this.config.context=null}});y.create=function(g,b,A,T,C){var O=g.systems.game,L=O.config.audio,P=O.device.audio;d(b)&&(A=h(b,"url",[]),T=h(b,"config",{}));var H=y.getAudioURL(O,A);return H?!P.webAudio||L&&L.disableWebAudio?new l(g,b,H,T):new y(g,b,H,C,O.sound.context):null},y.getAudioURL=function(g,b){Array.isArray(b)||(b=[b]);for(var A=0;A<b.length;A++){var T=h(b[A],"url",b[A]);if(T.indexOf("blob:")===0||T.indexOf("data:")===0)return{url:T,type:""};var C=T.match(/\.([a-zA-Z0-9]+)($|\?)/),C=h(b[A],"type",C?C[1]:"").toLowerCase();if(g.device.audio[C])return{url:T,type:C}}return null},p.register("audio",function(g,b,A,T){var C,O=this.systems.game,L=O.config.audio,P=O.device.audio;if(L&&L.noAudio||!P.webAudio&&!P.audioData)return this;if(Array.isArray(g))for(var H=0;H<g.length;H++)(C=y.create(this,g[H]))&&this.addFile(C);else(C=y.create(this,g,b,A,T))&&this.addFile(C);return this}),x.exports=y},function(x,N,r){var m=r(0),u=r(62),c=r(24),p=r(2),h=r(114),l=r(10),d=new m({Extends:c,initialize:function(y,g,b,A){var T;l(g)&&(g=p(T=g,"key"),A=p(T,"config",A));var C={type:"audio",cache:y.cacheManager.audio,extension:b.type,key:g,url:b.url,config:A};c.call(this,y,C),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var y=0;y<this.data.length;y++){var g=this.data[y];g.oncanplaythrough=null,g.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(y){var g=y.target;g.oncanplaythrough=null,g.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var y=this.config&&this.config.instances||1;this.filesTotal=y,this.filesLoaded=0;for(var g=this.percentComplete=0;g<y;g++){var b=new Audio;b.dataset||(b.dataset={}),b.dataset.name=this.key+("0"+g).slice(-2),b.dataset.used="false",this.locked?b.dataset.locked="true":(b.dataset.locked="false",b.preload="auto",b.oncanplaythrough=this.onProgress.bind(this),b.onerror=this.onError.bind(this)),this.data.push(b)}for(g=0;g<this.data.length;g++)(b=this.data[g]).src=h(this,this.loader.baseURL),this.locked||b.load();this.locked&&setTimeout(this.onLoad.bind(this))}});x.exports=d},,,,,,,,,function(x,N){var r=function(){return this}();try{r=r||new Function("return this")()}catch(m){typeof window=="object"&&(r=window)}x.exports=r},function(x,N,r){r(401),r(402),r(403),r(404),r(405),r(406),r(407),r(408)},function(x,N){Array.prototype.forEach||(Array.prototype.forEach=function(r){"use strict";if(this==null)throw new TypeError;var m=Object(this),u=m.length>>>0;if(typeof r!="function")throw new TypeError;for(var c=2<=arguments.length?arguments[1]:void 0,p=0;p<u;p++)p in m&&r.call(c,m[p],p,m)})},function(x,N){Array.isArray||(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"})},function(x,N){function r(m){m&&(m.setTargetAtTime||(m.setTargetAtTime=m.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var m=this.internal_createGain();return r(m.gain),m},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(m){var u=m?this.internal_createDelay(m):this.internal_createDelay();return r(u.delayTime),u},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var m=this.internal_createBufferSource();return m.start?(m.internal_start=m.start,m.start=function(u,c,p){p!==void 0?m.internal_start(u||0,c,p):m.internal_start(u||0,c||0)}):m.start=function(u,c,p){c||p?this.noteGrainOn(u||0,c,p):this.noteOn(u||0)},m.stop?(m.internal_stop=m.stop,m.stop=function(u){m.internal_stop(u||0)}):m.stop=function(u){this.noteOff(u||0)},r(m.playbackRate),m},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var m=this.internal_createDynamicsCompressor();return r(m.threshold),r(m.knee),r(m.ratio),r(m.reduction),r(m.attack),r(m.release),m},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var m=this.internal_createBiquadFilter();return r(m.frequency),r(m.detune),r(m.Q),r(m.gain),m},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var m=this.internal_createOscillator();return m.start?(m.internal_start=m.start,m.start=function(u){m.internal_start(u||0)}):m.start=function(u){this.noteOn(u||0)},m.stop?(m.internal_stop=m.stop,m.stop=function(u){m.internal_stop(u||0)}):m.stop=function(u){this.noteOff(u||0)},m.setPeriodicWave||(m.setPeriodicWave=m.setWaveTable),r(m.frequency),r(m.detune),m})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)},function(x,N){window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},function(x,N){Math.trunc||(Math.trunc=function(r){return r<0?Math.ceil(r):Math.floor(r)})},function(x,N){var r;!("performance"in window)&&(window.performance={}),Date.now=Date.now||function(){return new Date().getTime()},!("now"in window.performance)&&(r=Date.now(),performance.timing&&performance.timing.navigationStart&&(r=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-r})},function(x,N){for(var r=Date.now(),m=["ms","moz","webkit","o"],u=0;u<m.length&&!window.requestAnimationFrame;u++)window.requestAnimationFrame=window[m[u]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[m[u]+"CancelAnimationFrame"]||window[m[u]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c){if(typeof c!="function")throw new TypeError(c+"is not a function");var p=Date.now(),h=16+r-p;return h<0&&(h=0),r=p,setTimeout(function(){r=Date.now(),c(performance.now())},h)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(c){clearTimeout(c)})},function(x,N){var r;typeof window.Uint32Array!="function"&&typeof window.Uint32Array!="object"&&((r=function(m){var u=new Array;window[m]=function(c){if(typeof c=="number"){Array.call(this,c),this.length=c;for(var p=0;p<this.length;p++)this[p]=0}else for(Array.call(this,c.length),this.length=c.length,p=0;p<this.length;p++)this[p]=c[p]},window[m].prototype=u,window[m].constructor=window[m]})("Float32Array"),r("Uint32Array"),r("Uint16Array"),r("Int16Array"),r("ArrayBuffer"))},function(x,N,r){x.exports={Animation:r(117),AnimationFrame:r(189),AnimationManager:r(190),Events:r(78)}},function(x,N){x.exports="add"},function(x,N){x.exports="complete"},function(x,N){x.exports="repeat"},function(x,N){x.exports="restart"},function(x,N){x.exports="start"},function(x,N){x.exports="pauseall"},function(x,N){x.exports="remove"},function(x,N){x.exports="resumeall"},function(x,N){x.exports="animationcomplete"},function(x,N){x.exports="animationcomplete-"},function(x,N){x.exports="animationrepeat-"},function(x,N){x.exports="animationrestart-"},function(x,N){x.exports="animationstart-"},function(x,N){x.exports="animationupdate-"},function(x,N){x.exports="animationrepeat"},function(x,N){x.exports="animationrestart"},function(x,N){x.exports="animationstart"},function(x,N){x.exports="animationupdate"},function(x,N){x.exports="blur"},function(x,N){x.exports="boot"},function(x,N){x.exports="contextlost"},function(x,N){x.exports="contextrestored"},function(x,N){x.exports="destroy"},function(x,N){x.exports="focus"},function(x,N){x.exports="hidden"},function(x,N){x.exports="pause"},function(x,N){x.exports="postrender"},function(x,N){x.exports="poststep"},function(x,N){x.exports="prerender"},function(x,N){x.exports="prestep"},function(x,N){x.exports="ready"},function(x,N){x.exports="resume"},function(x,N){x.exports="step"},function(x,N){x.exports="visible"},function(x,N,r){x.exports={BaseCache:r(191),CacheManager:r(193),Events:r(192)}},function(x,N){x.exports="add"},function(x,N){x.exports="remove"},function(x,N,r){x.exports={Camera:r(194),BaseCamera:r(67),CameraManager:r(515),Effects:r(213),Events:r(26)}},function(x,N,r){var m=r(12),u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(c,p,h,l){return c===void 0&&(c=1),p===void 0?this.alpha=c:(this._alphaTL=m(c,0,1),this._alphaTR=m(p,0,1),this._alphaBL=m(h,0,1),this._alphaBR=m(l,0,1)),this},alpha:{get:function(){return this._alpha},set:function(c){var p=m(c,0,1);this._alpha=p,this._alphaTL=p,this._alphaTR=p,this._alphaBL=p,(this._alphaBR=p)===0?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(c){var p=m(c,0,1);(this._alphaTL=p)!==0&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(c){var p=m(c,0,1);(this._alphaTR=p)!==0&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(c){var p=m(c,0,1);(this._alphaBL=p)!==0&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(c){var p=m(c,0,1);(this._alphaBR=p)!==0&&(this.renderFlags|=2)}}};x.exports=u},function(x,N,r){var m=r(117),u=r(0),c=r(78),p=new u({initialize:function(h){this.parent=h,this.animationManager=h.scene.sys.anims,this.animationManager.once(c.REMOVE_ANIMATION,this.remove,this),this.isPlaying=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this._timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this._delay=0,this._repeat=0,this._repeatDelay=0,this._yoyo=!1,this.forward=!0,this._reverse=!1,this.accumulator=0,this.nextTick=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(h){return h instanceof m&&(h=h.key),this.nextAnim===null?this.nextAnim=h:this.nextAnimsQueue.push(h),this.parent},setDelay:function(h){return h===void 0&&(h=0),this._delay=h,this.parent},getDelay:function(){return this._delay},delayedPlay:function(h,l,d){return this.play(l,!0,d),this.nextTick+=h,this.parent},getCurrentKey:function(){if(this.currentAnim)return this.currentAnim.key},load:function(h,l){return l===void 0&&(l=0),this.isPlaying&&this.stop(),this.animationManager.load(this,h,l),this.parent},pause:function(h){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),h!==void 0&&this.updateFrame(h),this.parent},resume:function(h){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),h!==void 0&&this.updateFrame(h),this.parent},isPaused:{get:function(){return this._paused}},play:function(h,l,d){return l===void 0&&(l=!1),d===void 0&&(d=0),h instanceof m&&(h=h.key),l&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!0,this._reverse=!1,this._paused=!1,this._wasPlaying=!0,this._startAnimation(h,d))},playReverse:function(h,l,d){return l===void 0&&(l=!1),d===void 0&&(d=0),h instanceof m&&(h=h.key),l&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!1,this._reverse=!0,this._startAnimation(h,d))},_startAnimation:function(h,l){this.load(h,l);var d=this.currentAnim,y=this.parent;if(!d)return y;this.repeatCounter=this._repeat===-1?Number.MAX_VALUE:this._repeat,d.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,d.showOnStart&&(y.visible=!0);var g=this.currentFrame;return d.emit(c.ANIMATION_START,d,g,y),y.emit(c.SPRITE_ANIMATION_KEY_START+h,d,g,y),y.emit(c.SPRITE_ANIMATION_START,d,g,y),y},reverse:function(){return this.isPlaying&&(this._reverse=!this._reverse,this.forward=!this.forward),this.parent},getProgress:function(){var h=this.currentFrame.progress;return this.forward||(h=1-h),h},setProgress:function(h){return this.forward||(h=1-h),this.setCurrentFrame(this.currentAnim.getFrameByProgress(h)),this.parent},remove:function(h,l){l===void 0&&(l=this.currentAnim),this.isPlaying&&l.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},getRepeat:function(){return this._repeat},setRepeat:function(h){return this._repeat=h,this.repeatCounter=h===-1?Number.MAX_VALUE:h,this.parent},getRepeatDelay:function(){return this._repeatDelay},setRepeatDelay:function(h){return this._repeatDelay=h,this.parent},restart:function(h){h===void 0&&(h=!1);var l=this.currentAnim;l.getFirstTick(this,h),this.forward=!0,this.isPlaying=!0,this.pendingRepeat=!1,this._paused=!1,this.updateFrame(l.frames[0]);var d=this.parent,y=this.currentFrame;return l.emit(c.ANIMATION_RESTART,l,y,d),d.emit(c.SPRITE_ANIMATION_KEY_RESTART+l.key,l,y,d),d.emit(c.SPRITE_ANIMATION_RESTART,l,y,d),this.parent},stop:function(){this._pendingStop=0,this.isPlaying=!1;var h,l=this.parent,d=this.currentAnim,y=this.currentFrame;return d&&(d.emit(c.ANIMATION_COMPLETE,d,y,l),l.emit(c.SPRITE_ANIMATION_KEY_COMPLETE+d.key,d,y,l),l.emit(c.SPRITE_ANIMATION_COMPLETE,d,y,l)),this.nextAnim&&(h=this.nextAnim,this.nextAnim=0<this.nextAnimsQueue.length?this.nextAnimsQueue.shift():null,this.play(h)),l},stopAfterDelay:function(h){return this._pendingStop=1,this._pendingStopValue=h,this.parent},stopOnRepeat:function(){return this._pendingStop=2,this.parent},stopOnFrame:function(h){return this._pendingStop=3,this._pendingStopValue=h,this.parent},setTimeScale:function(h){return h===void 0&&(h=1),this._timeScale=h,this.parent},getTimeScale:function(){return this._timeScale},getTotalFrames:function(){return this.currentAnim.frames.length},update:function(h,l){if(this.currentAnim&&this.isPlaying&&!this.currentAnim.paused){if(this.accumulator+=l*this._timeScale,this._pendingStop===1&&(this._pendingStopValue-=l,this._pendingStopValue<=0))return this.currentAnim.completeAnimation(this);this.accumulator>=this.nextTick&&this.currentAnim.setFrame(this)}},setCurrentFrame:function(h){var l=this.parent;return this.currentFrame=h,l.texture=h.frame.texture,l.frame=h.frame,l.isCropped&&l.frame.updateCropUVs(l._crop,l.flipX,l.flipY),l.setSizeToFrame(),l._originComponent&&(h.frame.customPivot?l.setOrigin(h.frame.pivotX,h.frame.pivotY):l.updateDisplayOrigin()),l},updateFrame:function(h){var l,d=this.setCurrentFrame(h);this.isPlaying&&(h.setAlpha&&(d.alpha=h.alpha),l=this.currentAnim,d.emit(c.SPRITE_ANIMATION_KEY_UPDATE+l.key,l,h,d),d.emit(c.SPRITE_ANIMATION_UPDATE,l,h,d),this._pendingStop===3&&this._pendingStopValue===h&&this.currentAnim.completeAnimation(this))},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},setYoyo:function(h){return h===void 0&&(h=!1),this._yoyo=h,this.parent},getYoyo:function(){return this._yoyo},destroy:function(){this.animationManager.off(c.REMOVE_ANIMATION,this.remove,this),this.animationManager=null,this.parent=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null}});x.exports=p},function(x,N){x.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}},setSize:function(r,m){return this.width=r,this.height=m,this},setDisplaySize:function(r,m){return this.displayWidth=r,this.displayHeight=m,this}}},function(x,N){var r={texture:null,frame:null,isCropped:!1,setCrop:function(m,u,c,p){return m===void 0?this.isCropped=!1:this.frame&&(typeof m=="number"?this.frame.setCropUVs(this._crop,m,u,c,p,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,m.x,m.y,m.width,m.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};x.exports=r},function(x,N){x.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(r){return this.flipX=r,this},setFlipY:function(r){return this.flipY=r,this},setFlip:function(r,m){return this.flipX=r,this.flipY=m,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(x,N,r){var m=r(8),u=r(200),c=r(4),p={prepareBoundsOutput:function(h,l){return l===void 0&&(l=!1),this.rotation!==0&&u(h,this.x,this.y,this.rotation),l&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(h.x,h.y,h),h},getCenter:function(h){return h===void 0&&(h=new c),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,h},getTopLeft:function(h,l){return(h=h||new c).x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,l)},getTopCenter:function(h,l){return(h=h||new c).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,l)},getTopRight:function(h,l){return(h=h||new c).x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,l)},getLeftCenter:function(h,l){return(h=h||new c).x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,l)},getRightCenter:function(h,l){return(h=h||new c).x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,l)},getBottomLeft:function(h,l){return(h=h||new c).x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,l)},getBottomCenter:function(h,l){return(h=h||new c).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,l)},getBottomRight:function(h,l){return(h=h||new c).x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,l)},getBounds:function(h){var l,d,y,g,b,A,T,C,O;return h===void 0&&(h=new m),C=(T=(this.parentContainer?(O=this.parentContainer.getBoundsTransformMatrix(),this.getTopLeft(h),O.transformPoint(h.x,h.y,h),l=h.x,d=h.y,this.getTopRight(h),O.transformPoint(h.x,h.y,h),y=h.x,g=h.y,this.getBottomLeft(h),O.transformPoint(h.x,h.y,h),b=h.x,A=h.y,this.getBottomRight(h),O.transformPoint(h.x,h.y,h)):(this.getTopLeft(h),l=h.x,d=h.y,this.getTopRight(h),y=h.x,g=h.y,this.getBottomLeft(h),b=h.x,A=h.y,this.getBottomRight(h)),h.x),h.y),h.x=Math.min(l,y,b,T),h.y=Math.min(d,g,A,C),h.width=Math.max(l,y,b,T)-h.x,h.height=Math.max(d,g,A,C)-h.y,h}};x.exports=p},function(x,N){var r={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(m){this._displayOriginX=m,this.originX=m/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(m){this._displayOriginY=m,this.originY=m/this.height}},setOrigin:function(m,u){return m===void 0&&(m=.5),u===void 0&&(u=m),this.originX=m,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(m,u){return m===void 0&&(m=0),u===void 0&&(u=m),this.displayOriginX=m,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};x.exports=r},function(x,N,r){var m=r(32),u=r(57),c=r(5),p=r(58),h=r(4),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:p.PLAYING_FORWARD,setPath:function(d,y){y===void 0&&(y=this.pathConfig);var g=this.pathTween;return g&&g.isPlaying()&&g.stop(),this.path=d,y&&this.startFollow(y),this},setRotateToPath:function(d,y){return y===void 0&&(y=0),this.rotateToPath=d,this.pathRotationOffset=y,this},isFollowing:function(){var d=this.pathTween;return d&&d.isPlaying()},startFollow:function(d,y){d===void 0&&(d={}),y===void 0&&(y=0);var g=this.pathTween;g&&g.isPlaying()&&g.stop(),typeof d=="number"&&(d={duration:d}),d.from=c(d,"from",0),d.to=c(d,"to",1);var b=u(d,"positionOnPath",!1);this.rotateToPath=u(d,"rotateToPath",!1),this.pathRotationOffset=c(d,"rotationOffset",0);var A,T=c(d,"startAt",y);return T&&(d.onStart=function(C){var O=C.data[0];O.progress=T,O.elapsed=O.duration*T;var L=O.ease(O.progress);O.current=O.start+(O.end-O.start)*L,O.target[O.key]=O.current}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(d),this.path.getStartPoint(this.pathOffset),b&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=p.PLAYING_FORWARD,this.rotateToPath&&(A=this.path.getPoint(.1),this.rotation=Math.atan2(A.y-this.y,A.x-this.x)+m(this.pathRotationOffset)),this.pathConfig=d,this},pauseFollow:function(){var d=this.pathTween;return d&&d.isPlaying()&&d.pause(),this},resumeFollow:function(){var d=this.pathTween;return d&&d.isPaused()&&d.resume(),this},stopFollow:function(){var d=this.pathTween;return d&&d.isPlaying()&&d.stop(),this},pathUpdate:function(){var d=this.pathTween;if(d){var y=d.data[0],g=this.pathDelta,b=this.pathVector;if(g.copy(b).negate(),y.state===p.COMPLETE)return this.path.getPoint(1,b),g.add(b),b.add(this.pathOffset),void this.setPosition(b.x,b.y);if(y.state!==p.PLAYING_FORWARD&&y.state!==p.PLAYING_BACKWARD)return;this.path.getPoint(d.getValue(),b),g.add(b),b.add(this.pathOffset);var A=this.x,T=this.y;this.setPosition(b.x,b.y);var C=this.x-A,O=this.y-T;if(C==0&&O==0)return;if(y.state!==this._prevDirection)return void(this._prevDirection=y.state);this.rotateToPath&&(this.rotation=Math.atan2(O,C)+m(this.pathRotationOffset))}}};x.exports=l},function(x,N){var r={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(m){this.scaleX=m/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(m){this.scaleY=m/this.frame.realHeight}},setSizeToFrame:function(m){return m===void 0&&(m=this.frame),this.width=m.realWidth,this.height=m.realHeight,this},setSize:function(m,u){return this.width=m,this.height=u,this},setDisplaySize:function(m,u){return this.displayWidth=m,this.displayHeight=u,this}};x.exports=r},function(x,N){var r={texture:null,frame:null,isCropped:!1,setTexture:function(m,u){return this.texture=this.scene.sys.textures.get(m),this.setFrame(u)},setFrame:function(m,u,c){return u===void 0&&(u=!0),c===void 0&&(c=!0),this.frame=this.texture.get(m),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&u&&this.setSizeToFrame(),this._originComponent&&c&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};x.exports=r},function(x,N){var r={texture:null,frame:null,isCropped:!1,setCrop:function(m,u,c,p){return m===void 0?this.isCropped=!1:this.frame&&(typeof m=="number"?this.frame.setCropUVs(this._crop,m,u,c,p,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,m.x,m.y,m.width,m.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(m,u){return this.texture=this.scene.sys.textures.get(m),this.setFrame(u)},setFrame:function(m,u,c){return u===void 0&&(u=!0),c===void 0&&(c=!0),this.frame=this.texture.get(m),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&u&&this.setSizeToFrame(),this._originComponent&&c&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};x.exports=r},function(x,N){function r(u){return(u>>16)+(65280&u)+((255&u)<<16)}var m={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,_isTinted:!1,tintFill:!1,clearTint:function(){return this.setTint(16777215),this._isTinted=!1,this},setTint:function(u,c,p,h){return u===void 0&&(u=16777215),c===void 0&&(h=p=c=u),this._tintTL=r(u),this._tintTR=r(c),this._tintBL=r(p),this._tintBR=r(h),this._isTinted=!0,this.tintFill=!1,this},setTintFill:function(u,c,p,h){return this.setTint(u,c,p,h),this.tintFill=!0,this},tintTopLeft:{get:function(){return this._tintTL},set:function(u){this._tintTL=r(u),this._isTinted=!0}},tintTopRight:{get:function(){return this._tintTR},set:function(u){this._tintTR=r(u),this._isTinted=!0}},tintBottomLeft:{get:function(){return this._tintBL},set:function(u){this._tintBL=r(u),this._isTinted=!0}},tintBottomRight:{get:function(){return this._tintBR},set:function(u){this._tintBR=r(u),this._isTinted=!0}},tint:{set:function(u){this.setTint(u,u,u,u)}},isTinted:{get:function(){return this._isTinted}}};x.exports=m},function(x,N){x.exports="cameradestroy"},function(x,N){x.exports="camerafadeincomplete"},function(x,N){x.exports="camerafadeinstart"},function(x,N){x.exports="camerafadeoutcomplete"},function(x,N){x.exports="camerafadeoutstart"},function(x,N){x.exports="cameraflashcomplete"},function(x,N){x.exports="cameraflashstart"},function(x,N){x.exports="camerapancomplete"},function(x,N){x.exports="camerapanstart"},function(x,N){x.exports="postrender"},function(x,N){x.exports="prerender"},function(x,N){x.exports="camerarotatecomplete"},function(x,N){x.exports="camerarotatestart"},function(x,N){x.exports="camerashakecomplete"},function(x,N){x.exports="camerashakestart"},function(x,N){x.exports="camerazoomcomplete"},function(x,N){x.exports="camerazoomstart"},function(x,N,r){var m=r(12),u=r(0),c=r(26),p=new u({initialize:function(h){this.camera=h,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,l,d,y,g,b,A,T){if(h===void 0&&(h=!0),l===void 0&&(l=1e3),d===void 0&&(d=0),y===void 0&&(y=0),g===void 0&&(g=0),b===void 0&&(b=!1),A===void 0&&(A=null),T===void 0&&(T=this.camera.scene),!b&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=l,this.direction=h,this.progress=0,this.red=d,this.green=y,this.blue=g,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=A,this._onUpdateScope=T;var C=h?c.FADE_OUT_START:c.FADE_IN_START;return this.camera.emit(C,this.camera,this,l,d,y,g),this.camera},update:function(h,l){this.isRunning&&(this._elapsed+=l,this.progress=m(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(l._cx,l._cy,l._cw,l._ch),!0},postRenderWebGL:function(h,l){if(!this.isRunning&&!this.isComplete)return!1;var d=this.camera,y=this.red/255,g=this.blue/255,b=this.green/255;return h.drawFillRect(d._cx,d._cy,d._cw,d._ch,l(y,b,g,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?c.FADE_OUT_COMPLETE:c.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});x.exports=p},function(x,N,r){var m=r(12),u=r(0),c=r(26),p=new u({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,l,d,y,g,b,A){return h===void 0&&(h=250),l===void 0&&(l=255),d===void 0&&(d=255),y===void 0&&(y=255),g===void 0&&(g=!1),b===void 0&&(b=null),A===void 0&&(A=this.camera.scene),!g&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.red=l,this.green=d,this.blue=y,this.alpha=1,this._elapsed=0,this._onUpdate=b,this._onUpdateScope=A,this.camera.emit(c.FLASH_START,this.camera,this,h,l,d,y)),this.camera},update:function(h,l){this.isRunning&&(this._elapsed+=l,this.progress=m(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var l=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(l._cx,l._cy,l._cw,l._ch),!0},postRenderWebGL:function(h,l){if(!this.isRunning)return!1;var d=this.camera,y=this.red/255,g=this.blue/255,b=this.green/255;return h.drawFillRect(d._cx,d._cy,d._cw,d._ch,l(y,b,g,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});x.exports=p},function(x,N,r){var m=r(12),u=r(0),c=r(80),p=r(26),h=r(4),l=new u({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(d,y,g,b,A,T,C){g===void 0&&(g=1e3),b===void 0&&(b=c.Linear),A===void 0&&(A=!1),T===void 0&&(T=null),C===void 0&&(C=this.camera.scene);var O=this.camera;return!A&&this.isRunning||(this.isRunning=!0,this.duration=g,this.progress=0,this.source.set(O.scrollX,O.scrollY),this.destination.set(d,y),O.getScroll(d,y,this.current),typeof b=="string"&&c.hasOwnProperty(b)?this.ease=c[b]:typeof b=="function"&&(this.ease=b),this._elapsed=0,this._onUpdate=T,this._onUpdateScope=C,this.camera.emit(p.PAN_START,this.camera,this,g,d,y)),O},update:function(d,y){var g,b,A,T,C;this.isRunning&&(this._elapsed+=y,g=m(this._elapsed/this.duration,0,1),this.progress=g,b=this.camera,this._elapsed<this.duration?(A=this.ease(g),b.getScroll(this.destination.x,this.destination.y,this.current),T=this.source.x+(this.current.x-this.source.x)*A,C=this.source.y+(this.current.y-this.source.y)*A,b.setScroll(T,C),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,b,g,T,C)):(b.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,b,g,b.scrollX,b.scrollY),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(p.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});x.exports=l},function(x,N){x.exports=function(r,m){return m===void 0&&(m=1.70158),r*r*((m+1)*r-m)}},function(x,N){x.exports=function(r,m){return m===void 0&&(m=1.70158),--r*r*((m+1)*r+m)+1}},function(x,N){x.exports=function(r,m){m===void 0&&(m=1.70158);var u=1.525*m;return(r*=2)<1?r*r*((1+u)*r-u)*.5:.5*((r-=2)*r*((1+u)*r+u)+2)}},function(x,N){x.exports=function(r){return(r=1-r)<.36363636363636365?1-7.5625*r*r:r<.7272727272727273?1-(7.5625*(r-=.5454545454545454)*r+.75):r<.9090909090909091?1-(7.5625*(r-=.8181818181818182)*r+.9375):1-(7.5625*(r-=.9545454545454546)*r+.984375)}},function(x,N){x.exports=function(r){return r<.36363636363636365?7.5625*r*r:r<.7272727272727273?7.5625*(r-=.5454545454545454)*r+.75:r<.9090909090909091?7.5625*(r-=.8181818181818182)*r+.9375:7.5625*(r-=.9545454545454546)*r+.984375}},function(x,N){x.exports=function(r){var m=!1;return r<.5?(r=1-2*r,m=!0):r=2*r-1,r<.36363636363636365?r*=7.5625*r:r=r<.7272727272727273?7.5625*(r-=.5454545454545454)*r+.75:r<.9090909090909091?7.5625*(r-=.8181818181818182)*r+.9375:7.5625*(r-=.9545454545454546)*r+.984375,m?.5*(1-r):.5*r+.5}},function(x,N){x.exports=function(r){return 1-Math.sqrt(1-r*r)}},function(x,N){x.exports=function(r){return Math.sqrt(1- --r*r)}},function(x,N){x.exports=function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}},function(x,N){x.exports=function(r){return r*r*r}},function(x,N){x.exports=function(r){return--r*r*r+1}},function(x,N){x.exports=function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}},function(x,N){x.exports=function(r,m,u){if(m===void 0&&(m=.1),u===void 0&&(u=.1),r===0)return 0;if(r===1)return 1;var c=u/4;return m<1?m=1:c=u*Math.asin(1/m)/(2*Math.PI),-(m*Math.pow(2,10*--r)*Math.sin((r-c)*(2*Math.PI)/u))}},function(x,N){x.exports=function(r,m,u){if(m===void 0&&(m=.1),u===void 0&&(u=.1),r===0)return 0;if(r===1)return 1;var c=u/4;return m<1?m=1:c=u*Math.asin(1/m)/(2*Math.PI),m*Math.pow(2,-10*r)*Math.sin((r-c)*(2*Math.PI)/u)+1}},function(x,N){x.exports=function(r,m,u){if(m===void 0&&(m=.1),u===void 0&&(u=.1),r===0)return 0;if(r===1)return 1;var c=u/4;return m<1?m=1:c=u*Math.asin(1/m)/(2*Math.PI),(r*=2)<1?m*Math.pow(2,10*--r)*Math.sin((r-c)*(2*Math.PI)/u)*-.5:m*Math.pow(2,-10*--r)*Math.sin((r-c)*(2*Math.PI)/u)*.5+1}},function(x,N){x.exports=function(r){return Math.pow(2,10*(r-1))-.001}},function(x,N){x.exports=function(r){return 1-Math.pow(2,-10*r)}},function(x,N){x.exports=function(r){return(r*=2)<1?.5*Math.pow(2,10*(r-1)):.5*(2-Math.pow(2,-10*(r-1)))}},function(x,N){x.exports=function(r){return r}},function(x,N){x.exports=function(r){return r*r}},function(x,N){x.exports=function(r){return r*(2-r)}},function(x,N){x.exports=function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}},function(x,N){x.exports=function(r){return r*r*r*r}},function(x,N){x.exports=function(r){return 1- --r*r*r*r}},function(x,N){x.exports=function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}},function(x,N){x.exports=function(r){return r*r*r*r*r}},function(x,N){x.exports=function(r){return--r*r*r*r*r+1}},function(x,N){x.exports=function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}},function(x,N){x.exports=function(r){return r===0?0:r===1?1:1-Math.cos(r*Math.PI/2)}},function(x,N){x.exports=function(r){return r===0?0:r===1?1:Math.sin(r*Math.PI/2)}},function(x,N){x.exports=function(r){return r===0?0:r===1?1:.5*(1-Math.cos(Math.PI*r))}},function(x,N){x.exports=function(r,m){return m===void 0&&(m=1),r<=0?0:1<=r?1:1/m*(1+(m*r|0))}},function(x,N,r){var m=r(12),u=r(0),c=r(26),p=r(4),h=new u({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.intensity=new p,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(l,d,y,g,b){return l===void 0&&(l=100),d===void 0&&(d=.05),y===void 0&&(y=!1),g===void 0&&(g=null),b===void 0&&(b=this.camera.scene),!y&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,typeof d=="number"?this.intensity.set(d):this.intensity.set(d.x,d.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=g,this._onUpdateScope=b,this.camera.emit(c.SHAKE_START,this.camera,this,l,d)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(l,d){var y,g,b,A;this.isRunning&&(this._elapsed+=d,this.progress=m(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?(y=this.intensity,g=this.camera._cw,b=this.camera._ch,A=this.camera.zoom,this._offsetX=(Math.random()*y.x*g*2-y.x*g)*A,this._offsetY=(Math.random()*y.y*b*2-y.y*b)*A,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))):this.effectComplete())},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});x.exports=h},function(x,N,r){var m=r(12),u=r(0),c=r(26),p=r(80),h=new u({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(l,d,y,g,b,A,T){y===void 0&&(y=1e3),g===void 0&&(g=p.Linear),b===void 0&&(b=!1),A===void 0&&(A=null),T===void 0&&(T=this.camera.scene),d===void 0&&(d=!1),this.shortestPath=d;var C=l;l<0?(C=-1*l,this.clockwise=!1):this.clockwise=!0;var O=360*Math.PI/180;C-=Math.floor(C/O)*O;var L,P,H=this.camera;return!b&&this.isRunning||(this.isRunning=!0,this.duration=y,this.progress=0,this.source=H.rotation,this.destination=C,typeof g=="string"&&p.hasOwnProperty(g)?this.ease=p[g]:typeof g=="function"&&(this.ease=g),this._elapsed=0,this._onUpdate=A,this._onUpdateScope=T,this.shortestPath&&(P=L=0,(L=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+O)-this.source)<(P=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+O)-this.destination)?this.clockwise=!0:P<L&&(this.clockwise=!1)),this.camera.emit(c.ROTATE_START,this.camera,this,y,C)),H},update:function(l,d){var y,g,b,A,T,C,O,L;this.isRunning&&(this._elapsed+=d,y=m(this._elapsed/this.duration,0,1),this.progress=y,g=this.camera,this._elapsed<this.duration?(b=this.ease(y),this.current=g.rotation,A=0,T=360*Math.PI/180,C=this.destination,O=this.current,this.clockwise===!1&&(C=this.current,O=this.destination),A=O<=C?Math.abs(C-O):Math.abs(C+T)-O,L=0,L=this.clockwise?g.rotation+A*b:g.rotation-A*b,g.rotation=L,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,g,y,L)):(g.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,g,y,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});x.exports=h},function(x,N,r){var m=r(12),u=r(0),c=r(80),p=r(26),h=new u({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,d,y,g,b,A){d===void 0&&(d=1e3),y===void 0&&(y=c.Linear),g===void 0&&(g=!1),b===void 0&&(b=null),A===void 0&&(A=this.camera.scene);var T=this.camera;return!g&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,this.source=T.zoom,this.destination=l,typeof y=="string"&&c.hasOwnProperty(y)?this.ease=c[y]:typeof y=="function"&&(this.ease=y),this._elapsed=0,this._onUpdate=b,this._onUpdateScope=A,this.camera.emit(p.ZOOM_START,this.camera,this,d,l)),T},update:function(l,d){this.isRunning&&(this._elapsed+=d,this.progress=m(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(p.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});x.exports=h},function(x,N,r){var m=r(194),u=r(0),c=r(2),p=r(19),h=r(37),l=r(59),d=r(17),y=new u({initialize:function(g){this.scene=g,this.systems=g.sys,this.roundPixels=g.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,g.sys.events.once(d.BOOT,this.boot,this),g.sys.events.on(d.START,this.start,this)},boot:function(){var g=this.systems;g.settings.cameras?this.fromJSON(g.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new m(0,0,g.scale.width,g.scale.height).setScene(this.scene),g.game.scale.on(l.RESIZE,this.onResize,this),this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){var g;this.main||((g=this.systems).settings.cameras?this.fromJSON(g.settings.cameras):this.add(),this.main=this.cameras[0]);var b=this.systems.events;b.on(d.UPDATE,this.update,this),b.once(d.SHUTDOWN,this.shutdown,this)},add:function(g,b,A,T,C,O){g===void 0&&(g=0),b===void 0&&(b=0),A===void 0&&(A=this.scene.sys.scale.width),T===void 0&&(T=this.scene.sys.scale.height),C===void 0&&(C=!1),O===void 0&&(O="");var L=new m(g,b,A,T);return L.setName(O),L.setScene(this.scene),L.setRoundPixels(this.roundPixels),L.id=this.getNextID(),this.cameras.push(L),C&&(this.main=L),L},addExisting:function(g,b){return b===void 0&&(b=!1),this.cameras.indexOf(g)===-1?(g.id=this.getNextID(),g.setRoundPixels(this.roundPixels),this.cameras.push(g),b&&(this.main=g),g):null},getNextID:function(){for(var g=this.cameras,b=1,A=0;A<32;A++){for(var T=!1,C=0;C<g.length;C++){var O=g[C];O&&O.id===b&&(T=!0)}if(!T)return b;b<<=1}return 0},getTotal:function(g){g===void 0&&(g=!1);for(var b=0,A=this.cameras,T=0;T<A.length;T++){var C=A[T];(!g||g&&C.visible)&&b++}return b},fromJSON:function(g){Array.isArray(g)||(g=[g]);for(var b=this.scene.sys.scale.width,A=this.scene.sys.scale.height,T=0;T<g.length;T++){var C=g[T],O=c(C,"x",0),L=c(C,"y",0),P=c(C,"width",b),H=c(C,"height",A),G=this.add(O,L,P,H);G.name=c(C,"name",""),G.zoom=c(C,"zoom",1),G.rotation=c(C,"rotation",0),G.scrollX=c(C,"scrollX",0),G.scrollY=c(C,"scrollY",0),G.roundPixels=c(C,"roundPixels",!1),G.visible=c(C,"visible",!0);var B=c(C,"backgroundColor",!1);B&&G.setBackgroundColor(B);var F,D,V,z,Y=c(C,"bounds",null);Y&&(F=c(Y,"x",0),D=c(Y,"y",0),V=c(Y,"width",b),z=c(Y,"height",A),G.setBounds(F,D,V,z))}return this},getCamera:function(g){for(var b=this.cameras,A=0;A<b.length;A++)if(b[A].name===g)return b[A];return null},getCamerasBelowPointer:function(g){for(var b=this.cameras,A=g.x,T=g.y,C=[],O=0;O<b.length;O++){var L=b[O];L.visible&&L.inputEnabled&&h(L,A,T)&&C.unshift(L)}return C},remove:function(g,b){b===void 0&&(b=!0),Array.isArray(g)||(g=[g]);for(var A=0,T=this.cameras,C=0;C<g.length;C++){var O=T.indexOf(g[C]);O!==-1&&(b&&T[O].destroy(),T.splice(O,1),A++)}return!this.main&&T[0]&&(this.main=T[0]),A},render:function(g,b,A){for(var T=this.scene,C=this.cameras,O=0;O<this.cameras.length;O++){var L=C[O];L.visible&&0<L.alpha&&(L.preRender(1),g.render(T,b,A,L))}},resetAll:function(){for(var g=0;g<this.cameras.length;g++)this.cameras[g].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(g,b){for(var A=0;A<this.cameras.length;A++)this.cameras[A].update(g,b)},onResize:function(g,b,A,T,C,O){for(var L=0;L<this.cameras.length;L++){var P=this.cameras[L];P._x===0&&P._y===0&&P._width===C&&P._height===O&&P.setSize(b.width,b.height)}},resize:function(g,b){for(var A=0;A<this.cameras.length;A++)this.cameras[A].setSize(g,b)},shutdown:function(){this.main=void 0;for(var g=0;g<this.cameras.length;g++)this.cameras[g].destroy();this.cameras=[];var b=this.systems.events;b.off(d.UPDATE,this.update,this),b.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});p.register("CameraManager",y,"cameras"),x.exports=y},function(x,N){x.exports="enterfullscreen"},function(x,N){x.exports="fullscreenfailed"},function(x,N){x.exports="fullscreenunsupported"},function(x,N){x.exports="leavefullscreen"},function(x,N){x.exports="orientationchange"},function(x,N){x.exports="resize"},function(x,N){x.exports="boot"},function(x,N){x.exports="create"},function(x,N){x.exports="destroy"},function(x,N){x.exports="pause"},function(x,N){x.exports="postupdate"},function(x,N){x.exports="preupdate"},function(x,N){x.exports="ready"},function(x,N){x.exports="render"},function(x,N){x.exports="resume"},function(x,N){x.exports="shutdown"},function(x,N){x.exports="sleep"},function(x,N){x.exports="start"},function(x,N){x.exports="transitioncomplete"},function(x,N){x.exports="transitioninit"},function(x,N){x.exports="transitionout"},function(x,N){x.exports="transitionstart"},function(x,N){x.exports="transitionwake"},function(x,N){x.exports="update"},function(x,N){x.exports="wake"},function(x,N,r){x.exports={Config:r(226),CreateRenderer:r(243),DebugHeader:r(246),Events:r(15),TimeStep:r(247),VisibilityHandler:r(249)}},function(x,N){var r,m,u=x.exports={};function c(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function h(O){if(r===setTimeout)return setTimeout(O,0);if((r===c||!r)&&setTimeout)return r=setTimeout,setTimeout(O,0);try{return r(O,0)}catch(L){try{return r.call(null,O,0)}catch(P){return r.call(this,O,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:c}catch(O){r=c}try{m=typeof clearTimeout=="function"?clearTimeout:p}catch(O){m=p}})();var l,d=[],y=!1,g=-1;function b(){y&&l&&(y=!1,l.length?d=l.concat(d):g=-1,d.length&&A())}function A(){if(!y){var O=h(b);y=!0;for(var L=d.length;L;){for(l=d,d=[];++g<L;)l&&l[g].run();g=-1,L=d.length}l=null,y=!1,function(P){if(m===clearTimeout)return clearTimeout(P);if((m===p||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(P);try{m(P)}catch(H){try{return m.call(null,P)}catch(G){return m.call(this,P)}}}(O)}}function T(O,L){this.fun=O,this.array=L}function C(){}u.nextTick=function(O){var L=new Array(arguments.length-1);if(1<arguments.length)for(var P=1;P<arguments.length;P++)L[P-1]=arguments[P];d.push(new T(O,L)),d.length!==1||y||h(A)},T.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=C,u.addListener=C,u.once=C,u.off=C,u.removeListener=C,u.removeAllListeners=C,u.emit=C,u.prependListener=C,u.prependOnceListener=C,u.listeners=function(O){return[]},u.binding=function(O){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(O){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(x,N,r){var m=r(82),u={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};x.exports=(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints)&&(u.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(u.mspointer=!0),navigator.getGamepads&&(u.gamepads=!0),"onwheel"in window||m.ie&&"WheelEvent"in window?u.wheelEvent="wheel":"onmousewheel"in window?u.wheelEvent="mousewheel":m.firefox&&"MouseScrollEvent"in window&&(u.wheelEvent="DOMMouseScroll"),u)},function(x,N,r){var m=r(82),u={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};x.exports=function(){u.audioData=!!window.Audio,u.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var c,p,h=document.createElement("audio"),l=!!h.canPlayType;try{l&&(h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(u.ogg=!0),(h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||h.canPlayType("audio/opus;").replace(/^no$/,""))&&(u.opus=!0),h.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(u.mp3=!0),h.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(u.wav=!0),(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/aac;").replace(/^no$/,""))&&(u.m4a=!0),h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(u.webm=!0),h.canPlayType('audio/mp4;codecs="ec-3"')!==""&&(m.edge?u.dolby=!0:m.safari&&9<=m.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(c=parseInt(RegExp.$1,10),p=parseInt(RegExp.$2,10),(c===10&&11<=p||10<c)&&(u.dolby=!0))))}catch(d){}return u}()},function(x,N){var r={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};x.exports=function(){var m=document.createElement("video"),u=!!m.canPlayType;try{u&&(m.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(r.ogg=!0),m.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.h264=!0,r.mp4=!0),m.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(r.webm=!0),m.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(r.vp9=!0),m.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.hls=!0))}catch(c){}return r}()},function(x,N){var r={available:!1,cancel:"",keyboard:!1,request:""};x.exports=function(){for(var m="Fullscreen",u="FullScreen",c=["request"+m,"request"+u,"webkitRequest"+m,"webkitRequest"+u,"msRequest"+m,"msRequest"+u,"mozRequest"+u,"mozRequest"+m],p=0;p<c.length;p++)if(document.documentElement[c[p]]){r.available=!0,r.request=c[p];break}var h=["cancel"+u,"exit"+m,"webkitCancel"+u,"webkitExit"+m,"msCancel"+u,"msExit"+m,"mozCancel"+u,"mozExit"+m];if(r.available){for(p=0;p<h.length;p++)if(document[h[p]]){r.cancel=h[p];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(r.keyboard=!0),Object.defineProperty(r,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),r}()},function(x,N,r){x.exports={Between:r(229),BetweenPoints:r(355),BetweenPointsY:r(548),BetweenY:r(549),CounterClockwise:r(550),Normalize:r(230),Random:r(551),RandomDegrees:r(552),Reverse:r(553),RotateTo:r(554),ShortestBetween:r(555),Wrap:r(208),WrapDegrees:r(209)}},function(x,N){x.exports=function(r,m){return Math.atan2(m.x-r.x,m.y-r.y)}},function(x,N){x.exports=function(r,m,u,c){return Math.atan2(u-r,c-m)}},function(x,N,r){var m=r(9);x.exports=function(u){return u>Math.PI&&(u-=m.PI2),Math.abs(((u+m.TAU)%m.PI2-m.PI2)%m.PI2)}},function(x,N,r){var m=r(83);x.exports=function(){return m(-Math.PI,Math.PI)}},function(x,N,r){var m=r(83);x.exports=function(){return m(-180,180)}},function(x,N,r){var m=r(230);x.exports=function(u){return m(u+Math.PI)}},function(x,N,r){var m=r(9);x.exports=function(u,c,p){return p===void 0&&(p=.05),u===c||(Math.abs(c-u)<=p||Math.abs(c-u)>=m.PI2-p?u=c:(Math.abs(c-u)>Math.PI&&(c<u?c+=m.PI2:c-=m.PI2),u<c?u+=p:c<u&&(u-=p))),u}},function(x,N){x.exports=function(r,m){var u=m-r;return u==0?0:u-360*Math.floor((u+180)/360)}},function(x,N,r){x.exports={Between:r(46),BetweenPoints:r(231),BetweenPointsSquared:r(557),Chebyshev:r(558),Power:r(559),Snake:r(560),Squared:r(356)}},function(x,N){x.exports=function(r,m){var u=r.x-m.x,c=r.y-m.y;return u*u+c*c}},function(x,N){x.exports=function(r,m,u,c){return Math.max(Math.abs(r-u),Math.abs(m-c))}},function(x,N){x.exports=function(r,m,u,c,p){return p===void 0&&(p=2),Math.sqrt(Math.pow(u-r,p)+Math.pow(c-m,p))}},function(x,N){x.exports=function(r,m,u,c){return Math.abs(r-u)+Math.abs(m-c)}},function(x,N,r){x.exports={Back:r(214),Bounce:r(215),Circular:r(216),Cubic:r(217),Elastic:r(218),Expo:r(219),Linear:r(220),Quadratic:r(221),Quartic:r(222),Quintic:r(223),Sine:r(224),Stepped:r(225)}},function(x,N,r){x.exports={Ceil:r(563),Equal:r(106),Floor:r(564),GreaterThan:r(357),LessThan:r(358)}},function(x,N){x.exports=function(r,m){return m===void 0&&(m=1e-4),Math.ceil(r-m)}},function(x,N){x.exports=function(r,m){return m===void 0&&(m=1e-4),Math.floor(r+m)}},function(x,N,r){x.exports={Bezier:r(566),CatmullRom:r(567),CubicBezier:r(234),Linear:r(568),QuadraticBezier:r(235),SmoothStep:r(236),SmootherStep:r(569)}},function(x,N,r){var m=r(232);x.exports=function(u,c){for(var p=0,h=u.length-1,l=0;l<=h;l++)p+=Math.pow(1-c,h-l)*Math.pow(c,l)*u[l]*m(h,l);return p}},function(x,N,r){var m=r(121);x.exports=function(u,c){var p=u.length-1,h=p*c,l=Math.floor(h);return u[0]===u[p]?(c<0&&(l=Math.floor(h=p*(1+c))),m(h-l,u[(l-1+p)%p],u[l],u[(l+1)%p],u[(l+2)%p])):c<0?u[0]-(m(-h,u[0],u[0],u[1],u[1])-u[0]):1<c?u[p]-(m(h-p,u[p],u[p],u[p-1],u[p-1])-u[p]):m(h-l,u[l?l-1:0],u[l],u[p<l+1?p:l+1],u[p<l+2?p:l+2])}},function(x,N,r){var m=r(107);x.exports=function(u,c){var p=u.length-1,h=p*c,l=Math.floor(h);return c<0?m(u[0],u[1],h):1<c?m(u[p],u[p-1],p-h):m(u[l],u[p<l+1?p:l+1],h-l)}},function(x,N,r){var m=r(165);x.exports=function(u,c,p){return c+(p-c)*m(u,0,1)}},function(x,N,r){x.exports={GetNext:r(359),IsSize:r(84),IsValue:r(571)}},function(x,N){x.exports=function(r){return 0<r&&(r&r-1)==0}},function(x,N,r){x.exports={Ceil:r(360),Floor:r(68),To:r(573)}},function(x,N){x.exports=function(r,m,u,c){return u===void 0&&(u=0),m===0?r:(r-=u,r=m*Math.round(r/m),c?(u+r)/m:u+r)}},function(x,N,r){var m=new(r(0))({initialize:function(u){u===void 0&&(u=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],u&&this.init(u)},rnd:function(){var u=2091639*this.s0+23283064365386963e-26*this.c;return this.c=0|u,this.s0=this.s1,this.s1=this.s2,this.s2=u-this.c,this.s2},hash:function(u){var c,p=this.n;u=u.toString();for(var h=0;h<u.length;h++)c=.02519603282416938*(p+=u.charCodeAt(h)),c-=p=c>>>0,p=(c*=p)>>>0,p+=4294967296*(c-=p);return 23283064365386963e-26*((this.n=p)>>>0)},init:function(u){typeof u=="string"?this.state(u):this.sow(u)},sow:function(u){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,u)for(var c=0;c<u.length&&u[c]!=null;c++){var p=u[c];this.s0-=this.hash(p),this.s0+=~~(this.s0<0),this.s1-=this.hash(p),this.s1+=~~(this.s1<0),this.s2-=this.hash(p),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(u,c){return Math.floor(this.realInRange(0,c-u+1)+u)},between:function(u,c){return Math.floor(this.realInRange(0,c-u+1)+u)},realInRange:function(u,c){return this.frac()*(c-u)+u},normal:function(){return 1-2*this.frac()},uuid:function(){for(var u="",c="",c=u="";u++<36;c+=~u%5|3*u&4?(15^u?8^this.frac()*(20^u?16:4):4).toString(16):"-");return c},pick:function(u){return u[this.integerInRange(0,u.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(u){return u[~~(Math.pow(this.frac(),2)*(u.length-1)+.5)]},timestamp:function(u,c){return this.realInRange(u||9466848e5,c||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(u){return typeof u=="string"&&u.match(/^!rnd/)&&(u=u.split(","),this.c=parseFloat(u[1]),this.s0=parseFloat(u[2]),this.s1=parseFloat(u[3]),this.s2=parseFloat(u[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(u){for(var c=u.length-1;0<c;c--){var p=Math.floor(this.frac()*(c+1)),h=u[p];u[p]=u[c],u[c]=h}return u}});x.exports=m},function(x,N){x.exports=function(r){for(var m=0,u=0;u<r.length;u++)m+=+r[u];return m/r.length}},function(x,N){x.exports=function(r,m,u){m===void 0&&(m=0),u===void 0&&(u=10);var c=Math.pow(u,-m);return Math.ceil(r*c)/c}},function(x,N){x.exports=function(r,m){return Math.abs(r-m)}},function(x,N){x.exports=function(r,m,u){m===void 0&&(m=0),u===void 0&&(u=10);var c=Math.pow(u,-m);return Math.floor(r*c)/c}},function(x,N){x.exports=function(r,m){return r/m/1e3}},function(x,N){x.exports=function(r){return r==parseFloat(r)?!(r%2):void 0}},function(x,N){x.exports=function(r){return r===parseFloat(r)?!(r%2):void 0}},function(x,N){x.exports=function(r,m,u){return Math.min(r+m,u)}},function(x,N){x.exports=function(r,m,u){return Math.max(r-m,u)}},function(x,N){x.exports=function(r,m,u,c){u===void 0&&(u=m+1);var p=(r-m)/(u-m);return 1<p?c!==void 0?(p=(c-r)/(c-u))<0&&(p=0):p=1:p<0&&(p=0),p}},function(x,N){x.exports=function(r,m){m===void 0&&(m=1);var u=2*Math.random()*Math.PI;return r.x=Math.cos(u)*m,r.y=Math.sin(u)*m,r}},function(x,N){x.exports=function(r,m){m===void 0&&(m=1);var u=2*Math.random()*Math.PI,c=2*Math.random()-1,p=Math.sqrt(1-c*c)*m;return r.x=Math.cos(u)*p,r.y=Math.sin(u)*p,r.z=c*m,r}},function(x,N){x.exports=function(r,m){return m===void 0&&(m=1),r.x=(2*Math.random()-1)*m,r.y=(2*Math.random()-1)*m,r.z=(2*Math.random()-1)*m,r.w=(2*Math.random()-1)*m,r}},function(x,N){x.exports=function(r,m,u,c,p){return r.x=m+p*Math.cos(c),r.y=u+p*Math.sin(c),r}},function(x,N){x.exports=function(r,m,u){m===void 0&&(m=0),u===void 0&&(u=10);var c=Math.pow(u,-m);return Math.round(r*c)/c}},function(x,N){x.exports=function(r,m,u,c){m===void 0&&(m=1),u===void 0&&(u=1),c===void 0&&(c=1),c*=Math.PI/r;for(var p=[],h=[],l=0;l<r;l++)m+=(u-=m*c)*c,p[l]=u,h[l]=m;return{sin:h,cos:p,length:r}}},function(x,N,r){var m=r(4);x.exports=function(u,c,p,h){h===void 0&&(h=new m);var l=0,d=0;return 0<u&&u<=c*p&&(l=c-1<u?u-(d=Math.floor(u/c))*c:u,h.set(l,d)),h}},function(x,N){x.exports=function(r,m,u){return Math.abs(r-m)<=u}},function(x,N,r){var m=r(122),u=r(241),c=r(242),p=new u,h=new c,l=new m;x.exports=function(d,y,g){return h.setAxisAngle(y,g),p.fromRotationTranslation(h,l.set(0,0,0)),d.transformMat4(p)}},function(x,N){x.exports="addtexture"},function(x,N){x.exports="onerror"},function(x,N){x.exports="onload"},function(x,N){x.exports="ready"},function(x,N){x.exports="removetexture"},function(x,N){x.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(x,N){x.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(x,N){x.exports=["#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","","}",""].join(`
`)},function(x,N,r){x.exports={Path:r(603),CubicBezier:r(250),Curve:r(48),Ellipse:r(251),Line:r(252),QuadraticBezier:r(253),Spline:r(254)}},function(x,N,r){var m=r(0),u=r(250),c=r(251),p=r(6),h=r(252),l=r(604),d=r(253),y=r(8),g=r(254),b=r(4),A=r(9),T=new m({initialize:function(C,O){C===void 0&&(C=0),O===void 0&&(O=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new b,this._tmpVec2A=new b,this._tmpVec2B=new b,typeof C=="object"?this.fromJSON(C):this.startPoint.set(C,O)},add:function(C){return this.curves.push(C),this},circleTo:function(C,O,L){return O===void 0&&(O=!1),this.ellipseTo(C,C,0,360,O,L)},closePath:function(){var C=this.curves[0].getPoint(0),O=this.curves[this.curves.length-1].getPoint(1);return C.equals(O)||this.curves.push(new h(O,C)),this},cubicBezierTo:function(C,O,L,P,H,G){var B,F,D=this.getEndPoint(),V=C instanceof b?(B=C,F=O,L):(B=new b(L,P),F=new b(H,G),new b(C,O));return this.add(new u(D,B,F,V))},quadraticBezierTo:function(C,O,L,P){var H,G=this.getEndPoint(),B=C instanceof b?(H=C,O):(H=new b(L,P),new b(C,O));return this.add(new d(G,H,B))},draw:function(C,O){for(var L=0;L<this.curves.length;L++){var P=this.curves[L];P.active&&P.draw(C,O)}return C},ellipseTo:function(C,O,L,P,H,G){var B=new c(0,0,C,O,L,P,H,G),F=this.getEndPoint(this._tmpVec2A),D=B.getStartPoint(this._tmpVec2B);return F.subtract(D),B.x=F.x,B.y=F.y,this.add(B)},fromJSON:function(C){this.curves=[],this.cacheLengths=[],this.startPoint.set(C.x,C.y),this.autoClose=C.autoClose;for(var O=0;O<C.curves.length;O++){var L=C.curves[O];switch(L.type){case"LineCurve":this.add(h.fromJSON(L));break;case"EllipseCurve":this.add(c.fromJSON(L));break;case"SplineCurve":this.add(g.fromJSON(L));break;case"CubicBezierCurve":this.add(u.fromJSON(L));break;case"QuadraticBezierCurve":this.add(d.fromJSON(L))}}return this},getBounds:function(C,O){C===void 0&&(C=new y),O===void 0&&(O=16),C.x=Number.MAX_VALUE,C.y=Number.MAX_VALUE;for(var L=new y,P=A.MIN_SAFE_INTEGER,H=A.MIN_SAFE_INTEGER,G=0;G<this.curves.length;G++){var B=this.curves[G];B.active&&(B.getBounds(L,O),C.x=Math.min(C.x,L.x),C.y=Math.min(C.y,L.y),P=Math.max(P,L.right),H=Math.max(H,L.bottom))}return C.right=P,C.bottom=H,C},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var C=[],O=0,L=0;L<this.curves.length;L++)O+=this.curves[L].getLength(),C.push(O);return this.cacheLengths=C},getEndPoint:function(C){return C===void 0&&(C=new b),0<this.curves.length?this.curves[this.curves.length-1].getPoint(1,C):C.copy(this.startPoint),C},getLength:function(){var C=this.getCurveLengths();return C[C.length-1]},getPoint:function(C,O){O===void 0&&(O=new b);for(var L=C*this.getLength(),P=this.getCurveLengths(),H=0;H<P.length;){if(P[H]>=L){var G=P[H]-L,B=this.curves[H],F=B.getLength(),D=F===0?0:1-G/F;return B.getPointAt(D,O)}H++}return null},getPoints:function(C){C===void 0&&(C=12);for(var O,L=[],P=0;P<this.curves.length;P++){var H=this.curves[P];if(H.active)for(var G=H.getResolution(C),B=H.getPoints(G),F=0;F<B.length;F++){var D=B[F];O&&O.equals(D)||(L.push(D),O=D)}}return this.autoClose&&1<L.length&&!L[L.length-1].equals(L[0])&&L.push(L[0]),L},getRandomPoint:function(C){return C===void 0&&(C=new b),this.getPoint(Math.random(),C)},getSpacedPoints:function(C){C===void 0&&(C=40);for(var O=[],L=0;L<=C;L++)O.push(this.getPoint(L/C));return this.autoClose&&O.push(O[0]),O},getStartPoint:function(C){return C===void 0&&(C=new b),C.copy(this.startPoint)},getTangent:function(C,O){O===void 0&&(O=new b);for(var L=C*this.getLength(),P=this.getCurveLengths(),H=0;H<P.length;){if(P[H]>=L){var G=P[H]-L,B=this.curves[H],F=B.getLength(),D=F===0?0:1-G/F;return B.getTangentAt(D,O)}H++}return null},lineTo:function(C,O){C instanceof b?this._tmpVec2B.copy(C):this._tmpVec2B.set(C,O);var L=this.getEndPoint(this._tmpVec2A);return this.add(new h([L.x,L.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(C){return C.unshift(this.getEndPoint()),this.add(new g(C))},moveTo:function(C,O){return C instanceof b?this.add(new l(C.x,C.y)):this.add(new l(C,O))},toJSON:function(){for(var C=[],O=0;O<this.curves.length;O++)C.push(this.curves[O].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:C}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});p.register("path",function(C,O){return new T(C,O)}),x.exports=T},function(x,N,r){var m=r(0),u=r(4),c=new m({initialize:function(p,h){this.active=!1,this.p0=new u(p,h)},getPoint:function(p,h){return h===void 0&&(h=new u),h.copy(this.p0)},getPointAt:function(p,h){return this.getPoint(p,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});x.exports=c},function(x,N,r){x.exports={DataManager:r(86),DataManagerPlugin:r(610),Events:r(255)}},function(x,N){x.exports="changedata"},function(x,N){x.exports="changedata-"},function(x,N){x.exports="removedata"},function(x,N){x.exports="setdata"},function(x,N,r){var m=r(0),u=r(86),c=r(19),p=r(17),h=new m({Extends:u,initialize:function(l){u.call(this,l,l.sys.events),this.scene=l,this.systems=l.sys,l.sys.events.once(p.BOOT,this.boot,this),l.sys.events.on(p.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(p.DESTROY,this.destroy,this)},start:function(){this.events.once(p.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){u.prototype.destroy.call(this),this.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});c.register("DataManagerPlugin",h,"data"),x.exports=h},function(x,N,r){x.exports={BitmapMask:r(202),GeometryMask:r(203)}},function(x,N,r){var m={AddToDOM:r(109),DOMContentLoaded:r(256),GetScreenOrientation:r(257),GetTarget:r(262),ParseXML:r(263),RemoveFromDOM:r(264),RequestAnimationFrame:r(248)};x.exports=m},function(x,N,r){x.exports={EventEmitter:r(614)}},function(x,N,r){var m=r(0),u=r(7),c=r(19),p=new m({Extends:u,initialize:function(){u.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});c.register("EventEmitter",p,"events"),x.exports=p},function(x,N,r){var m=r(109),u=r(190),c=r(193),p=r(23),h=r(0),l=r(226),d=r(616),y=r(243),g=r(86),b=r(246),A=r(227),T=r(256),C=r(7),O=r(15),L=r(265),P=r(19),H=r(372),G=r(270),B=r(271),F=r(85),D=r(275),V=r(247),z=r(249),Y=r(279),j=new h({initialize:function(X){this.config=new l(X),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new C,this.anims=new u(this),this.textures=new D(this),this.cache=new c(this),this.registry=new g(this),this.input=new L(this,this.config),this.scene=new B(this,this.config.sceneConfig),this.device=A,this.scale=new G(this,this.config),this.sound=null,this.sound=Y.create(this),this.loop=new V(this,this.config.fps),this.plugins=new H(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,T(this.boot.bind(this))},boot:function(){P.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),y(this),d(this),b(this),m(this.canvas,this.config.parent),this.textures.once(F.READY,this.texturesReady,this),this.events.emit(O.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(O.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),z(this);var X=this.events;X.on(O.HIDDEN,this.onHidden,this),X.on(O.VISIBLE,this.onVisible,this),X.on(O.BLUR,this.onBlur,this),X.on(O.FOCUS,this.onFocus,this)},step:function(X,J){if(this.pendingDestroy)return this.runDestroy();var Q=this.events;Q.emit(O.PRE_STEP,X,J),Q.emit(O.STEP,X,J),this.scene.update(X,J),Q.emit(O.POST_STEP,X,J);var se=this.renderer;se.preRender(),Q.emit(O.PRE_RENDER,se,X,J),this.scene.render(se),se.postRender(),Q.emit(O.POST_RENDER,se,X,J)},headlessStep:function(X,J){if(this.pendingDestroy)return this.runDestroy();var Q=this.events;Q.emit(O.PRE_STEP,X,J),Q.emit(O.STEP,X,J),this.scene.update(X,J),Q.emit(O.POST_STEP,X,J),Q.emit(O.PRE_RENDER),Q.emit(O.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(O.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(O.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(X,J){J===void 0&&(J=!1),this.pendingDestroy=!0,this.removeCanvas=X,this.noReturn=J},runDestroy:function(){this.scene.destroy(),this.events.emit(O.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(p.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});x.exports=j},function(x,N,r){var m=r(109);x.exports=function(u){var c,p=u.config;p.parent&&p.domCreateContainer&&((c=document.createElement("div")).style.cssText=["display: block;","width: "+u.scale.width+"px;","height: "+u.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" "),u.domContainer=c,m(c,p.parent))}},function(x,N){x.exports="boot"},function(x,N){x.exports="destroy"},function(x,N){x.exports="dragend"},function(x,N){x.exports="dragenter"},function(x,N){x.exports="drag"},function(x,N){x.exports="dragleave"},function(x,N){x.exports="dragover"},function(x,N){x.exports="dragstart"},function(x,N){x.exports="drop"},function(x,N){x.exports="gameout"},function(x,N){x.exports="gameover"},function(x,N){x.exports="gameobjectdown"},function(x,N){x.exports="dragend"},function(x,N){x.exports="dragenter"},function(x,N){x.exports="drag"},function(x,N){x.exports="dragleave"},function(x,N){x.exports="dragover"},function(x,N){x.exports="dragstart"},function(x,N){x.exports="drop"},function(x,N){x.exports="gameobjectmove"},function(x,N){x.exports="gameobjectout"},function(x,N){x.exports="gameobjectover"},function(x,N){x.exports="pointerdown"},function(x,N){x.exports="pointermove"},function(x,N){x.exports="pointerout"},function(x,N){x.exports="pointerover"},function(x,N){x.exports="pointerup"},function(x,N){x.exports="wheel"},function(x,N){x.exports="gameobjectup"},function(x,N){x.exports="gameobjectwheel"},function(x,N){x.exports="boot"},function(x,N){x.exports="process"},function(x,N){x.exports="update"},function(x,N){x.exports="pointerdown"},function(x,N){x.exports="pointerdownoutside"},function(x,N){x.exports="pointermove"},function(x,N){x.exports="pointerout"},function(x,N){x.exports="pointerover"},function(x,N){x.exports="pointerup"},function(x,N){x.exports="pointerupoutside"},function(x,N){x.exports="wheel"},function(x,N){x.exports="pointerlockchange"},function(x,N){x.exports="preupdate"},function(x,N){x.exports="shutdown"},function(x,N){x.exports="start"},function(x,N){x.exports="update"},function(x,N){x.exports=function(r){if(!r)return window.innerHeight;var m=Math.abs(window.orientation),u={w:0,h:0},c=document.createElement("div");return c.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(c),u.w=m===90?c.offsetHeight:window.innerWidth,u.h=m===90?window.innerWidth:c.offsetHeight,document.documentElement.removeChild(c),c=null,Math.abs(window.orientation)!==90?u.h:u.w}},function(x,N){x.exports="addfile"},function(x,N){x.exports="complete"},function(x,N){x.exports="filecomplete"},function(x,N){x.exports="filecomplete-"},function(x,N){x.exports="loaderror"},function(x,N){x.exports="load"},function(x,N){x.exports="fileprogress"},function(x,N){x.exports="postprocess"},function(x,N){x.exports="progress"},function(x,N){x.exports="start"},function(x,N,r){var m=r(2),u=r(171);x.exports=function(c){var p=c.game.config.defaultPhysicsSystem,h=m(c.settings,"physics",!1);if(p||h){var l=[];if(p&&l.push(u(p+"Physics")),h)for(var d in h)d=u(d.concat("Physics")),l.indexOf(d)===-1&&l.push(d);return l}}},function(x,N,r){var m=r(2);x.exports=function(u){var c=u.plugins.getDefaultScenePlugins(),p=m(u.settings,"plugins",!1);return Array.isArray(p)?p:c||[]}},function(x,N,r){x.exports={game:"game",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(x,N){x.exports=function(r,m,u){if(u.getElementsByTagName("TextureAtlas")){var c=r.source[m];r.add("__BASE",m,0,0,c.width,c.height);for(var p=u.getElementsByTagName("SubTexture"),h=0;h<p.length;h++){var l,d,y,g,b=p[h].attributes,A=b.name.value,T=parseInt(b.x.value,10),C=parseInt(b.y.value,10),O=parseInt(b.width.value,10),L=parseInt(b.height.value,10),P=r.add(A,m,T,C,O,L);b.frameX&&(l=Math.abs(parseInt(b.frameX.value,10)),d=Math.abs(parseInt(b.frameY.value,10)),y=parseInt(b.frameWidth.value,10),g=parseInt(b.frameHeight.value,10),P.setTrim(O,L,l,d,y,g))}return r}console.warn("Invalid Texture Atlas XML given")}},function(x,N){x.exports=function(r,m){var u=r.source[m];return r.add("__BASE",m,0,0,u.width,u.height),r}},function(x,N){x.exports=function(r,m){var u=r.source[m];return r.add("__BASE",m,0,0,u.width,u.height),r}},function(x,N,r){var m=r(49);x.exports=function(u,c,p){if(p.frames||p.textures){var h=u.source[c];u.add("__BASE",c,0,0,h.width,h.height);for(var l=Array.isArray(p.textures)?p.textures[c].frames:p.frames,d=0;d<l.length;d++){var y=l[d],g=u.add(y.filename,c,y.frame.x,y.frame.y,y.frame.w,y.frame.h);y.trimmed&&g.setTrim(y.sourceSize.w,y.sourceSize.h,y.spriteSourceSize.x,y.spriteSourceSize.y,y.spriteSourceSize.w,y.spriteSourceSize.h),y.rotated&&(g.rotated=!0,g.updateUVsInverted());var b=y.anchor||y.pivot;b&&(g.customPivot=!0,g.pivotX=b.x,g.pivotY=b.y),g.customData=m(y)}for(var A in p)A!=="frames"&&(Array.isArray(p[A])?u.customData[A]=p[A].slice(0):u.customData[A]=p[A]);return u}console.warn("Invalid Texture Atlas JSON Array")}},function(x,N,r){var m=r(49);x.exports=function(u,c,p){if(p.frames){var h=u.source[c];u.add("__BASE",c,0,0,h.width,h.height);var l=p.frames;for(var d in l){var y=l[d],g=u.add(d,c,y.frame.x,y.frame.y,y.frame.w,y.frame.h);y.trimmed&&g.setTrim(y.sourceSize.w,y.sourceSize.h,y.spriteSourceSize.x,y.spriteSourceSize.y,y.spriteSourceSize.w,y.spriteSourceSize.h),y.rotated&&(g.rotated=!0,g.updateUVsInverted());var b=y.anchor||y.pivot;b&&(g.customPivot=!0,g.pivotX=b.x,g.pivotY=b.y),g.customData=m(y)}for(var A in p)A!=="frames"&&(Array.isArray(p[A])?u.customData[A]=p[A].slice(0):u.customData[A]=p[A]);return u}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(x,N,r){var m=r(2);x.exports=function(u,c,p,h,l,d,y){var g=m(y,"frameWidth",null),b=m(y,"frameHeight",g);if(g===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var A=u.source[c];u.add("__BASE",c,0,0,A.width,A.height);var T=m(y,"startFrame",0),C=m(y,"endFrame",-1),O=m(y,"margin",0),L=m(y,"spacing",0),P=Math.floor((l-O+L)/(g+L))*Math.floor((d-O+L)/(b+L));P===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",u.key),(P<T||T<-P)&&(T=0),T<0&&(T=P+T),C!==-1&&(P=T+(C+1));for(var H=O,G=O,B=0,F=0,D=0;D<P;D++){F=B=0;var V=H+g,z=G+b;l<V&&(B=V-l),d<z&&(F=z-d),u.add(D,c,p+H,h+G,g-B,b-F),l<(H+=g+L)+g&&(H=O,G+=b+L)}return u}},function(x,N,r){var m=r(2);x.exports=function(u,c,p){var h=m(p,"frameWidth",null),l=m(p,"frameHeight",h);if(!h)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=u.source[0];u.add("__BASE",0,0,0,d.width,d.height);var y=m(p,"startFrame",0),g=m(p,"endFrame",-1),b=m(p,"margin",0),A=m(p,"spacing",0),T=c.cutX,C=c.cutY,O=c.cutWidth,L=c.cutHeight,P=c.realWidth,H=c.realHeight,G=Math.floor((P-b+A)/(h+A)),B=Math.floor((H-b+A)/(l+A)),F=G*B,D=c.x,V=h-D,z=h-(P-O-D),Y=c.y,j=l-Y,X=l-(H-L-Y);(F<y||y<-F)&&(y=0),y<0&&(y=F+y),g!==-1&&(F=y+(g+1));for(var J=b,Q=b,se=0,te=c.sourceIndex,ie=0;ie<B;ie++){for(var re=ie===0,he=ie===B-1,de=0;de<G;de++){var ue,Te,ye,Ne,Ve,we,Ue=de===0,Oe=de===G-1,Ye=u.add(se,te,T+J,C+Q,h,l);(Ue||re||Oe||he)&&(ue=Ue?D:0,Te=re?Y:0,Ne=ye=0,Ue&&(ye+=h-V),Oe&&(ye+=h-z),re&&(Ne+=l-j),he&&(Ne+=l-X),Ve=h-ye,we=l-Ne,Ye.cutWidth=Ve,Ye.cutHeight=we,Ye.setTrim(h,l,ue,Te,Ve,we)),J+=A,J+=Ue?V:Oe?z:h,se++}J=b,Q+=A,Q+=re?j:he?X:l}return u}},function(x,N){function r(u,c,p,h){var l=m-h.y-h.height;u.add(p,c,h.x,l,h.width,h.height)}var m=0;x.exports=function(u,c,p){var h=u.source[c];u.add("__BASE",c,0,0,h.width,h.height),m=h.height;for(var l=p.split(`
`),d=/^[ ]*(- )*(\w+)+[: ]+(.*)/,y="",g="",b={x:0,y:0,width:0,height:0},A=0;A<l.length;A++){var T=l[A].match(d);if(T){var C=T[1]==="- ",O=T[2],L=T[3];if(C&&(g!==y&&(r(u,c,g,b),y=g),b={x:0,y:0,width:0,height:0}),O!=="name")switch(O){case"x":case"y":case"width":case"height":b[O]=parseInt(L,10)}else g=L}}return g!==y&&r(u,c,g,b),u}},function(x,N){x.exports="complete"},function(x,N){x.exports="decoded"},function(x,N){x.exports="decodedall"},function(x,N){x.exports="destroy"},function(x,N){x.exports="detune"},function(x,N){x.exports="detune"},function(x,N){x.exports="mute"},function(x,N){x.exports="rate"},function(x,N){x.exports="volume"},function(x,N){x.exports="loop"},function(x,N){x.exports="looped"},function(x,N){x.exports="mute"},function(x,N){x.exports="pauseall"},function(x,N){x.exports="pause"},function(x,N){x.exports="play"},function(x,N){x.exports="rate"},function(x,N){x.exports="resumeall"},function(x,N){x.exports="resume"},function(x,N){x.exports="seek"},function(x,N){x.exports="stopall"},function(x,N){x.exports="stop"},function(x,N){x.exports="unlocked"},function(x,N){x.exports="volume"},function(x,N,r){var m=r(50);m.Area=r(709),m.Circumference=r(290),m.CircumferencePoint=r(128),m.Clone=r(710),m.Contains=r(44),m.ContainsPoint=r(711),m.ContainsRect=r(712),m.CopyFrom=r(713),m.Equals=r(714),m.GetBounds=r(715),m.GetPoint=r(288),m.GetPoints=r(289),m.Offset=r(716),m.OffsetPoint=r(717),m.Random=r(172),x.exports=m},function(x,N){x.exports=function(r){return 0<r.radius?Math.PI*r.radius*r.radius:0}},function(x,N,r){var m=r(50);x.exports=function(u){return new m(u.x,u.y,u.radius)}},function(x,N,r){var m=r(44);x.exports=function(u,c){return m(u,c.x,c.y)}},function(x,N,r){var m=r(44);x.exports=function(u,c){return m(u,c.x,c.y)&&m(u,c.right,c.y)&&m(u,c.x,c.bottom)&&m(u,c.right,c.bottom)}},function(x,N){x.exports=function(r,m){return m.setTo(r.x,r.y,r.radius)}},function(x,N){x.exports=function(r,m){return r.x===m.x&&r.y===m.y&&r.radius===m.radius}},function(x,N,r){var m=r(8);x.exports=function(u,c){return c===void 0&&(c=new m),c.x=u.left,c.y=u.top,c.width=u.diameter,c.height=u.diameter,c}},function(x,N){x.exports=function(r,m,u){return r.x+=m,r.y+=u,r}},function(x,N){x.exports=function(r,m){return r.x+=m.x,r.y+=m.y,r}},function(x,N,r){var m=r(69);m.Area=r(719),m.Circumference=r(293),m.CircumferencePoint=r(129),m.Clone=r(720),m.Contains=r(63),m.ContainsPoint=r(721),m.ContainsRect=r(722),m.CopyFrom=r(723),m.Equals=r(724),m.GetBounds=r(725),m.GetPoint=r(291),m.GetPoints=r(292),m.Offset=r(726),m.OffsetPoint=r(727),m.Random=r(173),x.exports=m},function(x,N){x.exports=function(r){return r.isEmpty()?0:r.getMajorRadius()*r.getMinorRadius()*Math.PI}},function(x,N,r){var m=r(69);x.exports=function(u){return new m(u.x,u.y,u.width,u.height)}},function(x,N,r){var m=r(63);x.exports=function(u,c){return m(u,c.x,c.y)}},function(x,N,r){var m=r(63);x.exports=function(u,c){return m(u,c.x,c.y)&&m(u,c.right,c.y)&&m(u,c.x,c.bottom)&&m(u,c.right,c.bottom)}},function(x,N){x.exports=function(r,m){return m.setTo(r.x,r.y,r.width,r.height)}},function(x,N){x.exports=function(r,m){return r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height}},function(x,N,r){var m=r(8);x.exports=function(u,c){return c===void 0&&(c=new m),c.x=u.left,c.y=u.top,c.width=u.width,c.height=u.height,c}},function(x,N){x.exports=function(r,m,u){return r.x+=m,r.y+=u,r}},function(x,N){x.exports=function(r,m){return r.x+=m.x,r.y+=m.y,r}},function(x,N,r){var m=r(3),u=r(174);x.exports=function(c,p,h){var l,d,y,g,b,A,T,C,O,L,P,H;return h===void 0&&(h=[]),u(c,p)&&(l=c.x,d=c.y,y=c.radius,g=p.x,b=p.y,A=p.radius,d===b?(H=(P=-2*b)*P-4*(L=1)*(g*g+(T=(A*A-y*y-g*g+l*l)/(2*(l-g)))*T-2*g*T+b*b-A*A))===0?h.push(new m(T,-P/(2*L))):0<H&&(h.push(new m(T,(-P+Math.sqrt(H))/(2*L))),h.push(new m(T,(-P-Math.sqrt(H))/(2*L)))):(H=(P=2*d*(C=(l-g)/(d-b))-2*(O=(A*A-y*y-g*g+l*l-b*b+d*d)/(2*(d-b)))*C-2*l)*P-4*(L=C*C+1)*(l*l+d*d+O*O-y*y-2*d*O))===0?(T=-P/(2*L),h.push(new m(T,O-T*C))):0<H&&(T=(-P+Math.sqrt(H))/(2*L),h.push(new m(T,O-T*C)),T=(-P-Math.sqrt(H))/(2*L),h.push(new m(T,O-T*C)))),h}},function(x,N,r){var m=r(130),u=r(175);x.exports=function(c,p,h){var l,d,y,g;return h===void 0&&(h=[]),u(c,p)&&(l=p.getLineA(),d=p.getLineB(),y=p.getLineC(),g=p.getLineD(),m(l,c,h),m(d,c,h),m(y,c,h),m(g,c,h)),h}},function(x,N,r){var m=r(8),u=r(92);x.exports=function(c,p,h){return h===void 0&&(h=new m),u(c,p)&&(h.x=Math.max(c.x,p.x),h.y=Math.max(c.y,p.y),h.width=Math.min(c.right,p.right)-h.x,h.height=Math.min(c.bottom,p.bottom)-h.y),h}},function(x,N,r){var m=r(132),u=r(92);x.exports=function(c,p,h){var l,d,y,g;return h===void 0&&(h=[]),u(c,p)&&(l=c.getLineA(),d=c.getLineB(),y=c.getLineC(),g=c.getLineD(),m(l,p,h),m(d,p,h),m(y,p,h),m(g,p,h)),h}},function(x,N,r){var m=r(295),u=r(132);x.exports=function(c,p,h){var l,d,y;return h===void 0&&(h=[]),m(c,p)&&(l=p.getLineA(),d=p.getLineB(),y=p.getLineC(),u(l,c,h),u(d,c,h),u(y,c,h)),h}},function(x,N,r){var m=r(130),u=r(297);x.exports=function(c,p,h){var l,d,y;return h===void 0&&(h=[]),u(c,p)&&(l=c.getLineA(),d=c.getLineB(),y=c.getLineC(),m(l,p,h),m(d,p,h),m(y,p,h)),h}},function(x,N,r){var m=r(300),u=r(298);x.exports=function(c,p,h){var l,d,y;return h===void 0&&(h=[]),m(c,p)&&(l=p.getLineA(),d=p.getLineB(),y=p.getLineC(),u(c,l,h),u(c,d,h),u(c,y,h)),h}},function(x,N,r){var m=r(302);x.exports=function(u,c){if(!m(u,c))return!1;var p=Math.min(c.x1,c.x2),h=Math.max(c.x1,c.x2),l=Math.min(c.y1,c.y2),d=Math.max(c.y1,c.y2);return u.x>=p&&u.x<=h&&u.y>=l&&u.y<=d}},function(x,N){x.exports=function(r,m,u,c,p,h){return h===void 0&&(h=0),!(m>r.right+h||u<r.left-h||c>r.bottom+h||p<r.top-h)}},function(x,N,r){var m=r(33);m.Angle=r(53),m.BresenhamPoints=r(379),m.CenterOn=r(738),m.Clone=r(739),m.CopyFrom=r(740),m.Equals=r(741),m.Extend=r(742),m.GetEasedPoints=r(743),m.GetMidPoint=r(744),m.GetNearestPoint=r(745),m.GetNormal=r(746),m.GetPoint=r(199),m.GetPoints=r(158),m.GetShortestDistance=r(747),m.Height=r(748),m.Length=r(34),m.NormalAngle=r(303),m.NormalX=r(749),m.NormalY=r(750),m.Offset=r(751),m.PerpSlope=r(752),m.Random=r(159),m.ReflectAngle=r(753),m.Rotate=r(754),m.RotateAroundPoint=r(755),m.RotateAroundXY=r(134),m.SetToAngle=r(756),m.Slope=r(757),m.Width=r(758),x.exports=m},function(x,N){x.exports=function(r,m,u){var c=m-(r.x1+r.x2)/2,p=u-(r.y1+r.y2)/2;return r.x1+=c,r.y1+=p,r.x2+=c,r.y2+=p,r}},function(x,N,r){var m=r(33);x.exports=function(u){return new m(u.x1,u.y1,u.x2,u.y2)}},function(x,N){x.exports=function(r,m){return m.setTo(r.x1,r.y1,r.x2,r.y2)}},function(x,N){x.exports=function(r,m){return r.x1===m.x1&&r.y1===m.y1&&r.x2===m.x2&&r.y2===m.y2}},function(x,N,r){var m=r(34);x.exports=function(u,c,p){p===void 0&&(p=c);var h=m(u),l=u.x2-u.x1,d=u.y2-u.y1;return c&&(u.x1=u.x1-l/h*c,u.y1=u.y1-d/h*c),p&&(u.x2=u.x2+l/h*p,u.y2=u.y2+d/h*p),u}},function(x,N,r){var m=r(231),u=r(45),c=r(3);x.exports=function(p,h,l,d,y){d===void 0&&(d=0),y===void 0&&(y=[]);var g,b=[],A=p.x1,T=p.y1,C=p.x2-A,O=p.y2-T,L=u(h,y),P=l-1;for(B=0;B<P;B++)g=L(B/P),b.push(new c(A+C*g,T+O*g));if(g=L(1),b.push(new c(A+C*g,T+O*g)),0<d){for(var H=b[0],G=[H],B=1;B<b.length-1;B++){var F=b[B];m(H,F)>=d&&(G.push(F),H=F)}var D=b[b.length-1];return m(H,D)<d&&G.pop(),G.push(D),G}return b}},function(x,N,r){var m=r(3);x.exports=function(u,c){return c===void 0&&(c=new m),c.x=(u.x1+u.x2)/2,c.y=(u.y1+u.y2)/2,c}},function(x,N,r){var m=r(3);x.exports=function(u,c,p){p===void 0&&(p=new m);var h=u.x1,l=u.y1,d=u.x2,y=u.y2,g=(d-h)*(d-h)+(y-l)*(y-l);if(g==0)return p;var b=((c.x-h)*(d-h)+(c.y-l)*(y-l))/g;return p.x=h+b*(d-h),p.y=l+b*(y-l),p}},function(x,N,r){var m=r(9),u=r(53),c=r(3);x.exports=function(p,h){h===void 0&&(h=new c);var l=u(p)-m.TAU;return h.x=Math.cos(l),h.y=Math.sin(l),h}},function(x,N){x.exports=function(r,m){var u=r.x1,c=r.y1,p=r.x2,h=r.y2,l=(p-u)*(p-u)+(h-c)*(h-c);if(l==0)return!1;var d=((c-m.y)*(p-u)-(u-m.x)*(h-c))/l;return Math.abs(d)*Math.sqrt(l)}},function(x,N){x.exports=function(r){return Math.abs(r.y1-r.y2)}},function(x,N,r){var m=r(9),u=r(53);x.exports=function(c){return Math.cos(u(c)-m.TAU)}},function(x,N,r){var m=r(9),u=r(53);x.exports=function(c){return Math.sin(u(c)-m.TAU)}},function(x,N){x.exports=function(r,m,u){return r.x1+=m,r.y1+=u,r.x2+=m,r.y2+=u,r}},function(x,N){x.exports=function(r){return-((r.x2-r.x1)/(r.y2-r.y1))}},function(x,N,r){var m=r(53),u=r(303);x.exports=function(c,p){return 2*u(p)-Math.PI-m(c)}},function(x,N,r){var m=r(134);x.exports=function(u,c){var p=(u.x1+u.x2)/2,h=(u.y1+u.y2)/2;return m(u,p,h,c)}},function(x,N,r){var m=r(134);x.exports=function(u,c,p){return m(u,c.x,c.y,p)}},function(x,N){x.exports=function(r,m,u,c,p){return r.x1=m,r.y1=u,r.x2=m+Math.cos(c)*p,r.y2=u+Math.sin(c)*p,r}},function(x,N){x.exports=function(r){return(r.y2-r.y1)/(r.x2-r.x1)}},function(x,N){x.exports=function(r){return Math.abs(r.x1-r.x2)}},function(x,N,r){var m=r(3);m.Ceil=r(760),m.Clone=r(761),m.CopyFrom=r(762),m.Equals=r(763),m.Floor=r(764),m.GetCentroid=r(765),m.GetMagnitude=r(304),m.GetMagnitudeSq=r(305),m.GetRectangleFromPoints=r(766),m.Interpolate=r(767),m.Invert=r(768),m.Negative=r(769),m.Project=r(770),m.ProjectUnit=r(771),m.SetMagnitude=r(772),x.exports=m},function(x,N){x.exports=function(r){return r.setTo(Math.ceil(r.x),Math.ceil(r.y))}},function(x,N,r){var m=r(3);x.exports=function(u){return new m(u.x,u.y)}},function(x,N){x.exports=function(r,m){return m.setTo(r.x,r.y)}},function(x,N){x.exports=function(r,m){return r.x===m.x&&r.y===m.y}},function(x,N){x.exports=function(r){return r.setTo(Math.floor(r.x),Math.floor(r.y))}},function(x,N,r){var m=r(3);x.exports=function(u,c){if(c===void 0&&(c=new m),!Array.isArray(u))throw new Error("GetCentroid points argument must be an array");var p=u.length;if(p<1)throw new Error("GetCentroid points array must not be empty");if(p===1)c.x=u[0].x,c.y=u[0].y;else{for(var h=0;h<p;h++)c.x+=u[h].x,c.y+=u[h].y;c.x/=p,c.y/=p}return c}},function(x,N,r){var m=r(8);x.exports=function(u,c){c===void 0&&(c=new m);for(var p=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,y=0;y<u.length;y++){var g=u[y];g.x>p&&(p=g.x),g.x<h&&(h=g.x),g.y>l&&(l=g.y),g.y<d&&(d=g.y)}return c.x=h,c.y=d,c.width=p-h,c.height=l-d,c}},function(x,N,r){var m=r(3);x.exports=function(u,c,p,h){return p===void 0&&(p=0),h===void 0&&(h=new m),h.x=u.x+(c.x-u.x)*p,h.y=u.y+(c.y-u.y)*p,h}},function(x,N){x.exports=function(r){return r.setTo(r.y,r.x)}},function(x,N,r){var m=r(3);x.exports=function(u,c){return c===void 0&&(c=new m),c.setTo(-u.x,-u.y)}},function(x,N,r){var m=r(3),u=r(305);x.exports=function(c,p,h){h===void 0&&(h=new m);var l=(c.x*p.x+c.y*p.y)/u(p);return l!=0&&(h.x=l*p.x,h.y=l*p.y),h}},function(x,N,r){var m=r(3);x.exports=function(u,c,p){p===void 0&&(p=new m);var h=u.x*c.x+u.y*c.y;return h!=0&&(p.x=h*c.x,p.y=h*c.y),p}},function(x,N,r){var m=r(304);x.exports=function(u,c){var p;return u.x===0&&u.y===0||(p=m(u),u.x/=p,u.y/=p),u.x*=c,u.y*=c,u}},function(x,N,r){var m=r(176);m.Clone=r(774),m.Contains=r(135),m.ContainsPoint=r(775),m.GetAABB=r(380),m.GetNumberArray=r(776),m.GetPoints=r(306),m.Perimeter=r(307),m.Reverse=r(777),m.Smooth=r(381),x.exports=m},function(x,N,r){var m=r(176);x.exports=function(u){return new m(u.points)}},function(x,N,r){var m=r(135);x.exports=function(u,c){return m(u,c.x,c.y)}},function(x,N){x.exports=function(r,m){m===void 0&&(m=[]);for(var u=0;u<r.points.length;u++)m.push(r.points[u].x),m.push(r.points[u].y);return m}},function(x,N){x.exports=function(r){return r.points.reverse(),r}},function(x,N){x.exports=function(r){return r.width*r.height}},function(x,N){x.exports=function(r){return r.x=Math.ceil(r.x),r.y=Math.ceil(r.y),r}},function(x,N){x.exports=function(r){return r.x=Math.ceil(r.x),r.y=Math.ceil(r.y),r.width=Math.ceil(r.width),r.height=Math.ceil(r.height),r}},function(x,N,r){var m=r(8);x.exports=function(u){return new m(u.x,u.y,u.width,u.height)}},function(x,N,r){var m=r(37);x.exports=function(u,c){return m(u,c.x,c.y)}},function(x,N){x.exports=function(r,m){return m.setTo(r.x,r.y,r.width,r.height)}},function(x,N){x.exports=function(r,m){return r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height}},function(x,N,r){var m=r(136);x.exports=function(u,c){var p=m(u);return p<m(c)?u.setSize(c.height*p,c.height):u.setSize(c.width,c.width/p),u.setPosition(c.centerX-u.width/2,c.centerY-u.height/2)}},function(x,N,r){var m=r(136);x.exports=function(u,c){var p=m(u);return p>m(c)?u.setSize(c.height*p,c.height):u.setSize(c.width,c.width/p),u.setPosition(c.centerX-u.width/2,c.centerY-u.height/2)}},function(x,N){x.exports=function(r){return r.x=Math.floor(r.x),r.y=Math.floor(r.y),r}},function(x,N){x.exports=function(r){return r.x=Math.floor(r.x),r.y=Math.floor(r.y),r.width=Math.floor(r.width),r.height=Math.floor(r.height),r}},function(x,N,r){var m=r(8);x.exports=function(u,c,p,h,l){return l===void 0&&(l=new m),l.setTo(Math.min(u,p),Math.min(c,h),Math.abs(u-p),Math.abs(c-h))}},function(x,N,r){var m=r(3);x.exports=function(u,c){return c===void 0&&(c=new m),c.x=u.centerX,c.y=u.centerY,c}},function(x,N,r){var m=r(3);x.exports=function(u,c){return c===void 0&&(c=new m),c.x=u.width,c.y=u.height,c}},function(x,N,r){var m=r(119);x.exports=function(u,c,p){var h=u.centerX,l=u.centerY;return u.setSize(u.width+2*c,u.height+2*p),m(u,h,l)}},function(x,N,r){var m=r(8),u=r(92);x.exports=function(c,p,h){return h===void 0&&(h=new m),u(c,p)?(h.x=Math.max(c.x,p.x),h.y=Math.max(c.y,p.y),h.width=Math.min(c.right,p.right)-h.x,h.height=Math.min(c.bottom,p.bottom)-h.y):h.setEmpty(),h}},function(x,N){x.exports=function(r,m){for(var u=r.x,c=r.right,p=r.y,h=r.bottom,l=0;l<m.length;l++)u=Math.min(u,m[l].x),c=Math.max(c,m[l].x),p=Math.min(p,m[l].y),h=Math.max(h,m[l].y);return r.x=u,r.y=p,r.width=c-u,r.height=h-p,r}},function(x,N){x.exports=function(r,m){var u=Math.min(r.x,m.x),c=Math.max(r.right,m.right);r.x=u,r.width=c-u;var p=Math.min(r.y,m.y),h=Math.max(r.bottom,m.bottom);return r.y=p,r.height=h-p,r}},function(x,N){x.exports=function(r,m,u){var c=Math.min(r.x,m),p=Math.max(r.right,m);r.x=c,r.width=p-c;var h=Math.min(r.y,u),l=Math.max(r.bottom,u);return r.y=h,r.height=l-h,r}},function(x,N){x.exports=function(r,m,u){return r.x+=m,r.y+=u,r}},function(x,N){x.exports=function(r,m){return r.x+=m.x,r.y+=m.y,r}},function(x,N){x.exports=function(r,m){return r.x<m.right&&r.right>m.x&&r.y<m.bottom&&r.bottom>m.y}},function(x,N,r){var m=r(3),u=r(32);x.exports=function(c,p,h){h===void 0&&(h=new m),p=u(p);var l=Math.sin(p),d=Math.cos(p),y=0<d?c.width/2:c.width/-2,g=0<l?c.height/2:c.height/-2;return Math.abs(y*l)<Math.abs(g*d)?g=y*l/d:y=g*d/l,h.x=y+c.centerX,h.y=g+c.centerY,h}},function(x,N,r){var m=r(166),u=r(308),c=r(3);x.exports=function(p,h,l){if(l===void 0&&(l=new c),u(p,h))switch(m(0,3)){case 0:l.x=p.x+Math.random()*(h.right-p.x),l.y=p.y+Math.random()*(h.top-p.y);break;case 1:l.x=h.x+Math.random()*(p.right-h.x),l.y=h.bottom+Math.random()*(p.bottom-h.bottom);break;case 2:l.x=p.x+Math.random()*(h.x-p.x),l.y=h.y+Math.random()*(p.bottom-h.y);break;case 3:l.x=h.right+Math.random()*(p.right-h.right),l.y=p.y+Math.random()*(h.bottom-p.y)}return l}},function(x,N){x.exports=function(r,m){return r.width===m.width&&r.height===m.height}},function(x,N){x.exports=function(r,m,u){return u===void 0&&(u=m),r.width*=m,r.height*=u,r}},function(x,N,r){var m=r(47);m.Area=r(805),m.BuildEquilateral=r(806),m.BuildFromPolygon=r(807),m.BuildRight=r(808),m.CenterOn=r(809),m.Centroid=r(312),m.CircumCenter=r(810),m.CircumCircle=r(811),m.Clone=r(812),m.Contains=r(52),m.ContainsArray=r(133),m.ContainsPoint=r(813),m.CopyFrom=r(814),m.Decompose=r(301),m.Equals=r(815),m.GetPoint=r(310),m.GetPoints=r(311),m.InCenter=r(314),m.Perimeter=r(816),m.Offset=r(313),m.Random=r(177),m.Rotate=r(817),m.RotateAroundPoint=r(818),m.RotateAroundXY=r(137),x.exports=m},function(x,N){x.exports=function(r){var m=r.x1,u=r.y1,c=r.x2,p=r.y2,h=r.x3,l=r.y3;return Math.abs(((h-m)*(p-u)-(c-m)*(l-u))/2)}},function(x,N,r){var m=r(47);x.exports=function(u,c,p){var h=p*(Math.sqrt(3)/2);return new m(u,c,u+p/2,c+h,u-p/2,c+h)}},function(x,N,r){var m=r(61),u=r(47);x.exports=function(c,p,h,l,d){p===void 0&&(p=null),h===void 0&&(h=1),l===void 0&&(l=1),d===void 0&&(d=[]);for(var y,g,b,A,T,C,O,L,P,H=m(c,p),G=0;G<H.length;G+=3)y=H[G],g=H[G+1],b=H[G+2],A=c[2*y]*h,T=c[2*y+1]*l,C=c[2*g]*h,O=c[2*g+1]*l,L=c[2*b]*h,P=c[2*b+1]*l,d.push(new u(A,T,C,O,L,P));return d}},function(x,N,r){var m=r(47);x.exports=function(u,c,p,h){return h===void 0&&(h=p),new m(u,c,u,c-h,u+p,c)}},function(x,N,r){var m=r(312),u=r(313);x.exports=function(c,p,h,l){l===void 0&&(l=m);var d=l(c),y=p-d.x,g=h-d.y;return u(c,y,g)}},function(x,N,r){var m=r(4);x.exports=function(u,c){c===void 0&&(c=new m);var p=u.x3,h=u.y3,l=u.x1-p,d=u.y1-h,y=u.x2-p,g=u.y2-h,b=2*(l*g-d*y),A=d*(y*y+g*g)-(l*l+d*d)*g,T=l*(y*y+g*g)-(l*l+d*d)*y;return c.x=p-A/b,c.y=h+T/b,c}},function(x,N,r){var m=r(50);x.exports=function(u,c){c===void 0&&(c=new m);var p,h,l,d,y=u.x1,g=u.y1,b=u.x2,A=u.y2,T=u.x3,C=u.y3,O=b-y,L=A-g,P=T-y,H=C-g,G=O*(y+b)+L*(g+A),B=P*(y+T)+H*(g+C),F=2*(O*(C-A)-L*(T-b));return Math.abs(F)<1e-6?(p=Math.min(y,b,T),h=Math.min(g,A,C),l=.5*(Math.max(y,b,T)-p),d=.5*(Math.max(g,A,C)-h),c.x=p+l,c.y=h+d):(c.x=(H*G-L*B)/F,c.y=(O*B-P*G)/F,l=c.x-y,d=c.y-g),c.radius=Math.sqrt(l*l+d*d),c}},function(x,N,r){var m=r(47);x.exports=function(u){return new m(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)}},function(x,N,r){var m=r(52);x.exports=function(u,c){return m(u,c.x,c.y)}},function(x,N){x.exports=function(r,m){return m.setTo(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)}},function(x,N){x.exports=function(r,m){return r.x1===m.x1&&r.y1===m.y1&&r.x2===m.x2&&r.y2===m.y2&&r.x3===m.x3&&r.y3===m.y3}},function(x,N,r){var m=r(34);x.exports=function(u){var c=u.getLineA(),p=u.getLineB(),h=u.getLineC();return m(c)+m(p)+m(h)}},function(x,N,r){var m=r(137),u=r(314);x.exports=function(c,p){var h=u(c);return m(c,h.x,h.y,p)}},function(x,N,r){var m=r(137);x.exports=function(u,c,p){return m(u,c.x,c.y,p)}},function(x,N,r){var m=r(1),u=r(1),m=r(820),u=r(821);x.exports={renderWebGL:m,renderCanvas:u}},function(x,N,r){var m=r(138),u=r(70);x.exports=function(c,p,h,l,d){var y=this.pipeline,g=y._tempMatrix1,b=y._tempMatrix2,A=y._tempMatrix3;c.setPipeline(y),b.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY),g.copyFrom(l.matrix),d?(g.multiplyWithOffset(d,-l.scrollX*p.scrollFactorX,-l.scrollY*p.scrollFactorY),b.e=p.x,b.f=p.y):(b.e-=l.scrollX*p.scrollFactorX,b.f-=l.scrollY*p.scrollFactorY),g.multiply(b,A);var T=p._displayOriginX,C=p._displayOriginY,O=l.alpha*p.alpha;p.isFilled&&m(y,A,p,O,T,C),p.isStroked&&u(y,p,O,T,C)}},function(x,N,r){var m=r(32),u=r(54),c=r(55),p=r(27);x.exports=function(h,l,d,y,g){var b,A=h.currentContext;p(h,A,l,y,g)&&(b=l.radius,A.beginPath(),A.arc(b-l.originX*(2*b),b-l.originY*(2*b),b,m(l._startAngle),m(l._endAngle),l.anticlockwise),l.closePath&&A.closePath(),l.isFilled&&(u(A,l),A.fill()),l.isStroked&&(c(A,l),A.stroke()),A.restore())}},function(x,N){x.exports="destroy"},function(x,N){x.exports="complete"},function(x,N){x.exports="created"},function(x,N){x.exports="error"},function(x,N){x.exports="loop"},function(x,N){x.exports="play"},function(x,N){x.exports="seeked"},function(x,N){x.exports="seeking"},function(x,N){x.exports="stop"},function(x,N){x.exports="timeout"},function(x,N){x.exports="unlocked"},function(x,N){x.exports=function(r,m,u){if(u===void 0)return u={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],scaleX:0,scaleY:0};var c,p,h,l,d,y,g,b=r.text,A=b.length,T=r.maxWidth,C=r.wordWrapCharCode,O=Number.MAX_VALUE,L=Number.MAX_VALUE,P=0,H=0,G=r.fontData.chars,B=r.fontData.lineHeight,F=r.letterSpacing,D=0,V=0,z=0,Y=null,j=0,X=r.fontSize/r.fontData.size,J=X*r.scaleX,Q=X*r.scaleY,se=null,te=0,ie=[],re=Number.MAX_VALUE,he=0,de=0,ue=0,Te=[],ye=null;if(0<T){for(we=0;we<A;we++)(z=b.charCodeAt(we))!==10?(Y=G[z])&&(se!==null&&(c=Y.kerning[te]),z===C?ye!==null&&(Te.push({word:ye.word,i:ye.i,x:ye.x*J,y:ye.y*Q,w:ye.w*J,h:ye.h*Q,cr:!1}),ye=null):(ye===null&&(ye={word:"",i:we,x:D,y:V,w:0,h:B,cr:!1}),ye.word=ye.word.concat(b[we]),ye.w+=Y.xOffset+Y.xAdvance+(c!==void 0?c:0)),D+=Y.xAdvance+F,se=Y,te=z):(ye!==null&&(Te.push({word:ye.word,i:ye.i,x:ye.x*J,y:ye.y*Q,w:ye.w*J,h:ye.h*Q,cr:!0}),ye=null),D=0,V+=B,se=null);ye!==null&&Te.push({word:ye.word,i:ye.i,x:ye.x*J,y:ye.y*Q,w:ye.w*J,h:ye.h*Q,cr:!1}),se=null;for(var Ne=te=V=D=0,Ve=[],we=0;we<Te.length;we++){var Ue,Oe=Te[we],Ye=Oe.x,st=Oe.x+Oe.w;Ue&&(Ne=Ye-(Ye-(Ue.x+Ue.w)+Ue.w),Ue=null),T<Ye-Ne||T<st-Ne?(Ve.push(Oe.i-1),Ue=Oe.cr?(Ve.push(Oe.i+Oe.word.length),Ne=0,null):Oe):Oe.cr&&(Ve.push(Oe.i+Oe.word.length),Ne=0,Ue=null)}for(we=Ve.length-1;0<=we;we--)p=b,h=Ve[we],l=`
`,b=p.substr(0,h)+l+p.substr(h+1);A=(u.wrappedText=b).length,Te=[],ye=null}for(we=0;we<A;we++)(z=b.charCodeAt(we))!==10?(Y=G[z])&&(j=D,se!==null&&(j+=(d=Y.kerning[te])!==void 0?d:0),j<O&&(O=j),V<L&&(L=V),P<(y=j+Y.xAdvance)&&(P=y),H<(g=V+B)&&(H=g),z===C?ye!==null&&(Te.push({word:ye.word,i:ye.i,x:ye.x*J,y:ye.y*Q,w:ye.w*J,h:ye.h*Q}),ye=null):(ye===null&&(ye={word:"",i:we,x:D,y:V,w:0,h:B}),ye.word=ye.word.concat(b[we]),ye.w+=Y.xOffset+Y.xAdvance+(d!==void 0?d:0)),D+=Y.xAdvance+F,se=Y,te=z,ue=y*X):(ye!==null&&(Te.push({word:ye.word,i:ye.i,x:ye.x*J,y:ye.y*Q,w:ye.w*J,h:ye.h*Q}),ye=null),D=0,V+=B,se=null,he<(ie[de]=ue)&&(he=ue),ue<re&&(re=ue),de++,ue=0);ye!==null&&Te.push({word:ye.word,i:ye.i,x:ye.x*J,y:ye.y*Q,w:ye.w*J,h:ye.h*Q}),he<(ie[de]=ue)&&(he=ue),ue<re&&(re=ue);var lt=u.local,Ke=u.global,et=u.lines;return lt.x=O*X,lt.y=L*X,lt.width=P*X,lt.height=H*X,Ke.x=r.x-r.displayOriginX+O*J,Ke.y=r.y-r.displayOriginY+L*Q,Ke.width=P*J,Ke.height=H*Q,et.shortest=re,et.longest=he,et.lengths=ie,m&&(lt.x=Math.round(lt.x),lt.y=Math.round(lt.y),lt.width=Math.round(lt.width),lt.height=Math.round(lt.height),Ke.x=Math.round(Ke.x),Ke.y=Math.round(Ke.y),Ke.width=Math.round(Ke.width),Ke.height=Math.round(Ke.height),et.shortest=Math.round(re),et.longest=Math.round(he)),u.words=Te,u.lines.height=B,u.scaleX=r.scaleX,u.scaleY=r.scaleY,u}},function(x,N,r){var m=r(139);x.exports=function(u,c,p,h,l,d,y){var g=u.sys.textures.getFrame(p,h),b=u.sys.cache.xml.get(l);if(g&&b){var A=m(b,d,y,g);return u.sys.cache.bitmapFont.add(c,{data:A,texture:p,frame:h}),!0}return!1}},function(x,N,r){var m=r(1),u=r(1),m=r(836),u=r(837);x.exports={renderWebGL:m,renderCanvas:u}},function(x,N,r){var m=r(13);x.exports=function(u,c,p,h,l){var d=c._text,y=d.length;if(y!==0){var g=this.pipeline;u.setPipeline(g,c);var b=g._tempMatrix1,A=g._tempMatrix2,T=g._tempMatrix3;A.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY),b.copyFrom(h.matrix),l?(b.multiplyWithOffset(l,-h.scrollX*c.scrollFactorX,-h.scrollY*c.scrollFactorY),A.e=c.x,A.f=c.y):(A.e-=h.scrollX*c.scrollFactorX,A.f-=h.scrollY*c.scrollFactorY),b.multiply(A,T);var C=c.frame,O=C.glTexture,L=C.cutX,P=C.cutY,H=O.width,G=O.height,B=c._isTinted&&c.tintFill,F=m.getTintAppendFloatAlpha(c._tintTL,h.alpha*c._alphaTL),D=m.getTintAppendFloatAlpha(c._tintTR,h.alpha*c._alphaTR),V=m.getTintAppendFloatAlpha(c._tintBL,h.alpha*c._alphaBL),z=m.getTintAppendFloatAlpha(c._tintBR,h.alpha*c._alphaBR);g.setTexture2D(O,0);var Y,j,X,J,Q,se,te=0,ie=0,re=0,he=c._letterSpacing,de=c.fontData,ue=de.chars,Te=de.lineHeight,ye=c._fontSize/de.size,Ne=c._align,Ve=0,we=0,Ue=c.getTextBounds(!1);0<c.maxWidth&&(y=(d=Ue.wrappedText).length);var Oe=c._bounds.lines;Ne===1?we=(Oe.longest-Oe.lengths[0])/2:Ne===2&&(we=Oe.longest-Oe.lengths[0]);for(var Ye,st,lt,Ke,et,Xe,nt,Se,Wt,Ht,zt,wt,Mt,Et,Jt,jt,yi,Qt,Yi=h.roundPixels,Fi=0;Fi<y;Fi++)(Y=d.charCodeAt(Fi))!==10?(Qt=ue[Y])&&(j=L+Qt.x,X=P+Qt.y,J=Qt.width,Q=Qt.height,Ye=Qt.xOffset+te,st=Qt.yOffset+ie,se!==null&&(Ye+=(lt=Qt.kerning[re])!==void 0?lt:0),te+=Qt.xAdvance+he,se=Qt,re=Y,J!==0&&Q!==0&&Y!==32&&(Ye*=ye,st*=ye,Ye-=c.displayOriginX,Ke=j/H,et=X/G,Xe=(j+J)/H,nt=(X+Q)/G,Se=(Ye+=we)+J*ye,Wt=(st-=c.displayOriginY)+Q*ye,Ht=T.getX(Ye,st),zt=T.getY(Ye,st),wt=T.getX(Ye,Wt),Mt=T.getY(Ye,Wt),Et=T.getX(Se,Wt),Jt=T.getY(Se,Wt),jt=T.getX(Se,st),yi=T.getY(Se,st),Yi&&(Ht=Math.round(Ht),zt=Math.round(zt),wt=Math.round(wt),Mt=Math.round(Mt),Et=Math.round(Et),Jt=Math.round(Jt),jt=Math.round(jt),yi=Math.round(yi)),g.batchQuad(Ht,zt,wt,Mt,Et,Jt,jt,yi,Ke,et,Xe,nt,F,D,V,z,B,O,0))):(Ve++,Ne===1?we=(Oe.longest-Oe.lengths[Ve])/2:Ne===2&&(we=Oe.longest-Oe.lengths[Ve]),te=0,ie+=Te,se=null)}}},function(x,N,r){var m=r(27);x.exports=function(u,c,p,h,l){var d=c._text,y=d.length,g=u.currentContext;if(y!==0&&m(u,g,c,h,l)){var b,A=c.frame,T=c.fontData.chars,C=c.fontData.lineHeight,O=c._letterSpacing,L=0,P=0,H=null,G=0,B=0,F=0,D=0,V=0,z=0,Y=null,j=0,X=c.frame.source.image,J=A.cutX,Q=A.cutY,se=c._fontSize/c.fontData.size,te=c._align,ie=0,re=0,he=c.getTextBounds(!1);0<c.maxWidth&&(y=(d=he.wrappedText).length);var de=c._bounds.lines;te===1?re=(de.longest-de.lengths[0])/2:te===2&&(re=de.longest-de.lengths[0]),g.translate(-c.displayOriginX,-c.displayOriginY);for(var ue,Te=h.roundPixels,ye=0;ye<y;ye++)(b=d.charCodeAt(ye))!==10?(H=T[b])&&(G=J+H.x,B=Q+H.y,F=H.width,D=H.height,V=H.xOffset+L,z=H.yOffset+P,Y!==null&&(V+=(ue=H.kerning[j])!==void 0?ue:0),V*=se,z*=se,V+=re,L+=H.xAdvance+O,Y=H,j=b,F!==0&&D!==0&&b!==32&&(Te&&(V=Math.round(V),z=Math.round(z)),g.save(),g.translate(V,z),g.scale(se,se),g.drawImage(X,G,B,F,D,0,0,F,D),g.restore())):(ie++,te===1?re=(de.longest-de.lengths[ie])/2:te===2&&(re=de.longest-de.lengths[ie]),L=0,P+=C,Y=null);g.restore()}}},function(x,N,r){x.exports={CheckMatrix:r(141),MatrixToString:r(839),ReverseColumns:r(840),ReverseRows:r(841),Rotate180:r(842),RotateLeft:r(843),RotateMatrix:r(93),RotateRight:r(844),TransposeMatrix:r(317)}},function(x,N,r){var m=r(157),u=r(141);x.exports=function(c){var p="";if(!u(c))return p;for(var h=0;h<c.length;h++){for(var l=0;l<c[h].length;l++){var d=c[h][l].toString();p+=d!=="undefined"?m(d,2):"?",l<c[h].length-1&&(p+=" |")}if(h<c.length-1){p+=`
`;for(var y=0;y<c[h].length;y++)p+="---",y<c[h].length-1&&(p+="+");p+=`
`}}return p}},function(x,N){x.exports=function(r){return r.reverse()}},function(x,N){x.exports=function(r){for(var m=0;m<r.length;m++)r[m].reverse();return r}},function(x,N,r){var m=r(93);x.exports=function(u){return m(u,180)}},function(x,N,r){var m=r(93);x.exports=function(u){return m(u,90)}},function(x,N,r){var m=r(93);x.exports=function(u){return m(u,-90)}},function(x,N){x.exports=function(r,m,u,c,p){if(p===void 0&&(p=r),0<u){var h=u-r.length;if(h<=0)return null}if(!Array.isArray(m))return r.indexOf(m)===-1?(r.push(m),c&&c.call(p,m),m):null;for(var l=m.length-1;0<=l;)r.indexOf(m[l])!==-1&&m.splice(l,1),l--;if((l=m.length)===0)return null;0<u&&h<l&&(m.splice(h),l=h);for(var d=0;d<l;d++){var y=m[d];r.push(y),c&&c.call(p,y)}return m}},function(x,N){x.exports=function(r,m,u,c,p,h){if(u===void 0&&(u=0),h===void 0&&(h=r),0<c){var l=c-r.length;if(l<=0)return null}if(!Array.isArray(m))return r.indexOf(m)===-1?(r.splice(u,0,m),p&&p.call(h,m),m):null;for(var d=m.length-1;0<=d;)r.indexOf(m[d])!==-1&&m.pop(),d--;if((d=m.length)===0)return null;0<c&&l<d&&(m.splice(l),d=l);for(var y=d-1;0<=y;y--){var g=m[y];r.splice(u,0,g),p&&p.call(h,g)}return m}},function(x,N){x.exports=function(r,m){var u=r.indexOf(m);return u!==-1&&u<r.length&&(r.splice(u,1),r.push(m)),m}},function(x,N,r){var m=r(43);x.exports=function(u,c,p,h,l){h===void 0&&(h=0),l===void 0&&(l=u.length);var d=0;if(m(u,h,l))for(var y=h;y<l;y++)u[y][c]===p&&d++;return d}},function(x,N){x.exports=function(r,m,u){for(var c=[null],p=3;p<arguments.length;p++)c.push(arguments[p]);for(p=0;p<r.length;p++)c[0]=r[p],m.apply(u,c);return r}},function(x,N,r){var m=r(43);x.exports=function(u,c,p,h,l){if(h===void 0&&(h=0),l===void 0&&(l=u.length),m(u,h,l)){for(var d=[null],y=5;y<arguments.length;y++)d.push(arguments[y]);for(y=h;y<l;y++)d[0]=u[y],c.apply(p,d)}return u}},function(x,N){x.exports=function(r,m){var u,c,p=r.indexOf(m);return 0<p&&(u=r[p-1],c=r.indexOf(u),r[p]=u,r[c]=m),r}},function(x,N){x.exports=function(r,m,u){var c=r.indexOf(m);if(c===-1||u<0||u>=r.length)throw new Error("Supplied index out of bounds");return c!==u&&(r.splice(c,1),r.splice(u,0,m)),m}},function(x,N){x.exports=function(r,m){var u,c,p=r.indexOf(m);return p!==-1&&p<r.length-1&&(u=r[p+1],c=r.indexOf(u),r[p]=u,r[c]=m),r}},function(x,N){x.exports=function(r,m,u,c){for(var p,h=[],l=r;l<=m;l++)u||c?(p=u?u+l.toString():l.toString(),c&&(p=p.concat(c)),h.push(p)):h.push(l);return h}},function(x,N,r){var m=r(238);x.exports=function(u,c,p){u===void 0&&(u=0),c===void 0&&(c=null),p===void 0&&(p=1),c===null&&(c=u,u=0);for(var h=[],l=Math.max(m((c-u)/(p||1)),0),d=0;d<l;d++)h.push(u),u+=p;return h}},function(x,N,r){var m=r(56);x.exports=function(u,c,p,h){if(h===void 0&&(h=u),c<0||c>u.length-1)throw new Error("Index out of bounds");var l=m(u,c);return p&&p.call(h,l),l}},function(x,N,r){var m=r(43);x.exports=function(u,c,p,h,l){if(c===void 0&&(c=0),p===void 0&&(p=u.length),l===void 0&&(l=u),m(u,c,p)){var d=p-c,y=u.splice(c,d);if(h)for(var g=0;g<y.length;g++){var b=y[g];h.call(l,b)}return y}return[]}},function(x,N,r){var m=r(56);x.exports=function(u,c,p){c===void 0&&(c=0),p===void 0&&(p=u.length);var h=c+Math.floor(Math.random()*p);return m(u,h)}},function(x,N){x.exports=function(r,m,u){var c=r.indexOf(m),p=r.indexOf(u);return c!==-1&&p===-1&&(r[c]=u,!0)}},function(x,N){x.exports=function(r,m){var u=r.indexOf(m);return u!==-1&&0<u&&(r.splice(u,1),r.unshift(m)),m}},function(x,N,r){var m=r(43);x.exports=function(u,c,p,h,l){if(h===void 0&&(h=0),l===void 0&&(l=u.length),m(u,h,l))for(var d=h;d<l;d++){var y=u[d];y.hasOwnProperty(c)&&(y[c]=p)}return u}},function(x,N){x.exports=function(r,m,u){if(m!==u){var c=r.indexOf(m),p=r.indexOf(u);if(c<0||p<0)throw new Error("Supplied items must be elements of the same array");return r[c]=u,r[p]=m,r}}},function(x,N,r){var m=r(1),u=r(1),m=r(864),u=r(865);x.exports={renderWebGL:m,renderCanvas:u}},function(x,N){x.exports=function(r,m,u,c,p){var h=m.list;if(h.length!==0){var l=m.localTransform;p?(l.loadIdentity(),l.multiply(p),l.translate(m.x,m.y),l.rotate(m.rotation),l.scale(m.scaleX,m.scaleY)):l.applyITRS(m.x,m.y,m.rotation,m.scaleX,m.scaleY);var d=m.blendMode!==-1;d||r.setBlendMode(0);for(var y=m.alpha,g=m.scrollFactorX,b=m.scrollFactorY,A=h,T=h.length,C=0;C<T;C++){var O,L,P,H,G,B,F,D,V=h[C];V.willRender(c)&&(H=V.alphaTopLeft!==void 0?(O=V.alphaTopLeft,L=V.alphaTopRight,P=V.alphaBottomLeft,V.alphaBottomRight):P=L=O=V.alpha,G=V.scrollFactorX,B=V.scrollFactorY,d||V.blendMode===r.currentBlendMode||r.setBlendMode(V.blendMode),(F=V.mask)&&F.preRenderWebGL(r,V,c),(D=V.type)!==r.currentType&&(r.newType=!0,r.currentType=D),r.nextTypeMatch=C<T-1&&A[C+1].type===r.currentType,V.setScrollFactor(G*g,B*b),V.setAlpha(O*y,L*y,P*y,H*y),V.renderWebGL(r,V,u,c,l),V.setAlpha(O,L,P,H),V.setScrollFactor(G,B),F&&F.postRenderWebGL(r,c),r.newType=!1)}}}},function(x,N){x.exports=function(r,m,u,c,p){var h=m.list;if(h.length!==0){var l=m.localTransform;p?(l.loadIdentity(),l.multiply(p),l.translate(m.x,m.y),l.rotate(m.rotation),l.scale(m.scaleX,m.scaleY)):l.applyITRS(m.x,m.y,m.rotation,m.scaleX,m.scaleY);var d=m.blendMode!==-1;d||r.setBlendMode(0);var y=m._alpha,g=m.scrollFactorX,b=m.scrollFactorY;m.mask&&m.mask.preRenderCanvas(r,null,c);for(var A=0;A<h.length;A++){var T,C,O,L=h[A];L.willRender(c)&&(T=L.alpha,C=L.scrollFactorX,O=L.scrollFactorY,d||L.blendMode===r.currentBlendMode||r.setBlendMode(L.blendMode),L.setScrollFactor(C*g,O*b),L.setAlpha(T*y),L.renderCanvas(r,L,u,c,l),L.setAlpha(T),L.setScrollFactor(C,O))}m.mask&&m.mask.postRenderCanvas(r)}}},function(x,N,r){var m=r(0),u=r(143),c=r(19),p=r(17),h=r(94),l=new m({Extends:u,initialize:function(d){u.call(this,d),this.sortChildrenFlag=!1,this.scene=d,this.systems=d.sys,d.sys.events.once(p.BOOT,this.boot,this),d.sys.events.on(p.START,this.start,this)},boot:function(){this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(p.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h.inplace(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,y){return d._depth-y._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list.length;d--;)this.list[d].destroy(!0);this.list.length=0,this.systems.events.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});c.register("DisplayList",l,"displayList"),x.exports=l},function(x,N,r){var m=r(1),u=r(1),m=r(868),u=r(318);u=r(318),x.exports={renderWebGL:m,renderCanvas:u}},function(x,N,r){function m(l,d,y){this.x=l,this.y=d,this.width=y}function u(l,d,y){this.points=[],this.pointsLength=1,this.points[0]=new m(l,d,y)}var c=r(145),p=r(13),h=[];x.exports=function(l,d,y,g,b){if(d.commandBuffer.length!==0){var A=this.pipeline;l.setPipeline(A,d);var T=d._tempMatrix1,C=d._tempMatrix2,O=d._tempMatrix3;O.loadIdentity(),C.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),T.copyFrom(g.matrix),b?(T.multiplyWithOffset(b,-g.scrollX*d.scrollFactorX,-g.scrollY*d.scrollFactorY),C.e=d.x,C.f=d.y):(C.e-=g.scrollX*d.scrollFactorX,C.f-=g.scrollY*d.scrollFactorY),T.multiply(C);for(var L=d.commandBuffer,P=g.alpha*d.alpha,H=1,G=A.fillTint,B=A.strokeTint,F=0,D=0,V=0,z=2*Math.PI,Y=[],j=0,X=!1,J=null,Q=p.getTintAppendFloatAlphaAndSwap,se=l.blankTexture.glTexture,te=0;te<L.length;te++)switch(L[te]){case c.BEGIN_PATH:Y.length=0,X=!(J=null);break;case c.CLOSE_PATH:X=!1,J&&J.points.length&&J.points.push(J.points[0]);break;case c.FILL_PATH:for(j=0;j<Y.length;j++)A.setTexture2D(se),A.batchFillPath(Y[j].points,O,T);break;case c.STROKE_PATH:for(j=0;j<Y.length;j++)A.setTexture2D(se),A.batchStrokePath(Y[j].points,H,X,O,T);break;case c.LINE_STYLE:H=L[++te];var ie=Q(L[++te],L[++te]*P);B.TL=ie,B.TR=ie,B.BL=ie,B.BR=ie;break;case c.FILL_STYLE:var re=Q(L[++te],L[++te]*P);G.TL=re,G.TR=re,G.BL=re,G.BR=re;break;case c.GRADIENT_FILL_STYLE:var he=L[++te]*P;G.TL=Q(L[++te],he),G.TR=Q(L[++te],he),G.BL=Q(L[++te],he),G.BR=Q(L[++te],he);break;case c.GRADIENT_LINE_STYLE:H=L[++te];var de=L[++te]*P;B.TL=Q(L[++te],de),B.TR=Q(L[++te],de),B.BL=Q(L[++te],de),B.BR=Q(L[++te],de);break;case c.ARC:var ue=0,Te=L[++te],ye=L[++te],Ne=L[++te],Ve=L[++te],we=L[++te],Ue=L[++te],Oe=L[++te];for(we-=Ve,Ue?we<-z?we=-z:0<we&&(we=we%z-z):z<we?we=z:we<0&&(we=z+we%z),J===null&&(J=new u(Te+Math.cos(Ve)*Ne,ye+Math.sin(Ve)*Ne,H),Y.push(J),ue+=.01);ue<1+Oe;)V=we*ue+Ve,F=Te+Math.cos(V)*Ne,D=ye+Math.sin(V)*Ne,J.points.push(new m(F,D,H)),ue+=.01;V=we+Ve,F=Te+Math.cos(V)*Ne,D=ye+Math.sin(V)*Ne,J.points.push(new m(F,D,H));break;case c.FILL_RECT:A.setTexture2D(se),A.batchFillRect(L[++te],L[++te],L[++te],L[++te],O,T);break;case c.FILL_TRIANGLE:A.setTexture2D(se),A.batchFillTriangle(L[++te],L[++te],L[++te],L[++te],L[++te],L[++te],O,T);break;case c.STROKE_TRIANGLE:A.setTexture2D(se),A.batchStrokeTriangle(L[++te],L[++te],L[++te],L[++te],L[++te],L[++te],H,O,T);break;case c.LINE_TO:J!==null?J.points.push(new m(L[++te],L[++te],H)):(J=new u(L[++te],L[++te],H),Y.push(J));break;case c.MOVE_TO:J=new u(L[++te],L[++te],H),Y.push(J);break;case c.SAVE:h.push(O.copyToArray());break;case c.RESTORE:O.copyFromArray(h.pop());break;case c.TRANSLATE:Te=L[++te],ye=L[++te],O.translate(Te,ye);break;case c.SCALE:Te=L[++te],ye=L[++te],O.scale(Te,ye);break;case c.ROTATE:O.rotate(L[++te]);break;case c.SET_TEXTURE:var Ye=L[++te],st=L[++te];A.currentFrame=Ye,A.setTexture2D(Ye.glTexture,0),A.tintEffect=st,se=Ye.glTexture;break;case c.CLEAR_TEXTURE:A.currentFrame=l.blankTexture,A.tintEffect=2,se=l.blankTexture.glTexture}}}},function(x,N,r){var m=r(1),u=r(1),m=r(870),u=r(871);x.exports={renderWebGL:m,renderCanvas:u}},function(x,N){x.exports=function(r,m,u,c,p){this.pipeline.batchSprite(m,c,p)}},function(x,N){x.exports=function(r,m,u,c,p){r.batchSprite(m,m.frame,c,p)}},function(x,N,r){var m=r(1),u=r(1),m=r(873),u=r(874);x.exports={renderWebGL:m,renderCanvas:u}},function(x,N,r){var m=r(13);x.exports=function(u,c,p,h,l){var d=this.pipeline,y=d._tempMatrix1,g=d._tempMatrix2;u.setPipeline(d),g.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY),y.copyFrom(h.matrix),l?(y.multiplyWithOffset(l,-h.scrollX*c.scrollFactorX,-h.scrollY*c.scrollFactorY),g.e=c.x,g.f=c.y):(g.e-=h.scrollX*c.scrollFactorX,g.f-=h.scrollY*c.scrollFactorY);var b,A,T,C,O=c._displayOriginX,L=c._displayOriginY,P=h.alpha*c.alpha;c.isStroked&&(b=d.strokeTint,A=m.getTintAppendFloatAlphaAndSwap(c.strokeColor,c.strokeAlpha*P),b.TL=A,b.TR=A,b.BL=A,b.BR=A,T=c._startWidth,C=c._endWidth,d.setTexture2D(),d.batchLine(c.geom.x1-O,c.geom.y1-L,c.geom.x2-O,c.geom.y2-L,T,C,1,0,!1,g,y))}},function(x,N,r){var m=r(55),u=r(27);x.exports=function(c,p,h,l,d){var y,g,b=c.currentContext;u(c,b,p,l,d)&&(y=p._displayOriginX,g=p._displayOriginY,p.isStroked&&(m(b,p),b.beginPath(),b.moveTo(p.geom.x1-y,p.geom.y1-g),b.lineTo(p.geom.x2-y,p.geom.y2-g),b.stroke()),b.restore())}},function(x,N,r){var m=r(1),u=r(1),m=r(876),u=r(877);x.exports={renderWebGL:m,renderCanvas:u}},function(x,N,r){var m=r(70),u=r(13);x.exports=function(c,p,h,l,d){var y=this.pipeline,g=y._tempMatrix1,b=y._tempMatrix2,A=y._tempMatrix3;c.setPipeline(y),b.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY),g.copyFrom(l.matrix),d?(g.multiplyWithOffset(d,-l.scrollX*p.scrollFactorX,-l.scrollY*p.scrollFactorY),b.e=p.x,b.f=p.y):(b.e-=l.scrollX*p.scrollFactorX,b.f-=l.scrollY*p.scrollFactorY),g.multiply(b,A);var T,C,O=p._displayOriginX,L=p._displayOriginY,P=l.alpha*p.alpha;p.isFilled&&(T=y.fillTint,C=u.getTintAppendFloatAlphaAndSwap(p.fillColor,p.fillAlpha*P),T.TL=C,T.TR=C,T.BL=C,T.BR=C,y.setTexture2D(),y.batchFillRect(-O,-L,p.width,p.height)),p.isStroked&&m(y,p,P,O,L)}},function(x,N,r){var m=r(54),u=r(55),c=r(27);x.exports=function(p,h,l,d,y){var g,b,A=p.currentContext;c(p,A,h,d,y)&&(g=h._displayOriginX,b=h._displayOriginY,h.isFilled&&(m(A,h),A.fillRect(-g,-b,h.width,h.height)),h.isStroked&&(u(A,h),A.beginPath(),A.rect(-g,-b,h.width,h.height),A.stroke()),A.restore())}},function(x,N,r){var m=r(0),u=r(83),c=r(45),p=r(2),h=r(42),l=new m({initialize:function(d,y,g,b){b===void 0&&(b=!1),this.propertyKey=y,this.propertyValue=g,this.defaultValue=g,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=b,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(d)},loadConfig:function(d,y){d===void 0&&(d={}),y&&(this.propertyKey=y),this.propertyValue=p(d,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(d){return this.propertyValue=d,this.setMethods()},setMethods:function(){var d,y,g,b=this.propertyValue,A=typeof b;return A=="number"?(this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate):Array.isArray(b)?this.onEmit=this.randomStaticValueEmit:A=="function"?this.emitOnly?this.onEmit=b:this.onUpdate=b:A=="object"&&(this.has(b,"random")||this.hasBoth(b,"start","end")||this.hasBoth(b,"min","max"))?(this.start=this.has(b,"start")?b.start:b.min,this.end=this.has(b,"end")?b.end:b.max,(d=this.hasBoth(b,"min","max")||!!b.random)&&(y=b.random,Array.isArray(y)&&(this.start=y[0],this.end=y[1]),this.onEmit=this.randomRangedValueEmit),this.has(b,"steps")?(this.steps=b.steps,this.counter=this.start,this.onEmit=this.steppedEmit):(g=this.has(b,"ease")?b.ease:"Linear",this.ease=c(g),d||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate)):A=="object"&&this.hasEither(b,"onEmit","onUpdate")&&(this.has(b,"onEmit")&&(this.onEmit=b.onEmit),this.has(b,"onUpdate")&&(this.onUpdate=b.onUpdate)),this},has:function(d,y){return d.hasOwnProperty(y)},hasBoth:function(d,y,g){return d.hasOwnProperty(y)&&d.hasOwnProperty(g)},hasEither:function(d,y,g){return d.hasOwnProperty(y)||d.hasOwnProperty(g)},defaultEmit:function(d,y,g){return g},defaultUpdate:function(d,y,g,b){return b},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var d=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[d]},randomRangedValueEmit:function(d,y){var g=u(this.start,this.end);return d&&d.data[y]&&(d.data[y].min=g),g},steppedEmit:function(){var d=this.counter,y=this.counter+(this.end-this.start)/this.steps;return this.counter=h(y,this.start,this.end),d},easedValueEmit:function(d,y){var g;return d&&d.data[y]&&((g=d.data[y]).min=this.start,g.max=this.end),this.start},easeValueUpdate:function(d,y,g){var b=d.data[y];return(b.max-b.min)*this.ease(g)+b.min}});x.exports=l},function(x,N,r){var m=r(1),u=r(1),m=r(880),u=r(881);x.exports={renderWebGL:m,renderCanvas:u}},function(x,N,r){var m=r(13);x.exports=function(u,c,p,h,l){var d=c.emitters.list,y=d.length;if(y!==0){var g=this.pipeline,b=g._tempMatrix1.copyFrom(h.matrix),A=g._tempMatrix2,T=g._tempMatrix3,C=g._tempMatrix4.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);b.multiply(C),u.setPipeline(g);var O=h.roundPixels,L=c.defaultFrame.glTexture,P=m.getTintAppendFloatAlphaAndSwap;g.setTexture2D(L,0);for(var H=0;H<y;H++){var G=d[H],B=G.alive,F=B.length;if(G.visible&&F!==0){var D=h.scrollX*G.scrollFactorX,V=h.scrollY*G.scrollFactorY;l&&(b.multiplyWithOffset(l,-D,-V),V=D=0),u.setBlendMode(G.blendMode)&&g.setTexture2D(L,0),G.mask&&(G.mask.preRenderWebGL(u,G,h),g.setTexture2D(L,0));for(var z=0;z<F;z++){var Y,j,X,J,Q,se,te,ie,re,he,de,ue,Te,ye,Ne=B[z],Ve=Ne.alpha*h.alpha;Ve<=0||(j=-(Y=Ne.frame).halfWidth,X=-Y.halfHeight,J=j+Y.width,Q=X+Y.height,T.applyITRS(0,0,Ne.rotation,Ne.scaleX,Ne.scaleY),T.e=Ne.x-D,T.f=Ne.y-V,b.multiply(T,A),se=A.getX(j,X),te=A.getY(j,X),ie=A.getX(j,Q),re=A.getY(j,Q),he=A.getX(J,Q),de=A.getY(J,Q),ue=A.getX(J,X),Te=A.getY(J,X),O&&(se=Math.round(se),te=Math.round(te),ie=Math.round(ie),re=Math.round(re),he=Math.round(he),de=Math.round(de),ue=Math.round(ue),Te=Math.round(Te)),ye=P(Ne.tint,Ve),g.batchQuad(se,te,ie,re,he,de,ue,Te,Y.u0,Y.v0,Y.u1,Y.v1,ye,ye,ye,ye,0,L,0))}G.mask&&(G.mask.postRenderWebGL(u,h),g.setTexture2D(L,0))}}}}},function(x,N){x.exports=function(r,m,u,c,p){var h=m.emitters.list,l=h.length;if(l!==0){var d=r._tempMatrix1.copyFrom(c.matrix),y=r._tempMatrix2,g=r._tempMatrix3,b=r._tempMatrix4.applyITRS(m.x,m.y,m.rotation,m.scaleX,m.scaleY);d.multiply(b);var A=c.roundPixels,T=r.currentContext;T.save();for(var C=0;C<l;C++){var O=h[C],L=O.alive,P=L.length;if(O.visible&&P!==0){var H=c.scrollX*O.scrollFactorX,G=c.scrollY*O.scrollFactorY;p&&(d.multiplyWithOffset(p,-H,-G),G=H=0),T.globalCompositeOperation=r.blendModes[O.blendMode];for(var B=0;B<P;B++){var F,D,V,z,Y=L[B],j=Y.alpha*c.alpha;j<=0||(D=(F=Y.frame).canvasData,V=-F.halfWidth,z=-F.halfHeight,g.applyITRS(0,0,Y.rotation,Y.scaleX,Y.scaleY),g.e=Y.x-H,g.f=Y.y-G,d.multiply(g,y),T.globalAlpha=j,T.save(),y.copyToContext(T),A&&(V=Math.round(V),z=Math.round(z)),T.imageSmoothingEnabled=!(!r.antialias||F.source.scaleMode),T.drawImage(F.source.image,D.x,D.y,D.width,D.height,V,z,D.width,D.height),T.restore())}}}T.restore()}}},function(x,N,r){var m=r(1),u=r(1),m=r(883),u=r(884);x.exports={renderWebGL:m,renderCanvas:u}},function(x,N){x.exports=function(r,m,u,c,p){this.pipeline.batchSprite(m,c,p)}},function(x,N){x.exports=function(r,m,u,c,p){r.batchSprite(m,m.frame,c,p)}},function(x,N,r){var m=r(0),u=r(327),c=r(19),p=r(17),h=new m({Extends:u,initialize:function(l){u.call(this),this.scene=l,this.systems=l.sys,l.sys.events.once(p.BOOT,this.boot,this),l.sys.events.on(p.START,this.start,this)},boot:function(){this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(p.PRE_UPDATE,this.update,this),l.on(p.UPDATE,this.sceneUpdate,this),l.once(p.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(l,d){for(var y=this._active,g=y.length,b=0;b<g;b++){var A=y[b];A.active&&A.preUpdate.call(A,l,d)}},shutdown:function(){for(var l=this._active.length;l--;)this._active[l].destroy(!0);for(l=this._pending.length;l--;)this._pending[l].destroy(!0);for(l=this._destroy.length;l--;)this._destroy[l].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var d=this.systems.events;d.off(p.PRE_UPDATE,this.preUpdate,this),d.off(p.UPDATE,this.sceneUpdate,this),d.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});c.register("UpdateList",h,"updateList"),x.exports=h},function(x,N,r){x.exports={PROCESS_QUEUE_ADD:r(887),PROCESS_QUEUE_REMOVE:r(888)}},function(x,N){x.exports="add"},function(x,N){x.exports="remove"},function(x,N,r){var m=r(315),u=r(6);u.register("arc",function(c,p,h,l,d,y,g,b){return this.displayList.add(new m(this.scene,c,p,h,l,d,y,g,b))}),u.register("circle",function(c,p,h,l,d){return this.displayList.add(new m(this.scene,c,p,h,0,360,!1,l,d))})},function(x,N,r){var m=r(112);r(6).register("bitmapText",function(u,c,p,h,l,d){return this.displayList.add(new m(this.scene,u,c,p,h,l,d))})},function(x,N,r){var m=r(140);r(6).register("container",function(u,c,p){return this.displayList.add(new m(this.scene,u,c,p))})},function(x,N,r){var m=r(144);r(6).register("graphics",function(u){return this.displayList.add(new m(this.scene,u))})},function(x,N,r){var m=r(113);r(6).register("image",function(u,c,p,h){return this.displayList.add(new m(this.scene,u,c,p,h))})},function(x,N,r){var m=r(6),u=r(319);m.register("line",function(c,p,h,l,d,y,g,b){return this.displayList.add(new u(this.scene,c,p,h,l,d,y,g,b))})},function(x,N,r){var m=r(6),u=r(320);m.register("rectangle",function(c,p,h,l,d,y){return this.displayList.add(new u(this.scene,c,p,h,l,d,y))})},function(x,N,r){var m=r(6),u=r(71);m.register("sprite",function(c,p,h,l){var d=new u(this.scene,c,p,h,l);return this.displayList.add(d),this.updateList.add(d),d})},function(x,N,r){var m=r(6),u=r(181);m.register("particles",function(c,p,h){var l=new u(this.scene,c,p,h);return this.displayList.add(l),this.updateList.add(l),l})},function(x,N,r){var m=r(112),u=r(28),c=r(20),p=r(18),h=r(5);c.register("bitmapText",function(l,d){l===void 0&&(l={});var y=h(l,"font",""),g=p(l,"text",""),b=p(l,"size",!1),A=h(l,"align",0),T=new m(this.scene,0,0,y,g,b,A);return d!==void 0&&(l.add=d),u(this.scene,T,l),T})},function(x,N,r){var m=r(28),u=r(140),c=r(20),p=r(18);c.register("container",function(h,l){h===void 0&&(h={});var d=p(h,"x",0),y=p(h,"y",0),g=new u(this.scene,d,y);return l!==void 0&&(h.add=l),m(this.scene,g,h),g})},function(x,N,r){var m=r(20),u=r(144);m.register("graphics",function(c,p){c===void 0&&(c={}),p!==void 0&&(c.add=p);var h=new u(this.scene,c);return c.add&&this.scene.sys.displayList.add(h),h})},function(x,N,r){var m=r(28),u=r(20),c=r(18),p=r(113);u.register("image",function(h,l){h===void 0&&(h={});var d=c(h,"key",null),y=c(h,"frame",null),g=new p(this.scene,0,0,d,y);return l!==void 0&&(h.add=l),m(this.scene,g,h),g})},function(x,N,r){var m=r(28),u=r(316),c=r(20),p=r(18),h=r(71);c.register("sprite",function(l,d){l===void 0&&(l={});var y=p(l,"key",null),g=p(l,"frame",null),b=new h(this.scene,0,0,y,g);return d!==void 0&&(l.add=d),m(this.scene,b,l),u(b,l),b})},function(x,N,r){var m=r(125),u=r(16)(!1,u={CreateInteractiveObject:r(328),Events:r(35),Gamepad:r(904),InputManager:r(265),InputPlugin:r(916),InputPluginCache:r(95),Keyboard:r(918),Mouse:r(935),Pointer:r(268),Touch:r(936)},m);x.exports=u},function(x,N,r){x.exports={Axis:r(329),Button:r(330),Events:r(146),Gamepad:r(331),GamepadPlugin:r(911),Configs:r(912)}},function(x,N){x.exports="down"},function(x,N){x.exports="up"},function(x,N){x.exports="connected"},function(x,N){x.exports="disconnected"},function(x,N){x.exports="down"},function(x,N){x.exports="up"},function(x,N,r){var m=r(0),u=r(7),c=r(146),p=r(331),h=r(5),l=r(95),d=r(35),y=new m({Extends:u,initialize:function(g){u.call(this),this.scene=g.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=g,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,g.pluginEvents.once(d.BOOT,this.boot,this),g.pluginEvents.on(d.START,this.start,this)},boot:function(){var g=this.scene.sys.game,b=this.settings.input,A=g.config;this.enabled=h(b,"gamepad",A.inputGamepad)&&g.device.input.gamepads,this.target=h(b,"gamepad.target",A.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(d.DESTROY,this.destroy,this)},start:function(){this.enabled&&this.startListeners(),this.sceneInputPlugin.pluginEvents.once(d.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){function g(T){!T.defaultPrevented&&b.isActive()&&(b.refreshPads(),b.queue.push(T))}var b=this,A=this.target;this.onGamepadHandler=g,A.addEventListener("gamepadconnected",g,!1),A.addEventListener("gamepaddisconnected",g,!1),this.sceneInputPlugin.pluginEvents.on(d.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(d.UPDATE,this.update)},disconnectAll:function(){for(var g=0;g<this.gamepads.length;g++)this.gamepads.connected=!1},refreshPads:function(){var g=navigator.getGamepads();if(g)for(var b=this.gamepads,A=0;A<g.length;A++){var T,C,O,L,P=g[A];P&&(T=P.id,(O=b[C=P.index])?O.id!==T?(O.destroy(),b[C]=new p(this,P)):O.update(P):(L=new p(this,P),b[C]=L,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=L):this._pad3=L:this._pad2=L:this._pad1=L))}else this.disconnectAll()},getAll:function(){for(var g=[],b=this.gamepads,A=0;A<b.length;A++)b[A]&&g.push(b[A]);return g},getPad:function(g){for(var b=this.gamepads,A=0;A<b.length;A++)if(b[A]&&b[A].index===g)return b[A]},update:function(){if(this.enabled){this.refreshPads();var g=this.queue.length;if(g!==0)for(var b=this.queue.splice(0,g),A=0;A<g;A++){var T=b[A],C=this.getPad(T.gamepad.index);T.type==="gamepadconnected"?this.emit(c.CONNECTED,C,T):T.type==="gamepaddisconnected"&&this.emit(c.DISCONNECTED,C,T)}}},shutdown:function(){this.stopListeners(),this.disconnectAll(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var g=0;g<this.gamepads.length;g++)this.gamepads[g]&&this.gamepads[g].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});l.register("GamepadPlugin",y,"gamepad","gamepad","inputGamepad"),x.exports=y},function(x,N,r){x.exports={DUALSHOCK_4:r(913),SNES_USB:r(914),XBOX_360:r(915)}},function(x,N){x.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(x,N){x.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(x,N){x.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(x,N,r){var m=r(50),u=r(44),c=r(0),p=r(125),h=r(328),l=r(917),d=r(46),y=r(69),g=r(63),b=r(35),A=r(7),T=r(2),C=r(31),O=r(95),L=r(10),P=r(19),H=r(8),G=r(37),B=r(17),F=r(47),D=r(52),V=new c({Extends:A,initialize:function(z){A.call(this),this.scene=z,this.systems=z.sys,this.settings=z.sys.settings,this.manager=z.sys.game.input,this.pluginEvents=new A,this.enabled=!0,this.displayList,this.cameras,O.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var Y={cancelled:!1};this._eventContainer={stopPropagation:function(){Y.cancelled=!0}},this._eventData=Y,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,z.sys.events.once(B.BOOT,this.boot,this),z.sys.events.on(B.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(B.DESTROY,this.destroy,this),this.pluginEvents.emit(b.BOOT)},start:function(){var z=this.systems.events;z.on(B.TRANSITION_START,this.transitionIn,this),z.on(B.TRANSITION_OUT,this.transitionOut,this),z.on(B.TRANSITION_COMPLETE,this.transitionComplete,this),z.on(B.PRE_UPDATE,this.preUpdate,this),z.once(B.SHUTDOWN,this.shutdown,this),this.manager.events.on(b.GAME_OUT,this.onGameOut,this),this.manager.events.on(b.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(b.START)},onGameOver:function(z){this.isActive()&&this.emit(b.GAME_OVER,z.timeStamp,z)},onGameOut:function(z){this.isActive()&&this.emit(b.GAME_OUT,z.timeStamp,z)},preUpdate:function(){this.pluginEvents.emit(b.PRE_UPDATE);var z=this._pendingRemoval,Y=this._pendingInsertion,j=z.length,X=Y.length;if(j!==0||X!==0){for(var J=this._list,Q=0;Q<j;Q++){var se=z[Q],te=J.indexOf(se);-1<te&&(J.splice(te,1),this.clear(se,!0))}z.length=0,this._pendingRemoval.length=0,this._list=J.concat(Y.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(z,Y){if(!this.isActive())return!1;if(this.pluginEvents.emit(b.UPDATE,z,Y),this._updatedThisFrame)return this._updatedThisFrame=!1;for(var j=this.manager,X=j.pointers,J=j.pointersTotal,Q=0;Q<J;Q++)X[Q].updateMotion();if(this._list.length===0)return!1;var se=this.pollRate;if(se===-1)return!1;if(0<se){if(this._pollTimer-=Y,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var te=!1;for(Q=0;Q<J;Q++){var ie=0,re=X[Q];this._tempZones=[],this._temp=this.hitTestPointer(re),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),ie+=this.processOverOutEvents(re),this.getDragState(re)===2&&this.processDragThresholdEvent(re,z),0<ie&&(te=!0)}return te},update:function(z,Y){if(!this.isActive())return!1;for(var j=Y.length,X=!1,J=0;J<j;J++){var Q=0,se=Y[J];switch(this._tempZones=[],this._temp=this.hitTestPointer(se),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),z){case p.MOUSE_DOWN:Q+=this.processDragDownEvent(se),Q+=this.processDownEvents(se),Q+=this.processOverOutEvents(se);break;case p.MOUSE_UP:Q+=this.processDragUpEvent(se),Q+=this.processUpEvents(se),Q+=this.processOverOutEvents(se);break;case p.TOUCH_START:Q+=this.processDragDownEvent(se),Q+=this.processDownEvents(se),Q+=this.processOverEvents(se);break;case p.TOUCH_END:case p.TOUCH_CANCEL:Q+=this.processDragUpEvent(se),Q+=this.processUpEvents(se),Q+=this.processOutEvents(se);break;case p.MOUSE_MOVE:case p.TOUCH_MOVE:Q+=this.processDragMoveEvent(se),Q+=this.processMoveEvents(se),Q+=this.processOverOutEvents(se);break;case p.MOUSE_WHEEL:Q+=this.processWheelEvent(se)}0<Q&&(X=!0)}return this._updatedThisFrame=!0,X},clear:function(z,Y){Y===void 0&&(Y=!1);var j=z.input;if(j){Y||this.queueForRemoval(z),j.gameObject=void 0,j.target=void 0,j.hitArea=void 0,j.hitAreaCallback=void 0,j.callbackContext=void 0,this.manager.resetCursor(j),z.input=null;var X=this._draggable.indexOf(z);return-1<X&&this._draggable.splice(X,1),-1<(X=this._drag[0].indexOf(z))&&this._drag[0].splice(X,1),-1<(X=this._over[0].indexOf(z))&&this._over[0].splice(X,1),z}},disable:function(z){z.input.enabled=!1},enable:function(z,Y,j,X){return X===void 0&&(X=!1),z.input?z.input.enabled=!0:this.setHitArea(z,Y,j),z.input&&X&&!z.input.dropZone&&(z.input.dropZone=X),this},hitTestPointer:function(z){for(var Y=this.cameras.getCamerasBelowPointer(z),j=0;j<Y.length;j++){for(var X=Y[j],J=this.manager.hitTest(z,this._list,X),Q=0;Q<J.length;Q++){var se=J[Q];se.input.dropZone&&this._tempZones.push(se)}if(0<J.length)return z.camera=X,J}return z.camera=Y[0],[]},processDownEvents:function(z){for(var Y=0,j=this._temp,X=this._eventData,J=this._eventContainer,Q=X.cancelled=!1,se=0;se<j.length;se++){var te=j[se];if(te.input){if(Y++,te.emit(b.GAMEOBJECT_POINTER_DOWN,z,te.input.localX,te.input.localY,J),X.cancelled||!te.input){Q=!0;break}if(this.emit(b.GAMEOBJECT_DOWN,z,te,J),X.cancelled||!te.input){Q=!0;break}}}return!Q&&this.manager&&(z.downElement===this.manager.game.canvas?this.emit(b.POINTER_DOWN,z,j):this.emit(b.POINTER_DOWN_OUTSIDE,z)),Y},getDragState:function(z){return this._dragState[z.id]},setDragState:function(z,Y){this._dragState[z.id]=Y},processDragThresholdEvent:function(z,Y){var j=!1,X=this.dragTimeThreshold,J=this.dragDistanceThreshold;if((0<J&&d(z.x,z.y,z.downX,z.downY)>=J||0<X&&Y>=z.downTime+X)&&(j=!0),j)return this.setDragState(z,3),this.processDragStartList(z)},processDragStartList:function(z){if(this.getDragState(z)!==3)return 0;for(var Y=this._drag[z.id],j=0;j<Y.length;j++){var X=Y[j],J=X.input;J.dragState=2,J.dragStartX=X.x,J.dragStartY=X.y,J.dragStartXGlobal=z.worldX,J.dragStartYGlobal=z.worldY,J.dragX=J.dragStartXGlobal-J.dragStartX,J.dragY=J.dragStartYGlobal-J.dragStartY,X.emit(b.GAMEOBJECT_DRAG_START,z,J.dragX,J.dragY),this.emit(b.DRAG_START,z,X)}return this.setDragState(z,4),Y.length},processDragDownEvent:function(z){var Y=this._temp;if(this._draggable.length===0||Y.length===0||!z.primaryDown||this.getDragState(z)!==0)return 0;this.setDragState(z,1);for(var j=[],X=0;X<Y.length;X++){var J=Y[X];J.input.draggable&&J.input.dragState===0&&j.push(J)}return j.length===0?(this.setDragState(z,0),0):(1<j.length&&(this.sortGameObjects(j),this.topOnly&&j.splice(1)),this._drag[z.id]=j,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(z,3),this.processDragStartList(z)):(this.setDragState(z,2),0))},processDragMoveEvent:function(z){if(this.getDragState(z)===2&&this.processDragThresholdEvent(z,this.manager.game.loop.now),this.getDragState(z)!==4)return 0;for(var Y=this._tempZones,j=this._drag[z.id],X=0;X<j.length;X++){var J,Q,se,te,ie,re,he,de,ue=j[X],Te=ue.input,ye=Te.target;ye?(J=Y.indexOf(ye))===0?(ue.emit(b.GAMEOBJECT_DRAG_OVER,z,ye),this.emit(b.DRAG_OVER,z,ue,ye)):0<J?(ue.emit(b.GAMEOBJECT_DRAG_LEAVE,z,ye),this.emit(b.DRAG_LEAVE,z,ue,ye),Te.target=Y[0],ye=Te.target,ue.emit(b.GAMEOBJECT_DRAG_ENTER,z,ye),this.emit(b.DRAG_ENTER,z,ue,ye)):(ue.emit(b.GAMEOBJECT_DRAG_LEAVE,z,ye),this.emit(b.DRAG_LEAVE,z,ue,ye),Y[0]?(Te.target=Y[0],ye=Te.target,ue.emit(b.GAMEOBJECT_DRAG_ENTER,z,ye),this.emit(b.DRAG_ENTER,z,ue,ye)):Te.target=null):!ye&&Y[0]&&(Te.target=Y[0],ye=Te.target,ue.emit(b.GAMEOBJECT_DRAG_ENTER,z,ye),this.emit(b.DRAG_ENTER,z,ue,ye)),se=ue.parentContainer?(te=z.worldX-Te.dragStartXGlobal,ie=z.worldY-Te.dragStartYGlobal,re=ue.getParentRotation(),he=te*Math.cos(re)+ie*Math.sin(re),de=ie*Math.cos(re)-te*Math.sin(re),he*=1/ue.parentContainer.scaleX,de*=1/ue.parentContainer.scaleY,Q=he+Te.dragStartX,de+Te.dragStartY):(Q=z.worldX-Te.dragX,z.worldY-Te.dragY),ue.emit(b.GAMEOBJECT_DRAG,z,Q,se),this.emit(b.DRAG,z,ue,Q,se)}return j.length},processDragUpEvent:function(z){for(var Y=this._drag[z.id],j=0;j<Y.length;j++){var X,J,Q=Y[j],se=Q.input;se&&se.dragState===2&&(se.dragState=0,se.dragX=se.localX-Q.displayOriginX,se.dragY=se.localY-Q.displayOriginY,X=!1,(J=se.target)&&(Q.emit(b.GAMEOBJECT_DROP,z,J),this.emit(b.DROP,z,Q,J),X=!(se.target=null)),Q.input&&(Q.emit(b.GAMEOBJECT_DRAG_END,z,se.dragX,se.dragY,X),this.emit(b.DRAG_END,z,Q,X)))}return this.setDragState(z,0),Y.splice(0),0},processMoveEvents:function(z){for(var Y=0,j=this._temp,X=this._eventData,J=this._eventContainer,Q=X.cancelled=!1,se=0;se<j.length;se++){var te=j[se];if(te.input){if(Y++,te.emit(b.GAMEOBJECT_POINTER_MOVE,z,te.input.localX,te.input.localY,J),X.cancelled||!te.input){Q=!0;break}if(this.emit(b.GAMEOBJECT_MOVE,z,te,J),X.cancelled||!te.input){Q=!0;break}if(this.topOnly)break}}return Q||this.emit(b.POINTER_MOVE,z,j),Y},processWheelEvent:function(z){for(var Y=0,j=this._temp,X=this._eventData,J=this._eventContainer,Q=X.cancelled=!1,se=z.deltaX,te=z.deltaY,ie=z.deltaZ,re=0;re<j.length;re++){var he=j[re];if(he.input){if(Y++,he.emit(b.GAMEOBJECT_POINTER_WHEEL,z,se,te,ie,J),X.cancelled||!he.input){Q=!0;break}if(this.emit(b.GAMEOBJECT_WHEEL,z,he,se,te,ie,J),X.cancelled||!he.input){Q=!0;break}}}return Q||this.emit(b.POINTER_WHEEL,z,j,se,te,ie),Y},processOverEvents:function(z){var Y=this._temp,j=0,X=Y.length,J=[];if(0<X){for(var Q=this.manager,se=this._eventData,te=this._eventContainer,ie=se.cancelled=!1,re=0;re<X;re++){var he=Y[re];if(he.input){if(J.push(he),Q.setCursor(he.input),he.emit(b.GAMEOBJECT_POINTER_OVER,z,he.input.localX,he.input.localY,te),j++,se.cancelled||!he.input){ie=!0;break}if(this.emit(b.GAMEOBJECT_OVER,z,he,te),se.cancelled||!he.input){ie=!0;break}}}ie||this.emit(b.POINTER_OVER,z,J)}return this._over[z.id]=J,j},processOutEvents:function(z){var Y=this._over[z.id],j=0,X=Y.length;if(0<X){var J=this.manager,Q=this._eventData,se=this._eventContainer,te=Q.cancelled=!1;this.sortGameObjects(Y);for(var ie=0;ie<X;ie++){for(var re=Y[ie],ie=0;ie<X;ie++)if((re=Y[ie]).input){if(J.resetCursor(re.input),re.emit(b.GAMEOBJECT_POINTER_OUT,z,se),j++,Q.cancelled||!re.input){te=!0;break}if(this.emit(b.GAMEOBJECT_OUT,z,re,se),Q.cancelled||!re.input){te=!0;break}}te||this.emit(b.POINTER_OUT,z,Y)}this._over[z.id]=[]}return j},processOverOutEvents:function(z){for(var Y,j=this._temp,X=[],J=[],Q=[],se=this._over[z.id],te=this._drag[z.id],ie=this.manager,re=0;re<se.length;re++)Y=se[re],j.indexOf(Y)===-1&&te.indexOf(Y)===-1?X.push(Y):Q.push(Y);for(re=0;re<j.length;re++)Y=j[re],se.indexOf(Y)===-1&&J.push(Y);var he=X.length,de=0,ue=this._eventData,Te=this._eventContainer,ye=ue.cancelled=!1;if(0<he){for(this.sortGameObjects(X),re=0;re<he;re++)if((Y=X[re]).input){if(ie.resetCursor(Y.input),Y.emit(b.GAMEOBJECT_POINTER_OUT,z,Te),de++,ue.cancelled||!Y.input){ye=!0;break}if(this.emit(b.GAMEOBJECT_OUT,z,Y,Te),ue.cancelled||!Y.input){ye=!0;break}}ye||this.emit(b.POINTER_OUT,z,X)}if(he=J.length,ye=ue.cancelled=!1,0<he){for(this.sortGameObjects(J),re=0;re<he;re++)if((Y=J[re]).input){if(ie.setCursor(Y.input),Y.emit(b.GAMEOBJECT_POINTER_OVER,z,Y.input.localX,Y.input.localY,Te),de++,ue.cancelled||!Y.input){ye=!0;break}if(this.emit(b.GAMEOBJECT_OVER,z,Y,Te),ue.cancelled||!Y.input){ye=!0;break}}ye||this.emit(b.POINTER_OVER,z,J)}return se=Q.concat(J),this._over[z.id]=this.sortGameObjects(se),de},processUpEvents:function(z){for(var Y=this._temp,j=this._eventData,X=this._eventContainer,J=j.cancelled=!1,Q=0;Q<Y.length;Q++){var se=Y[Q];if(se.input){if(se.emit(b.GAMEOBJECT_POINTER_UP,z,se.input.localX,se.input.localY,X),j.cancelled||!se.input){J=!0;break}if(this.emit(b.GAMEOBJECT_UP,z,se,X),j.cancelled||!se.input){J=!0;break}}}return!J&&this.manager&&(z.upElement===this.manager.game.canvas?this.emit(b.POINTER_UP,z,Y):this.emit(b.POINTER_UP_OUTSIDE,z)),Y.length},queueForInsertion:function(z){return this._pendingInsertion.indexOf(z)===-1&&this._list.indexOf(z)===-1&&this._pendingInsertion.push(z),this},queueForRemoval:function(z){return this._pendingRemoval.push(z),this},setDraggable:function(z,Y){Y===void 0&&(Y=!0),Array.isArray(z)||(z=[z]);for(var j=0;j<z.length;j++){var X=z[j];X.input.draggable=Y;var J=this._draggable.indexOf(X);Y&&J===-1?this._draggable.push(X):!Y&&-1<J&&this._draggable.splice(J,1)}return this},makePixelPerfect:function(z){z===void 0&&(z=1);var Y=this.systems.textures;return l(Y,z)},setHitArea:function(z,Y,j){if(Y===void 0)return this.setHitAreaFromTexture(z);Array.isArray(z)||(z=[z]);var X,J,Q=!1,se=!1,te=!1,ie=!1,re=!1,he=!0;L(Y)?(Y=T(X=Y,"hitArea",null),j=T(X,"hitAreaCallback",null),Q=T(X,"draggable",!1),se=T(X,"dropZone",!1),te=T(X,"cursor",!1),ie=T(X,"useHandCursor",!1),re=T(X,"pixelPerfect",!1),J=T(X,"alphaTolerance",1),re&&(Y={},j=this.makePixelPerfect(J)),Y&&j||(this.setHitAreaFromTexture(z),he=!1)):typeof Y!="function"||j||(j=Y,Y={});for(var de=0;de<z.length;de++){var ue,Te=z[de];re&&Te.type==="Container"?console.warn("Cannot pixelPerfect test a Container. Use a custom callback."):((ue=Te.input?Te.input:h(Te,Y,j)).customHitArea=he,ue.dropZone=se,ue.cursor=ie?"pointer":te,Te.input=ue,Q&&this.setDraggable(Te),this.queueForInsertion(Te))}return this},setHitAreaCircle:function(z,Y,j,X,J){J===void 0&&(J=u);var Q=new m(Y,j,X);return this.setHitArea(z,Q,J)},setHitAreaEllipse:function(z,Y,j,X,J,Q){Q===void 0&&(Q=g);var se=new y(Y,j,X,J);return this.setHitArea(z,se,Q)},setHitAreaFromTexture:function(z,Y){Y===void 0&&(Y=G),Array.isArray(z)||(z=[z]);for(var j=0;j<z.length;j++){var X=z[j],J=X.frame,Q=0,se=0;X.width?(Q=X.width,se=X.height):J&&(Q=J.realWidth,se=J.realHeight),X.type!=="Container"||Q!==0&&se!==0?Q!==0&&se!==0&&(X.input=h(X,new H(0,0,Q,se),Y),this.queueForInsertion(X)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(z,Y,j,X,J,Q){Q===void 0&&(Q=G);var se=new H(Y,j,X,J);return this.setHitArea(z,se,Q)},setHitAreaTriangle:function(z,Y,j,X,J,Q,se,te){te===void 0&&(te=D);var ie=new F(Y,j,X,J,Q,se);return this.setHitArea(z,ie,te)},enableDebug:function(z,Y){Y===void 0&&(Y=65280);var j=z.input;if(!j||!j.hitArea)return this;var X=j.hitArea,J=X.type,Q=j.hitAreaDebug,se=this.systems.add,te=this.systems.updateList;Q&&(te.remove(Q),Q.destroy(),Q=null);var ie=0,re=0;switch(J){case C.CIRCLE:Q=se.arc(0,0,X.radius),ie=X.x-X.radius,re=X.y-X.radius;break;case C.ELLIPSE:Q=se.ellipse(0,0,X.width,X.height),ie=X.x-X.width/2,re=X.y-X.height/2;break;case C.LINE:Q=se.line(0,0,X.x1,X.y1,X.x2,X.y2);break;case C.POLYGON:Q=se.polygon(0,0,X.points);break;case C.RECTANGLE:Q=se.rectangle(0,0,X.width,X.height),ie=X.x,re=X.y;break;case C.TRIANGLE:Q=se.triangle(0,0,X.x1,X.y1,X.x2,X.y2,X.x3,X.y3)}return Q&&(Q.isFilled=!1,Q.preUpdate=function(){Q.setStrokeStyle(1/z.scale,Y),Q.setDisplayOrigin(z.displayOriginX,z.displayOriginY);var he,de=z.x,ue=z.y,Te=z.rotation,ye=z.scaleX,Ne=z.scaleY;z.parentContainer&&(de=(he=z.getWorldTransformMatrix()).tx,ue=he.ty,Te=he.rotation,ye=he.scaleX,Ne=he.scaleY),Q.setRotation(Te),Q.setScale(ye,Ne),Q.setPosition(de+ie,ue+re),Q.setScrollFactor(z.scrollFactorX,z.scrollFactorY),Q.setDepth(z.depth)},te.add(Q),j.hitAreaDebug=Q),this},removeDebug:function(z){var Y,j=z.input;return j&&j.hitAreaDebug&&(Y=j.hitAreaDebug,this.systems.updateList.remove(Y),Y.destroy(),j.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(z){return this.pollRate=z,this._pollTimer=0,this},setGlobalTopOnly:function(z){return this.manager.globalTopOnly=z,this},setTopOnly:function(z){return this.topOnly=z,this},sortGameObjects:function(z){return z.length<2?z:(this.scene.sys.depthSort(),z.sort(this.sortHandlerGO.bind(this)))},sortHandlerGO:function(z,Y){if(z.parentContainer||Y.parentContainer){if(z.parentContainer===Y.parentContainer)return Y.parentContainer.getIndex(Y)-z.parentContainer.getIndex(z);if(z.parentContainer===Y)return-1;if(Y.parentContainer===z)return 1;for(var j=z.getIndexList(),X=Y.getIndexList(),J=Math.min(j.length,X.length),Q=0;Q<J;Q++){var se=j[Q],te=X[Q];if(se!==te)return te-se}return X.length-j.length}return this.displayList.getIndex(Y)-this.displayList.getIndex(z)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(z){return this.manager.addPointer(z)},setDefaultCursor:function(z){return this.manager.setDefaultCursor(z),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(b.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;for(var z=this._dragState.length=0;z<10;z++)this._drag[z]=[],this._over[z]=[];this.removeAllListeners();var Y=this.systems.events;Y.off(B.TRANSITION_START,this.transitionIn,this),Y.off(B.TRANSITION_OUT,this.transitionOut,this),Y.off(B.TRANSITION_COMPLETE,this.transitionComplete,this),Y.off(B.PRE_UPDATE,this.preUpdate,this),this.manager.events.off(b.GAME_OUT,this.onGameOut,this),this.manager.events.off(b.GAME_OVER,this.onGameOver,this),Y.off(B.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(b.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(B.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});P.register("InputPlugin",V,"input"),x.exports=V},function(x,N){x.exports=function(r,m){return function(u,c,p,h){var l=r.getPixelAlpha(c,p,h.texture.key,h.frame.name);return l&&m<=l}}},function(x,N,r){x.exports={Events:r(96),KeyboardManager:r(266),KeyboardPlugin:r(926),Key:r(332),KeyCodes:r(88),KeyCombo:r(333),JustDown:r(931),JustUp:r(932),DownDuration:r(933),UpDuration:r(934)}},function(x,N){x.exports="keydown"},function(x,N){x.exports="keyup"},function(x,N){x.exports="keycombomatch"},function(x,N){x.exports="down"},function(x,N){x.exports="keydown-"},function(x,N){x.exports="keyup-"},function(x,N){x.exports="up"},function(x,N,r){var m=r(0),u=r(7),c=r(96),p=r(15),h=r(5),l=r(35),d=r(95),y=r(332),g=r(88),b=r(333),A=r(930),T=r(68),C=new m({Extends:u,initialize:function(O){u.call(this),this.game=O.systems.game,this.scene=O.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=O,this.manager=O.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],O.pluginEvents.once(l.BOOT,this.boot,this),O.pluginEvents.on(l.START,this.start,this)},boot:function(){var O=this.settings.input;this.enabled=h(O,"keyboard",!0);var L=h(O,"keyboard.capture",null);L&&this.addCaptures(L),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.on(l.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this),this.game.events.on(p.BLUR,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(O){return this.manager.addCapture(O),this},removeCapture:function(O){return this.manager.removeCapture(O),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:g.UP,down:g.DOWN,left:g.LEFT,right:g.RIGHT,space:g.SPACE,shift:g.SHIFT})},addKeys:function(O,L,P){L===void 0&&(L=!0),P===void 0&&(P=!1);var H={};if(typeof O=="string"){O=O.split(",");for(var G=0;G<O.length;G++){var B=O[G].trim();B&&(H[B]=this.addKey(B,L,P))}}else for(var F in O)H[F]=this.addKey(O[F],L,P);return H},addKey:function(O,L,P){L===void 0&&(L=!0),P===void 0&&(P=!1);var H=this.keys;if(O instanceof y){var G=H.indexOf(O);return-1<G?H[G]=O:H[O.keyCode]=O,L&&this.addCapture(O.keyCode),O.setEmitOnRepeat(P),O}return typeof O=="string"&&(O=g[O.toUpperCase()]),H[O]||(H[O]=new y(this,O),L&&this.addCapture(O),H[O].setEmitOnRepeat(P)),H[O]},removeKey:function(O,L){L===void 0&&(L=!1);var P,H,G=this.keys;return O instanceof y?-1<(H=G.indexOf(O))&&(P=this.keys[H],this.keys[H]=void 0):typeof O=="string"&&(O=g[O.toUpperCase()]),G[O]&&(P=G[O],G[O]=void 0),P&&(P.plugin=null,L&&P.destroy()),this},removeAllKeys:function(O){for(var L=this.keys,P=0;P<L.length;P++){var H=L[P];H&&(L[P]=void 0,O&&H.destroy())}return this},createCombo:function(O,L){return new b(this,O,L)},checkDown:function(O,L){if(L===void 0&&(L=0),this.enabled&&O.isDown){var P=T(this.time-O.timeDown,L);if(P>O._tick)return O._tick=P,!0}return!1},update:function(){var O=this.manager.queue,L=O.length;if(this.isActive()&&L!==0)for(var P=this.keys,H=0;H<L;H++){var G=O[H],B=G.keyCode,F=P[B],D=!1;G.cancelled===void 0&&(G.cancelled=0,G.stopImmediatePropagation=function(){G.cancelled=1},G.stopPropagation=function(){G.cancelled=-1}),G.cancelled!==-1&&(G.type==="keydown"?(F&&(D=F.isDown,F.onDown(G)),G.cancelled||F&&D||(A[B]&&(this.emit(c.KEY_DOWN+A[B],G),this.emit("keydown_"+A[B],G)),G.cancelled||this.emit(c.ANY_KEY_DOWN,G))):(F&&F.onUp(G),G.cancelled||(A[B]&&(this.emit(c.KEY_UP+A[B],G),this.emit("keyup_"+A[B],G)),G.cancelled||this.emit(c.ANY_KEY_UP,G))),G.cancelled===1&&(G.cancelled=0))}},resetKeys:function(){for(var O=this.keys,L=0;L<O.length;L++)O[L]&&O[L].reset();return this},shutdown:function(){this.resetKeys(),this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.off(l.MANAGER_PROCESS,this.update,this),this.game.events.off(p.BLUR,this.resetKeys),this.removeAllListeners(),this.queue=[]},destroy:function(){this.shutdown();for(var O=this.keys,L=0;L<O.length;L++)O[L]&&O[L].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});d.register("KeyboardPlugin",C,"keyboard","keyboard","inputKeyboard"),x.exports=C},function(x,N,r){var m=r(928);x.exports=function(u,c){if(c.matched)return!0;var p,h=!1,l=!1;return u.keyCode===c.current&&(0<c.index&&0<c.maxKeyDelay?(p=c.timeLastMatched+c.maxKeyDelay,u.timeStamp<=p&&(l=!0,h=m(u,c))):(l=!0,h=m(u,c))),!l&&c.resetOnWrongKey&&(c.index=0,c.current=c.keyCodes[0]),h&&(c.timeLastMatched=u.timeStamp,c.matched=!0,c.timeMatched=u.timeStamp),h}},function(x,N){x.exports=function(r,m){return m.timeLastMatched=r.timeStamp,m.index++,m.index===m.size||(m.current=m.keyCodes[m.index],!1)}},function(x,N){x.exports=function(r){return r.current=r.keyCodes[0],r.index=0,r.timeLastMatched=0,r.matched=!1,r.timeMatched=0,r}},function(x,N,r){var m=r(88),u={};for(var c in m)u[m[c]]=c;x.exports=u},function(x,N){x.exports=function(r){return!!r._justDown&&!(r._justDown=!1)}},function(x,N){x.exports=function(r){return!!r._justUp&&!(r._justUp=!1)}},function(x,N){x.exports=function(r,m){m===void 0&&(m=50);var u=r.plugin.game.loop.time-r.timeDown;return r.isDown&&u<m}},function(x,N){x.exports=function(r,m){m===void 0&&(m=50);var u=r.plugin.game.loop.time-r.timeUp;return r.isUp&&u<m}},function(x,N,r){x.exports={MouseManager:r(267)}},function(x,N,r){x.exports={TouchManager:r(269)}},function(x,N,r){var m=r(0),u=r(11),c=r(2),p=r(64),h=r(10),l=r(72),d=r(65),y=new m({Extends:d,initialize:function(g,b,A,T,C,O){var L,P,H=h(b)?(b=c(P=b,"key"),L=new p(g,{key:b,url:c(P,"textureURL"),extension:c(P,"textureExtension","png"),normalMap:c(P,"normalMap"),xhrSettings:c(P,"textureXhrSettings")}),new l(g,{key:b,url:c(P,"atlasURL"),extension:c(P,"atlasExtension","json"),xhrSettings:c(P,"atlasXhrSettings")})):(L=new p(g,b,A,C),new l(g,b,T,O));L.linkFile?d.call(this,g,"atlasjson",b,[L,H,L.linkFile]):d.call(this,g,"atlasjson",b,[L,H])},addToCache:function(){var g,b,A;this.isReadyToProcess()&&(g=this.files[0],b=this.files[1],A=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlas(g.key,g.data,b.data,A),b.addToCache(),this.complete=!0)}});u.register("atlas",function(g,b,A,T,C){var O;if(Array.isArray(g))for(var L=0;L<g.length;L++)O=new y(this,g[L]),this.addFile(O.files);else O=new y(this,g,b,A,T,C),this.addFile(O.files);return this}),x.exports=y},function(x,N,r){var m=r(0),u=r(11),c=r(2),p=r(64),h=r(10),l=r(65),d=r(139),y=r(335),g=new m({Extends:l,initialize:function(b,A,T,C,O,L){var P,H,G=h(A)?(A=c(H=A,"key"),P=new p(b,{key:A,url:c(H,"textureURL"),extension:c(H,"textureExtension","png"),normalMap:c(H,"normalMap"),xhrSettings:c(H,"textureXhrSettings")}),new y(b,{key:A,url:c(H,"fontDataURL"),extension:c(H,"fontDataExtension","xml"),xhrSettings:c(H,"fontDataXhrSettings")})):(P=new p(b,A,T,O),new y(b,A,C,L));P.linkFile?l.call(this,b,"bitmapfont",A,[P,G,P.linkFile]):l.call(this,b,"bitmapfont",A,[P,G])},addToCache:function(){var b,A;this.isReadyToProcess()&&(b=this.files[0],A=this.files[1],b.addToCache(),A.addToCache(),this.loader.cacheManager.bitmapFont.add(b.key,{data:d(A.data),texture:b.key,frame:null}),this.complete=!0)}});u.register("bitmapFont",function(b,A,T,C,O){var L;if(Array.isArray(b))for(var P=0;P<b.length;P++)L=new g(this,b[P]),this.addFile(L.files);else L=new g(this,b,A,T,C,O),this.addFile(L.files);return this}),x.exports=g},function(x,N,r){var m=r(0),u=r(22),c=r(182),p=r(7),h=r(62),l=r(11),d=r(2),y=r(19),g=r(17),b=r(97),A=new m({Extends:p,initialize:function(T){p.call(this);var C=T.sys.game.config,O=T.sys.settings.loader;this.scene=T,this.systems=T.sys,this.cacheManager=T.sys.cache,this.textureManager=T.sys.textures,this.sceneManager=T.sys.game.scene,l.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(d(O,"baseURL",C.loaderBaseURL)),this.setPath(d(O,"path",C.loaderPath)),this.setPrefix(d(O,"prefix",C.loaderPrefix)),this.maxParallelDownloads=d(O,"maxParallelDownloads",C.loaderMaxParallelDownloads),this.xhr=b(d(O,"responseType",C.loaderResponseType),d(O,"async",C.loaderAsync),d(O,"user",C.loaderUser),d(O,"password",C.loaderPassword),d(O,"timeout",C.loaderTimeout),d(O,"withCredentials",C.loaderWithCredentials)),this.crossOrigin=d(O,"crossOrigin",C.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new c,this.inflight=new c,this.queue=new c,this._deleteQueue=new c,this.totalFailed=0,this.totalComplete=0,this.state=u.LOADER_IDLE,this.multiKeyIndex=0,T.sys.events.once(g.BOOT,this.boot,this),T.sys.events.on(g.START,this.pluginStart,this)},boot:function(){this.systems.events.once(g.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(g.SHUTDOWN,this.shutdown,this)},setBaseURL:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.baseURL=T,this},setPath:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.path=T,this},setPrefix:function(T){return T===void 0&&(T=""),this.prefix=T,this},setCORS:function(T){return this.crossOrigin=T,this},addFile:function(T){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++){var O=T[C];this.keyExists(O)||(this.list.set(O),this.emit(h.ADD,O.key,O.type,this,O),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(T){var C=T.hasCacheConflict();return C||this.list.iterate(function(O){if(O.type===T.type&&O.key===T.key)return!(C=!0)}),!C&&this.isLoading()&&(this.inflight.iterate(function(O){if(O.type===T.type&&O.key===T.key)return!(C=!0)}),this.queue.iterate(function(O){if(O.type===T.type&&O.key===T.key)return!(C=!0)})),C},addPack:function(T,C){C&&T.hasOwnProperty(C)&&(T={packKey:T[C]});var O=0,L=this.baseURL,P=this.path,H=this.prefix;for(var G in T)if(Object.prototype.hasOwnProperty.call(T,G)){var B=T[G],F=d(B,"baseURL",L),D=d(B,"path",P),V=d(B,"prefix",H),z=d(B,"files",null),Y=d(B,"defaultType","void");if(Array.isArray(z)){this.setBaseURL(F),this.setPath(D),this.setPrefix(V);for(var j=0;j<z.length;j++){var X=z[j],J=X.hasOwnProperty("type")?X.type:Y;this[J]&&(this[J](X),O++)}}}return this.setBaseURL(L),this.setPath(P),this.setPrefix(H),0<O},isLoading:function(){return this.state===u.LOADER_LOADING||this.state===u.LOADER_PROCESSING},isReady:function(){return this.state===u.LOADER_IDLE||this.state===u.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=u.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(g.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===u.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(T){if((T.state===u.FILE_POPULATED||T.state===u.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(T),this.list.delete(T),T.crossOrigin||(T.crossOrigin=this.crossOrigin),T.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(T,C){this.inflight&&(this.inflight.delete(T),this.updateProgress(),C?(this.totalComplete++,this.queue.set(T),this.emit(h.FILE_LOAD,T),T.onProcess()):(this.totalFailed++,this._deleteQueue.set(T),this.emit(h.FILE_LOAD_ERROR,T),this.fileProcessComplete(T)))},fileProcessComplete:function(T){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(T.state===u.FILE_ERRORED?T.multiFile&&T.multiFile.onFileFailed(T):T.state===u.FILE_COMPLETE&&(T.multiFile?T.multiFile.isReadyToProcess()&&T.multiFile.addToCache():T.addToCache()),this.queue.delete(T),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=u.LOADER_COMPLETE,this.systems.events.off(g.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(T){this._deleteQueue.set(T)},saveJSON:function(T,C){return this.save(JSON.stringify(T),C)},save:function(T,C,O){C===void 0&&(C="file.json"),O===void 0&&(O="application/json");var L=new Blob([T],{type:O}),P=URL.createObjectURL(L),H=document.createElement("a");return H.download=C,H.textContent="Download "+C,H.href=P,H.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var T=this.systems.game.config,C=this.systems.settings.loader;this.setBaseURL(d(C,"baseURL",T.loaderBaseURL)),this.setPath(d(C,"path",T.loaderPath)),this.setPrefix(d(C,"prefix",T.loaderPrefix)),this.state=u.LOADER_IDLE},shutdown:function(){this.reset(),this.state=u.LOADER_SHUTDOWN,this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=u.LOADER_DESTROYED,this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});y.register("Loader",A,"load"),x.exports=A},function(x,N,r){var m=r(16),u=r(124),c=m(!1,c={Center:r(258),Events:r(59),Orientation:r(259),ScaleManager:r(270),ScaleModes:r(260),Zoom:r(261)},u.CENTER);c=m(!1,c,u.ORIENTATION),c=m(!1,c,u.SCALE_MODE),c=m(!1,c,u.ZOOM),x.exports=c},function(x,N,r){var m=r(89),u=r(16)(!1,u={Events:r(17),SceneManager:r(271),ScenePlugin:r(942),Settings:r(273),Systems:r(126)},m);x.exports=u},function(x,N,r){var m=r(12),u=r(0),c=r(17),p=r(2),h=r(19),l=new u({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(c.BOOT,this.boot,this),d.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},start:function(d,y){return d===void 0&&(d=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",d,y),this},restart:function(d){var y=this.key;return this.manager.queueOp("stop",y),this.manager.queueOp("start",y,d),this},transition:function(d){d===void 0&&(d={});var y=p(d,"target",!1),g=this.manager.getScene(y);if(!y||!this.checkValidTransition(g))return!1;var b=p(d,"duration",1e3);this._elapsed=0,this._target=g,this._duration=b,this._willSleep=p(d,"sleep",!1),this._willRemove=p(d,"remove",!1);var A=p(d,"onUpdate",null);A&&(this._onUpdate=A,this._onUpdateScope=p(d,"onUpdateScope",this.scene));var T=p(d,"allowInput",!1);this.settings.transitionAllowInput=T;var C=g.sys.settings;return C.isTransition=!0,C.transitionFrom=this.scene,C.transitionDuration=b,C.transitionAllowInput=T,p(d,"moveAbove",!1)?this.manager.moveAbove(this.key,y):p(d,"moveBelow",!1)&&this.manager.moveBelow(this.key,y),g.sys.isSleeping()?g.sys.wake(p(d,"data")):this.manager.start(y,p(d,"data")),this.systems.events.emit(c.TRANSITION_OUT,g,b),this.systems.events.on(c.UPDATE,this.step,this),!0},checkValidTransition:function(d){return!(!d||d.sys.isActive()||d.sys.isTransitioning()||d===this.scene||this.systems.isTransitioning())},step:function(d,y){this._elapsed+=y,this.transitionProgress=m(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var d=this._target.sys,y=this._target.sys.settings;this.systems.events.off(c.UPDATE,this.step,this),d.events.emit(c.TRANSITION_COMPLETE,this.scene),y.isTransition=!1,y.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(d,y,g,b){return this.manager.add(d,y,g,b)},launch:function(d,y){return d&&d!==this.key&&this.manager.queueOp("start",d,y),this},run:function(d,y){return d&&d!==this.key&&this.manager.queueOp("run",d,y),this},pause:function(d,y){return d===void 0&&(d=this.key),this.manager.queueOp("pause",d,y),this},resume:function(d,y){return d===void 0&&(d=this.key),this.manager.queueOp("resume",d,y),this},sleep:function(d,y){return d===void 0&&(d=this.key),this.manager.queueOp("sleep",d,y),this},wake:function(d,y){return d===void 0&&(d=this.key),this.manager.queueOp("wake",d,y),this},switch:function(d){return d!==this.key&&this.manager.queueOp("switch",this.key,d),this},stop:function(d,y){return d===void 0&&(d=this.key),this.manager.queueOp("stop",d,y),this},setActive:function(d,y,g){y===void 0&&(y=this.key);var b=this.manager.getScene(y);return b&&b.sys.setActive(d,g),this},setVisible:function(d,y){y===void 0&&(y=this.key);var g=this.manager.getScene(y);return g&&g.sys.setVisible(d),this},isSleeping:function(d){return d===void 0&&(d=this.key),this.manager.isSleeping(d)},isActive:function(d){return d===void 0&&(d=this.key),this.manager.isActive(d)},isPaused:function(d){return d===void 0&&(d=this.key),this.manager.isPaused(d)},isVisible:function(d){return d===void 0&&(d=this.key),this.manager.isVisible(d)},swapPosition:function(d,y){return y===void 0&&(y=this.key),d!==y&&this.manager.swapPosition(d,y),this},moveAbove:function(d,y){return y===void 0&&(y=this.key),d!==y&&this.manager.moveAbove(d,y),this},moveBelow:function(d,y){return y===void 0&&(y=this.key),d!==y&&this.manager.moveBelow(d,y),this},remove:function(d){return d===void 0&&(d=this.key),this.manager.remove(d),this},moveUp:function(d){return d===void 0&&(d=this.key),this.manager.moveUp(d),this},moveDown:function(d){return d===void 0&&(d=this.key),this.manager.moveDown(d),this},bringToTop:function(d){return d===void 0&&(d=this.key),this.manager.bringToTop(d),this},sendToBack:function(d){return d===void 0&&(d=this.key),this.manager.sendToBack(d),this},get:function(d){return this.manager.getScene(d)},getIndex:function(d){return d===void 0&&(d=this.key),this.manager.getIndex(d)},shutdown:function(){var d=this.systems.events;d.off(c.SHUTDOWN,this.shutdown,this),d.off(c.POST_UPDATE,this.step,this),d.off(c.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",l,"scenePlugin"),x.exports=l},function(x,N,r){var m=r(16),u=r(944),c=m(!1,c={CanvasTexture:r(276),Events:r(85),FilterMode:u,Frame:r(110),Parsers:r(278),Texture:r(127),TextureManager:r(275),TextureSource:r(277)},u);x.exports=c},function(x,N){x.exports={LINEAR:0,NEAREST:1}},function(x,N,r){x.exports={Clock:r(946),TimerEvent:r(336)}},function(x,N,r){var m=r(0),u=r(19),c=r(17),p=r(336),h=new m({initialize:function(l){this.scene=l,this.systems=l.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],l.sys.events.once(c.BOOT,this.boot,this),l.sys.events.on(c.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(c.PRE_UPDATE,this.preUpdate,this),l.on(c.UPDATE,this.update,this),l.once(c.SHUTDOWN,this.shutdown,this)},addEvent:function(l){var d=new p(l);return this._pendingInsertion.push(d),d},delayedCall:function(l,d,y,g){return this.addEvent({delay:l,callback:d,args:y,callbackScope:g})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var l=this._pendingRemoval.length,d=this._pendingInsertion.length;if(l!==0||d!==0){for(var y,g=0;g<l;g++){y=this._pendingRemoval[g];var b=this._active.indexOf(y);-1<b&&this._active.splice(b,1),y.destroy()}for(g=0;g<d;g++)y=this._pendingInsertion[g],this._active.push(y);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(l,d){if(this.now=l,!this.paused){d*=this.timeScale;for(var y=0;y<this._active.length;y++){var g,b=this._active[y];b.paused||(b.elapsed+=d*b.timeScale,b.elapsed>=b.delay&&(g=b.elapsed-b.delay,b.elapsed=b.delay,!b.hasDispatched&&b.callback&&(b.hasDispatched=!0,b.callback.apply(b.callbackScope,b.args)),0<b.repeatCount?(b.repeatCount--,b.elapsed=g,b.hasDispatched=!1):this._pendingRemoval.push(b)))}}},shutdown:function(){for(var l=0;l<this._pendingInsertion.length;l++)this._pendingInsertion[l].destroy();for(l=0;l<this._active.length;l++)this._active[l].destroy();for(l=0;l<this._pendingRemoval.length;l++)this._pendingRemoval[l].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(c.PRE_UPDATE,this.preUpdate,this),d.off(c.UPDATE,this.update,this),d.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});u.register("Clock",h,"time"),x.exports=h},function(x,N,r){var m=r(58),u=r(16)(!1,u={Builders:r(948),Events:r(152),TweenManager:r(964),Tween:r(151),TweenData:r(153),Timeline:r(342)},m);x.exports=u},function(x,N,r){x.exports={GetBoolean:r(57),GetEaseFunction:r(45),GetNewValue:r(98),GetProps:r(337),GetTargets:r(148),GetTweens:r(338),GetValueOp:r(149),NumberTweenBuilder:r(339),StaggerBuilder:r(340),TimelineBuilder:r(341),TweenBuilder:r(99)}},function(x,N){x.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(x,N){x.exports="complete"},function(x,N){x.exports="loop"},function(x,N){x.exports="pause"},function(x,N){x.exports="resume"},function(x,N){x.exports="start"},function(x,N){x.exports="update"},function(x,N){x.exports="active"},function(x,N){x.exports="complete"},function(x,N){x.exports="loop"},function(x,N){x.exports="repeat"},function(x,N){x.exports="start"},function(x,N){x.exports="stop"},function(x,N){x.exports="update"},function(x,N){x.exports="yoyo"},function(x,N,r){var m=r(87),u=r(0),c=r(339),p=r(19),h=r(17),l=r(340),d=r(341),y=r(58),g=r(99),b=new u({initialize:function(A){this.scene=A,this.systems=A.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,A.sys.events.once(h.BOOT,this.boot,this),A.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var A=this.systems.events;A.on(h.PRE_UPDATE,this.preUpdate,this),A.on(h.UPDATE,this.update,this),A.once(h.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(A){return d(this,A)},timeline:function(A){var T=d(this,A);return T.paused||(this._add.push(T),this._toProcess++),T},create:function(A){return g(this,A)},add:function(A){var T=g(this,A);return this._add.push(T),this._toProcess++,T},existing:function(A){return this._add.push(A),this._toProcess++,this},addCounter:function(A){var T=c(this,A);return this._add.push(T),this._toProcess++,T},stagger:function(A,T){return l(A,T)},preUpdate:function(){if(this._toProcess!==0){for(var A,T=this._destroy,C=this._active,O=this._pending,L=0;L<T.length;L++){A=T[L];var P=C.indexOf(A);P===-1?-1<(P=O.indexOf(A))&&(A.state=y.REMOVED,O.splice(P,1)):(A.state=y.REMOVED,C.splice(P,1))}for(T.length=0,T=this._add,L=0;L<T.length;L++)(A=T[L]).state===y.PENDING_ADD&&(A.init()?(A.play(),this._active.push(A)):this._pending.push(A));T.length=0,this._toProcess=0}},update:function(A,T){var C,O=this._active;T*=this.timeScale;for(var L=0;L<O.length;L++)(C=O[L]).update(A,T)&&(this._destroy.push(C),this._toProcess++)},remove:function(A){return m(this._add,A),m(this._pending,A),m(this._active,A),m(this._destroy,A),A.state=y.REMOVED,this},makeActive:function(A){if(this._add.indexOf(A)!==-1||this._active.indexOf(A)!==-1)return this;var T=this._pending.indexOf(A);return T!==-1&&this._pending.splice(T,1),this._add.push(A),A.state=y.PENDING_ADD,this._toProcess++,this},each:function(A,T){for(var C=[null],O=1;O<arguments.length;O++)C.push(arguments[O]);for(var L in this.list)C[0]=this.list[L],A.apply(T,C)},getAllTweens:function(){for(var A=this._active,T=[],C=0;C<A.length;C++)T.push(A[C]);return T},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(A){var T,C,O=this._active,L=[];if(Array.isArray(A))for(C=0;C<O.length;C++){T=O[C];for(var P=0;P<A.length;P++)T.hasTarget(A[P])&&L.push(T)}else for(C=0;C<O.length;C++)(T=O[C]).hasTarget(A)&&L.push(T);return L},isTweening:function(A){for(var T,C=this._active,O=0;O<C.length;O++)if((T=C[O]).hasTarget(A)&&T.isPlaying())return!0;return!1},killAll:function(){for(var A=this.getAllTweens(),T=0;T<A.length;T++)A[T].stop();return this},killTweensOf:function(A){for(var T=this.getTweensOf(A),C=0;C<T.length;C++)T[C].stop();return this},pauseAll:function(){for(var A=this._active,T=0;T<A.length;T++)A[T].pause();return this},resumeAll:function(){for(var A=this._active,T=0;T<A.length;T++)A[T].resume();return this},setGlobalTimeScale:function(A){return this.timeScale=A,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var A=this.systems.events;A.off(h.PRE_UPDATE,this.preUpdate,this),A.off(h.UPDATE,this.update,this),A.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});p.register("TweenManager",b,"tweens"),x.exports=b},function(x,N,r){x.exports={SoundManagerCreator:r(279),Events:r(38),BaseSound:r(91),BaseSoundManager:r(90),WebAudioSound:r(287),WebAudioSoundManager:r(286),HTML5AudioSound:r(283),HTML5AudioSoundManager:r(280),NoAudioSound:r(285),NoAudioSoundManager:r(284)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(x,N,r){(function(m){r(400);var u=r(29),c=r(16),p={Animations:r(409),Cache:r(444),Cameras:{Scene2D:r(447)},Core:r(541),Class:r(0),Curves:r(602),Data:r(605),Display:{Masks:r(611)},DOM:r(612),Events:r(613),Game:r(615),Geom:r(377),GameObjects:{Arc:r(315),BitmapText:r(112),BuildGameObject:r(28),BuildGameObjectAnimation:r(316),Components:r(14),Container:r(140),DisplayList:r(866),GameObjectCreator:r(20),GameObjectFactory:r(6),GameObject:r(21),Graphics:r(144),Image:r(113),Line:r(319),Rectangle:r(320),Particles:{GravityWell:r(321),Particle:r(322),ParticleEmitter:r(323),ParticleEmitterManager:r(181),Zones:{DeathZone:r(324),EdgeZone:r(325),RandomZone:r(326)}},Sprite:r(71),UpdateList:r(885),Factories:{Arc:r(889),BitmapText:r(890),Container:r(891),Graphics:r(892),Image:r(893),Line:r(894),Rectangle:r(895),Sprite:r(896),Particles:r(897)},Creators:{BitmapText:r(898),Container:r(899),Graphics:r(900),Image:r(901),Sprite:r(902)}},Input:r(903),Loader:{FileTypes:{AtlasJSONFile:r(937),AudioFile:r(389),BitmapFontFile:r(938),ImageFile:r(64)},GetURL:r(114),LoaderPlugin:r(939),MergeXHRSettings:r(147),XHRLoader:r(334),XHRSettings:r(97)},Math:{Vector2:r(4)},Renderer:r(1069),Scale:r(940),Scene:r(272),Scenes:r(941),Textures:r(943),Time:r(945),Tweens:r(947)};p.Sound=r(965),p=c(!1,p,u),x.exports=p,m.Phaser=p}).call(this,r(399))},function(x,N,r){x.exports={Canvas:r(1070),Snapshot:r(1071),WebGL:r(1072)}},function(x,N,r){x.exports={CanvasRenderer:r(364),GetBlendModes:r(366),SetTransform:r(27)}},function(x,N,r){x.exports={Canvas:r(365),WebGL:r(368)}},function(x,N,r){x.exports={Utils:r(13),WebGLPipeline:r(108),WebGLRenderer:r(367),Pipelines:r(1073),BYTE:0,SHORT:1,UNSIGNED_BYTE:2,UNSIGNED_SHORT:3,FLOAT:4}},function(x,N,r){x.exports={BitmapMaskPipeline:r(369),ForwardDiffuseLightPipeline:r(370),TextureTintPipeline:r(169),TextureTintStripPipeline:r(371),ModelViewProjection:r(170)}}],Ae.c=_e,Ae.d=function(x,N,r){Ae.o(x,N)||Object.defineProperty(x,N,{enumerable:!0,get:r})},Ae.r=function(x){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},Ae.t=function(x,N){if(1&N&&(x=Ae(x)),8&N||4&N&&typeof x=="object"&&x&&x.__esModule)return x;var r=Object.create(null);if(Ae.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:x}),2&N&&typeof x!="string")for(var m in x)Ae.d(r,m,function(u){return x[u]}.bind(null,m));return r},Ae.n=function(x){var N=x&&x.__esModule?function(){return x.default}:function(){return x};return Ae.d(N,"a",N),N},Ae.o=function(x,N){return Object.prototype.hasOwnProperty.call(x,N)},Ae.p="",Ae(Ae.s=1068);function Ae(x){if(_e[x])return _e[x].exports;var N=_e[x]={i:x,l:!1,exports:{}};return Ce[x].call(N.exports,N,N.exports,Ae),N.l=!0,N.exports}var Ce,_e})},424:(He,Ae,Ce)=>{He.exports={RBTree:Ce(448),BinTree:Ce(675)}},675:(He,Ae,Ce)=>{var _e=Ce(301);function x(r){this.data=r,this.left=null,this.right=null}x.prototype.get_child=function(r){return r?this.right:this.left},x.prototype.set_child=function(r,m){r?this.right=m:this.left=m};function N(r){this._root=null,this._comparator=r,this.size=0}N.prototype=new _e,N.prototype.insert=function(r){if(this._root===null)return this._root=new x(r),this.size++,!0;for(var m=0,u=null,c=this._root;;){if(c===null)return c=new x(r),u.set_child(m,c),ret=!0,this.size++,!0;if(this._comparator(c.data,r)===0)return!1;m=this._comparator(c.data,r)<0,u=c,c=c.get_child(m)}},N.prototype.remove=function(r){if(this._root===null)return!1;var m=new x(void 0),u=m;u.right=this._root;for(var c=null,p=null,h=1;u.get_child(h)!==null;){c=u,u=u.get_child(h);var l=this._comparator(r,u.data);h=l>0,l===0&&(p=u)}return p!==null?(p.data=u.data,c.set_child(c.right===u,u.get_child(u.left===null)),this._root=m.right,this.size--,!0):!1},He.exports=N},448:(He,Ae,Ce)=>{var _e=Ce(301);function x(c){this.data=c,this.left=null,this.right=null,this.red=!0}x.prototype.get_child=function(c){return c?this.right:this.left},x.prototype.set_child=function(c,p){c?this.right=p:this.left=p};function N(c){this._root=null,this._comparator=c,this.size=0}N.prototype=new _e,N.prototype.insert=function(c){var p=!1;if(this._root===null)this._root=new x(c),p=!0,this.size++;else{var h=new x(void 0),l=0,d=0,y=null,g=h,b=null,A=this._root;for(g.right=this._root;;){if(A===null?(A=new x(c),b.set_child(l,A),p=!0,this.size++):r(A.left)&&r(A.right)&&(A.red=!0,A.left.red=!1,A.right.red=!1),r(A)&&r(b)){var T=g.right===y;A===b.get_child(d)?g.set_child(T,m(y,!d)):g.set_child(T,u(y,!d))}var C=this._comparator(A.data,c);if(C===0)break;d=l,l=C<0,y!==null&&(g=y),y=b,b=A,A=A.get_child(l)}this._root=h.right}return this._root.red=!1,p},N.prototype.remove=function(c){if(this._root===null)return!1;var p=new x(void 0),h=p;h.right=this._root;for(var l=null,d=null,y=null,g=1;h.get_child(g)!==null;){var b=g;d=l,l=h,h=h.get_child(g);var A=this._comparator(c,h.data);if(g=A>0,A===0&&(y=h),!r(h)&&!r(h.get_child(g))){if(r(h.get_child(!g))){var T=m(h,g);l.set_child(b,T),l=T}else if(!r(h.get_child(!g))){var C=l.get_child(!b);if(C!==null)if(!r(C.get_child(!b))&&!r(C.get_child(b)))l.red=!1,C.red=!0,h.red=!0;else{var O=d.right===l;r(C.get_child(b))?d.set_child(O,u(l,b)):r(C.get_child(!b))&&d.set_child(O,m(l,b));var L=d.get_child(O);L.red=!0,h.red=!0,L.left.red=!1,L.right.red=!1}}}}return y!==null&&(y.data=h.data,l.set_child(l.right===h,h.get_child(h.left===null)),this.size--),this._root=p.right,this._root!==null&&(this._root.red=!1),y!==null};function r(c){return c!==null&&c.red}function m(c,p){var h=c.get_child(!p);return c.set_child(!p,h.get_child(p)),h.set_child(p,c),c.red=!0,h.red=!1,h}function u(c,p){return c.set_child(!p,m(c.get_child(!p),!p)),m(c,p)}He.exports=N},301:He=>{function Ae(){}Ae.prototype.clear=function(){this._root=null,this.size=0},Ae.prototype.find=function(_e){for(var x=this._root;x!==null;){var N=this._comparator(_e,x.data);if(N===0)return x.data;x=x.get_child(N>0)}return null},Ae.prototype.findIter=function(_e){for(var x=this._root,N=this.iterator();x!==null;){var r=this._comparator(_e,x.data);if(r===0)return N._cursor=x,N;N._ancestors.push(x),x=x.get_child(r>0)}return null},Ae.prototype.lowerBound=function(_e){for(var x=this._root,N=this.iterator(),r=this._comparator;x!==null;){var m=r(_e,x.data);if(m===0)return N._cursor=x,N;N._ancestors.push(x),x=x.get_child(m>0)}for(var u=N._ancestors.length-1;u>=0;--u)if(x=N._ancestors[u],r(_e,x.data)<0)return N._cursor=x,N._ancestors.length=u,N;return N._ancestors.length=0,N},Ae.prototype.upperBound=function(_e){for(var x=this.lowerBound(_e),N=this._comparator;x.data()!==null&&N(x.data(),_e)===0;)x.next();return x},Ae.prototype.min=function(){var _e=this._root;if(_e===null)return null;for(;_e.left!==null;)_e=_e.left;return _e.data},Ae.prototype.max=function(){var _e=this._root;if(_e===null)return null;for(;_e.right!==null;)_e=_e.right;return _e.data},Ae.prototype.iterator=function(){return new Ce(this)},Ae.prototype.each=function(_e){for(var x=this.iterator(),N;(N=x.next())!==null;)if(_e(N)===!1)return},Ae.prototype.reach=function(_e){for(var x=this.iterator(),N;(N=x.prev())!==null;)if(_e(N)===!1)return};function Ce(_e){this._tree=_e,this._ancestors=[],this._cursor=null}Ce.prototype.data=function(){return this._cursor!==null?this._cursor.data:null},Ce.prototype.next=function(){if(this._cursor===null){var _e=this._tree._root;_e!==null&&this._minNode(_e)}else if(this._cursor.right===null){var x;do if(x=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===x)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null},Ce.prototype.prev=function(){if(this._cursor===null){var _e=this._tree._root;_e!==null&&this._maxNode(_e)}else if(this._cursor.left===null){var x;do if(x=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===x)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null},Ce.prototype._minNode=function(_e){for(;_e.left!==null;)this._ancestors.push(_e),_e=_e.left;this._cursor=_e},Ce.prototype._maxNode=function(_e){for(;_e.right!==null;)this._ancestors.push(_e),_e=_e.right;this._cursor=_e},He.exports=Ae},98:function(He,Ae){var Ce=typeof self!="undefined"?self:this,_e=function(){function N(){this.fetch=!1,this.DOMException=Ce.DOMException}return N.prototype=Ce,new N}();(function(N){var r=function(m){var u={searchParams:"URLSearchParams"in N,iterable:"Symbol"in N&&"iterator"in Symbol,blob:"FileReader"in N&&"Blob"in N&&function(){try{return new Blob,!0}catch(j){return!1}}(),formData:"FormData"in N,arrayBuffer:"ArrayBuffer"in N};function c(j){return j&&DataView.prototype.isPrototypeOf(j)}if(u.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(j){return j&&p.indexOf(Object.prototype.toString.call(j))>-1};function l(j){if(typeof j!="string"&&(j=String(j)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(j))throw new TypeError("Invalid character in header field name");return j.toLowerCase()}function d(j){return typeof j!="string"&&(j=String(j)),j}function y(j){var X={next:function(){var J=j.shift();return{done:J===void 0,value:J}}};return u.iterable&&(X[Symbol.iterator]=function(){return X}),X}function g(j){this.map={},j instanceof g?j.forEach(function(X,J){this.append(J,X)},this):Array.isArray(j)?j.forEach(function(X){this.append(X[0],X[1])},this):j&&Object.getOwnPropertyNames(j).forEach(function(X){this.append(X,j[X])},this)}g.prototype.append=function(j,X){j=l(j),X=d(X);var J=this.map[j];this.map[j]=J?J+", "+X:X},g.prototype.delete=function(j){delete this.map[l(j)]},g.prototype.get=function(j){return j=l(j),this.has(j)?this.map[j]:null},g.prototype.has=function(j){return this.map.hasOwnProperty(l(j))},g.prototype.set=function(j,X){this.map[l(j)]=d(X)},g.prototype.forEach=function(j,X){for(var J in this.map)this.map.hasOwnProperty(J)&&j.call(X,this.map[J],J,this)},g.prototype.keys=function(){var j=[];return this.forEach(function(X,J){j.push(J)}),y(j)},g.prototype.values=function(){var j=[];return this.forEach(function(X){j.push(X)}),y(j)},g.prototype.entries=function(){var j=[];return this.forEach(function(X,J){j.push([J,X])}),y(j)},u.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function b(j){if(j.bodyUsed)return Promise.reject(new TypeError("Already read"));j.bodyUsed=!0}function A(j){return new Promise(function(X,J){j.onload=function(){X(j.result)},j.onerror=function(){J(j.error)}})}function T(j){var X=new FileReader,J=A(X);return X.readAsArrayBuffer(j),J}function C(j){var X=new FileReader,J=A(X);return X.readAsText(j),J}function O(j){for(var X=new Uint8Array(j),J=new Array(X.length),Q=0;Q<X.length;Q++)J[Q]=String.fromCharCode(X[Q]);return J.join("")}function L(j){if(j.slice)return j.slice(0);var X=new Uint8Array(j.byteLength);return X.set(new Uint8Array(j)),X.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(j){this._bodyInit=j,j?typeof j=="string"?this._bodyText=j:u.blob&&Blob.prototype.isPrototypeOf(j)?this._bodyBlob=j:u.formData&&FormData.prototype.isPrototypeOf(j)?this._bodyFormData=j:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(j)?this._bodyText=j.toString():u.arrayBuffer&&u.blob&&c(j)?(this._bodyArrayBuffer=L(j.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(j)||h(j))?this._bodyArrayBuffer=L(j):this._bodyText=j=Object.prototype.toString.call(j):this._bodyText="",this.headers.get("content-type")||(typeof j=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(j)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var j=b(this);if(j)return j;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(T)}),this.text=function(){var j=b(this);if(j)return j;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(O(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var H=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function G(j){var X=j.toUpperCase();return H.indexOf(X)>-1?X:j}function B(j,X){X=X||{};var J=X.body;if(j instanceof B){if(j.bodyUsed)throw new TypeError("Already read");this.url=j.url,this.credentials=j.credentials,X.headers||(this.headers=new g(j.headers)),this.method=j.method,this.mode=j.mode,this.signal=j.signal,!J&&j._bodyInit!=null&&(J=j._bodyInit,j.bodyUsed=!0)}else this.url=String(j);if(this.credentials=X.credentials||this.credentials||"same-origin",(X.headers||!this.headers)&&(this.headers=new g(X.headers)),this.method=G(X.method||this.method||"GET"),this.mode=X.mode||this.mode||null,this.signal=X.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&J)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(J)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function F(j){var X=new FormData;return j.trim().split("&").forEach(function(J){if(J){var Q=J.split("="),se=Q.shift().replace(/\+/g," "),te=Q.join("=").replace(/\+/g," ");X.append(decodeURIComponent(se),decodeURIComponent(te))}}),X}function D(j){var X=new g,J=j.replace(/\r?\n[\t ]+/g," ");return J.split(/\r?\n/).forEach(function(Q){var se=Q.split(":"),te=se.shift().trim();if(te){var ie=se.join(":").trim();X.append(te,ie)}}),X}P.call(B.prototype);function V(j,X){X||(X={}),this.type="default",this.status=X.status===void 0?200:X.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in X?X.statusText:"OK",this.headers=new g(X.headers),this.url=X.url||"",this._initBody(j)}P.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},V.error=function(){var j=new V(null,{status:0,statusText:""});return j.type="error",j};var z=[301,302,303,307,308];V.redirect=function(j,X){if(z.indexOf(X)===-1)throw new RangeError("Invalid status code");return new V(null,{status:X,headers:{location:j}})},m.DOMException=N.DOMException;try{new m.DOMException}catch(j){m.DOMException=function(X,J){this.message=X,this.name=J;var Q=Error(X);this.stack=Q.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function Y(j,X){return new Promise(function(J,Q){var se=new B(j,X);if(se.signal&&se.signal.aborted)return Q(new m.DOMException("Aborted","AbortError"));var te=new XMLHttpRequest;function ie(){te.abort()}te.onload=function(){var re={status:te.status,statusText:te.statusText,headers:D(te.getAllResponseHeaders()||"")};re.url="responseURL"in te?te.responseURL:re.headers.get("X-Request-URL");var he="response"in te?te.response:te.responseText;J(new V(he,re))},te.onerror=function(){Q(new TypeError("Network request failed"))},te.ontimeout=function(){Q(new TypeError("Network request failed"))},te.onabort=function(){Q(new m.DOMException("Aborted","AbortError"))},te.open(se.method,se.url,!0),se.credentials==="include"?te.withCredentials=!0:se.credentials==="omit"&&(te.withCredentials=!1),"responseType"in te&&u.blob&&(te.responseType="blob"),se.headers.forEach(function(re,he){te.setRequestHeader(he,re)}),se.signal&&(se.signal.addEventListener("abort",ie),te.onreadystatechange=function(){te.readyState===4&&se.signal.removeEventListener("abort",ie)}),te.send(typeof se._bodyInit=="undefined"?null:se._bodyInit)})}return Y.polyfill=!0,N.fetch||(N.fetch=Y,N.Headers=g,N.Request=B,N.Response=V),m.Headers=g,m.Request=B,m.Response=V,m.fetch=Y,Object.defineProperty(m,"__esModule",{value:!0}),m}({})})(_e),_e.fetch.ponyfill=!0,delete _e.fetch.polyfill;var x=_e;Ae=x.fetch,Ae.default=x.fetch,Ae.fetch=x.fetch,Ae.Headers=x.Headers,Ae.Request=x.Request,Ae.Response=x.Response,He.exports=Ae},452:function(He,Ae,Ce){(function(_e,x,N){He.exports=Ae=x(Ce(249),Ce(269),Ce(214),Ce(888),Ce(109))})(this,function(_e){return function(){var x=_e,N=x.lib,r=N.BlockCipher,m=x.algo,u=[],c=[],p=[],h=[],l=[],d=[],y=[],g=[],b=[],A=[];(function(){for(var O=[],L=0;L<256;L++)L<128?O[L]=L<<1:O[L]=L<<1^283;for(var P=0,H=0,L=0;L<256;L++){var G=H^H<<1^H<<2^H<<3^H<<4;G=G>>>8^G&255^99,u[P]=G,c[G]=P;var B=O[P],F=O[B],D=O[F],V=O[G]*257^G*16843008;p[P]=V<<24|V>>>8,h[P]=V<<16|V>>>16,l[P]=V<<8|V>>>24,d[P]=V;var V=D*16843009^F*65537^B*257^P*16843008;y[G]=V<<24|V>>>8,g[G]=V<<16|V>>>16,b[G]=V<<8|V>>>24,A[G]=V,P?(P=B^O[O[O[D^B]]],H^=O[O[H]]):P=H=1}})();var T=[0,1,2,4,8,16,32,64,128,27,54],C=m.AES=r.extend({_doReset:function(){var O;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var L=this._keyPriorReset=this._key,P=L.words,H=L.sigBytes/4,G=this._nRounds=H+6,B=(G+1)*4,F=this._keySchedule=[],D=0;D<B;D++)D<H?F[D]=P[D]:(O=F[D-1],D%H?H>6&&D%H==4&&(O=u[O>>>24]<<24|u[O>>>16&255]<<16|u[O>>>8&255]<<8|u[O&255]):(O=O<<8|O>>>24,O=u[O>>>24]<<24|u[O>>>16&255]<<16|u[O>>>8&255]<<8|u[O&255],O^=T[D/H|0]<<24),F[D]=F[D-H]^O);for(var V=this._invKeySchedule=[],z=0;z<B;z++){var D=B-z;if(z%4)var O=F[D];else var O=F[D-4];z<4||D<=4?V[z]=O:V[z]=y[u[O>>>24]]^g[u[O>>>16&255]]^b[u[O>>>8&255]]^A[u[O&255]]}}},encryptBlock:function(O,L){this._doCryptBlock(O,L,this._keySchedule,p,h,l,d,u)},decryptBlock:function(O,L){var P=O[L+1];O[L+1]=O[L+3],O[L+3]=P,this._doCryptBlock(O,L,this._invKeySchedule,y,g,b,A,c);var P=O[L+1];O[L+1]=O[L+3],O[L+3]=P},_doCryptBlock:function(O,L,P,H,G,B,F,D){for(var V=this._nRounds,z=O[L]^P[0],Y=O[L+1]^P[1],j=O[L+2]^P[2],X=O[L+3]^P[3],J=4,Q=1;Q<V;Q++){var se=H[z>>>24]^G[Y>>>16&255]^B[j>>>8&255]^F[X&255]^P[J++],te=H[Y>>>24]^G[j>>>16&255]^B[X>>>8&255]^F[z&255]^P[J++],ie=H[j>>>24]^G[X>>>16&255]^B[z>>>8&255]^F[Y&255]^P[J++],re=H[X>>>24]^G[z>>>16&255]^B[Y>>>8&255]^F[j&255]^P[J++];z=se,Y=te,j=ie,X=re}var se=(D[z>>>24]<<24|D[Y>>>16&255]<<16|D[j>>>8&255]<<8|D[X&255])^P[J++],te=(D[Y>>>24]<<24|D[j>>>16&255]<<16|D[X>>>8&255]<<8|D[z&255])^P[J++],ie=(D[j>>>24]<<24|D[X>>>16&255]<<16|D[z>>>8&255]<<8|D[Y&255])^P[J++],re=(D[X>>>24]<<24|D[z>>>16&255]<<16|D[Y>>>8&255]<<8|D[j&255])^P[J++];O[L]=se,O[L+1]=te,O[L+2]=ie,O[L+3]=re},keySize:256/32});x.AES=r._createHelper(C)}(),_e.AES})},109:function(He,Ae,Ce){(function(_e,x,N){He.exports=Ae=x(Ce(249),Ce(888))})(this,function(_e){_e.lib.Cipher||function(x){var N=_e,r=N.lib,m=r.Base,u=r.WordArray,c=r.BufferedBlockAlgorithm,p=N.enc,h=p.Utf8,l=p.Base64,d=N.algo,y=d.EvpKDF,g=r.Cipher=c.extend({cfg:m.extend(),createEncryptor:function(Y,j){return this.create(this._ENC_XFORM_MODE,Y,j)},createDecryptor:function(Y,j){return this.create(this._DEC_XFORM_MODE,Y,j)},init:function(Y,j,X){this.cfg=this.cfg.extend(X),this._xformMode=Y,this._key=j,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(Y){return this._append(Y),this._process()},finalize:function(Y){Y&&this._append(Y);var j=this._doFinalize();return j},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Y(j){return typeof j=="string"?z:F}return function(j){return{encrypt:function(X,J,Q){return Y(J).encrypt(j,X,J,Q)},decrypt:function(X,J,Q){return Y(J).decrypt(j,X,J,Q)}}}}()}),b=r.StreamCipher=g.extend({_doFinalize:function(){var Y=this._process(!0);return Y},blockSize:1}),A=N.mode={},T=r.BlockCipherMode=m.extend({createEncryptor:function(Y,j){return this.Encryptor.create(Y,j)},createDecryptor:function(Y,j){return this.Decryptor.create(Y,j)},init:function(Y,j){this._cipher=Y,this._iv=j}}),C=A.CBC=function(){var Y=T.extend();Y.Encryptor=Y.extend({processBlock:function(X,J){var Q=this._cipher,se=Q.blockSize;j.call(this,X,J,se),Q.encryptBlock(X,J),this._prevBlock=X.slice(J,J+se)}}),Y.Decryptor=Y.extend({processBlock:function(X,J){var Q=this._cipher,se=Q.blockSize,te=X.slice(J,J+se);Q.decryptBlock(X,J),j.call(this,X,J,se),this._prevBlock=te}});function j(X,J,Q){var se,te=this._iv;te?(se=te,this._iv=x):se=this._prevBlock;for(var ie=0;ie<Q;ie++)X[J+ie]^=se[ie]}return Y}(),O=N.pad={},L=O.Pkcs7={pad:function(Y,j){for(var X=j*4,J=X-Y.sigBytes%X,Q=J<<24|J<<16|J<<8|J,se=[],te=0;te<J;te+=4)se.push(Q);var ie=u.create(se,J);Y.concat(ie)},unpad:function(Y){var j=Y.words[Y.sigBytes-1>>>2]&255;Y.sigBytes-=j}},P=r.BlockCipher=g.extend({cfg:g.cfg.extend({mode:C,padding:L}),reset:function(){var Y;g.reset.call(this);var j=this.cfg,X=j.iv,J=j.mode;this._xformMode==this._ENC_XFORM_MODE?Y=J.createEncryptor:(Y=J.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Y?this._mode.init(this,X&&X.words):(this._mode=Y.call(J,this,X&&X.words),this._mode.__creator=Y)},_doProcessBlock:function(Y,j){this._mode.processBlock(Y,j)},_doFinalize:function(){var Y,j=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(j.pad(this._data,this.blockSize),Y=this._process(!0)):(Y=this._process(!0),j.unpad(Y)),Y},blockSize:128/32}),H=r.CipherParams=m.extend({init:function(Y){this.mixIn(Y)},toString:function(Y){return(Y||this.formatter).stringify(this)}}),G=N.format={},B=G.OpenSSL={stringify:function(Y){var j,X=Y.ciphertext,J=Y.salt;return J?j=u.create([1398893684,1701076831]).concat(J).concat(X):j=X,j.toString(l)},parse:function(Y){var j,X=l.parse(Y),J=X.words;return J[0]==1398893684&&J[1]==1701076831&&(j=u.create(J.slice(2,4)),J.splice(0,4),X.sigBytes-=16),H.create({ciphertext:X,salt:j})}},F=r.SerializableCipher=m.extend({cfg:m.extend({format:B}),encrypt:function(Y,j,X,J){J=this.cfg.extend(J);var Q=Y.createEncryptor(X,J),se=Q.finalize(j),te=Q.cfg;return H.create({ciphertext:se,key:X,iv:te.iv,algorithm:Y,mode:te.mode,padding:te.padding,blockSize:Y.blockSize,formatter:J.format})},decrypt:function(Y,j,X,J){J=this.cfg.extend(J),j=this._parse(j,J.format);var Q=Y.createDecryptor(X,J).finalize(j.ciphertext);return Q},_parse:function(Y,j){return typeof Y=="string"?j.parse(Y,this):Y}}),D=N.kdf={},V=D.OpenSSL={execute:function(Y,j,X,J){J||(J=u.random(64/8));var Q=y.create({keySize:j+X}).compute(Y,J),se=u.create(Q.words.slice(j),X*4);return Q.sigBytes=j*4,H.create({key:Q,iv:se,salt:J})}},z=r.PasswordBasedCipher=F.extend({cfg:F.cfg.extend({kdf:V}),encrypt:function(Y,j,X,J){J=this.cfg.extend(J);var Q=J.kdf.execute(X,Y.keySize,Y.ivSize);J.iv=Q.iv;var se=F.encrypt.call(this,Y,j,Q.key,J);return se.mixIn(Q),se},decrypt:function(Y,j,X,J){J=this.cfg.extend(J),j=this._parse(j,J.format);var Q=J.kdf.execute(X,Y.keySize,Y.ivSize,j.salt);J.iv=Q.iv;var se=F.decrypt.call(this,Y,j,Q.key,J);return se}})}()})},249:function(He,Ae,Ce){(function(_e,x){He.exports=Ae=x()})(this,function(){var _e=_e||function(x,N){var r;if(typeof window!="undefined"&&window.crypto&&(r=window.crypto),typeof self!="undefined"&&self.crypto&&(r=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window!="undefined"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof Ce.g!="undefined"&&Ce.g.crypto&&(r=Ce.g.crypto),!r)try{r=Ce(480)}catch(O){}var m=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch(O){}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch(O){}}throw new Error("Native crypto module could not be used to get secure random number.")},u=Object.create||function(){function O(){}return function(L){var P;return O.prototype=L,P=new O,O.prototype=null,P}}(),c={},p=c.lib={},h=p.Base=function(){return{extend:function(O){var L=u(this);return O&&L.mixIn(O),(!L.hasOwnProperty("init")||this.init===L.init)&&(L.init=function(){L.$super.init.apply(this,arguments)}),L.init.prototype=L,L.$super=this,L},create:function(){var O=this.extend();return O.init.apply(O,arguments),O},init:function(){},mixIn:function(O){for(var L in O)O.hasOwnProperty(L)&&(this[L]=O[L]);O.hasOwnProperty("toString")&&(this.toString=O.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=p.WordArray=h.extend({init:function(O,L){O=this.words=O||[],L!=N?this.sigBytes=L:this.sigBytes=O.length*4},toString:function(O){return(O||y).stringify(this)},concat:function(O){var L=this.words,P=O.words,H=this.sigBytes,G=O.sigBytes;if(this.clamp(),H%4)for(var B=0;B<G;B++){var F=P[B>>>2]>>>24-B%4*8&255;L[H+B>>>2]|=F<<24-(H+B)%4*8}else for(var D=0;D<G;D+=4)L[H+D>>>2]=P[D>>>2];return this.sigBytes+=G,this},clamp:function(){var O=this.words,L=this.sigBytes;O[L>>>2]&=4294967295<<32-L%4*8,O.length=x.ceil(L/4)},clone:function(){var O=h.clone.call(this);return O.words=this.words.slice(0),O},random:function(O){for(var L=[],P=0;P<O;P+=4)L.push(m());return new l.init(L,O)}}),d=c.enc={},y=d.Hex={stringify:function(O){for(var L=O.words,P=O.sigBytes,H=[],G=0;G<P;G++){var B=L[G>>>2]>>>24-G%4*8&255;H.push((B>>>4).toString(16)),H.push((B&15).toString(16))}return H.join("")},parse:function(O){for(var L=O.length,P=[],H=0;H<L;H+=2)P[H>>>3]|=parseInt(O.substr(H,2),16)<<24-H%8*4;return new l.init(P,L/2)}},g=d.Latin1={stringify:function(O){for(var L=O.words,P=O.sigBytes,H=[],G=0;G<P;G++){var B=L[G>>>2]>>>24-G%4*8&255;H.push(String.fromCharCode(B))}return H.join("")},parse:function(O){for(var L=O.length,P=[],H=0;H<L;H++)P[H>>>2]|=(O.charCodeAt(H)&255)<<24-H%4*8;return new l.init(P,L)}},b=d.Utf8={stringify:function(O){try{return decodeURIComponent(escape(g.stringify(O)))}catch(L){throw new Error("Malformed UTF-8 data")}},parse:function(O){return g.parse(unescape(encodeURIComponent(O)))}},A=p.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(O){typeof O=="string"&&(O=b.parse(O)),this._data.concat(O),this._nDataBytes+=O.sigBytes},_process:function(O){var L,P=this._data,H=P.words,G=P.sigBytes,B=this.blockSize,F=B*4,D=G/F;O?D=x.ceil(D):D=x.max((D|0)-this._minBufferSize,0);var V=D*B,z=x.min(V*4,G);if(V){for(var Y=0;Y<V;Y+=B)this._doProcessBlock(H,Y);L=H.splice(0,V),P.sigBytes-=z}return new l.init(L,z)},clone:function(){var O=h.clone.call(this);return O._data=this._data.clone(),O},_minBufferSize:0}),T=p.Hasher=A.extend({cfg:h.extend(),init:function(O){this.cfg=this.cfg.extend(O),this.reset()},reset:function(){A.reset.call(this),this._doReset()},update:function(O){return this._append(O),this._process(),this},finalize:function(O){O&&this._append(O);var L=this._doFinalize();return L},blockSize:512/32,_createHelper:function(O){return function(L,P){return new O.init(P).finalize(L)}},_createHmacHelper:function(O){return function(L,P){return new C.HMAC.init(O,P).finalize(L)}}}),C=c.algo={};return c}(Math);return _e})},269:function(He,Ae,Ce){(function(_e,x){He.exports=Ae=x(Ce(249))})(this,function(_e){return function(){var x=_e,N=x.lib,r=N.WordArray,m=x.enc,u=m.Base64={stringify:function(p){var h=p.words,l=p.sigBytes,d=this._map;p.clamp();for(var y=[],g=0;g<l;g+=3)for(var b=h[g>>>2]>>>24-g%4*8&255,A=h[g+1>>>2]>>>24-(g+1)%4*8&255,T=h[g+2>>>2]>>>24-(g+2)%4*8&255,C=b<<16|A<<8|T,O=0;O<4&&g+O*.75<l;O++)y.push(d.charAt(C>>>6*(3-O)&63));var L=d.charAt(64);if(L)for(;y.length%4;)y.push(L);return y.join("")},parse:function(p){var h=p.length,l=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var y=0;y<l.length;y++)d[l.charCodeAt(y)]=y}var g=l.charAt(64);if(g){var b=p.indexOf(g);b!==-1&&(h=b)}return c(p,h,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(p,h,l){for(var d=[],y=0,g=0;g<h;g++)if(g%4){var b=l[p.charCodeAt(g-1)]<<g%4*2,A=l[p.charCodeAt(g)]>>>6-g%4*2,T=b|A;d[y>>>2]|=T<<24-y%4*8,y++}return r.create(d,y)}}(),_e.enc.Base64})},743:function(He,Ae,Ce){(function(_e,x){He.exports=Ae=x(Ce(249))})(this,function(_e){return _e.enc.Utf8})},888:function(He,Ae,Ce){(function(_e,x,N){He.exports=Ae=x(Ce(249),Ce(783),Ce(824))})(this,function(_e){return function(){var x=_e,N=x.lib,r=N.Base,m=N.WordArray,u=x.algo,c=u.MD5,p=u.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:c,iterations:1}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,l){for(var d,y=this.cfg,g=y.hasher.create(),b=m.create(),A=b.words,T=y.keySize,C=y.iterations;A.length<T;){d&&g.update(d),d=g.update(h).finalize(l),g.reset();for(var O=1;O<C;O++)d=g.finalize(d),g.reset();b.concat(d)}return b.sigBytes=T*4,b}});x.EvpKDF=function(h,l,d){return p.create(d).compute(h,l)}}(),_e.EvpKDF})},824:function(He,Ae,Ce){(function(_e,x){He.exports=Ae=x(Ce(249))})(this,function(_e){(function(){var x=_e,N=x.lib,r=N.Base,m=x.enc,u=m.Utf8,c=x.algo,p=c.HMAC=r.extend({init:function(h,l){h=this._hasher=new h.init,typeof l=="string"&&(l=u.parse(l));var d=h.blockSize,y=d*4;l.sigBytes>y&&(l=h.finalize(l)),l.clamp();for(var g=this._oKey=l.clone(),b=this._iKey=l.clone(),A=g.words,T=b.words,C=0;C<d;C++)A[C]^=1549556828,T[C]^=909522486;g.sigBytes=b.sigBytes=y,this.reset()},reset:function(){var h=this._hasher;h.reset(),h.update(this._iKey)},update:function(h){return this._hasher.update(h),this},finalize:function(h){var l=this._hasher,d=l.finalize(h);l.reset();var y=l.finalize(this._oKey.clone().concat(d));return y}})})()})},214:function(He,Ae,Ce){(function(_e,x){He.exports=Ae=x(Ce(249))})(this,function(_e){return function(x){var N=_e,r=N.lib,m=r.WordArray,u=r.Hasher,c=N.algo,p=[];(function(){for(var b=0;b<64;b++)p[b]=x.abs(x.sin(b+1))*4294967296|0})();var h=c.MD5=u.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(b,A){for(var T=0;T<16;T++){var C=A+T,O=b[C];b[C]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}var L=this._hash.words,P=b[A+0],H=b[A+1],G=b[A+2],B=b[A+3],F=b[A+4],D=b[A+5],V=b[A+6],z=b[A+7],Y=b[A+8],j=b[A+9],X=b[A+10],J=b[A+11],Q=b[A+12],se=b[A+13],te=b[A+14],ie=b[A+15],re=L[0],he=L[1],de=L[2],ue=L[3];re=l(re,he,de,ue,P,7,p[0]),ue=l(ue,re,he,de,H,12,p[1]),de=l(de,ue,re,he,G,17,p[2]),he=l(he,de,ue,re,B,22,p[3]),re=l(re,he,de,ue,F,7,p[4]),ue=l(ue,re,he,de,D,12,p[5]),de=l(de,ue,re,he,V,17,p[6]),he=l(he,de,ue,re,z,22,p[7]),re=l(re,he,de,ue,Y,7,p[8]),ue=l(ue,re,he,de,j,12,p[9]),de=l(de,ue,re,he,X,17,p[10]),he=l(he,de,ue,re,J,22,p[11]),re=l(re,he,de,ue,Q,7,p[12]),ue=l(ue,re,he,de,se,12,p[13]),de=l(de,ue,re,he,te,17,p[14]),he=l(he,de,ue,re,ie,22,p[15]),re=d(re,he,de,ue,H,5,p[16]),ue=d(ue,re,he,de,V,9,p[17]),de=d(de,ue,re,he,J,14,p[18]),he=d(he,de,ue,re,P,20,p[19]),re=d(re,he,de,ue,D,5,p[20]),ue=d(ue,re,he,de,X,9,p[21]),de=d(de,ue,re,he,ie,14,p[22]),he=d(he,de,ue,re,F,20,p[23]),re=d(re,he,de,ue,j,5,p[24]),ue=d(ue,re,he,de,te,9,p[25]),de=d(de,ue,re,he,B,14,p[26]),he=d(he,de,ue,re,Y,20,p[27]),re=d(re,he,de,ue,se,5,p[28]),ue=d(ue,re,he,de,G,9,p[29]),de=d(de,ue,re,he,z,14,p[30]),he=d(he,de,ue,re,Q,20,p[31]),re=y(re,he,de,ue,D,4,p[32]),ue=y(ue,re,he,de,Y,11,p[33]),de=y(de,ue,re,he,J,16,p[34]),he=y(he,de,ue,re,te,23,p[35]),re=y(re,he,de,ue,H,4,p[36]),ue=y(ue,re,he,de,F,11,p[37]),de=y(de,ue,re,he,z,16,p[38]),he=y(he,de,ue,re,X,23,p[39]),re=y(re,he,de,ue,se,4,p[40]),ue=y(ue,re,he,de,P,11,p[41]),de=y(de,ue,re,he,B,16,p[42]),he=y(he,de,ue,re,V,23,p[43]),re=y(re,he,de,ue,j,4,p[44]),ue=y(ue,re,he,de,Q,11,p[45]),de=y(de,ue,re,he,ie,16,p[46]),he=y(he,de,ue,re,G,23,p[47]),re=g(re,he,de,ue,P,6,p[48]),ue=g(ue,re,he,de,z,10,p[49]),de=g(de,ue,re,he,te,15,p[50]),he=g(he,de,ue,re,D,21,p[51]),re=g(re,he,de,ue,Q,6,p[52]),ue=g(ue,re,he,de,B,10,p[53]),de=g(de,ue,re,he,X,15,p[54]),he=g(he,de,ue,re,H,21,p[55]),re=g(re,he,de,ue,Y,6,p[56]),ue=g(ue,re,he,de,ie,10,p[57]),de=g(de,ue,re,he,V,15,p[58]),he=g(he,de,ue,re,se,21,p[59]),re=g(re,he,de,ue,F,6,p[60]),ue=g(ue,re,he,de,J,10,p[61]),de=g(de,ue,re,he,G,15,p[62]),he=g(he,de,ue,re,j,21,p[63]),L[0]=L[0]+re|0,L[1]=L[1]+he|0,L[2]=L[2]+de|0,L[3]=L[3]+ue|0},_doFinalize:function(){var b=this._data,A=b.words,T=this._nDataBytes*8,C=b.sigBytes*8;A[C>>>5]|=128<<24-C%32;var O=x.floor(T/4294967296),L=T;A[(C+64>>>9<<4)+15]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,A[(C+64>>>9<<4)+14]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,b.sigBytes=(A.length+1)*4,this._process();for(var P=this._hash,H=P.words,G=0;G<4;G++){var B=H[G];H[G]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}return P},clone:function(){var b=u.clone.call(this);return b._hash=this._hash.clone(),b}});function l(b,A,T,C,O,L,P){var H=b+(A&T|~A&C)+O+P;return(H<<L|H>>>32-L)+A}function d(b,A,T,C,O,L,P){var H=b+(A&C|T&~C)+O+P;return(H<<L|H>>>32-L)+A}function y(b,A,T,C,O,L,P){var H=b+(A^T^C)+O+P;return(H<<L|H>>>32-L)+A}function g(b,A,T,C,O,L,P){var H=b+(T^(A|~C))+O+P;return(H<<L|H>>>32-L)+A}N.MD5=u._createHelper(h),N.HmacMD5=u._createHmacHelper(h)}(Math),_e.MD5})},783:function(He,Ae,Ce){(function(_e,x){He.exports=Ae=x(Ce(249))})(this,function(_e){return function(){var x=_e,N=x.lib,r=N.WordArray,m=N.Hasher,u=x.algo,c=[],p=u.SHA1=m.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,l){for(var d=this._hash.words,y=d[0],g=d[1],b=d[2],A=d[3],T=d[4],C=0;C<80;C++){if(C<16)c[C]=h[l+C]|0;else{var O=c[C-3]^c[C-8]^c[C-14]^c[C-16];c[C]=O<<1|O>>>31}var L=(y<<5|y>>>27)+T+c[C];C<20?L+=(g&b|~g&A)+1518500249:C<40?L+=(g^b^A)+1859775393:C<60?L+=(g&b|g&A|b&A)-1894007588:L+=(g^b^A)-899497514,T=A,A=b,b=g<<30|g>>>2,g=y,y=L}d[0]=d[0]+y|0,d[1]=d[1]+g|0,d[2]=d[2]+b|0,d[3]=d[3]+A|0,d[4]=d[4]+T|0},_doFinalize:function(){var h=this._data,l=h.words,d=this._nDataBytes*8,y=h.sigBytes*8;return l[y>>>5]|=128<<24-y%32,l[(y+64>>>9<<4)+14]=Math.floor(d/4294967296),l[(y+64>>>9<<4)+15]=d,h.sigBytes=l.length*4,this._process(),this._hash},clone:function(){var h=m.clone.call(this);return h._hash=this._hash.clone(),h}});x.SHA1=m._createHelper(p),x.HmacSHA1=m._createHmacHelper(p)}(),_e.SHA1})},421:(He,Ae,Ce)=>{"use strict";Ce.d(Ae,{Z:()=>u});var _e=Ce(81),x=Ce.n(_e),N=Ce(645),r=Ce.n(N),m=r()(x());m.push([He.id,".ui-overlay{background-color:rgba(0,0,0,.7);width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0;font-family:sans-serif;color:#fff;font-weight:600;letter-spacing:1px;box-sizing:border-box}.ui-overlay-title{font-size:24px;text-align:center;display:flex;justify-content:center}.ui-overlay-title span{max-width:200px}.ui-overlay *{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ui-overlay *:focus{outline:none !important}.opacity-0{opacity:0}.ui-layout-wrapper{position:relative;height:100%}.ui-layout-inner-wrapper{position:absolute;left:50%;top:50%;width:100%;max-width:500px;padding:18px;box-sizing:border-box;height:auto;transform:translate(-50%, -50%)}@media(max-height: 550px){.ui-layout-inner-wrapper{transform:translate(-50%, -50%) scale(0.5)}}.ui-layout-title-wrapper{position:relative;padding:24px;box-sizing:border-box}.ui-circle-button{width:92px;height:92px;border-radius:100%;background-color:rgba(0,2,16,.65);border:1px solid rgba(255,255,255,.5);display:flex;flex-shrink:0;justify-content:center;align-items:center;cursor:pointer;user-select:none;box-sizing:border-box;position:relative}.ui-circle-button.active{background:#90b869;background:linear-gradient(0deg, rgb(144, 184, 105) 0%, rgb(165, 203, 129) 100%);border-color:#90b869}.ui-circle-button-overlay{position:absolute;width:100%;height:100%;background:#fff;background:linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0.05%, rgba(0, 0, 0, 0.05) 100%);border-radius:100%}.ui-circle-button-icon{width:56px;height:56px;position:relative;z-index:2}.ui-circle-button.scale-anim{animation:scale-down-and-up .2s ease-in-out}.ui-small-circle-button{width:48px;height:48px;border-radius:100%;background-color:rgba(33,54,90,.4);display:flex;justify-content:center;align-items:center;border:1px solid rgba(255,255,255,.5);cursor:pointer}.ui-small-circle-button img{width:32px;height:32px}.ui-language-button{padding:10px 16px !important}.ui-language-button-wrapper{display:flex;align-items:center}.ui-language-button-labels{display:flex;flex-direction:column;align-items:center}.ui-language-button-value{margin-top:8px;color:#8ea8db;font-size:16px}.ui-language-select-button{font-size:24px !important;height:68px}.ui-language-select-button.active{background-color:#5f85dd}.ui-language-select-other-button{color:#fff;display:flex;justify-content:center;align-items:center;font-size:22px;cursor:pointer;user-select:none}.ui-language-select-other-button img{width:18px;margin-left:8px}.ui-rounded-button{width:100%;border-radius:40px;background-color:rgba(0,2,16,.65);border:1px solid rgba(255,255,255,.5);display:flex;padding:16px;align-items:center;cursor:pointer;user-select:none;font-size:20px;transition:all .05s ease-in-out;position:relative;box-sizing:border-box}.ui-rounded-button.scale-anim{animation:scale-down-and-up .2s ease-in-out}.ui-rounded-button img{width:32px;flex-shrink:0}.ui-rounded-button:not(:last-child){margin-bottom:12px}.ui-rounded-button-body{display:flex;flex:1;justify-content:center}.ui-rounded-button-body.icon-margin{margin-left:-32px}.ui-circle-home-button{background-color:#5f85dd !important}.ui-layout-back-button{position:absolute;left:24px;top:24px}.ui-green-rounded-button{border-color:#65b935;background-color:#65b935;font-size:32px}.ui-rounded-button-anim-wrapper:not(:last-child){margin-bottom:12px}.ui-checkmark-option{display:flex;align-items:center;height:72px;cursor:pointer;padding:0px 32px;flex-shrink:0}.ui-checkmark-option:not(:last-child){border-bottom:2px solid rgba(255,255,255,.2)}.ui-checkmark-option.selected{background-color:rgba(255,255,255,.2);border-color:rgba(0,0,0,0)}.ui-checkmark-option-icon{width:32px;height:32px;display:flex;justify-content:center;align-items:center;border:2px solid rgba(255,255,255,.4);box-sizing:border-box;border-radius:100%;position:relative;padding:4px}.ui-checkmark-option-icon img{width:100%;height:100%;margin-bottom:-1px}.ui-checkmark-option-body{margin-left:18px;font-weight:500;font-size:24px}.ui-in-game-modal{max-width:450px;width:calc(100% - 32px);box-sizing:border-box;transition:top .5s ease-in-out;position:absolute;top:-50%;left:50%;transform:translate(-50%, -50%)}.ui-in-game-modal.visible{top:50%}@media(max-height: 500px){.ui-in-game-modal{transform:translate(-50%, -50%) scale(0.75)}}.ui-in-game-modal-inner{width:100%;padding:24px 16px;background:#d5e5ff;background:linear-gradient(180deg, rgb(213, 229, 255) 0%, rgb(175, 205, 255) 100%);border-radius:16px;border:4px solid #5287e1;box-sizing:border-box;position:relative}.ui-in-game-modal-inner-head{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.ui-in-game-modal-inner-head-title{font-size:28px;font-weight:600;color:#294471;margin-bottom:6px}.ui-in-game-modal-inner-head-subtitle{font-size:18px;font-weight:500;color:#8193b4}.ui-in-game-modal-inner-close{position:absolute;top:16px;right:16px;cursor:pointer;opacity:.5}.ui-in-game-modal-inner-close img{filter:invert(1)}.ui-in-game-modal-inner-bottom{display:flex;align-items:center;justify-content:space-between;margin-top:40px}.ui-in-game-modal-inner-bottom-help{display:flex;align-items:center}.ui-in-game-modal-inner-bottom-help span{color:rgba(0,0,0,.7);font-size:12px;margin-left:8px}.ui-in-game-modal-inner-bottom-help img{width:18px;filter:invert(1);opacity:.7}.ui-in-game-modal-inner-bottom-version{color:rgba(0,0,0,.4);font-size:12px}.ui-in-game-modal .ui-toggle-buttons{margin-top:24px}.ui-in-game-modal .ui-toggle-buttons .ui-circle-button{box-shadow:0px 5px 5px 0px rgba(0,0,0,.32);background-color:rgba(0,2,16,.25);border:none;width:18vw;height:18vw;max-width:92px;max-height:92px}.ui-in-game-modal .ui-toggle-buttons .ui-circle-button:not(:last-child){margin-right:4vw}.ui-in-game-modal .ui-toggle-buttons .ui-circle-button img{max-width:55px;max-height:55px;width:12vw;height:12vw}.ui-language-select-buttons-wrapper{padding:0 24px}.ui-language-select-bottom-wrapper{position:absolute;bottom:-80px;left:0;width:100%;box-sizing:border-box;display:flex;justify-content:center}.ui-option-buttons{margin-top:64px;max-width:490px;margin-left:auto;margin-right:auto}.ui-toggle-buttons{display:flex;justify-content:center;padding:0 30px}.ui-toggle-buttons .ui-circle-button:not(:last-child){margin-right:64px}.ui-language-list-title{font-size:24px;text-align:center;display:flex;justify-content:center;box-sizing:border-box}.ui-language-list-close-button{position:absolute;top:24px;right:24px}.ui-language-list-options{position:relative;overflow-y:auto;max-width:500px;margin:auto;display:flex;flex-direction:column;width:100%;flex:1;padding-bottom:64px}.ui-language-select-wrapper{position:relative;height:100vh;display:flex;flex-direction:column}.ui-play-button-wrapper{position:absolute;max-width:500px;width:100%;left:50%;transform:translateX(-50%);padding:18px 42px;box-sizing:border-box;bottom:0px}@media(max-height: 550px){.ui-play-button-wrapper{transform:translateX(-50%) scale(0.5)}}.ui-safari-wrapper{height:calc(100% - 92px)}@media(max-height: 550px){.ui-safari-wrapper{height:calc(100% - 32px)}}@keyframes scale-down-and-up{0%{transform:scale(1)}50%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes bottom-up-fade-in{0%{opacity:0;transform:translateY(30px)}100%{opacity:1;transform:initial}}@keyframes bottom-down-fade-out{0%{opacity:1;transform:initial}100%{opacity:0;transform:translateY(30px)}}.ui-bottom-up-fade-in{animation:bottom-up-fade-in .3s ease-in-out}.ui-bottom-down-fade-out{animation:bottom-down-fade-out .3s ease-in-out}",""]);const u=m},645:He=>{"use strict";He.exports=function(Ae){var Ce=[];return Ce.toString=function(){return this.map(function(x){var N="",r=typeof x[5]!="undefined";return x[4]&&(N+="@supports (".concat(x[4],") {")),x[2]&&(N+="@media ".concat(x[2]," {")),r&&(N+="@layer".concat(x[5].length>0?" ".concat(x[5]):""," {")),N+=Ae(x),r&&(N+="}"),x[2]&&(N+="}"),x[4]&&(N+="}"),N}).join("")},Ce.i=function(x,N,r,m,u){typeof x=="string"&&(x=[[null,x,void 0]]);var c={};if(r)for(var p=0;p<this.length;p++){var h=this[p][0];h!=null&&(c[h]=!0)}for(var l=0;l<x.length;l++){var d=[].concat(x[l]);r&&c[d[0]]||(typeof u!="undefined"&&(typeof d[5]=="undefined"||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=u),N&&(d[2]&&(d[1]="@media ".concat(d[2]," {").concat(d[1],"}")),d[2]=N),m&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=m):d[4]="".concat(m)),Ce.push(d))}},Ce}},81:He=>{"use strict";He.exports=function(Ae){return Ae[1]}},180:function(He,Ae,Ce){var _e,x,N;(function(r,m){"use strict";x=[Ce(829)],_e=m,N=typeof _e=="function"?_e.apply(Ae,x):_e,N!==void 0&&(He.exports=N)})(this,function(m){"use strict";var u=/(^|@)\S+:\d+/,c=/^\s*at .*(\S+:\d+|\(native\))/m,p=/^(eval@)?(\[native code])?$/;return{parse:function(l){if(typeof l.stacktrace!="undefined"||typeof l["opera#sourceloc"]!="undefined")return this.parseOpera(l);if(l.stack&&l.stack.match(c))return this.parseV8OrIE(l);if(l.stack)return this.parseFFOrSafari(l);throw new Error("Cannot parse given Error object")},extractLocation:function(l){if(l.indexOf(":")===-1)return[l];var d=/(.+?)(?::(\d+))?(?::(\d+))?$/,y=d.exec(l.replace(/[()]/g,""));return[y[1],y[2]||void 0,y[3]||void 0]},parseV8OrIE:function(l){var d=l.stack.split(`
`).filter(function(y){return!!y.match(c)},this);return d.map(function(y){y.indexOf("(eval ")>-1&&(y=y.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var g=y.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),b=g.match(/ (\(.+\)$)/);g=b?g.replace(b[0],""):g;var A=this.extractLocation(b?b[1]:g),T=b&&g||void 0,C=["eval","<anonymous>"].indexOf(A[0])>-1?void 0:A[0];return new m({functionName:T,fileName:C,lineNumber:A[1],columnNumber:A[2],source:y})},this)},parseFFOrSafari:function(l){var d=l.stack.split(`
`).filter(function(y){return!y.match(p)},this);return d.map(function(y){if(y.indexOf(" > eval")>-1&&(y=y.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),y.indexOf("@")===-1&&y.indexOf(":")===-1)return new m({functionName:y});var g=/((.*".+"[^@]*)?[^@]*)(?:@)/,b=y.match(g),A=b&&b[1]?b[1]:void 0,T=this.extractLocation(y.replace(g,""));return new m({functionName:A,fileName:T[0],lineNumber:T[1],columnNumber:T[2],source:y})},this)},parseOpera:function(l){return!l.stacktrace||l.message.indexOf(`
`)>-1&&l.message.split(`
`).length>l.stacktrace.split(`
`).length?this.parseOpera9(l):l.stack?this.parseOpera11(l):this.parseOpera10(l)},parseOpera9:function(l){for(var d=/Line (\d+).*script (?:in )?(\S+)/i,y=l.message.split(`
`),g=[],b=2,A=y.length;b<A;b+=2){var T=d.exec(y[b]);T&&g.push(new m({fileName:T[2],lineNumber:T[1],source:y[b]}))}return g},parseOpera10:function(l){for(var d=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,y=l.stacktrace.split(`
`),g=[],b=0,A=y.length;b<A;b+=2){var T=d.exec(y[b]);T&&g.push(new m({functionName:T[3]||void 0,fileName:T[2],lineNumber:T[1],source:y[b]}))}return g},parseOpera11:function(l){var d=l.stack.split(`
`).filter(function(y){return!!y.match(u)&&!y.match(/^Error created at/)},this);return d.map(function(y){var g=y.split("@"),b=this.extractLocation(g.pop()),A=g.shift()||"",T=A.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,C;A.match(/\(([^)]*)\)/)&&(C=A.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var O=C===void 0||C==="[arguments not available]"?void 0:C.split(",");return new m({functionName:T,args:O,fileName:b[0],lineNumber:b[1],columnNumber:b[2],source:y})},this)}}})},159:function(He,Ae,Ce){He=Ce.nmd(He);var _e;(function(){var x,N="Expected a function",r="__lodash_hash_undefined__",m="__lodash_placeholder__",u=16,c=32,p=64,h=128,l=256,d=1/0,y=9007199254740991,g=NaN,b=4294967295,A=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",p],["rearg",l]],T="[object Arguments]",C="[object Array]",O="[object Boolean]",L="[object Date]",P="[object Error]",H="[object Function]",G="[object GeneratorFunction]",B="[object Map]",F="[object Number]",D="[object Object]",V="[object Promise]",z="[object RegExp]",Y="[object Set]",j="[object String]",X="[object Symbol]",J="[object WeakMap]",Q="[object ArrayBuffer]",se="[object DataView]",te="[object Float32Array]",ie="[object Float64Array]",re="[object Int8Array]",he="[object Int16Array]",de="[object Int32Array]",ue="[object Uint8Array]",Te="[object Uint8ClampedArray]",ye="[object Uint16Array]",Ne="[object Uint32Array]",Ve=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,Ue=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oe=/&(?:amp|lt|gt|quot|#39);/g,Ye=/[&<>"']/g,st=RegExp(Oe.source),lt=RegExp(Ye.source),Ke=/<%-([\s\S]+?)%>/g,et=/<%([\s\S]+?)%>/g,Xe=/<%=([\s\S]+?)%>/g,nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/,Wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,zt=RegExp(Ht.source),wt=/^\s+|\s+$/g,Mt=/^\s+/,Et=/\s+$/,Jt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jt=/\{\n\/\* \[wrapped with (.+)\] \*/,yi=/,? & /,Qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yi=/\\(\\)?/g,Fi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Tn=/\w*$/,Ci=/^[-+]0x[0-9a-f]+$/i,zn=/^0b[01]+$/i,Rt=/^\[object .+?Constructor\]$/,kh=/^0o[0-7]+$/i,Iu=/^(?:0|[1-9]\d*)$/,Lr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mr=/($^)/,Dh=/['\n\r\u2028\u2029\\]/g,Ms="\\ud800-\\udfff",lo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Fh="\\u2700-\\u27bf",Ln="a-z\\xdf-\\xf6\\xf8-\\xff",uo="A-Z\\xc0-\\xd6\\xd8-\\xde",Fe="\\ufe0e\\ufe0f",ir="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yd="['\u2019]",ia="["+Ms+"]",nr="["+ir+"]",ls="["+lo+"]",co="\\d+",fo="["+Fh+"]",Rr="["+Ln+"]",po="[^"+Ms+ir+co+Fh+Ln+uo+"]",na="\\ud83c[\\udffb-\\udfff]",Hh="[^"+Ms+"]",sa="(?:\\ud83c[\\udde6-\\uddff]){2}",go="[\\ud800-\\udbff][\\udc00-\\udfff]",Rs="["+uo+"]",Nr="\\u200d",mo="(?:"+Rr+"|"+po+")",Gh="(?:"+Rs+"|"+po+")",ra="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",yo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Uh="(?:"+ls+"|"+na+")?",vo="["+Fe+"]?",xo=vo+Uh+("(?:"+Nr+"(?:"+[Hh,sa,go].join("|")+")"+vo+Uh+")*"),Ou="(?:"+[fo,sa,go].join("|")+")"+xo,Wh="(?:"+[Hh+ls+"?",ls,sa,go,ia].join("|")+")",Lu=RegExp(yd,"g"),vd=RegExp(ls,"g"),zh=RegExp(na+"(?="+na+")|"+Wh+xo,"g"),Mu=RegExp([Rs+"?"+Rr+"+"+ra+"(?="+[nr,Rs,"$"].join("|")+")",Gh+"+"+yo+"(?="+[nr,Rs+mo,"$"].join("|")+")",Rs+"?"+mo+"+"+ra,Rs+"+"+yo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",co,Ou].join("|"),"g"),Ru=RegExp("["+Nr+Ms+lo+Fe+"]"),Vh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Nu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bu=-1,ri={};ri[te]=ri[ie]=ri[re]=ri[he]=ri[de]=ri[ue]=ri[Te]=ri[ye]=ri[Ne]=!0,ri[T]=ri[C]=ri[Q]=ri[O]=ri[se]=ri[L]=ri[P]=ri[H]=ri[B]=ri[F]=ri[D]=ri[z]=ri[Y]=ri[j]=ri[J]=!1;var Zt={};Zt[T]=Zt[C]=Zt[Q]=Zt[se]=Zt[O]=Zt[L]=Zt[te]=Zt[ie]=Zt[re]=Zt[he]=Zt[de]=Zt[B]=Zt[F]=Zt[D]=Zt[z]=Zt[Y]=Zt[j]=Zt[X]=Zt[ue]=Zt[Te]=Zt[ye]=Zt[Ne]=!0,Zt[P]=Zt[H]=Zt[J]=!1;var oi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ao=parseFloat,Yh=parseInt,Ns=typeof Ce.g=="object"&&Ce.g&&Ce.g.Object===Object&&Ce.g,jh=typeof self=="object"&&self&&self.Object===Object&&self,Ti=Ns||jh||Function("return this")(),bo=Ae&&!Ae.nodeType&&Ae,sr=bo&&!0&&He&&!He.nodeType&&He,To=sr&&sr.exports===bo,aa=To&&Ns.process,en=function(){try{var Ee=sr&&sr.require&&sr.require("util").types;return Ee||aa&&aa.binding&&aa.binding("util")}catch(Be){}}(),us=en&&en.isArrayBuffer,rr=en&&en.isDate,Kh=en&&en.isMap,oa=en&&en.isRegExp,Xh=en&&en.isSet,Pu=en&&en.isTypedArray;function dn(Ee,Be,Pe){switch(Pe.length){case 0:return Ee.call(Be);case 1:return Ee.call(Be,Pe[0]);case 2:return Ee.call(Be,Pe[0],Pe[1]);case 3:return Ee.call(Be,Pe[0],Pe[1],Pe[2])}return Ee.apply(Be,Pe)}function ha(Ee,Be,Pe,Qe){for(var It=-1,qt=Ee==null?0:Ee.length;++It<qt;){var Ei=Ee[It];Be(Qe,Ei,Pe(Ei),Ee)}return Qe}function Sn(Ee,Be){for(var Pe=-1,Qe=Ee==null?0:Ee.length;++Pe<Qe&&Be(Ee[Pe],Pe,Ee)!==!1;);return Ee}function xd(Ee,Be){for(var Pe=Ee==null?0:Ee.length;Pe--&&Be(Ee[Pe],Pe,Ee)!==!1;);return Ee}function ku(Ee,Be){for(var Pe=-1,Qe=Ee==null?0:Ee.length;++Pe<Qe;)if(!Be(Ee[Pe],Pe,Ee))return!1;return!0}function Bs(Ee,Be){for(var Pe=-1,Qe=Ee==null?0:Ee.length,It=0,qt=[];++Pe<Qe;){var Ei=Ee[Pe];Be(Ei,Pe,Ee)&&(qt[It++]=Ei)}return qt}function So(Ee,Be){return!!(Ee!=null&&Ee.length)&&-1<fn(Ee,Be,0)}function _o(Ee,Be,Pe){for(var Qe=-1,It=Ee==null?0:Ee.length;++Qe<It;)if(Pe(Be,Ee[Qe]))return!0;return!1}function hi(Ee,Be){for(var Pe=-1,Qe=Ee==null?0:Ee.length,It=Array(Qe);++Pe<Qe;)It[Pe]=Be(Ee[Pe],Pe,Ee);return It}function cs(Ee,Be){for(var Pe=-1,Qe=Be.length,It=Ee.length;++Pe<Qe;)Ee[It+Pe]=Be[Pe];return Ee}function ar(Ee,Be,Pe,Qe){var It=-1,qt=Ee==null?0:Ee.length;for(Qe&&qt&&(Pe=Ee[++It]);++It<qt;)Pe=Be(Pe,Ee[It],It,Ee);return Pe}function wo(Ee,Be,Pe,Qe){var It=Ee==null?0:Ee.length;for(Qe&&It&&(Pe=Ee[--It]);It--;)Pe=Be(Pe,Ee[It],It,Ee);return Pe}function Br(Ee,Be){for(var Pe=-1,Qe=Ee==null?0:Ee.length;++Pe<Qe;)if(Be(Ee[Pe],Pe,Ee))return!0;return!1}var qh=Co("length");function Mn(Ee,Be,Pe){var Qe;return Pe(Ee,function(It,qt,Ei){if(Be(It,qt,Ei))return Qe=qt,!1}),Qe}function la(Ee,Be,Pe,Qe){for(var It=Ee.length,qt=Pe+(Qe?1:-1);Qe?qt--:++qt<It;)if(Be(Ee[qt],qt,Ee))return qt;return-1}function fn(Ee,Be,Pe){return Be==Be?function(Qe,It,qt){for(var Ei=qt-1,Rn=Qe.length;++Ei<Rn;)if(Qe[Ei]===It)return Ei;return-1}(Ee,Be,Pe):la(Ee,Jh,Pe)}function Du(Ee,Be,Pe,Qe){for(var It=Pe-1,qt=Ee.length;++It<qt;)if(Qe(Ee[It],Be))return It;return-1}function Jh(Ee){return Ee!=Ee}function Zh(Ee,Be){var Pe=Ee==null?0:Ee.length;return Pe?or(Ee,Be)/Pe:g}function Co(Ee){return function(Be){return Be==null?x:Be[Ee]}}function ua(Ee){return function(Be){return Ee==null?x:Ee[Be]}}function Pr(Ee,Be,Pe,Qe,It){return It(Ee,function(qt,Ei,Rn){Pe=Qe?(Qe=!1,qt):Be(Pe,qt,Ei,Rn)}),Pe}function or(Ee,Be){for(var Pe,Qe=-1,It=Ee.length;++Qe<It;){var qt=Be(Ee[Qe]);qt!==x&&(Pe=Pe===x?qt:Pe+qt)}return Pe}function $h(Ee,Be){for(var Pe=-1,Qe=Array(Ee);++Pe<Ee;)Qe[Pe]=Be(Pe);return Qe}function $t(Ee){return function(Be){return Ee(Be)}}function Ps(Ee,Be){return hi(Be,function(Pe){return Ee[Pe]})}function pn(Ee,Be){return Ee.has(Be)}function ca(Ee,Be){for(var Pe=-1,Qe=Ee.length;++Pe<Qe&&-1<fn(Be,Ee[Pe],0););return Pe}function kr(Ee,Be){for(var Pe=Ee.length;Pe--&&-1<fn(Be,Ee[Pe],0););return Pe}var Qh=ua({\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"}),Hi=ua({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Si(Ee){return"\\"+oi[Ee]}function ks(Ee){return Ru.test(Ee)}function da(Ee){var Be=-1,Pe=Array(Ee.size);return Ee.forEach(function(Qe,It){Pe[++Be]=[It,Qe]}),Pe}function Eo(Ee,Be){return function(Pe){return Ee(Be(Pe))}}function ji(Ee,Be){for(var Pe=-1,Qe=Ee.length,It=0,qt=[];++Pe<Qe;){var Ei=Ee[Pe];Ei!==Be&&Ei!==m||(Ee[Pe]=m,qt[It++]=Pe)}return qt}function fa(Ee){var Be=-1,Pe=Array(Ee.size);return Ee.forEach(function(Qe){Pe[++Be]=Qe}),Pe}function Ds(Ee){return ks(Ee)?function(Be){for(var Pe=zh.lastIndex=0;zh.test(Be);)++Pe;return Pe}(Ee):qh(Ee)}function tn(Ee){return ks(Ee)?function(Be){return Be.match(zh)||[]}(Ee):function(Be){return Be.split("")}(Ee)}var Fu=ua({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ds=function Ee(Be){var Pe,Qe=(Be=Be==null?Ti:ds.defaults(Ti.Object(),Be,ds.pick(Ti,Nu))).Array,It=Be.Date,qt=Be.Error,Ei=Be.Function,Rn=Be.Math,ci=Be.Object,el=Be.RegExp,tl=Be.String,Ii=Be.TypeError,nn=Qe.prototype,hr=Ei.prototype,Vn=ci.prototype,Nn=Be["__core-js_shared__"],Bn=hr.toString,Dt=Vn.hasOwnProperty,Hu=0,pa=(Pe=/[^.]+$/.exec(Nn&&Nn.keys&&Nn.keys.IE_PROTO||""))?"Symbol(src)_1."+Pe:"",ga=Vn.toString,Gu=Bn.call(ci),Io=Ti._,Uu=el("^"+Bn.call(Dt).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ma=To?Be.Buffer:x,fs=Be.Symbol,Dr=Be.Uint8Array,Fs=ma?ma.allocUnsafe:x,ps=Eo(ci.getPrototypeOf,ci),il=ci.create,Oo=Vn.propertyIsEnumerable,Hs=nn.splice,gn=fs?fs.isConcatSpreadable:x,lr=fs?fs.iterator:x,vi=fs?fs.toStringTag:x,ur=function(){try{var w=Ks(ci,"defineProperty");return w({},"",{}),w}catch(M){}}(),Lo=Be.clearTimeout!==Ti.clearTimeout&&Be.clearTimeout,Mo=It&&It.now!==Ti.Date.now&&It.now,Wu=Be.setTimeout!==Ti.setTimeout&&Be.setTimeout,_n=Rn.ceil,Yn=Rn.floor,mn=ci.getOwnPropertySymbols,cr=ma?ma.isBuffer:x,jn=Be.isFinite,nl=nn.join,sn=Eo(ci.keys,ci),_i=Rn.max,fi=Rn.min,sl=It.now,Gs=Be.parseInt,Ro=Rn.random,dr=nn.reverse,ya=Ks(Be,"DataView"),fr=Ks(Be,"Map"),No=Ks(Be,"Promise"),Kn=Ks(Be,"Set"),Ki=Ks(Be,"WeakMap"),Xn=Ks(ci,"create"),Fr=Ki&&new Ki,pr={},rl=ws(ya),al=ws(fr),va=ws(No),gs=ws(Kn),ol=ws(Ki),qn=fs?fs.prototype:x,gr=qn?qn.valueOf:x,Xi=qn?qn.toString:x;function ae(w){if(xi(w)&&!Nt(w)&&!(w instanceof Kt)){if(w instanceof an)return w;if(Dt.call(w,"__wrapped__"))return jl(w)}return new an(w)}var rn=function(w){if(!gi(w))return{};if(il)return il(w);ms.prototype=w;var M=new ms;return ms.prototype=x,M};function ms(){}function Jn(){}function an(w,M){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!M,this.__index__=0,this.__values__=x}function Kt(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=b,this.__views__=[]}function Pn(w){var M=-1,U=w==null?0:w.length;for(this.clear();++M<U;){var Z=w[M];this.set(Z[0],Z[1])}}function Zn(w){var M=-1,U=w==null?0:w.length;for(this.clear();++M<U;){var Z=w[M];this.set(Z[0],Z[1])}}function $n(w){var M=-1,U=w==null?0:w.length;for(this.clear();++M<U;){var Z=w[M];this.set(Z[0],Z[1])}}function ys(w){var M=-1,U=w==null?0:w.length;for(this.__data__=new $n;++M<U;)this.add(w[M])}function yn(w){var M=this.__data__=new Zn(w);this.size=M.size}function Bo(w,M){var U=Nt(w),Z=!U&&wr(w),ee=!U&&!Z&&Xs(w),le=!U&&!Z&&!ee&&Cr(w),pe=U||Z||ee||le,ge=pe?$h(w.length,tl):[],be=ge.length;for(var Le in w)!M&&!Dt.call(w,Le)||pe&&(Le=="length"||ee&&(Le=="offset"||Le=="parent")||le&&(Le=="buffer"||Le=="byteLength"||Le=="byteOffset")||ts(Le,be))||ge.push(Le);return ge}function Po(w){var M=w.length;return M?w[zo(0,M-1)]:x}function zu(w,M){return Na(Zi(w),Us(M,0,w.length))}function Ad(w){return Na(Zi(w))}function xa(w,M,U){(U===x||Cn(w[M],U))&&(U!==x||M in w)||Qn(w,M,U)}function Aa(w,M,U){var Z=w[M];Dt.call(w,M)&&Cn(Z,U)&&(U!==x||M in w)||Qn(w,M,U)}function mr(w,M){for(var U=w.length;U--;)if(Cn(w[U][0],M))return U;return-1}function Vu(w,M,U,Z){return vs(w,function(ee,le,pe){M(Z,ee,U(ee),pe)}),Z}function hl(w,M){return w&&wn(M,Ri(M),w)}function Qn(w,M,U){M=="__proto__"&&ur?ur(w,M,{configurable:!0,enumerable:!0,value:U,writable:!0}):w[M]=U}function ko(w,M){for(var U=-1,Z=M.length,ee=Qe(Z),le=w==null;++U<Z;)ee[U]=le?x:Va(w,M[U]);return ee}function Us(w,M,U){return w==w&&(U!==x&&(w=w<=U?w:U),M!==x&&(w=M<=w?w:M)),w}function qi(w,M,U,Z,ee,le){var pe,ge=1&M,be=2&M,Le=4&M;if(U&&(pe=ee?U(w,Z,ee,le):U(w)),pe!==x)return pe;if(!gi(w))return w;var Me=Nt(w);if(Me){if(pe=function(Re){var je=Re.length,pt=new Re.constructor(je);return je&&typeof Re[0]=="string"&&Dt.call(Re,"index")&&(pt.index=Re.index,pt.input=Re.input),pt}(w),!ge)return Zi(w,pe)}else{var Ge=Bi(w),rt=Ge==H||Ge==G;if(Xs(w))return Ml(w,ge);if(Ge==D||Ge==T||rt&&!ee){if(pe=be||rt?{}:rh(w),!ge)return be?function(Re,je){return wn(Re,Ul(Re),je)}(w,function(Re,je){return Re&&wn(je,un(je),Re)}(pe,w)):function(Re,je){return wn(Re,sh(Re),je)}(w,hl(pe,w))}else{if(!Zt[Ge])return ee?w:{};pe=function(Re,je,pt){var tt=Re.constructor;switch(je){case Q:return Ji(Re);case O:case L:return new tt(+Re);case se:return function(bt,Ft){var si=Ft?Ji(bt.buffer):bt.buffer;return new bt.constructor(si,bt.byteOffset,bt.byteLength)}(Re,pt);case te:case ie:case re:case he:case de:case ue:case Te:case ye:case Ne:return Rl(Re,pt);case B:return new tt;case F:case j:return new tt(Re);case z:return function(bt){var Ft=new bt.constructor(bt.source,Tn.exec(bt));return Ft.lastIndex=bt.lastIndex,Ft}(Re);case Y:return new tt;case X:return function(bt){return gr?ci(gr.call(bt)):{}}(Re)}}(w,Ge,ge)}}var ct=(le=le||new yn).get(w);if(ct)return ct;le.set(w,pe),wc(w)?w.forEach(function(Re){pe.add(qi(Re,M,U,Re,w,le))}):Ua(w)&&w.forEach(function(Re,je){pe.set(je,qi(Re,M,U,je,w,le))});var vt=Me?x:(Le?be?La:th:be?un:Ri)(w);return Sn(vt||w,function(Re,je){vt&&(Re=w[je=Re]),Aa(pe,je,qi(Re,M,U,je,w,le))}),pe}function ll(w,M,U){var Z=U.length;if(w==null)return!Z;for(w=ci(w);Z--;){var ee=U[Z],le=M[ee],pe=w[ee];if(pe===x&&!(ee in w)||!le(pe))return!1}return!0}function ul(w,M,U){if(typeof w!="function")throw new Ii(N);return Vr(function(){w.apply(x,U)},M)}function Hr(w,M,U,Z){var ee=-1,le=So,pe=!0,ge=w.length,be=[],Le=M.length;if(!ge)return be;U&&(M=hi(M,$t(U))),Z?(le=_o,pe=!1):200<=M.length&&(le=pn,pe=!1,M=new ys(M));e:for(;++ee<ge;){var Me=w[ee],Ge=U==null?Me:U(Me);if(Me=Z||Me!==0?Me:0,pe&&Ge==Ge){for(var rt=Le;rt--;)if(M[rt]===Ge)continue e;be.push(Me)}else le(M,Ge,Z)||be.push(Me)}return be}ae.templateSettings={escape:Ke,evaluate:et,interpolate:Xe,variable:"",imports:{_:ae}},(ae.prototype=Jn.prototype).constructor=ae,(an.prototype=rn(Jn.prototype)).constructor=an,(Kt.prototype=rn(Jn.prototype)).constructor=Kt,Pn.prototype.clear=function(){this.__data__=Xn?Xn(null):{},this.size=0},Pn.prototype.delete=function(w){var M=this.has(w)&&delete this.__data__[w];return this.size-=M?1:0,M},Pn.prototype.get=function(w){var M=this.__data__;if(Xn){var U=M[w];return U===r?x:U}return Dt.call(M,w)?M[w]:x},Pn.prototype.has=function(w){var M=this.__data__;return Xn?M[w]!==x:Dt.call(M,w)},Pn.prototype.set=function(w,M){var U=this.__data__;return this.size+=this.has(w)?0:1,U[w]=Xn&&M===x?r:M,this},Zn.prototype.clear=function(){this.__data__=[],this.size=0},Zn.prototype.delete=function(w){var M=this.__data__,U=mr(M,w);return!(U<0)&&(U==M.length-1?M.pop():Hs.call(M,U,1),--this.size,!0)},Zn.prototype.get=function(w){var M=this.__data__,U=mr(M,w);return U<0?x:M[U][1]},Zn.prototype.has=function(w){return-1<mr(this.__data__,w)},Zn.prototype.set=function(w,M){var U=this.__data__,Z=mr(U,w);return Z<0?(++this.size,U.push([w,M])):U[Z][1]=M,this},$n.prototype.clear=function(){this.size=0,this.__data__={hash:new Pn,map:new(fr||Zn),string:new Pn}},$n.prototype.delete=function(w){var M=Ra(this,w).delete(w);return this.size-=M?1:0,M},$n.prototype.get=function(w){return Ra(this,w).get(w)},$n.prototype.has=function(w){return Ra(this,w).has(w)},$n.prototype.set=function(w,M){var U=Ra(this,w),Z=U.size;return U.set(w,M),this.size+=U.size==Z?0:1,this},ys.prototype.add=ys.prototype.push=function(w){return this.__data__.set(w,r),this},ys.prototype.has=function(w){return this.__data__.has(w)},yn.prototype.clear=function(){this.__data__=new Zn,this.size=0},yn.prototype.delete=function(w){var M=this.__data__,U=M.delete(w);return this.size=M.size,U},yn.prototype.get=function(w){return this.__data__.get(w)},yn.prototype.has=function(w){return this.__data__.has(w)},yn.prototype.set=function(w,M){var U=this.__data__;if(U instanceof Zn){var Z=U.__data__;if(!fr||Z.length<199)return Z.push([w,M]),this.size=++U.size,this;U=this.__data__=new $n(Z)}return U.set(w,M),this.size=U.size,this};var vs=pi(kn),cl=pi(Sa,!0);function Yu(w,M){var U=!0;return vs(w,function(Z,ee,le){return U=!!M(Z,ee,le)}),U}function ba(w,M,U){for(var Z=-1,ee=w.length;++Z<ee;){var le=w[Z],pe=M(le);if(pe!=null&&(ge===x?pe==pe&&!xn(pe):U(pe,ge)))var ge=pe,be=le}return be}function Ta(w,M){var U=[];return vs(w,function(Z,ee,le){M(Z,ee,le)&&U.push(Z)}),U}function Mi(w,M,U,Z,ee){var le=-1,pe=w.length;for(U=U||ic,ee=ee||[];++le<pe;){var ge=w[le];0<M&&U(ge)?1<M?Mi(ge,M-1,U,Z,ee):cs(ee,ge):Z||(ee[ee.length]=ge)}return ee}var Do=qo(),dl=qo(!0);function kn(w,M){return w&&Do(w,M,Ri)}function Sa(w,M){return w&&dl(w,M,Ri)}function _a(w,M){return Bs(M,function(U){return is(w[U])})}function xs(w,M){for(var U=0,Z=(M=bs(M,w)).length;w!=null&&U<Z;)w=w[Ui(M[U++])];return U&&U==Z?w:x}function fl(w,M,U){var Z=M(w);return Nt(w)?Z:cs(Z,U(w))}function Gi(w){return w==null?w===x?"[object Undefined]":"[object Null]":vi&&vi in ci(w)?function(M){var U=Dt.call(M,vi),Z=M[vi];try{M[vi]=x;var ee=!0}catch(pe){}var le=ga.call(M);return ee&&(U?M[vi]=Z:delete M[vi]),le}(w):function(M){return ga.call(M)}(w)}function Fo(w,M){return M<w}function ju(w,M){return w!=null&&Dt.call(w,M)}function pl(w,M){return w!=null&&M in ci(w)}function Ho(w,M,U){for(var Z=U?_o:So,ee=w[0].length,le=w.length,pe=le,ge=Qe(le),be=1/0,Le=[];pe--;){var Me=w[pe];pe&&M&&(Me=hi(Me,$t(M))),be=fi(Me.length,be),ge[pe]=!U&&(M||120<=ee&&120<=Me.length)?new ys(pe&&Me):x}Me=w[0];var Ge=-1,rt=ge[0];e:for(;++Ge<ee&&Le.length<be;){var ct=Me[Ge],vt=M?M(ct):ct;if(ct=U||ct!==0?ct:0,!(rt?pn(rt,vt):Z(Le,vt,U))){for(pe=le;--pe;){var Re=ge[pe];if(!(Re?pn(Re,vt):Z(w[pe],vt,U)))continue e}rt&&rt.push(vt),Le.push(ct)}}return Le}function Gr(w,M,U){var Z=(w=hh(w,M=bs(M,w)))==null?w:w[Ui(hn(M))];return Z==null?x:dn(Z,w,U)}function gl(w){return xi(w)&&Gi(w)==T}function yr(w,M,U,Z,ee){return w===M||(w==null||M==null||!xi(w)&&!xi(M)?w!=w&&M!=M:function(le,pe,ge,be,Le,Me){var Ge=Nt(le),rt=Nt(pe),ct=Ge?C:Bi(le),vt=rt?C:Bi(pe),Re=(ct=ct==T?D:ct)==D,je=(vt=vt==T?D:vt)==D,pt=ct==vt;if(pt&&Xs(le)){if(!Xs(pe))return!1;Re=!(Ge=!0)}if(pt&&!Re)return Me=Me||new yn,Ge||Cr(le)?Gl(le,pe,ge,be,Le,Me):function(mt,Ct,Oi,bi,zi,li,ki){switch(Oi){case se:if(mt.byteLength!=Ct.byteLength||mt.byteOffset!=Ct.byteOffset)return!1;mt=mt.buffer,Ct=Ct.buffer;case Q:return!(mt.byteLength!=Ct.byteLength||!li(new Dr(mt),new Dr(Ct)));case O:case L:case F:return Cn(+mt,+Ct);case P:return mt.name==Ct.name&&mt.message==Ct.message;case z:case j:return mt==Ct+"";case B:var Un=da;case Y:var Es=1&bi;if(Un=Un||fa,mt.size!=Ct.size&&!Es)return!1;var Ja=ki.get(mt);if(Ja)return Ja==Ct;bi|=2,ki.set(mt,Ct);var Er=Gl(Un(mt),Un(Ct),bi,zi,li,ki);return ki.delete(mt),Er;case X:if(gr)return gr.call(mt)==gr.call(Ct)}return!1}(le,pe,ct,ge,be,Le,Me);if(!(1&ge)){var tt=Re&&Dt.call(le,"__wrapped__"),bt=je&&Dt.call(pe,"__wrapped__");if(tt||bt){var Ft=tt?le.value():le,si=bt?pe.value():pe;return Me=Me||new yn,Le(Ft,si,ge,be,Me)}}return pt&&(Me=Me||new yn,function(mt,Ct,Oi,bi,zi,li){var ki=1&Oi,Un=th(mt),Es=Un.length,Ja=th(Ct).length;if(Es!=Ja&&!ki)return!1;for(var Er=Es;Er--;){var Is=Un[Er];if(!(ki?Is in Ct:Dt.call(Ct,Is)))return!1}var pu=li.get(mt),gu=li.get(Ct);if(pu&&gu)return pu==Ct&&gu==mt;var Za=!0;li.set(mt,Ct),li.set(Ct,mt);for(var Mh=ki;++Er<Es;){Is=Un[Er];var $a=mt[Is],Qa=Ct[Is];if(bi)var mu=ki?bi(Qa,$a,Is,Ct,mt,li):bi($a,Qa,Is,mt,Ct,li);if(!(mu===x?$a===Qa||zi($a,Qa,Oi,bi,li):mu)){Za=!1;break}Mh=Mh||Is=="constructor"}if(Za&&!Mh){var eo=mt.constructor,to=Ct.constructor;eo!=to&&"constructor"in mt&&"constructor"in Ct&&!(typeof eo=="function"&&eo instanceof eo&&typeof to=="function"&&to instanceof to)&&(Za=!1)}return li.delete(mt),li.delete(Ct),Za}(le,pe,ge,be,Le,Me))}(w,M,U,Z,yr,ee))}function Go(w,M,U,Z){var ee=U.length,le=ee,pe=!Z;if(w==null)return!le;for(w=ci(w);ee--;){var ge=U[ee];if(pe&&ge[2]?ge[1]!==w[ge[0]]:!(ge[0]in w))return!1}for(;++ee<le;){var be=(ge=U[ee])[0],Le=w[be],Me=ge[1];if(pe&&ge[2]){if(Le===x&&!(be in w))return!1}else{var Ge=new yn;if(Z)var rt=Z(Le,Me,be,w,M,Ge);if(!(rt===x?yr(Me,Le,3,Z,Ge):rt))return!1}}return!0}function ml(w){return!(!gi(w)||function(M){return!!pa&&pa in M}(w))&&(is(w)?Uu:Rt).test(ws(w))}function yl(w){return typeof w=="function"?w:w==null?$i:typeof w=="object"?Nt(w)?bl(w[0],w[1]):Al(w):Vc(w)}function Uo(w){if(!Ar(w))return sn(w);var M=[];for(var U in ci(w))Dt.call(w,U)&&U!="constructor"&&M.push(U);return M}function vl(w){if(!gi(w))return function(ee){var le=[];if(ee!=null)for(var pe in ci(ee))le.push(pe);return le}(w);var M=Ar(w),U=[];for(var Z in w)(Z!="constructor"||!M&&Dt.call(w,Z))&&U.push(Z);return U}function Wo(w,M){return w<M}function xl(w,M){var U=-1,Z=ln(w)?Qe(w.length):[];return vs(w,function(ee,le,pe){Z[++U]=M(ee,le,pe)}),Z}function Al(w){var M=nh(w);return M.length==1&&M[0][2]?zr(M[0][0],M[0][1]):function(U){return U===w||Go(U,w,M)}}function bl(w,M){return ah(w)&&br(M)?zr(Ui(w),M):function(U){var Z=Va(U,w);return Z===x&&Z===M?uu(U,w):yr(M,Z,3)}}function wa(w,M,U,Z,ee){w!==M&&Do(M,function(le,pe){if(ee=ee||new yn,gi(le))(function(be,Le,Me,Ge,rt,ct,vt){var Re=Tr(be,Me),je=Tr(Le,Me),pt=vt.get(je);if(pt)return xa(be,Me,pt);var tt=ct?ct(Re,je,Me+"",be,Le,vt):x,bt=tt===x;if(bt){var Ft=Nt(je),si=!Ft&&Xs(je),mt=!Ft&&!si&&Cr(je);tt=je,Ft||si||mt?tt=Nt(Re)?Re:wi(Re)?Zi(Re):si?Ml(je,!(bt=!1)):mt?Rl(je,!(bt=!1)):[]:Wa(je)||wr(je)?wr(tt=Re)?tt=Ec(Re):gi(Re)&&!is(Re)||(tt=rh(je)):bt=!1}bt&&(vt.set(je,tt),rt(tt,je,Ge,ct,vt),vt.delete(je)),xa(be,Me,tt)})(w,M,pe,U,wa,Z,ee);else{var ge=Z?Z(Tr(w,pe),le,pe+"",w,M,ee):x;ge===x&&(ge=le),xa(w,pe,ge)}},un)}function Tl(w,M){var U=w.length;if(U)return ts(M+=M<0?U:0,U)?w[M]:x}function Sl(w,M,U){M=M.length?hi(M,function(ee){return Nt(ee)?function(le){return xs(le,ee.length===1?ee[0]:ee)}:ee}):[$i];var Z=-1;return M=hi(M,$t(St())),function(ee,le){var pe=ee.length;for(ee.sort(le);pe--;)ee[pe]=ee[pe].value;return ee}(xl(w,function(ee,le,pe){return{criteria:hi(M,function(ge){return ge(ee)}),index:++Z,value:ee}}),function(ee,le){return function(pe,ge,be){for(var Le=-1,Me=pe.criteria,Ge=ge.criteria,rt=Me.length,ct=be.length;++Le<rt;){var vt=Nl(Me[Le],Ge[Le]);if(vt){if(ct<=Le)return vt;var Re=be[Le];return vt*(Re=="desc"?-1:1)}}return pe.index-ge.index}(ee,le,U)})}function _l(w,M,U){for(var Z=-1,ee=M.length,le={};++Z<ee;){var pe=M[Z],ge=xs(w,pe);U(ge,pe)&&Ur(le,bs(pe,w),ge)}return le}function Dn(w,M,U,Z){var ee=Z?Du:fn,le=-1,pe=M.length,ge=w;for(w===M&&(M=Zi(M)),U&&(ge=hi(w,$t(U)));++le<pe;)for(var be=0,Le=M[le],Me=U?U(Le):Le;-1<(be=ee(ge,Me,be,Z));)ge!==w&&Hs.call(ge,be,1),Hs.call(w,be,1);return w}function Li(w,M){for(var U=w?M.length:0,Z=U-1;U--;){var ee=M[U];if(U==Z||ee!==le){var le=ee;ts(ee)?Hs.call(w,ee,1):jo(w,ee)}}return w}function zo(w,M){return w+Yn(Ro()*(M-w+1))}function Vo(w,M){var U="";if(!w||M<1||y<M)return U;for(;M%2&&(U+=w),(M=Yn(M/2))&&(w+=w),M;);return U}function Gt(w,M){return lh(oh(w,M,$i),w+"")}function Ku(w){return Po(Jr(w))}function Xu(w,M){var U=Jr(w);return Na(U,Us(M,0,U.length))}function Ur(w,M,U,Z){if(!gi(w))return w;for(var ee=-1,le=(M=bs(M,w)).length,pe=le-1,ge=w;ge!=null&&++ee<le;){var be=Ui(M[ee]),Le=U;if(be==="__proto__"||be==="constructor"||be==="prototype")return w;if(ee!=pe){var Me=ge[be];(Le=Z?Z(Me,be,ge):x)===x&&(Le=gi(Me)?Me:ts(M[ee+1])?[]:{})}Aa(ge,be,Le),ge=ge[be]}return w}var wl=Fr?function(w,M){return Fr.set(w,M),w}:$i,qu=ur?function(w,M){return ur(w,"toString",{configurable:!0,enumerable:!1,value:os(M),writable:!0})}:$i;function Ju(w){return Na(Jr(w))}function vn(w,M,U){var Z=-1,ee=w.length;M<0&&(M=ee<-M?0:ee+M),(U=ee<U?ee:U)<0&&(U+=ee),ee=U<M?0:U-M>>>0,M>>>=0;for(var le=Qe(ee);++Z<ee;)le[Z]=w[Z+M];return le}function Zu(w,M){var U;return vs(w,function(Z,ee,le){return!(U=M(Z,ee,le))}),!!U}function Ca(w,M,U){var Z=0,ee=w==null?Z:w.length;if(typeof M=="number"&&M==M&&ee<=2147483647){for(;Z<ee;){var le=Z+ee>>>1,pe=w[le];pe!==null&&!xn(pe)&&(U?pe<=M:pe<M)?Z=1+le:ee=le}return ee}return Yo(w,M,$i,U)}function Yo(w,M,U,Z){var ee=0,le=w==null?0:w.length;if(le===0)return 0;for(var pe=(M=U(M))!=M,ge=M===null,be=xn(M),Le=M===x;ee<le;){var Me=Yn((ee+le)/2),Ge=U(w[Me]),rt=Ge!==x,ct=Ge===null,vt=Ge==Ge,Re=xn(Ge);if(pe)var je=Z||vt;else je=Le?vt&&(Z||rt):ge?vt&&rt&&(Z||!ct):be?vt&&rt&&!ct&&(Z||!Re):!ct&&!Re&&(Z?Ge<=M:Ge<M);je?ee=Me+1:le=Me}return fi(le,4294967294)}function Cl(w,M){for(var U=-1,Z=w.length,ee=0,le=[];++U<Z;){var pe=w[U],ge=M?M(pe):pe;if(!U||!Cn(ge,be)){var be=ge;le[ee++]=pe===0?0:pe}}return le}function El(w){return typeof w=="number"?w:xn(w)?g:+w}function on(w){if(typeof w=="string")return w;if(Nt(w))return hi(w,on)+"";if(xn(w))return Xi?Xi.call(w):"";var M=w+"";return M=="0"&&1/w==-d?"-0":M}function As(w,M,U){var Z=-1,ee=So,le=w.length,pe=!0,ge=[],be=ge;if(U)pe=!1,ee=_o;else if(200<=le){var Le=M?null:ec(w);if(Le)return fa(Le);pe=!1,ee=pn,be=new ys}else be=M?[]:ge;e:for(;++Z<le;){var Me=w[Z],Ge=M?M(Me):Me;if(Me=U||Me!==0?Me:0,pe&&Ge==Ge){for(var rt=be.length;rt--;)if(be[rt]===Ge)continue e;M&&be.push(Ge),ge.push(Me)}else ee(be,Ge,U)||(be!==ge&&be.push(Ge),ge.push(Me))}return ge}function jo(w,M){return(w=hh(w,M=bs(M,w)))==null||delete w[Ui(hn(M))]}function Il(w,M,U,Z){return Ur(w,M,U(xs(w,M)),Z)}function Ws(w,M,U,Z){for(var ee=w.length,le=Z?ee:-1;(Z?le--:++le<ee)&&M(w[le],le,w););return U?vn(w,Z?0:le,Z?le+1:ee):vn(w,Z?le+1:0,Z?ee:le)}function zs(w,M){var U=w;return U instanceof Kt&&(U=U.value()),ar(M,function(Z,ee){return ee.func.apply(ee.thisArg,cs([Z],ee.args))},U)}function Ol(w,M,U){var Z=w.length;if(Z<2)return Z?As(w[0]):[];for(var ee=-1,le=Qe(Z);++ee<Z;)for(var pe=w[ee],ge=-1;++ge<Z;)ge!=ee&&(le[ee]=Hr(le[ee]||pe,w[ge],M,U));return As(Mi(le,1),M,U)}function $u(w,M,U){for(var Z=-1,ee=w.length,le=M.length,pe={};++Z<ee;){var ge=Z<le?M[Z]:x;U(pe,w[Z],ge)}return pe}function Ko(w){return wi(w)?w:[]}function Xo(w){return typeof w=="function"?w:$i}function bs(w,M){return Nt(w)?w:ah(w,M)?[w]:Yl(ni(w))}var Qu=Gt;function Ts(w,M,U){var Z=w.length;return U=U===x?Z:U,!M&&Z<=U?w:vn(w,M,U)}var Ll=Lo||function(w){return Ti.clearTimeout(w)};function Ml(w,M){if(M)return w.slice();var U=w.length,Z=Fs?Fs(U):new w.constructor(U);return w.copy(Z),Z}function Ji(w){var M=new w.constructor(w.byteLength);return new Dr(M).set(new Dr(w)),M}function Rl(w,M){var U=M?Ji(w.buffer):w.buffer;return new w.constructor(U,w.byteOffset,w.length)}function Nl(w,M){if(w!==M){var U=w!==x,Z=w===null,ee=w==w,le=xn(w),pe=M!==x,ge=M===null,be=M==M,Le=xn(M);if(!ge&&!Le&&!le&&M<w||le&&pe&&be&&!ge&&!Le||Z&&pe&&be||!U&&be||!ee)return 1;if(!Z&&!le&&!Le&&w<M||Le&&U&&ee&&!Z&&!le||ge&&U&&ee||!pe&&ee||!be)return-1}return 0}function Bl(w,M,U,Z){for(var ee=-1,le=w.length,pe=U.length,ge=-1,be=M.length,Le=_i(le-pe,0),Me=Qe(be+Le),Ge=!Z;++ge<be;)Me[ge]=M[ge];for(;++ee<pe;)(Ge||ee<le)&&(Me[U[ee]]=w[ee]);for(;Le--;)Me[ge++]=w[ee++];return Me}function Pl(w,M,U,Z){for(var ee=-1,le=w.length,pe=-1,ge=U.length,be=-1,Le=M.length,Me=_i(le-ge,0),Ge=Qe(Me+Le),rt=!Z;++ee<Me;)Ge[ee]=w[ee];for(var ct=ee;++be<Le;)Ge[ct+be]=M[be];for(;++pe<ge;)(rt||ee<le)&&(Ge[ct+U[pe]]=w[ee++]);return Ge}function Zi(w,M){var U=-1,Z=w.length;for(M=M||Qe(Z);++U<Z;)M[U]=w[U];return M}function wn(w,M,U,Z){var ee=!U;U=U||{};for(var le=-1,pe=M.length;++le<pe;){var ge=M[le],be=Z?Z(U[ge],w[ge],ge,U,w):x;be===x&&(be=w[ge]),ee?Qn(U,ge,be):Aa(U,ge,be)}return U}function Ea(w,M){return function(U,Z){var ee=Nt(U)?ha:Vu,le=M?M():{};return ee(U,w,St(Z,2),le)}}function vr(w){return Gt(function(M,U){var Z=-1,ee=U.length,le=1<ee?U[ee-1]:x,pe=2<ee?U[2]:x;for(le=3<w.length&&typeof le=="function"?(ee--,le):x,pe&&Pi(U[0],U[1],pe)&&(le=ee<3?x:le,ee=1),M=ci(M);++Z<ee;){var ge=U[Z];ge&&w(M,ge,Z,le)}return M})}function pi(w,M){return function(U,Z){if(U==null)return U;if(!ln(U))return w(U,Z);for(var ee=U.length,le=M?ee:-1,pe=ci(U);(M?le--:++le<ee)&&Z(pe[le],le,pe)!==!1;);return U}}function qo(w){return function(M,U,Z){for(var ee=-1,le=ci(M),pe=Z(M),ge=pe.length;ge--;){var be=pe[w?ge:++ee];if(U(le[be],be,le)===!1)break}return M}}function Ia(w){return function(M){var U=ks(M=ni(M))?tn(M):x,Z=U?U[0]:M.charAt(0),ee=U?Ts(U,1).join(""):M.slice(1);return Z[w]()+ee}}function Fn(w){return function(M){return ar(du(Pc(M).replace(Lu,"")),w,"")}}function Vs(w){return function(){var M=arguments;switch(M.length){case 0:return new w;case 1:return new w(M[0]);case 2:return new w(M[0],M[1]);case 3:return new w(M[0],M[1],M[2]);case 4:return new w(M[0],M[1],M[2],M[3]);case 5:return new w(M[0],M[1],M[2],M[3],M[4]);case 6:return new w(M[0],M[1],M[2],M[3],M[4],M[5]);case 7:return new w(M[0],M[1],M[2],M[3],M[4],M[5],M[6])}var U=rn(w.prototype),Z=w.apply(U,M);return gi(Z)?Z:U}}function kl(w){return function(M,U,Z){var ee=ci(M);if(!ln(M)){var le=St(U,3);M=Ri(M),U=function(ge){return le(ee[ge],ge,ee)}}var pe=w(M,U,Z);return-1<pe?ee[le?M[pe]:pe]:x}}function Jo(w){return es(function(M){var U=M.length,Z=U,ee=an.prototype.thru;for(w&&M.reverse();Z--;){var le=M[Z];if(typeof le!="function")throw new Ii(N);if(ee&&!pe&&Ma(le)=="wrapper")var pe=new an([],!0)}for(Z=pe?Z:U;++Z<U;){var ge=Ma(le=M[Z]),be=ge=="wrapper"?ih(le):x;pe=be&&_s(be[0])&&be[1]==424&&!be[4].length&&be[9]==1?pe[Ma(be[0])].apply(pe,be[3]):le.length==1&&_s(le)?pe[ge]():pe.thru(le)}return function(){var Le=arguments,Me=Le[0];if(pe&&Le.length==1&&Nt(Me))return pe.plant(Me).value();for(var Ge=0,rt=U?M[Ge].apply(this,Le):Me;++Ge<U;)rt=M[Ge].call(this,rt);return rt}})}function Hn(w,M,U,Z,ee,le,pe,ge,be,Le){var Me=M&h,Ge=1&M,rt=2&M,ct=24&M,vt=512&M,Re=rt?x:Vs(w);return function je(){for(var pt=arguments.length,tt=Qe(pt),bt=pt;bt--;)tt[bt]=arguments[bt];if(ct)var Ft=xr(je),si=function(bi,zi){for(var li=bi.length,ki=0;li--;)bi[li]===zi&&++ki;return ki}(tt,Ft);if(Z&&(tt=Bl(tt,Z,ee,ct)),le&&(tt=Pl(tt,le,pe,ct)),pt-=si,ct&&pt<Le){var mt=ji(tt,Ft);return Qo(w,M,Hn,je.placeholder,U,tt,mt,ge,be,Le-pt)}var Ct=Ge?U:this,Oi=rt?Ct[w]:w;return pt=tt.length,ge?tt=function(bi,zi){for(var li=bi.length,ki=fi(zi.length,li),Un=Zi(bi);ki--;){var Es=zi[ki];bi[ki]=ts(Es,li)?Un[Es]:x}return bi}(tt,ge):vt&&1<pt&&tt.reverse(),Me&&be<pt&&(tt.length=be),this&&this!==Ti&&this instanceof je&&(Oi=Re||Vs(Oi)),Oi.apply(Ct,tt)}}function Dl(w,M){return function(U,Z){return function(ee,le,pe,ge){return kn(ee,function(be,Le,Me){le(ge,pe(be),Le,Me)}),ge}(U,w,M(Z),{})}}function Wr(w,M){return function(U,Z){var ee;if(U===x&&Z===x)return M;if(U!==x&&(ee=U),Z!==x){if(ee===x)return Z;Z=typeof U=="string"||typeof Z=="string"?(U=on(U),on(Z)):(U=El(U),El(Z)),ee=w(U,Z)}return ee}}function Zo(w){return es(function(M){return M=hi(M,$t(St())),Gt(function(U){var Z=this;return w(M,function(ee){return dn(ee,Z,U)})})})}function Ys(w,M){var U=(M=M===x?" ":on(M)).length;if(U<2)return U?Vo(M,w):M;var Z=Vo(M,_n(w/Ds(M)));return ks(M)?Ts(tn(Z),0,w).join(""):Z.slice(0,w)}function $o(w){return function(M,U,Z){return Z&&typeof Z!="number"&&Pi(M,U,Z)&&(U=Z=x),M=ss(M),U===x?(U=M,M=0):U=ss(U),function(ee,le,pe,ge){for(var be=-1,Le=_i(_n((le-ee)/(pe||1)),0),Me=Qe(Le);Le--;)Me[ge?Le:++be]=ee,ee+=pe;return Me}(M,U,Z=Z===x?M<U?1:-1:ss(Z),w)}}function Oa(w){return function(M,U){return typeof M=="string"&&typeof U=="string"||(M=Wi(M),U=Wi(U)),w(M,U)}}function Qo(w,M,U,Z,ee,le,pe,ge,be,Le){var Me=8&M;M|=Me?c:p,4&(M&=~(Me?p:c))||(M&=-4);var Ge=[w,M,ee,Me?le:x,Me?pe:x,Me?x:le,Me?x:pe,ge,be,Le],rt=U.apply(x,Ge);return _s(w)&&Wl(rt,Ge),rt.placeholder=Z,zl(rt,w,M)}function eh(w){var M=Rn[w];return function(U,Z){if(U=Wi(U),(Z=Z==null?0:fi(Bt(Z),292))&&jn(U)){var ee=(ni(U)+"e").split("e");return+((ee=(ni(M(ee[0]+"e"+(+ee[1]+Z)))+"e").split("e"))[0]+"e"+(+ee[1]-Z))}return M(U)}}var ec=Kn&&1/fa(new Kn([,-0]))[1]==d?function(w){return new Kn(w)}:Ch;function Fl(w){return function(M){var U=Bi(M);return U==B?da(M):U==Y?function(Z){var ee=-1,le=Array(Z.size);return Z.forEach(function(pe){le[++ee]=[pe,pe]}),le}(M):function(Z,ee){return hi(ee,function(le){return[le,Z[le]]})}(M,w(M))}}function Gn(w,M,U,Z,ee,le,pe,ge){var be=2&M;if(!be&&typeof w!="function")throw new Ii(N);var Le=Z?Z.length:0;if(Le||(M&=-97,Z=ee=x),pe=pe===x?pe:_i(Bt(pe),0),ge=ge===x?ge:Bt(ge),Le-=ee?ee.length:0,M&p){var Me=Z,Ge=ee;Z=ee=x}var rt=be?x:ih(w),ct=[w,M,U,Z,ee,Me,Ge,le,pe,ge];if(rt&&function(Re,je){var pt=Re[1],tt=je[1],bt=pt|tt,Ft=bt<131,si=tt==h&&pt==8||tt==h&&pt==l&&Re[7].length<=je[8]||tt==384&&je[7].length<=je[8]&&pt==8;if(!(!Ft&&!si)){1&tt&&(Re[2]=je[2],bt|=1&pt?0:4);var mt=je[3];if(mt){var Ct=Re[3];Re[3]=Ct?Bl(Ct,mt,je[4]):mt,Re[4]=Ct?ji(Re[3],m):je[4]}(mt=je[5])&&(Ct=Re[5],Re[5]=Ct?Pl(Ct,mt,je[6]):mt,Re[6]=Ct?ji(Re[5],m):je[6]),(mt=je[7])&&(Re[7]=mt),tt&h&&(Re[8]=Re[8]==null?je[8]:fi(Re[8],je[8])),Re[9]==null&&(Re[9]=je[9]),Re[0]=je[0],Re[1]=bt}}(ct,rt),w=ct[0],M=ct[1],U=ct[2],Z=ct[3],ee=ct[4],!(ge=ct[9]=ct[9]===x?be?0:w.length:_i(ct[9]-Le,0))&&24&M&&(M&=-25),M&&M!=1)vt=M==8||M==u?function(Re,je,pt){var tt=Vs(Re);return function bt(){for(var Ft=arguments.length,si=Qe(Ft),mt=Ft,Ct=xr(bt);mt--;)si[mt]=arguments[mt];var Oi=Ft<3&&si[0]!==Ct&&si[Ft-1]!==Ct?[]:ji(si,Ct);return(Ft-=Oi.length)<pt?Qo(Re,je,Hn,bt.placeholder,x,si,Oi,x,x,pt-Ft):dn(this&&this!==Ti&&this instanceof bt?tt:Re,this,si)}}(w,M,ge):M!=c&&M!=33||ee.length?Hn.apply(x,ct):function(Re,je,pt,tt){var bt=1&je,Ft=Vs(Re);return function si(){for(var mt=-1,Ct=arguments.length,Oi=-1,bi=tt.length,zi=Qe(bi+Ct),li=this&&this!==Ti&&this instanceof si?Ft:Re;++Oi<bi;)zi[Oi]=tt[Oi];for(;Ct--;)zi[Oi++]=arguments[++mt];return dn(li,bt?pt:this,zi)}}(w,M,U,Z);else var vt=function(Re,je,pt){var tt=1&je,bt=Vs(Re);return function Ft(){return(this&&this!==Ti&&this instanceof Ft?bt:Re).apply(tt?pt:this,arguments)}}(w,M,U);return zl((rt?wl:Wl)(vt,ct),w,M)}function Hl(w,M,U,Z){return w===x||Cn(w,Vn[U])&&!Dt.call(Z,U)?M:w}function js(w,M,U,Z,ee,le){return gi(w)&&gi(M)&&(le.set(M,w),wa(w,M,x,js,le),le.delete(M)),w}function tc(w){return Wa(w)?x:w}function Gl(w,M,U,Z,ee,le){var pe=1&U,ge=w.length,be=M.length;if(ge!=be&&!(pe&&ge<be))return!1;var Le=le.get(w),Me=le.get(M);if(Le&&Me)return Le==M&&Me==w;var Ge=-1,rt=!0,ct=2&U?new ys:x;for(le.set(w,M),le.set(M,w);++Ge<ge;){var vt=w[Ge],Re=M[Ge];if(Z)var je=pe?Z(Re,vt,Ge,M,w,le):Z(vt,Re,Ge,w,M,le);if(je!==x){if(je)continue;rt=!1;break}if(ct){if(!Br(M,function(pt,tt){if(!pn(ct,tt)&&(vt===pt||ee(vt,pt,U,Z,le)))return ct.push(tt)})){rt=!1;break}}else if(vt!==Re&&!ee(vt,Re,U,Z,le)){rt=!1;break}}return le.delete(w),le.delete(M),rt}function es(w){return lh(oh(w,x,jr),w+"")}function th(w){return fl(w,Ri,sh)}function La(w){return fl(w,un,Ul)}var ih=Fr?function(w){return Fr.get(w)}:Ch;function Ma(w){for(var M=w.name+"",U=pr[M],Z=Dt.call(pr,M)?U.length:0;Z--;){var ee=U[Z],le=ee.func;if(le==null||le==w)return ee.name}return M}function xr(w){return(Dt.call(ae,"placeholder")?ae:w).placeholder}function St(){var w=ae.iteratee||_h;return w=w===_h?yl:w,arguments.length?w(arguments[0],arguments[1]):w}function Ra(w,M){var U=w.__data__;return function(Z){var ee=typeof Z;return ee=="string"||ee=="number"||ee=="symbol"||ee=="boolean"?Z!=="__proto__":Z===null}(M)?U[typeof M=="string"?"string":"hash"]:U.map}function nh(w){for(var M=Ri(w),U=M.length;U--;){var Z=M[U],ee=w[Z];M[U]=[Z,ee,br(ee)]}return M}function Ks(w,M){var U=function(Z,ee){return Z==null?x:Z[ee]}(w,M);return ml(U)?U:x}var sh=mn?function(w){return w==null?[]:(w=ci(w),Bs(mn(w),function(M){return Oo.call(w,M)}))}:Ka,Ul=mn?function(w){for(var M=[];w;)cs(M,sh(w)),w=ps(w);return M}:Ka,Bi=Gi;function Ss(w,M,U){for(var Z=-1,ee=(M=bs(M,w)).length,le=!1;++Z<ee;){var pe=Ui(M[Z]);if(!(le=w!=null&&U(w,pe)))break;w=w[pe]}return le||++Z!=ee?le:!!(ee=w==null?0:w.length)&&Ga(ee)&&ts(pe,ee)&&(Nt(w)||wr(w))}function rh(w){return typeof w.constructor!="function"||Ar(w)?{}:rn(ps(w))}function ic(w){return Nt(w)||wr(w)||!!(gn&&w&&w[gn])}function ts(w,M){var U=typeof w;return!!(M=M==null?y:M)&&(U=="number"||U!="symbol"&&Iu.test(w))&&-1<w&&w%1==0&&w<M}function Pi(w,M,U){if(!gi(U))return!1;var Z=typeof M;return!!(Z=="number"?ln(U)&&ts(M,U.length):Z=="string"&&M in U)&&Cn(U[M],w)}function ah(w,M){if(Nt(w))return!1;var U=typeof w;return!(U!="number"&&U!="symbol"&&U!="boolean"&&w!=null&&!xn(w))||Se.test(w)||!nt.test(w)||M!=null&&w in ci(M)}function _s(w){var M=Ma(w),U=ae[M];if(typeof U!="function"||!(M in Kt.prototype))return!1;if(w===U)return!0;var Z=ih(U);return!!Z&&w===Z[0]}(ya&&Bi(new ya(new ArrayBuffer(1)))!=se||fr&&Bi(new fr)!=B||No&&Bi(No.resolve())!=V||Kn&&Bi(new Kn)!=Y||Ki&&Bi(new Ki)!=J)&&(Bi=function(w){var M=Gi(w),U=M==D?w.constructor:x,Z=U?ws(U):"";if(Z)switch(Z){case rl:return se;case al:return B;case va:return V;case gs:return Y;case ol:return J}return M});var nc=Nn?is:Xa;function Ar(w){var M=w&&w.constructor;return w===(typeof M=="function"&&M.prototype||Vn)}function br(w){return w==w&&!gi(w)}function zr(w,M){return function(U){return U!=null&&U[w]===M&&(M!==x||w in ci(U))}}function oh(w,M,U){return M=_i(M===x?w.length-1:M,0),function(){for(var Z=arguments,ee=-1,le=_i(Z.length-M,0),pe=Qe(le);++ee<le;)pe[ee]=Z[M+ee];ee=-1;for(var ge=Qe(M+1);++ee<M;)ge[ee]=Z[ee];return ge[M]=U(pe),dn(w,this,ge)}}function hh(w,M){return M.length<2?w:xs(w,vn(M,0,-1))}function Tr(w,M){if((M!=="constructor"||typeof w[M]!="function")&&M!="__proto__")return w[M]}var Wl=Yr(wl),Vr=Wu||function(w,M){return Ti.setTimeout(w,M)},lh=Yr(qu);function zl(w,M,U){var Z=M+"";return lh(w,function(ee,le){var pe=le.length;if(!pe)return ee;var ge=pe-1;return le[ge]=(1<pe?"& ":"")+le[ge],le=le.join(2<pe?", ":" "),ee.replace(Jt,`{
/* [wrapped with `+le+`] */
`)}(Z,function(ee,le){return Sn(A,function(pe){var ge="_."+pe[0];le&pe[1]&&!So(ee,ge)&&ee.push(ge)}),ee.sort()}(function(ee){var le=ee.match(jt);return le?le[1].split(yi):[]}(Z),U)))}function Yr(w){var M=0,U=0;return function(){var Z=sl(),ee=16-(Z-U);if(U=Z,0<ee){if(800<=++M)return arguments[0]}else M=0;return w.apply(x,arguments)}}function Na(w,M){var U=-1,Z=w.length,ee=Z-1;for(M=M===x?Z:M;++U<M;){var le=zo(U,ee),pe=w[le];w[le]=w[U],w[U]=pe}return w.length=M,w}var Vl,uh,Yl=(uh=(Vl=_r(function(w){var M=[];return w.charCodeAt(0)===46&&M.push(""),w.replace(Wt,function(U,Z,ee,le){M.push(ee?le.replace(Yi,"$1"):Z||U)}),M},function(w){return uh.size===500&&uh.clear(),w})).cache,Vl);function Ui(w){if(typeof w=="string"||xn(w))return w;var M=w+"";return M=="0"&&1/w==-d?"-0":M}function ws(w){if(w!=null){try{return Bn.call(w)}catch(M){}try{return w+""}catch(M){}}return""}function jl(w){if(w instanceof Kt)return w.clone();var M=new an(w.__wrapped__,w.__chain__);return M.__actions__=Zi(w.__actions__),M.__index__=w.__index__,M.__values__=w.__values__,M}var sc=Gt(function(w,M){return wi(w)?Hr(w,Mi(M,1,wi,!0)):[]}),rc=Gt(function(w,M){var U=hn(M);return wi(U)&&(U=x),wi(w)?Hr(w,Mi(M,1,wi,!0),St(U,2)):[]}),Kl=Gt(function(w,M){var U=hn(M);return wi(U)&&(U=x),wi(w)?Hr(w,Mi(M,1,wi,!0),x,U):[]});function ch(w,M,U){var Z=w==null?0:w.length;if(!Z)return-1;var ee=U==null?0:Bt(U);return ee<0&&(ee=_i(Z+ee,0)),la(w,St(M,3),ee)}function Xl(w,M,U){var Z=w==null?0:w.length;if(!Z)return-1;var ee=Z-1;return U!==x&&(ee=Bt(U),ee=U<0?_i(Z+ee,0):fi(ee,Z-1)),la(w,St(M,3),ee,!0)}function jr(w){return w!=null&&w.length?Mi(w,1):[]}function ql(w){return w&&w.length?w[0]:x}var ac=Gt(function(w){var M=hi(w,Ko);return M.length&&M[0]===w[0]?Ho(M):[]}),oc=Gt(function(w){var M=hn(w),U=hi(w,Ko);return M===hn(U)?M=x:U.pop(),U.length&&U[0]===w[0]?Ho(U,St(M,2)):[]}),Jl=Gt(function(w){var M=hn(w),U=hi(w,Ko);return(M=typeof M=="function"?M:x)&&U.pop(),U.length&&U[0]===w[0]?Ho(U,x,M):[]});function hn(w){var M=w==null?0:w.length;return M?w[M-1]:x}var hc=Gt(Zl);function Zl(w,M){return w&&w.length&&M&&M.length?Dn(w,M):w}var Ba=es(function(w,M){var U=w==null?0:w.length,Z=ko(w,M);return Li(w,hi(M,function(ee){return ts(ee,U)?+ee:ee}).sort(Nl)),Z});function dh(w){return w==null?w:dr.call(w)}var lc=Gt(function(w){return As(Mi(w,1,wi,!0))}),uc=Gt(function(w){var M=hn(w);return wi(M)&&(M=x),As(Mi(w,1,wi,!0),St(M,2))}),cc=Gt(function(w){var M=hn(w);return M=typeof M=="function"?M:x,As(Mi(w,1,wi,!0),x,M)});function fh(w){if(!w||!w.length)return[];var M=0;return w=Bs(w,function(U){if(wi(U))return M=_i(U.length,M),!0}),$h(M,function(U){return hi(w,Co(U))})}function $l(w,M){if(!w||!w.length)return[];var U=fh(w);return M==null?U:hi(U,function(Z){return dn(M,x,Z)})}var dc=Gt(function(w,M){return wi(w)?Hr(w,M):[]}),fc=Gt(function(w){return Ol(Bs(w,wi))}),pc=Gt(function(w){var M=hn(w);return wi(M)&&(M=x),Ol(Bs(w,wi),St(M,2))}),gc=Gt(function(w){var M=hn(w);return M=typeof M=="function"?M:x,Ol(Bs(w,wi),x,M)}),mc=Gt(fh),yc=Gt(function(w){var M=w.length,U=1<M?w[M-1]:x;return U=typeof U=="function"?(w.pop(),U):x,$l(w,U)});function ph(w){var M=ae(w);return M.__chain__=!0,M}function Pa(w,M){return M(w)}var gh=es(function(w){function M(le){return ko(le,w)}var U=w.length,Z=U?w[0]:0,ee=this.__wrapped__;return!(1<U||this.__actions__.length)&&ee instanceof Kt&&ts(Z)?((ee=ee.slice(Z,+Z+(U?1:0))).__actions__.push({func:Pa,args:[M],thisArg:x}),new an(ee,this.__chain__).thru(function(le){return U&&!le.length&&le.push(x),le})):this.thru(M)}),Ql=Ea(function(w,M,U){Dt.call(w,U)?++w[U]:Qn(w,U,1)}),vc=kl(ch),eu=kl(Xl);function tu(w,M){return(Nt(w)?Sn:vs)(w,St(M,3))}function iu(w,M){return(Nt(w)?xd:cl)(w,St(M,3))}var ka=Ea(function(w,M,U){Dt.call(w,U)?w[U].push(M):Qn(w,U,[M])}),xc=Gt(function(w,M,U){var Z=-1,ee=typeof M=="function",le=ln(w)?Qe(w.length):[];return vs(w,function(pe){le[++Z]=ee?dn(M,pe,U):Gr(pe,M,U)}),le}),Ac=Ea(function(w,M,U){Qn(w,U,M)});function Cs(w,M){return(Nt(w)?hi:xl)(w,St(M,3))}var bc=Ea(function(w,M,U){w[U?0:1].push(M)},function(){return[[],[]]}),Tc=Gt(function(w,M){if(w==null)return[];var U=M.length;return 1<U&&Pi(w,M[0],M[1])?M=[]:2<U&&Pi(M[0],M[1],M[2])&&(M=[M[0]]),Sl(w,Mi(M,1),[])}),Sr=Mo||function(){return Ti.Date.now()};function nu(w,M,U){return M=U?x:M,M=w&&M==null?w.length:M,Gn(w,h,x,x,x,x,M)}function su(w,M){var U;if(typeof M!="function")throw new Ii(N);return w=Bt(w),function(){return 0<--w&&(U=M.apply(this,arguments)),w<=1&&(M=x),U}}var Da=Gt(function(w,M,U){var Z=1;if(U.length){var ee=ji(U,xr(Da));Z|=c}return Gn(w,Z,M,U,ee)}),ru=Gt(function(w,M,U){var Z=3;if(U.length){var ee=ji(U,xr(ru));Z|=c}return Gn(M,Z,w,U,ee)});function mh(w,M,U){var Z,ee,le,pe,ge,be,Le=0,Me=!1,Ge=!1,rt=!0;if(typeof w!="function")throw new Ii(N);function ct(tt){var bt=Z,Ft=ee;return Z=ee=x,Le=tt,pe=w.apply(Ft,bt)}function vt(tt){var bt=tt-be;return be===x||M<=bt||bt<0||Ge&&le<=tt-Le}function Re(){var tt=Sr();if(vt(tt))return je(tt);ge=Vr(Re,function(bt){var Ft=M-(bt-be);return Ge?fi(Ft,le-(bt-Le)):Ft}(tt))}function je(tt){return ge=x,rt&&Z?ct(tt):(Z=ee=x,pe)}function pt(){var tt=Sr(),bt=vt(tt);if(Z=arguments,ee=this,be=tt,bt){if(ge===x)return function(Ft){return Le=Ft,ge=Vr(Re,M),Me?ct(Ft):pe}(be);if(Ge)return Ll(ge),ge=Vr(Re,M),ct(be)}return ge===x&&(ge=Vr(Re,M)),pe}return M=Wi(M)||0,gi(U)&&(Me=!!U.leading,le=(Ge="maxWait"in U)?_i(Wi(U.maxWait)||0,M):le,rt="trailing"in U?!!U.trailing:rt),pt.cancel=function(){ge!==x&&Ll(ge),Le=0,Z=be=ee=ge=x},pt.flush=function(){return ge===x?pe:je(Sr())},pt}var Sc=Gt(function(w,M){return ul(w,1,M)}),Fa=Gt(function(w,M,U){return ul(w,Wi(M)||0,U)});function _r(w,M){if(typeof w!="function"||M!=null&&typeof M!="function")throw new Ii(N);var U=function(){var Z=arguments,ee=M?M.apply(this,Z):Z[0],le=U.cache;if(le.has(ee))return le.get(ee);var pe=w.apply(this,Z);return U.cache=le.set(ee,pe)||le,pe};return U.cache=new(_r.Cache||$n),U}function yh(w){if(typeof w!="function")throw new Ii(N);return function(){var M=arguments;switch(M.length){case 0:return!w.call(this);case 1:return!w.call(this,M[0]);case 2:return!w.call(this,M[0],M[1]);case 3:return!w.call(this,M[0],M[1],M[2])}return!w.apply(this,M)}}_r.Cache=$n;var au=Qu(function(w,M){var U=(M=M.length==1&&Nt(M[0])?hi(M[0],$t(St())):hi(Mi(M,1),$t(St()))).length;return Gt(function(Z){for(var ee=-1,le=fi(Z.length,U);++ee<le;)Z[ee]=M[ee].call(this,Z[ee]);return dn(w,this,Z)})}),vh=Gt(function(w,M){var U=ji(M,xr(vh));return Gn(w,c,x,M,U)}),Kr=Gt(function(w,M){var U=ji(M,xr(Kr));return Gn(w,p,x,M,U)}),bd=es(function(w,M){return Gn(w,l,x,x,x,M)});function Cn(w,M){return w===M||w!=w&&M!=M}var Td=Oa(Fo),_c=Oa(function(w,M){return M<=w}),wr=gl(function(){return arguments}())?gl:function(w){return xi(w)&&Dt.call(w,"callee")&&!Oo.call(w,"callee")},Nt=Qe.isArray,Sd=us?$t(us):function(w){return xi(w)&&Gi(w)==Q};function ln(w){return w!=null&&Ga(w.length)&&!is(w)}function wi(w){return xi(w)&&ln(w)}var Xs=cr||Xa,xh=rr?$t(rr):function(w){return xi(w)&&Gi(w)==L};function Ha(w){if(!xi(w))return!1;var M=Gi(w);return M==P||M=="[object DOMException]"||typeof w.message=="string"&&typeof w.name=="string"&&!Wa(w)}function is(w){if(!gi(w))return!1;var M=Gi(w);return M==H||M==G||M=="[object AsyncFunction]"||M=="[object Proxy]"}function ou(w){return typeof w=="number"&&w==Bt(w)}function Ga(w){return typeof w=="number"&&-1<w&&w%1==0&&w<=y}function gi(w){var M=typeof w;return w!=null&&(M=="object"||M=="function")}function xi(w){return w!=null&&typeof w=="object"}var Ua=Kh?$t(Kh):function(w){return xi(w)&&Bi(w)==B};function hu(w){return typeof w=="number"||xi(w)&&Gi(w)==F}function Wa(w){if(!xi(w)||Gi(w)!=D)return!1;var M=ps(w);if(M===null)return!0;var U=Dt.call(M,"constructor")&&M.constructor;return typeof U=="function"&&U instanceof U&&Bn.call(U)==Gu}var Ah=oa?$t(oa):function(w){return xi(w)&&Gi(w)==z},wc=Xh?$t(Xh):function(w){return xi(w)&&Bi(w)==Y};function Xr(w){return typeof w=="string"||!Nt(w)&&xi(w)&&Gi(w)==j}function xn(w){return typeof w=="symbol"||xi(w)&&Gi(w)==X}var Cr=Pu?$t(Pu):function(w){return xi(w)&&Ga(w.length)&&!!ri[Gi(w)]},ns=Oa(Wo),qr=Oa(function(w,M){return w<=M});function lu(w){if(!w)return[];if(ln(w))return Xr(w)?tn(w):Zi(w);if(lr&&w[lr])return function(U){for(var Z,ee=[];!(Z=U.next()).done;)ee.push(Z.value);return ee}(w[lr]());var M=Bi(w);return(M==B?da:M==Y?fa:Jr)(w)}function ss(w){return w?(w=Wi(w))!==d&&w!==-d?w==w?w:0:17976931348623157e292*(w<0?-1:1):w===0?w:0}function Bt(w){var M=ss(w),U=M%1;return M==M?U?M-U:M:0}function Cc(w){return w?Us(Bt(w),0,b):0}function Wi(w){if(typeof w=="number")return w;if(xn(w))return g;if(gi(w)){var M=typeof w.valueOf=="function"?w.valueOf():w;w=gi(M)?M+"":M}if(typeof w!="string")return w===0?w:+w;w=w.replace(wt,"");var U=zn.test(w);return U||kh.test(w)?Yh(w.slice(2),U?2:8):Ci.test(w)?g:+w}function Ec(w){return wn(w,un(w))}function ni(w){return w==null?"":on(w)}var _d=vr(function(w,M){if(Ar(M)||ln(M))wn(M,Ri(M),w);else for(var U in M)Dt.call(M,U)&&Aa(w,U,M[U])}),Ic=vr(function(w,M){wn(M,un(M),w)}),bh=vr(function(w,M,U,Z){wn(M,un(M),w,Z)}),wd=vr(function(w,M,U,Z){wn(M,Ri(M),w,Z)}),Cd=es(ko),Ed=Gt(function(w,M){w=ci(w);var U=-1,Z=M.length,ee=2<Z?M[2]:x;for(ee&&Pi(M[0],M[1],ee)&&(Z=1);++U<Z;)for(var le=M[U],pe=un(le),ge=-1,be=pe.length;++ge<be;){var Le=pe[ge],Me=w[Le];(Me===x||Cn(Me,Vn[Le])&&!Dt.call(w,Le))&&(w[Le]=le[Le])}return w}),za=Gt(function(w){return w.push(x,js),dn(Lc,x,w)});function Va(w,M,U){var Z=w==null?x:xs(w,M);return Z===x?U:Z}function uu(w,M){return w!=null&&Ss(w,M,pl)}var Id=Dl(function(w,M,U){M!=null&&typeof M.toString!="function"&&(M=ga.call(M)),w[M]=U},os($i)),Od=Dl(function(w,M,U){M!=null&&typeof M.toString!="function"&&(M=ga.call(M)),Dt.call(w,M)?w[M].push(U):w[M]=[U]},St),Ld=Gt(Gr);function Ri(w){return ln(w)?Bo(w):Uo(w)}function un(w){return ln(w)?Bo(w,!0):vl(w)}var Oc=vr(function(w,M,U){wa(w,M,U)}),Lc=vr(function(w,M,U,Z){wa(w,M,U,Z)}),Mc=es(function(w,M){var U={};if(w==null)return U;var Z=!1;M=hi(M,function(le){return le=bs(le,w),Z=Z||1<le.length,le}),wn(w,La(w),U),Z&&(U=qi(U,7,tc));for(var ee=M.length;ee--;)jo(U,M[ee]);return U}),Th=es(function(w,M){return w==null?{}:function(U,Z){return _l(U,Z,function(ee,le){return uu(U,le)})}(w,M)});function Rc(w,M){if(w==null)return{};var U=hi(La(w),function(Z){return[Z]});return M=St(M),_l(w,U,function(Z,ee){return M(Z,ee[0])})}var Ya=Fl(Ri),Nc=Fl(un);function Jr(w){return w==null?[]:Ps(w,Ri(w))}var Md=Fn(function(w,M,U){return M=M.toLowerCase(),w+(U?Bc(M):M)});function Bc(w){return cu(ni(w).toLowerCase())}function Pc(w){return(w=ni(w))&&w.replace(Lr,Qh).replace(vd,"")}var Rd=Fn(function(w,M,U){return w+(U?"-":"")+M.toLowerCase()}),kc=Fn(function(w,M,U){return w+(U?" ":"")+M.toLowerCase()}),Dc=Ia("toLowerCase"),Fc=Fn(function(w,M,U){return w+(U?"_":"")+M.toLowerCase()}),Hc=Fn(function(w,M,U){return w+(U?" ":"")+cu(M)}),Sh=Fn(function(w,M,U){return w+(U?" ":"")+M.toUpperCase()}),cu=Ia("toUpperCase");function du(w,M,U){return w=ni(w),(M=U?x:M)===x?function(Z){return Vh.test(Z)}(w)?function(Z){return Z.match(Mu)||[]}(w):function(Z){return Z.match(Qt)||[]}(w):w.match(M)||[]}var rs=Gt(function(w,M){try{return dn(w,x,M)}catch(U){return Ha(U)?U:new qt(U)}}),as=es(function(w,M){return Sn(M,function(U){U=Ui(U),Qn(w,U,Da(w[U],w))}),w});function os(w){return function(){return w}}var Gc=Jo(),Uc=Jo(!0);function $i(w){return w}function _h(w){return yl(typeof w=="function"?w:qi(w,1))}var wh=Gt(function(w,M){return function(U){return Gr(U,w,M)}}),ai=Gt(function(w,M){return function(U){return Gr(w,U,M)}});function ja(w,M,U){var Z=Ri(M),ee=_a(M,Z);U!=null||gi(M)&&(ee.length||!Z.length)||(U=M,M=w,w=this,ee=_a(M,Ri(M)));var le=!(gi(U)&&"chain"in U&&!U.chain),pe=is(w);return Sn(ee,function(ge){var be=M[ge];w[ge]=be,pe&&(w.prototype[ge]=function(){var Le=this.__chain__;if(le||Le){var Me=w(this.__wrapped__);return(Me.__actions__=Zi(this.__actions__)).push({func:be,args:arguments,thisArg:w}),Me.__chain__=Le,Me}return be.apply(w,cs([this.value()],arguments))})}),w}function Ch(){}var Wc=Zo(hi),zc=Zo(ku),Eh=Zo(Br);function Vc(w){return ah(w)?Co(Ui(w)):function(M){return function(U){return xs(U,M)}}(w)}var Nd=$o(),Yc=$o(!0);function Ka(){return[]}function Xa(){return!1}var jc=Wr(function(w,M){return w+M},0),Kc=eh("ceil"),fu=Wr(function(w,M){return w/M},1),Ih=eh("floor"),qa,Oh=Wr(function(w,M){return w*M},1),Lh=eh("round"),Xc=Wr(function(w,M){return w-M},0);return ae.after=function(w,M){if(typeof M!="function")throw new Ii(N);return w=Bt(w),function(){if(--w<1)return M.apply(this,arguments)}},ae.ary=nu,ae.assign=_d,ae.assignIn=Ic,ae.assignInWith=bh,ae.assignWith=wd,ae.at=Cd,ae.before=su,ae.bind=Da,ae.bindAll=as,ae.bindKey=ru,ae.castArray=function(){if(!arguments.length)return[];var w=arguments[0];return Nt(w)?w:[w]},ae.chain=ph,ae.chunk=function(w,M,U){M=(U?Pi(w,M,U):M===x)?1:_i(Bt(M),0);var Z=w==null?0:w.length;if(!Z||M<1)return[];for(var ee=0,le=0,pe=Qe(_n(Z/M));ee<Z;)pe[le++]=vn(w,ee,ee+=M);return pe},ae.compact=function(w){for(var M=-1,U=w==null?0:w.length,Z=0,ee=[];++M<U;){var le=w[M];le&&(ee[Z++]=le)}return ee},ae.concat=function(){var w=arguments.length;if(!w)return[];for(var M=Qe(w-1),U=arguments[0],Z=w;Z--;)M[Z-1]=arguments[Z];return cs(Nt(U)?Zi(U):[U],Mi(M,1))},ae.cond=function(w){var M=w==null?0:w.length,U=St();return w=M?hi(w,function(Z){if(typeof Z[1]!="function")throw new Ii(N);return[U(Z[0]),Z[1]]}):[],Gt(function(Z){for(var ee=-1;++ee<M;){var le=w[ee];if(dn(le[0],this,Z))return dn(le[1],this,Z)}})},ae.conforms=function(w){return function(M){var U=Ri(M);return function(Z){return ll(Z,M,U)}}(qi(w,1))},ae.constant=os,ae.countBy=Ql,ae.create=function(w,M){var U=rn(w);return M==null?U:hl(U,M)},ae.curry=function w(M,U,Z){var ee=Gn(M,8,x,x,x,x,x,U=Z?x:U);return ee.placeholder=w.placeholder,ee},ae.curryRight=function w(M,U,Z){var ee=Gn(M,u,x,x,x,x,x,U=Z?x:U);return ee.placeholder=w.placeholder,ee},ae.debounce=mh,ae.defaults=Ed,ae.defaultsDeep=za,ae.defer=Sc,ae.delay=Fa,ae.difference=sc,ae.differenceBy=rc,ae.differenceWith=Kl,ae.drop=function(w,M,U){var Z=w==null?0:w.length;return Z?vn(w,(M=U||M===x?1:Bt(M))<0?0:M,Z):[]},ae.dropRight=function(w,M,U){var Z=w==null?0:w.length;return Z?vn(w,0,(M=Z-(M=U||M===x?1:Bt(M)))<0?0:M):[]},ae.dropRightWhile=function(w,M){return w&&w.length?Ws(w,St(M,3),!0,!0):[]},ae.dropWhile=function(w,M){return w&&w.length?Ws(w,St(M,3),!0):[]},ae.fill=function(w,M,U,Z){var ee=w==null?0:w.length;return ee?(U&&typeof U!="number"&&Pi(w,M,U)&&(U=0,Z=ee),function(le,pe,ge,be){var Le=le.length;for((ge=Bt(ge))<0&&(ge=Le<-ge?0:Le+ge),(be=be===x||Le<be?Le:Bt(be))<0&&(be+=Le),be=be<ge?0:Cc(be);ge<be;)le[ge++]=pe;return le}(w,M,U,Z)):[]},ae.filter=function(w,M){return(Nt(w)?Bs:Ta)(w,St(M,3))},ae.flatMap=function(w,M){return Mi(Cs(w,M),1)},ae.flatMapDeep=function(w,M){return Mi(Cs(w,M),d)},ae.flatMapDepth=function(w,M,U){return U=U===x?1:Bt(U),Mi(Cs(w,M),U)},ae.flatten=jr,ae.flattenDeep=function(w){return w!=null&&w.length?Mi(w,d):[]},ae.flattenDepth=function(w,M){return w!=null&&w.length?Mi(w,M=M===x?1:Bt(M)):[]},ae.flip=function(w){return Gn(w,512)},ae.flow=Gc,ae.flowRight=Uc,ae.fromPairs=function(w){for(var M=-1,U=w==null?0:w.length,Z={};++M<U;){var ee=w[M];Z[ee[0]]=ee[1]}return Z},ae.functions=function(w){return w==null?[]:_a(w,Ri(w))},ae.functionsIn=function(w){return w==null?[]:_a(w,un(w))},ae.groupBy=ka,ae.initial=function(w){return w!=null&&w.length?vn(w,0,-1):[]},ae.intersection=ac,ae.intersectionBy=oc,ae.intersectionWith=Jl,ae.invert=Id,ae.invertBy=Od,ae.invokeMap=xc,ae.iteratee=_h,ae.keyBy=Ac,ae.keys=Ri,ae.keysIn=un,ae.map=Cs,ae.mapKeys=function(w,M){var U={};return M=St(M,3),kn(w,function(Z,ee,le){Qn(U,M(Z,ee,le),Z)}),U},ae.mapValues=function(w,M){var U={};return M=St(M,3),kn(w,function(Z,ee,le){Qn(U,ee,M(Z,ee,le))}),U},ae.matches=function(w){return Al(qi(w,1))},ae.matchesProperty=function(w,M){return bl(w,qi(M,1))},ae.memoize=_r,ae.merge=Oc,ae.mergeWith=Lc,ae.method=wh,ae.methodOf=ai,ae.mixin=ja,ae.negate=yh,ae.nthArg=function(w){return w=Bt(w),Gt(function(M){return Tl(M,w)})},ae.omit=Mc,ae.omitBy=function(w,M){return Rc(w,yh(St(M)))},ae.once=function(w){return su(2,w)},ae.orderBy=function(w,M,U,Z){return w==null?[]:(Nt(M)||(M=M==null?[]:[M]),Nt(U=Z?x:U)||(U=U==null?[]:[U]),Sl(w,M,U))},ae.over=Wc,ae.overArgs=au,ae.overEvery=zc,ae.overSome=Eh,ae.partial=vh,ae.partialRight=Kr,ae.partition=bc,ae.pick=Th,ae.pickBy=Rc,ae.property=Vc,ae.propertyOf=function(w){return function(M){return w==null?x:xs(w,M)}},ae.pull=hc,ae.pullAll=Zl,ae.pullAllBy=function(w,M,U){return w&&w.length&&M&&M.length?Dn(w,M,St(U,2)):w},ae.pullAllWith=function(w,M,U){return w&&w.length&&M&&M.length?Dn(w,M,x,U):w},ae.pullAt=Ba,ae.range=Nd,ae.rangeRight=Yc,ae.rearg=bd,ae.reject=function(w,M){return(Nt(w)?Bs:Ta)(w,yh(St(M,3)))},ae.remove=function(w,M){var U=[];if(!w||!w.length)return U;var Z=-1,ee=[],le=w.length;for(M=St(M,3);++Z<le;){var pe=w[Z];M(pe,Z,w)&&(U.push(pe),ee.push(Z))}return Li(w,ee),U},ae.rest=function(w,M){if(typeof w!="function")throw new Ii(N);return Gt(w,M=M===x?M:Bt(M))},ae.reverse=dh,ae.sampleSize=function(w,M,U){return M=(U?Pi(w,M,U):M===x)?1:Bt(M),(Nt(w)?zu:Xu)(w,M)},ae.set=function(w,M,U){return w==null?w:Ur(w,M,U)},ae.setWith=function(w,M,U,Z){return Z=typeof Z=="function"?Z:x,w==null?w:Ur(w,M,U,Z)},ae.shuffle=function(w){return(Nt(w)?Ad:Ju)(w)},ae.slice=function(w,M,U){var Z=w==null?0:w.length;return Z?(U=U&&typeof U!="number"&&Pi(w,M,U)?(M=0,Z):(M=M==null?0:Bt(M),U===x?Z:Bt(U)),vn(w,M,U)):[]},ae.sortBy=Tc,ae.sortedUniq=function(w){return w&&w.length?Cl(w):[]},ae.sortedUniqBy=function(w,M){return w&&w.length?Cl(w,St(M,2)):[]},ae.split=function(w,M,U){return U&&typeof U!="number"&&Pi(w,M,U)&&(M=U=x),(U=U===x?b:U>>>0)?(w=ni(w))&&(typeof M=="string"||M!=null&&!Ah(M))&&!(M=on(M))&&ks(w)?Ts(tn(w),0,U):w.split(M,U):[]},ae.spread=function(w,M){if(typeof w!="function")throw new Ii(N);return M=M==null?0:_i(Bt(M),0),Gt(function(U){var Z=U[M],ee=Ts(U,0,M);return Z&&cs(ee,Z),dn(w,this,ee)})},ae.tail=function(w){var M=w==null?0:w.length;return M?vn(w,1,M):[]},ae.take=function(w,M,U){return w&&w.length?vn(w,0,(M=U||M===x?1:Bt(M))<0?0:M):[]},ae.takeRight=function(w,M,U){var Z=w==null?0:w.length;return Z?vn(w,(M=Z-(M=U||M===x?1:Bt(M)))<0?0:M,Z):[]},ae.takeRightWhile=function(w,M){return w&&w.length?Ws(w,St(M,3),!1,!0):[]},ae.takeWhile=function(w,M){return w&&w.length?Ws(w,St(M,3)):[]},ae.tap=function(w,M){return M(w),w},ae.throttle=function(w,M,U){var Z=!0,ee=!0;if(typeof w!="function")throw new Ii(N);return gi(U)&&(Z="leading"in U?!!U.leading:Z,ee="trailing"in U?!!U.trailing:ee),mh(w,M,{leading:Z,maxWait:M,trailing:ee})},ae.thru=Pa,ae.toArray=lu,ae.toPairs=Ya,ae.toPairsIn=Nc,ae.toPath=function(w){return Nt(w)?hi(w,Ui):xn(w)?[w]:Zi(Yl(ni(w)))},ae.toPlainObject=Ec,ae.transform=function(w,M,U){var Z=Nt(w),ee=Z||Xs(w)||Cr(w);if(M=St(M,4),U==null){var le=w&&w.constructor;U=ee?Z?new le:[]:gi(w)&&is(le)?rn(ps(w)):{}}return(ee?Sn:kn)(w,function(pe,ge,be){return M(U,pe,ge,be)}),U},ae.unary=function(w){return nu(w,1)},ae.union=lc,ae.unionBy=uc,ae.unionWith=cc,ae.uniq=function(w){return w&&w.length?As(w):[]},ae.uniqBy=function(w,M){return w&&w.length?As(w,St(M,2)):[]},ae.uniqWith=function(w,M){return M=typeof M=="function"?M:x,w&&w.length?As(w,x,M):[]},ae.unset=function(w,M){return w==null||jo(w,M)},ae.unzip=fh,ae.unzipWith=$l,ae.update=function(w,M,U){return w==null?w:Il(w,M,Xo(U))},ae.updateWith=function(w,M,U,Z){return Z=typeof Z=="function"?Z:x,w==null?w:Il(w,M,Xo(U),Z)},ae.values=Jr,ae.valuesIn=function(w){return w==null?[]:Ps(w,un(w))},ae.without=dc,ae.words=du,ae.wrap=function(w,M){return vh(Xo(M),w)},ae.xor=fc,ae.xorBy=pc,ae.xorWith=gc,ae.zip=mc,ae.zipObject=function(w,M){return $u(w||[],M||[],Aa)},ae.zipObjectDeep=function(w,M){return $u(w||[],M||[],Ur)},ae.zipWith=yc,ae.entries=Ya,ae.entriesIn=Nc,ae.extend=Ic,ae.extendWith=bh,ja(ae,ae),ae.add=jc,ae.attempt=rs,ae.camelCase=Md,ae.capitalize=Bc,ae.ceil=Kc,ae.clamp=function(w,M,U){return U===x&&(U=M,M=x),U!==x&&(U=(U=Wi(U))==U?U:0),M!==x&&(M=(M=Wi(M))==M?M:0),Us(Wi(w),M,U)},ae.clone=function(w){return qi(w,4)},ae.cloneDeep=function(w){return qi(w,5)},ae.cloneDeepWith=function(w,M){return qi(w,5,M=typeof M=="function"?M:x)},ae.cloneWith=function(w,M){return qi(w,4,M=typeof M=="function"?M:x)},ae.conformsTo=function(w,M){return M==null||ll(w,M,Ri(M))},ae.deburr=Pc,ae.defaultTo=function(w,M){return w==null||w!=w?M:w},ae.divide=fu,ae.endsWith=function(w,M,U){w=ni(w),M=on(M);var Z=w.length,ee=U=U===x?Z:Us(Bt(U),0,Z);return 0<=(U-=M.length)&&w.slice(U,ee)==M},ae.eq=Cn,ae.escape=function(w){return(w=ni(w))&&lt.test(w)?w.replace(Ye,Hi):w},ae.escapeRegExp=function(w){return(w=ni(w))&&zt.test(w)?w.replace(Ht,"\\$&"):w},ae.every=function(w,M,U){var Z=Nt(w)?ku:Yu;return U&&Pi(w,M,U)&&(M=x),Z(w,St(M,3))},ae.find=vc,ae.findIndex=ch,ae.findKey=function(w,M){return Mn(w,St(M,3),kn)},ae.findLast=eu,ae.findLastIndex=Xl,ae.findLastKey=function(w,M){return Mn(w,St(M,3),Sa)},ae.floor=Ih,ae.forEach=tu,ae.forEachRight=iu,ae.forIn=function(w,M){return w==null?w:Do(w,St(M,3),un)},ae.forInRight=function(w,M){return w==null?w:dl(w,St(M,3),un)},ae.forOwn=function(w,M){return w&&kn(w,St(M,3))},ae.forOwnRight=function(w,M){return w&&Sa(w,St(M,3))},ae.get=Va,ae.gt=Td,ae.gte=_c,ae.has=function(w,M){return w!=null&&Ss(w,M,ju)},ae.hasIn=uu,ae.head=ql,ae.identity=$i,ae.includes=function(w,M,U,Z){w=ln(w)?w:Jr(w),U=U&&!Z?Bt(U):0;var ee=w.length;return U<0&&(U=_i(ee+U,0)),Xr(w)?U<=ee&&-1<w.indexOf(M,U):!!ee&&-1<fn(w,M,U)},ae.indexOf=function(w,M,U){var Z=w==null?0:w.length;if(!Z)return-1;var ee=U==null?0:Bt(U);return ee<0&&(ee=_i(Z+ee,0)),fn(w,M,ee)},ae.inRange=function(w,M,U){return M=ss(M),U===x?(U=M,M=0):U=ss(U),function(Z,ee,le){return Z>=fi(ee,le)&&Z<_i(ee,le)}(w=Wi(w),M,U)},ae.invoke=Ld,ae.isArguments=wr,ae.isArray=Nt,ae.isArrayBuffer=Sd,ae.isArrayLike=ln,ae.isArrayLikeObject=wi,ae.isBoolean=function(w){return w===!0||w===!1||xi(w)&&Gi(w)==O},ae.isBuffer=Xs,ae.isDate=xh,ae.isElement=function(w){return xi(w)&&w.nodeType===1&&!Wa(w)},ae.isEmpty=function(w){if(w==null)return!0;if(ln(w)&&(Nt(w)||typeof w=="string"||typeof w.splice=="function"||Xs(w)||Cr(w)||wr(w)))return!w.length;var M=Bi(w);if(M==B||M==Y)return!w.size;if(Ar(w))return!Uo(w).length;for(var U in w)if(Dt.call(w,U))return!1;return!0},ae.isEqual=function(w,M){return yr(w,M)},ae.isEqualWith=function(w,M,U){var Z=(U=typeof U=="function"?U:x)?U(w,M):x;return Z===x?yr(w,M,x,U):!!Z},ae.isError=Ha,ae.isFinite=function(w){return typeof w=="number"&&jn(w)},ae.isFunction=is,ae.isInteger=ou,ae.isLength=Ga,ae.isMap=Ua,ae.isMatch=function(w,M){return w===M||Go(w,M,nh(M))},ae.isMatchWith=function(w,M,U){return U=typeof U=="function"?U:x,Go(w,M,nh(M),U)},ae.isNaN=function(w){return hu(w)&&w!=+w},ae.isNative=function(w){if(nc(w))throw new qt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ml(w)},ae.isNil=function(w){return w==null},ae.isNull=function(w){return w===null},ae.isNumber=hu,ae.isObject=gi,ae.isObjectLike=xi,ae.isPlainObject=Wa,ae.isRegExp=Ah,ae.isSafeInteger=function(w){return ou(w)&&-y<=w&&w<=y},ae.isSet=wc,ae.isString=Xr,ae.isSymbol=xn,ae.isTypedArray=Cr,ae.isUndefined=function(w){return w===x},ae.isWeakMap=function(w){return xi(w)&&Bi(w)==J},ae.isWeakSet=function(w){return xi(w)&&Gi(w)=="[object WeakSet]"},ae.join=function(w,M){return w==null?"":nl.call(w,M)},ae.kebabCase=Rd,ae.last=hn,ae.lastIndexOf=function(w,M,U){var Z=w==null?0:w.length;if(!Z)return-1;var ee=Z;return U!==x&&(ee=(ee=Bt(U))<0?_i(Z+ee,0):fi(ee,Z-1)),M==M?function(le,pe,ge){for(var be=ge+1;be--;)if(le[be]===pe)return be;return be}(w,M,ee):la(w,Jh,ee,!0)},ae.lowerCase=kc,ae.lowerFirst=Dc,ae.lt=ns,ae.lte=qr,ae.max=function(w){return w&&w.length?ba(w,$i,Fo):x},ae.maxBy=function(w,M){return w&&w.length?ba(w,St(M,2),Fo):x},ae.mean=function(w){return Zh(w,$i)},ae.meanBy=function(w,M){return Zh(w,St(M,2))},ae.min=function(w){return w&&w.length?ba(w,$i,Wo):x},ae.minBy=function(w,M){return w&&w.length?ba(w,St(M,2),Wo):x},ae.stubArray=Ka,ae.stubFalse=Xa,ae.stubObject=function(){return{}},ae.stubString=function(){return""},ae.stubTrue=function(){return!0},ae.multiply=Oh,ae.nth=function(w,M){return w&&w.length?Tl(w,Bt(M)):x},ae.noConflict=function(){return Ti._===this&&(Ti._=Io),this},ae.noop=Ch,ae.now=Sr,ae.pad=function(w,M,U){w=ni(w);var Z=(M=Bt(M))?Ds(w):0;if(!M||M<=Z)return w;var ee=(M-Z)/2;return Ys(Yn(ee),U)+w+Ys(_n(ee),U)},ae.padEnd=function(w,M,U){w=ni(w);var Z=(M=Bt(M))?Ds(w):0;return M&&Z<M?w+Ys(M-Z,U):w},ae.padStart=function(w,M,U){w=ni(w);var Z=(M=Bt(M))?Ds(w):0;return M&&Z<M?Ys(M-Z,U)+w:w},ae.parseInt=function(w,M,U){return M=U||M==null?0:M&&+M,Gs(ni(w).replace(Mt,""),M||0)},ae.random=function(w,M,U){if(U&&typeof U!="boolean"&&Pi(w,M,U)&&(M=U=x),U===x&&(typeof M=="boolean"?(U=M,M=x):typeof w=="boolean"&&(U=w,w=x)),w===x&&M===x?(w=0,M=1):(w=ss(w),M===x?(M=w,w=0):M=ss(M)),M<w){var Z=w;w=M,M=Z}if(U||w%1||M%1){var ee=Ro();return fi(w+ee*(M-w+Ao("1e-"+((ee+"").length-1))),M)}return zo(w,M)},ae.reduce=function(w,M,U){var Z=Nt(w)?ar:Pr,ee=arguments.length<3;return Z(w,St(M,4),U,ee,vs)},ae.reduceRight=function(w,M,U){var Z=Nt(w)?wo:Pr,ee=arguments.length<3;return Z(w,St(M,4),U,ee,cl)},ae.repeat=function(w,M,U){return M=(U?Pi(w,M,U):M===x)?1:Bt(M),Vo(ni(w),M)},ae.replace=function(){var w=arguments,M=ni(w[0]);return w.length<3?M:M.replace(w[1],w[2])},ae.result=function(w,M,U){var Z=-1,ee=(M=bs(M,w)).length;for(ee||(ee=1,w=x);++Z<ee;){var le=w==null?x:w[Ui(M[Z])];le===x&&(Z=ee,le=U),w=is(le)?le.call(w):le}return w},ae.round=Lh,ae.runInContext=Ee,ae.sample=function(w){return(Nt(w)?Po:Ku)(w)},ae.size=function(w){if(w==null)return 0;if(ln(w))return Xr(w)?Ds(w):w.length;var M=Bi(w);return M==B||M==Y?w.size:Uo(w).length},ae.snakeCase=Fc,ae.some=function(w,M,U){var Z=Nt(w)?Br:Zu;return U&&Pi(w,M,U)&&(M=x),Z(w,St(M,3))},ae.sortedIndex=function(w,M){return Ca(w,M)},ae.sortedIndexBy=function(w,M,U){return Yo(w,M,St(U,2))},ae.sortedIndexOf=function(w,M){var U=w==null?0:w.length;if(U){var Z=Ca(w,M);if(Z<U&&Cn(w[Z],M))return Z}return-1},ae.sortedLastIndex=function(w,M){return Ca(w,M,!0)},ae.sortedLastIndexBy=function(w,M,U){return Yo(w,M,St(U,2),!0)},ae.sortedLastIndexOf=function(w,M){if(w!=null&&w.length){var U=Ca(w,M,!0)-1;if(Cn(w[U],M))return U}return-1},ae.startCase=Hc,ae.startsWith=function(w,M,U){return w=ni(w),U=U==null?0:Us(Bt(U),0,w.length),M=on(M),w.slice(U,U+M.length)==M},ae.subtract=Xc,ae.sum=function(w){return w&&w.length?or(w,$i):0},ae.sumBy=function(w,M){return w&&w.length?or(w,St(M,2)):0},ae.template=function(w,M,U){var Z=ae.templateSettings;U&&Pi(w,M,U)&&(M=x),w=ni(w),M=bh({},M,Z,Hl);var ee,le,pe=bh({},M.imports,Z.imports,Hl),ge=Ri(pe),be=Ps(pe,ge),Le=0,Me=M.interpolate||Mr,Ge="__p += '",rt=el((M.escape||Mr).source+"|"+Me.source+"|"+(Me===Xe?Fi:Mr).source+"|"+(M.evaluate||Mr).source+"|$","g"),ct="//# sourceURL="+(Dt.call(M,"sourceURL")?(M.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bu+"]")+`
`;w.replace(rt,function(je,pt,tt,bt,Ft,si){return tt=tt||bt,Ge+=w.slice(Le,si).replace(Dh,Si),pt&&(ee=!0,Ge+=`' +
__e(`+pt+`) +
'`),Ft&&(le=!0,Ge+=`';
`+Ft+`;
__p += '`),tt&&(Ge+=`' +
((__t = (`+tt+`)) == null ? '' : __t) +
'`),Le=si+je.length,je}),Ge+=`';
`;var vt=Dt.call(M,"variable")&&M.variable;vt||(Ge=`with (obj) {
`+Ge+`
}
`),Ge=(le?Ge.replace(Ve,""):Ge).replace(we,"$1").replace(Ue,"$1;"),Ge="function("+(vt||"obj")+`) {
`+(vt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(le?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ge+`return __p
}`;var Re=rs(function(){return Ei(ge,ct+"return "+Ge).apply(x,be)});if(Re.source=Ge,Ha(Re))throw Re;return Re},ae.times=function(w,M){if((w=Bt(w))<1||y<w)return[];var U=b,Z=fi(w,b);M=St(M),w-=b;for(var ee=$h(Z,M);++U<w;)M(U);return ee},ae.toFinite=ss,ae.toInteger=Bt,ae.toLength=Cc,ae.toLower=function(w){return ni(w).toLowerCase()},ae.toNumber=Wi,ae.toSafeInteger=function(w){return w?Us(Bt(w),-y,y):w===0?w:0},ae.toString=ni,ae.toUpper=function(w){return ni(w).toUpperCase()},ae.trim=function(w,M,U){if((w=ni(w))&&(U||M===x))return w.replace(wt,"");if(!w||!(M=on(M)))return w;var Z=tn(w),ee=tn(M);return Ts(Z,ca(Z,ee),kr(Z,ee)+1).join("")},ae.trimEnd=function(w,M,U){if((w=ni(w))&&(U||M===x))return w.replace(Et,"");if(!w||!(M=on(M)))return w;var Z=tn(w);return Ts(Z,0,kr(Z,tn(M))+1).join("")},ae.trimStart=function(w,M,U){if((w=ni(w))&&(U||M===x))return w.replace(Mt,"");if(!w||!(M=on(M)))return w;var Z=tn(w);return Ts(Z,ca(Z,tn(M))).join("")},ae.truncate=function(w,M){var U=30,Z="...";if(gi(M)){var ee="separator"in M?M.separator:ee;U="length"in M?Bt(M.length):U,Z="omission"in M?on(M.omission):Z}var le=(w=ni(w)).length;if(ks(w)){var pe=tn(w);le=pe.length}if(le<=U)return w;var ge=U-Ds(Z);if(ge<1)return Z;var be=pe?Ts(pe,0,ge).join(""):w.slice(0,ge);if(ee===x)return be+Z;if(pe&&(ge+=be.length-ge),Ah(ee)){if(w.slice(ge).search(ee)){var Le,Me=be;for(ee.global||(ee=el(ee.source,ni(Tn.exec(ee))+"g")),ee.lastIndex=0;Le=ee.exec(Me);)var Ge=Le.index;be=be.slice(0,Ge===x?ge:Ge)}}else if(w.indexOf(on(ee),ge)!=ge){var rt=be.lastIndexOf(ee);-1<rt&&(be=be.slice(0,rt))}return be+Z},ae.unescape=function(w){return(w=ni(w))&&st.test(w)?w.replace(Oe,Fu):w},ae.uniqueId=function(w){var M=++Hu;return ni(w)+M},ae.upperCase=Sh,ae.upperFirst=cu,ae.each=tu,ae.eachRight=iu,ae.first=ql,ja(ae,(qa={},kn(ae,function(w,M){Dt.call(ae.prototype,M)||(qa[M]=w)}),qa),{chain:!1}),ae.VERSION="4.17.19",Sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){ae[w].placeholder=ae}),Sn(["drop","take"],function(w,M){Kt.prototype[w]=function(U){U=U===x?1:_i(Bt(U),0);var Z=this.__filtered__&&!M?new Kt(this):this.clone();return Z.__filtered__?Z.__takeCount__=fi(U,Z.__takeCount__):Z.__views__.push({size:fi(U,b),type:w+(Z.__dir__<0?"Right":"")}),Z},Kt.prototype[w+"Right"]=function(U){return this.reverse()[w](U).reverse()}}),Sn(["filter","map","takeWhile"],function(w,M){var U=M+1,Z=U==1||U==3;Kt.prototype[w]=function(ee){var le=this.clone();return le.__iteratees__.push({iteratee:St(ee,3),type:U}),le.__filtered__=le.__filtered__||Z,le}}),Sn(["head","last"],function(w,M){var U="take"+(M?"Right":"");Kt.prototype[w]=function(){return this[U](1).value()[0]}}),Sn(["initial","tail"],function(w,M){var U="drop"+(M?"":"Right");Kt.prototype[w]=function(){return this.__filtered__?new Kt(this):this[U](1)}}),Kt.prototype.compact=function(){return this.filter($i)},Kt.prototype.find=function(w){return this.filter(w).head()},Kt.prototype.findLast=function(w){return this.reverse().find(w)},Kt.prototype.invokeMap=Gt(function(w,M){return typeof w=="function"?new Kt(this):this.map(function(U){return Gr(U,w,M)})}),Kt.prototype.reject=function(w){return this.filter(yh(St(w)))},Kt.prototype.slice=function(w,M){w=Bt(w);var U=this;return U.__filtered__&&(0<w||M<0)?new Kt(U):(w<0?U=U.takeRight(-w):w&&(U=U.drop(w)),M!==x&&(U=(M=Bt(M))<0?U.dropRight(-M):U.take(M-w)),U)},Kt.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},Kt.prototype.toArray=function(){return this.take(b)},kn(Kt.prototype,function(w,M){var U=/^(?:filter|find|map|reject)|While$/.test(M),Z=/^(?:head|last)$/.test(M),ee=ae[Z?"take"+(M=="last"?"Right":""):M],le=Z||/^find/.test(M);ee&&(ae.prototype[M]=function(){function pe(pt){var tt=ee.apply(ae,cs([pt],be));return Z&&rt?tt[0]:tt}var ge=this.__wrapped__,be=Z?[1]:arguments,Le=ge instanceof Kt,Me=be[0],Ge=Le||Nt(ge);Ge&&U&&typeof Me=="function"&&Me.length!=1&&(Le=Ge=!1);var rt=this.__chain__,ct=!!this.__actions__.length,vt=le&&!rt,Re=Le&&!ct;if(le||!Ge)return vt&&Re?w.apply(this,be):(je=this.thru(pe),vt?Z?je.value()[0]:je.value():je);ge=Re?ge:new Kt(this);var je=w.apply(ge,be);return je.__actions__.push({func:Pa,args:[pe],thisArg:x}),new an(je,rt)})}),Sn(["pop","push","shift","sort","splice","unshift"],function(w){var M=nn[w],U=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",Z=/^(?:pop|shift)$/.test(w);ae.prototype[w]=function(){var ee=arguments;if(!Z||this.__chain__)return this[U](function(pe){return M.apply(Nt(pe)?pe:[],ee)});var le=this.value();return M.apply(Nt(le)?le:[],ee)}}),kn(Kt.prototype,function(w,M){var U=ae[M];if(U){var Z=U.name+"";Dt.call(pr,Z)||(pr[Z]=[]),pr[Z].push({name:M,func:U})}}),pr[Hn(x,2).name]=[{name:"wrapper",func:x}],Kt.prototype.clone=function(){var w=new Kt(this.__wrapped__);return w.__actions__=Zi(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=Zi(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=Zi(this.__views__),w},Kt.prototype.reverse=function(){if(this.__filtered__){var w=new Kt(this);w.__dir__=-1,w.__filtered__=!0}else(w=this.clone()).__dir__*=-1;return w},Kt.prototype.value=function(){var w=this.__wrapped__.value(),M=this.__dir__,U=Nt(w),Z=M<0,ee=U?w.length:0,le=function(si,mt,Ct){for(var Oi=-1,bi=Ct.length;++Oi<bi;){var zi=Ct[Oi],li=zi.size;switch(zi.type){case"drop":si+=li;break;case"dropRight":mt-=li;break;case"take":mt=fi(mt,si+li);break;case"takeRight":si=_i(si,mt-li)}}return{start:si,end:mt}}(0,ee,this.__views__),pe=le.start,ge=le.end,be=ge-pe,Le=Z?ge:pe-1,Me=this.__iteratees__,Ge=Me.length,rt=0,ct=fi(be,this.__takeCount__);if(!U||!Z&&ee==be&&ct==be)return zs(w,this.__actions__);var vt=[];e:for(;be--&&rt<ct;){for(var Re=-1,je=w[Le+=M];++Re<Ge;){var pt=Me[Re],tt=pt.iteratee,bt=pt.type,Ft=tt(je);if(bt==2)je=Ft;else if(!Ft){if(bt==1)continue e;break e}}vt[rt++]=je}return vt},ae.prototype.at=gh,ae.prototype.chain=function(){return ph(this)},ae.prototype.commit=function(){return new an(this.value(),this.__chain__)},ae.prototype.next=function(){this.__values__===x&&(this.__values__=lu(this.value()));var w=this.__index__>=this.__values__.length;return{done:w,value:w?x:this.__values__[this.__index__++]}},ae.prototype.plant=function(w){for(var M,U=this;U instanceof Jn;){var Z=jl(U);Z.__index__=0,Z.__values__=x,M?ee.__wrapped__=Z:M=Z;var ee=Z;U=U.__wrapped__}return ee.__wrapped__=w,M},ae.prototype.reverse=function(){var w=this.__wrapped__;if(w instanceof Kt){var M=w;return this.__actions__.length&&(M=new Kt(this)),(M=M.reverse()).__actions__.push({func:Pa,args:[dh],thisArg:x}),new an(M,this.__chain__)}return this.thru(dh)},ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=function(){return zs(this.__wrapped__,this.__actions__)},ae.prototype.first=ae.prototype.head,lr&&(ae.prototype[lr]=function(){return this}),ae}();Ti._=ds,_e=function(){return ds}.call(Ae,Ce,Ae,He),_e!==void 0&&(He.exports=_e)}).call(this)},460:function(He,Ae){var Ce,_e,x;(function(N,r){_e=[],Ce=r,x=typeof Ce=="function"?Ce.apply(Ae,_e):Ce,x!==void 0&&(He.exports=x)})(this,function N(){"use strict";var r=typeof self!="undefined"?self:typeof window!="undefined"?window:r!==void 0?r:{},m=!r.document&&!!r.postMessage,u=m&&/blob:/i.test((r.location||{}).protocol),c={},p=0,h={parse:function(D,V){var z=(V=V||{}).dynamicTyping||!1;if(F(z)&&(V.dynamicTypingFunction=z,z={}),V.dynamicTyping=z,V.transform=!!F(V.transform)&&V.transform,V.worker&&h.WORKERS_SUPPORTED){var Y=function(){if(!h.WORKERS_SUPPORTED)return!1;var X=(Q=r.URL||r.webkitURL||null,se=N.toString(),h.BLOB_URL||(h.BLOB_URL=Q.createObjectURL(new Blob(["(",se,")();"],{type:"text/javascript"})))),J=new r.Worker(X),Q,se;return J.onmessage=L,J.id=p++,c[J.id]=J}();return Y.userStep=V.step,Y.userChunk=V.chunk,Y.userComplete=V.complete,Y.userError=V.error,V.step=F(V.step),V.chunk=F(V.chunk),V.complete=F(V.complete),V.error=F(V.error),delete V.worker,void Y.postMessage({input:D,config:V,workerId:Y.id})}var j=null;return h.NODE_STREAM_INPUT,typeof D=="string"?j=V.download?new y(V):new b(V):D.readable===!0&&F(D.read)&&F(D.on)?j=new A(V):(r.File&&D instanceof File||D instanceof Object)&&(j=new g(V)),j.stream(D)},unparse:function(D,V){var z=!1,Y=!0,j=",",X=`\r
`,J='"',Q=J+J,se=!1,te=null,ie=!1;(function(){if(typeof V=="object"){if(typeof V.delimiter!="string"||h.BAD_DELIMITERS.filter(function(ue){return V.delimiter.indexOf(ue)!==-1}).length||(j=V.delimiter),(typeof V.quotes=="boolean"||typeof V.quotes=="function"||Array.isArray(V.quotes))&&(z=V.quotes),typeof V.skipEmptyLines!="boolean"&&typeof V.skipEmptyLines!="string"||(se=V.skipEmptyLines),typeof V.newline=="string"&&(X=V.newline),typeof V.quoteChar=="string"&&(J=V.quoteChar),typeof V.header=="boolean"&&(Y=V.header),Array.isArray(V.columns)){if(V.columns.length===0)throw new Error("Option columns is empty");te=V.columns}V.escapeChar!==void 0&&(Q=V.escapeChar+J),(typeof V.escapeFormulae=="boolean"||V.escapeFormulae instanceof RegExp)&&(ie=V.escapeFormulae instanceof RegExp?V.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var re=new RegExp(C(J),"g");if(typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(D)){if(!D.length||Array.isArray(D[0]))return he(null,D,se);if(typeof D[0]=="object")return he(te||Object.keys(D[0]),D,se)}else if(typeof D=="object")return typeof D.data=="string"&&(D.data=JSON.parse(D.data)),Array.isArray(D.data)&&(D.fields||(D.fields=D.meta&&D.meta.fields||te),D.fields||(D.fields=Array.isArray(D.data[0])?D.fields:typeof D.data[0]=="object"?Object.keys(D.data[0]):[]),Array.isArray(D.data[0])||typeof D.data[0]=="object"||(D.data=[D.data])),he(D.fields||[],D.data||[],se);throw new Error("Unable to serialize unrecognized input");function he(ue,Te,ye){var Ne="";typeof ue=="string"&&(ue=JSON.parse(ue)),typeof Te=="string"&&(Te=JSON.parse(Te));var Ve=Array.isArray(ue)&&0<ue.length,we=!Array.isArray(Te[0]);if(Ve&&Y){for(var Ue=0;Ue<ue.length;Ue++)0<Ue&&(Ne+=j),Ne+=de(ue[Ue],Ue);0<Te.length&&(Ne+=X)}for(var Oe=0;Oe<Te.length;Oe++){var Ye=Ve?ue.length:Te[Oe].length,st=!1,lt=Ve?Object.keys(Te[Oe]).length===0:Te[Oe].length===0;if(ye&&!Ve&&(st=ye==="greedy"?Te[Oe].join("").trim()==="":Te[Oe].length===1&&Te[Oe][0].length===0),ye==="greedy"&&Ve){for(var Ke=[],et=0;et<Ye;et++){var Xe=we?ue[et]:et;Ke.push(Te[Oe][Xe])}st=Ke.join("").trim()===""}if(!st){for(var nt=0;nt<Ye;nt++){0<nt&&!lt&&(Ne+=j);var Se=Ve&&we?ue[nt]:nt;Ne+=de(Te[Oe][Se],nt)}Oe<Te.length-1&&(!ye||0<Ye&&!lt)&&(Ne+=X)}}return Ne}function de(ue,Te){if(ue==null)return"";if(ue.constructor===Date)return JSON.stringify(ue).slice(1,25);var ye=!1;ie&&typeof ue=="string"&&ie.test(ue)&&(ue="'"+ue,ye=!0);var Ne=ue.toString().replace(re,Q);return(ye=ye||z===!0||typeof z=="function"&&z(ue,Te)||Array.isArray(z)&&z[Te]||function(Ve,we){for(var Ue=0;Ue<we.length;Ue++)if(-1<Ve.indexOf(we[Ue]))return!0;return!1}(Ne,h.BAD_DELIMITERS)||-1<Ne.indexOf(j)||Ne.charAt(0)===" "||Ne.charAt(Ne.length-1)===" ")?J+Ne+J:Ne}}};if(h.RECORD_SEP=String.fromCharCode(30),h.UNIT_SEP=String.fromCharCode(31),h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!m&&!!r.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=O,h.ParserHandle=T,h.NetworkStreamer=y,h.FileStreamer=g,h.StringStreamer=b,h.ReadableStreamStreamer=A,r.jQuery){var l=r.jQuery;l.fn.parse=function(D){var V=D.config||{},z=[];return this.each(function(X){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var J=0;J<this.files.length;J++)z.push({file:this.files[J],inputElem:this,instanceConfig:l.extend({},V)})}),Y(),this;function Y(){if(z.length!==0){var X,J,Q,se,te=z[0];if(F(D.before)){var ie=D.before(te.file,te.inputElem);if(typeof ie=="object"){if(ie.action==="abort")return X="AbortError",J=te.file,Q=te.inputElem,se=ie.reason,void(F(D.error)&&D.error({name:X},J,Q,se));if(ie.action==="skip")return void j();typeof ie.config=="object"&&(te.instanceConfig=l.extend(te.instanceConfig,ie.config))}else if(ie==="skip")return void j()}var re=te.instanceConfig.complete;te.instanceConfig.complete=function(he){F(re)&&re(he,te.file,te.inputElem),j()},h.parse(te.file,te.instanceConfig)}else F(D.complete)&&D.complete()}function j(){z.splice(0,1),Y()}}}function d(D){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(V){var z=G(V);z.chunkSize=parseInt(z.chunkSize),V.step||V.chunk||(z.chunkSize=null),this._handle=new T(z),(this._handle.streamer=this)._config=z}.call(this,D),this.parseChunk=function(V,z){if(this.isFirstChunk&&F(this._config.beforeFirstChunk)){var Y=this._config.beforeFirstChunk(V);Y!==void 0&&(V=Y)}this.isFirstChunk=!1,this._halted=!1;var j=this._partialLine+V;this._partialLine="";var X=this._handle.parse(j,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var J=X.meta.cursor;this._finished||(this._partialLine=j.substring(J-this._baseIndex),this._baseIndex=J),X&&X.data&&(this._rowCount+=X.data.length);var Q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(u)r.postMessage({results:X,workerId:h.WORKER_ID,finished:Q});else if(F(this._config.chunk)&&!z){if(this._config.chunk(X,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);X=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(X.data),this._completeResults.errors=this._completeResults.errors.concat(X.errors),this._completeResults.meta=X.meta),this._completed||!Q||!F(this._config.complete)||X&&X.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Q||X&&X.meta.paused||this._nextChunk(),X}this._halted=!0},this._sendError=function(V){F(this._config.error)?this._config.error(V):u&&this._config.error&&r.postMessage({workerId:h.WORKER_ID,error:V,finished:!1})}}function y(D){var V;(D=D||{}).chunkSize||(D.chunkSize=h.RemoteChunkSize),d.call(this,D),this._nextChunk=m?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(V=new XMLHttpRequest,this._config.withCredentials&&(V.withCredentials=this._config.withCredentials),m||(V.onload=B(this._chunkLoaded,this),V.onerror=B(this._chunkError,this)),V.open(this._config.downloadRequestBody?"POST":"GET",this._input,!m),this._config.downloadRequestHeaders){var z=this._config.downloadRequestHeaders;for(var Y in z)V.setRequestHeader(Y,z[Y])}if(this._config.chunkSize){var j=this._start+this._config.chunkSize-1;V.setRequestHeader("Range","bytes="+this._start+"-"+j)}try{V.send(this._config.downloadRequestBody)}catch(X){this._chunkError(X.message)}m&&V.status===0&&this._chunkError()}},this._chunkLoaded=function(){V.readyState===4&&(V.status<200||400<=V.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:V.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(z){var Y=z.getResponseHeader("Content-Range");return Y===null?-1:parseInt(Y.substring(Y.lastIndexOf("/")+1))}(V),this.parseChunk(V.responseText)))},this._chunkError=function(z){var Y=V.statusText||z;this._sendError(new Error(Y))}}function g(D){var V,z;(D=D||{}).chunkSize||(D.chunkSize=h.LocalChunkSize),d.call(this,D);var Y=typeof FileReader!="undefined";this.stream=function(j){this._input=j,z=j.slice||j.webkitSlice||j.mozSlice,Y?((V=new FileReader).onload=B(this._chunkLoaded,this),V.onerror=B(this._chunkError,this)):V=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var j=this._input;if(this._config.chunkSize){var X=Math.min(this._start+this._config.chunkSize,this._input.size);j=z.call(j,this._start,X)}var J=V.readAsText(j,this._config.encoding);Y||this._chunkLoaded({target:{result:J}})},this._chunkLoaded=function(j){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(j.target.result)},this._chunkError=function(){this._sendError(V.error)}}function b(D){var V;d.call(this,D=D||{}),this.stream=function(z){return V=z,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var z,Y=this._config.chunkSize;return Y?(z=V.substring(0,Y),V=V.substring(Y)):(z=V,V=""),this._finished=!V,this.parseChunk(z)}}}function A(D){d.call(this,D=D||{});var V=[],z=!0,Y=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(j){this._input=j,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Y&&V.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),V.length?this.parseChunk(V.shift()):z=!0},this._streamData=B(function(j){try{V.push(typeof j=="string"?j:j.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(V.shift()))}catch(X){this._streamError(X)}},this),this._streamError=B(function(j){this._streamCleanUp(),this._sendError(j)},this),this._streamEnd=B(function(){this._streamCleanUp(),Y=!0,this._streamData("")},this),this._streamCleanUp=B(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function T(D){var V,z,Y,j=Math.pow(2,53),X=-j,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,se=this,te=0,ie=0,re=!1,he=!1,de=[],ue={data:[],errors:[],meta:{}};if(F(D.step)){var Te=D.step;D.step=function(Oe){if(ue=Oe,Ve())Ne();else{if(Ne(),ue.data.length===0)return;te+=Oe.data.length,D.preview&&te>D.preview?z.abort():(ue.data=ue.data[0],Te(ue,se))}}}function ye(Oe){return D.skipEmptyLines==="greedy"?Oe.join("").trim()==="":Oe.length===1&&Oe[0].length===0}function Ne(){return ue&&Y&&(Ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),Y=!1),D.skipEmptyLines&&(ue.data=ue.data.filter(function(Oe){return!ye(Oe)})),Ve()&&function(){if(!ue)return;function Oe(st,lt){F(D.transformHeader)&&(st=D.transformHeader(st,lt)),de.push(st)}if(Array.isArray(ue.data[0])){for(var Ye=0;Ve()&&Ye<ue.data.length;Ye++)ue.data[Ye].forEach(Oe);ue.data.splice(0,1)}else ue.data.forEach(Oe)}(),function(){if(!ue||!D.header&&!D.dynamicTyping&&!D.transform)return ue;function Oe(st,lt){var Ke,et=D.header?{}:[];for(Ke=0;Ke<st.length;Ke++){var Xe=Ke,nt=st[Ke];D.header&&(Xe=Ke>=de.length?"__parsed_extra":de[Ke]),D.transform&&(nt=D.transform(nt,Xe)),nt=we(Xe,nt),Xe==="__parsed_extra"?(et[Xe]=et[Xe]||[],et[Xe].push(nt)):et[Xe]=nt}return D.header&&(Ke>de.length?Ue("FieldMismatch","TooManyFields","Too many fields: expected "+de.length+" fields but parsed "+Ke,ie+lt):Ke<de.length&&Ue("FieldMismatch","TooFewFields","Too few fields: expected "+de.length+" fields but parsed "+Ke,ie+lt)),et}var Ye=1;return!ue.data.length||Array.isArray(ue.data[0])?(ue.data=ue.data.map(Oe),Ye=ue.data.length):ue.data=Oe(ue.data,0),D.header&&ue.meta&&(ue.meta.fields=de),ie+=Ye,ue}()}function Ve(){return D.header&&de.length===0}function we(Oe,Ye){return st=Oe,D.dynamicTypingFunction&&D.dynamicTyping[st]===void 0&&(D.dynamicTyping[st]=D.dynamicTypingFunction(st)),(D.dynamicTyping[st]||D.dynamicTyping)===!0?Ye==="true"||Ye==="TRUE"||Ye!=="false"&&Ye!=="FALSE"&&(function(lt){if(J.test(lt)){var Ke=parseFloat(lt);if(X<Ke&&Ke<j)return!0}return!1}(Ye)?parseFloat(Ye):Q.test(Ye)?new Date(Ye):Ye===""?null:Ye):Ye;var st}function Ue(Oe,Ye,st,lt){var Ke={type:Oe,code:Ye,message:st};lt!==void 0&&(Ke.row=lt),ue.errors.push(Ke)}this.parse=function(Oe,Ye,st){var lt=D.quoteChar||'"';if(D.newline||(D.newline=function(Xe,nt){Xe=Xe.substring(0,1048576);var Se=new RegExp(C(nt)+"([^]*?)"+C(nt),"gm"),Wt=(Xe=Xe.replace(Se,"")).split("\r"),Ht=Xe.split(`
`),zt=1<Ht.length&&Ht[0].length<Wt[0].length;if(Wt.length===1||zt)return`
`;for(var wt=0,Mt=0;Mt<Wt.length;Mt++)Wt[Mt][0]===`
`&&wt++;return wt>=Wt.length/2?`\r
`:"\r"}(Oe,lt)),Y=!1,D.delimiter)F(D.delimiter)&&(D.delimiter=D.delimiter(Oe),ue.meta.delimiter=D.delimiter);else{var Ke=function(Xe,nt,Se,Wt,Ht){var zt,wt,Mt,Et;Ht=Ht||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Jt=0;Jt<Ht.length;Jt++){var jt=Ht[Jt],yi=0,Qt=0,Yi=0;Mt=void 0;for(var Fi=new O({comments:Wt,delimiter:jt,newline:nt,preview:10}).parse(Xe),Tn=0;Tn<Fi.data.length;Tn++)if(Se&&ye(Fi.data[Tn]))Yi++;else{var Ci=Fi.data[Tn].length;Qt+=Ci,Mt!==void 0?0<Ci&&(yi+=Math.abs(Ci-Mt),Mt=Ci):Mt=Ci}0<Fi.data.length&&(Qt/=Fi.data.length-Yi),(wt===void 0||yi<=wt)&&(Et===void 0||Et<Qt)&&1.99<Qt&&(wt=yi,zt=jt,Et=Qt)}return{successful:!!(D.delimiter=zt),bestDelimiter:zt}}(Oe,D.newline,D.skipEmptyLines,D.comments,D.delimitersToGuess);Ke.successful?D.delimiter=Ke.bestDelimiter:(Y=!0,D.delimiter=h.DefaultDelimiter),ue.meta.delimiter=D.delimiter}var et=G(D);return D.preview&&D.header&&et.preview++,V=Oe,z=new O(et),ue=z.parse(V,Ye,st),Ne(),re?{meta:{paused:!0}}:ue||{meta:{paused:!1}}},this.paused=function(){return re},this.pause=function(){re=!0,z.abort(),V=F(D.chunk)?"":V.substring(z.getCharIndex())},this.resume=function(){se.streamer._halted?(re=!1,se.streamer.parseChunk(V,!0)):setTimeout(se.resume,3)},this.aborted=function(){return he},this.abort=function(){he=!0,z.abort(),ue.meta.aborted=!0,F(D.complete)&&D.complete(ue),V=""}}function C(D){return D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(D){var V,z=(D=D||{}).delimiter,Y=D.newline,j=D.comments,X=D.step,J=D.preview,Q=D.fastMode,se=V=D.quoteChar===void 0||D.quoteChar===null?'"':D.quoteChar;if(D.escapeChar!==void 0&&(se=D.escapeChar),(typeof z!="string"||-1<h.BAD_DELIMITERS.indexOf(z))&&(z=","),j===z)throw new Error("Comment character same as delimiter");j===!0?j="#":(typeof j!="string"||-1<h.BAD_DELIMITERS.indexOf(j))&&(j=!1),Y!==`
`&&Y!=="\r"&&Y!==`\r
`&&(Y=`
`);var te=0,ie=!1;this.parse=function(re,he,de){if(typeof re!="string")throw new Error("Input must be a string");var ue=re.length,Te=z.length,ye=Y.length,Ne=j.length,Ve=F(X),we=[],Ue=[],Oe=[],Ye=te=0;if(!re)return Et();if(Q||Q!==!1&&re.indexOf(V)===-1){for(var st=re.split(Y),lt=0;lt<st.length;lt++){if(Oe=st[lt],te+=Oe.length,lt!==st.length-1)te+=Y.length;else if(de)return Et();if(!j||Oe.substring(0,Ne)!==j){if(Ve){if(we=[],Ht(Oe.split(z)),Jt(),ie)return Et()}else Ht(Oe.split(z));if(J&&J<=lt)return we=we.slice(0,J),Et(!0)}}return Et()}for(var Ke=re.indexOf(z,te),et=re.indexOf(Y,te),Xe=new RegExp(C(se)+C(V),"g"),nt=re.indexOf(V,te);;)if(re[te]!==V)if(j&&Oe.length===0&&re.substring(te,te+Ne)===j){if(et===-1)return Et();te=et+ye,et=re.indexOf(Y,te),Ke=re.indexOf(z,te)}else if(Ke!==-1&&(Ke<et||et===-1))Oe.push(re.substring(te,Ke)),te=Ke+Te,Ke=re.indexOf(z,te);else{if(et===-1)break;if(Oe.push(re.substring(te,et)),Mt(et+ye),Ve&&(Jt(),ie))return Et();if(J&&we.length>=J)return Et(!0)}else for(nt=te,te++;;){if((nt=re.indexOf(V,nt+1))===-1)return de||Ue.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:we.length,index:te}),wt();if(nt===ue-1)return wt(re.substring(te,nt).replace(Xe,V));if(V!==se||re[nt+1]!==se){if(V===se||nt===0||re[nt-1]!==se){Ke!==-1&&Ke<nt+1&&(Ke=re.indexOf(z,nt+1)),et!==-1&&et<nt+1&&(et=re.indexOf(Y,nt+1));var Se=zt(et===-1?Ke:Math.min(Ke,et));if(re.substr(nt+1+Se,Te)===z){Oe.push(re.substring(te,nt).replace(Xe,V)),re[te=nt+1+Se+Te]!==V&&(nt=re.indexOf(V,te)),Ke=re.indexOf(z,te),et=re.indexOf(Y,te);break}var Wt=zt(et);if(re.substring(nt+1+Wt,nt+1+Wt+ye)===Y){if(Oe.push(re.substring(te,nt).replace(Xe,V)),Mt(nt+1+Wt+ye),Ke=re.indexOf(z,te),nt=re.indexOf(V,te),Ve&&(Jt(),ie))return Et();if(J&&we.length>=J)return Et(!0);break}Ue.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:we.length,index:te}),nt++}}else nt++}return wt();function Ht(jt){we.push(jt),Ye=te}function zt(jt){var yi=0;if(jt!==-1){var Qt=re.substring(nt+1,jt);Qt&&Qt.trim()===""&&(yi=Qt.length)}return yi}function wt(jt){return de||(jt===void 0&&(jt=re.substring(te)),Oe.push(jt),te=ue,Ht(Oe),Ve&&Jt()),Et()}function Mt(jt){te=jt,Ht(Oe),Oe=[],et=re.indexOf(Y,te)}function Et(jt){return{data:we,errors:Ue,meta:{delimiter:z,linebreak:Y,aborted:ie,truncated:!!jt,cursor:Ye+(he||0)}}}function Jt(){X(Et()),we=[],Ue=[]}},this.abort=function(){ie=!0},this.getCharIndex=function(){return te}}function L(D){var V=D.data,z=c[V.workerId],Y=!1;if(V.error)z.userError(V.error,V.file);else if(V.results&&V.results.data){var j={abort:function(){Y=!0,P(V.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:H,resume:H};if(F(z.userStep)){for(var X=0;X<V.results.data.length&&(z.userStep({data:V.results.data[X],errors:V.results.errors,meta:V.results.meta},j),!Y);X++);delete V.results}else F(z.userChunk)&&(z.userChunk(V.results,j,V.file),delete V.results)}V.finished&&!Y&&P(V.workerId,V.results)}function P(D,V){var z=c[D];F(z.userComplete)&&z.userComplete(V),z.terminate(),delete c[D]}function H(){throw new Error("Not implemented.")}function G(D){if(typeof D!="object"||D===null)return D;var V=Array.isArray(D)?[]:{};for(var z in D)V[z]=G(D[z]);return V}function B(D,V){return function(){D.apply(V,arguments)}}function F(D){return typeof D=="function"}return u&&(r.onmessage=function(D){var V=D.data;if(h.WORKER_ID===void 0&&V&&(h.WORKER_ID=V.workerId),typeof V.input=="string")r.postMessage({workerId:h.WORKER_ID,results:h.parse(V.input,V.config),finished:!0});else if(r.File&&V.input instanceof File||V.input instanceof Object){var z=h.parse(V.input,V.config);z&&r.postMessage({workerId:h.WORKER_ID,results:z,finished:!0})}}),(y.prototype=Object.create(d.prototype)).constructor=y,(g.prototype=Object.create(d.prototype)).constructor=g,(b.prototype=Object.create(b.prototype)).constructor=b,(A.prototype=Object.create(d.prototype)).constructor=A,h})},155:He=>{var Ae=He.exports={},Ce,_e;function x(){throw new Error("setTimeout has not been defined")}function N(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ce=setTimeout:Ce=x}catch(b){Ce=x}try{typeof clearTimeout=="function"?_e=clearTimeout:_e=N}catch(b){_e=N}})();function r(b){if(Ce===setTimeout)return setTimeout(b,0);if((Ce===x||!Ce)&&setTimeout)return Ce=setTimeout,setTimeout(b,0);try{return Ce(b,0)}catch(A){try{return Ce.call(null,b,0)}catch(T){return Ce.call(this,b,0)}}}function m(b){if(_e===clearTimeout)return clearTimeout(b);if((_e===N||!_e)&&clearTimeout)return _e=clearTimeout,clearTimeout(b);try{return _e(b)}catch(A){try{return _e.call(null,b)}catch(T){return _e.call(this,b)}}}var u=[],c=!1,p,h=-1;function l(){!c||!p||(c=!1,p.length?u=p.concat(u):h=-1,u.length&&d())}function d(){if(!c){var b=r(l);c=!0;for(var A=u.length;A;){for(p=u,u=[];++h<A;)p&&p[h].run();h=-1,A=u.length}p=null,c=!1,m(b)}}Ae.nextTick=function(b){var A=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)A[T-1]=arguments[T];u.push(new y(b,A)),u.length===1&&!c&&r(d)};function y(b,A){this.fun=b,this.array=A}y.prototype.run=function(){this.fun.apply(null,this.array)},Ae.title="browser",Ae.browser=!0,Ae.env={},Ae.argv=[],Ae.version="",Ae.versions={};function g(){}Ae.on=g,Ae.addListener=g,Ae.once=g,Ae.off=g,Ae.removeListener=g,Ae.removeAllListeners=g,Ae.emit=g,Ae.prependListener=g,Ae.prependOnceListener=g,Ae.listeners=function(b){return[]},Ae.binding=function(b){throw new Error("process.binding is not supported")},Ae.cwd=function(){return"/"},Ae.chdir=function(b){throw new Error("process.chdir is not supported")},Ae.umask=function(){return 0}},829:function(He,Ae){var Ce,_e,x;(function(N,r){"use strict";_e=[],Ce=r,x=typeof Ce=="function"?Ce.apply(Ae,_e):Ce,x!==void 0&&(He.exports=x)})(this,function(){"use strict";function N(T){return!isNaN(parseFloat(T))&&isFinite(T)}function r(T){return T.charAt(0).toUpperCase()+T.substring(1)}function m(T){return function(){return this[T]}}var u=["isConstructor","isEval","isNative","isToplevel"],c=["columnNumber","lineNumber"],p=["fileName","functionName","source"],h=["args"],l=["evalOrigin"],d=u.concat(c,p,h,l);function y(T){if(T)for(var C=0;C<d.length;C++)T[d[C]]!==void 0&&this["set"+r(d[C])](T[d[C]])}y.prototype={getArgs:function(){return this.args},setArgs:function(T){if(Object.prototype.toString.call(T)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=T},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(T){if(T instanceof y)this.evalOrigin=T;else if(T instanceof Object)this.evalOrigin=new y(T);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var T=this.getFileName()||"",C=this.getLineNumber()||"",O=this.getColumnNumber()||"",L=this.getFunctionName()||"";return this.getIsEval()?T?"[eval] ("+T+":"+C+":"+O+")":"[eval]:"+C+":"+O:L?L+" ("+T+":"+C+":"+O+")":T+":"+C+":"+O}},y.fromString=function(C){var O=C.indexOf("("),L=C.lastIndexOf(")"),P=C.substring(0,O),H=C.substring(O+1,L).split(","),G=C.substring(L+1);if(G.indexOf("@")===0)var B=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(G,""),F=B[1],D=B[2],V=B[3];return new y({functionName:P,args:H||void 0,fileName:F,lineNumber:D||void 0,columnNumber:V||void 0})};for(var g=0;g<u.length;g++)y.prototype["get"+r(u[g])]=m(u[g]),y.prototype["set"+r(u[g])]=function(T){return function(C){this[T]=Boolean(C)}}(u[g]);for(var b=0;b<c.length;b++)y.prototype["get"+r(c[b])]=m(c[b]),y.prototype["set"+r(c[b])]=function(T){return function(C){if(!N(C))throw new TypeError(T+" must be a Number");this[T]=Number(C)}}(c[b]);for(var A=0;A<p.length;A++)y.prototype["get"+r(p[A])]=m(p[A]),y.prototype["set"+r(p[A])]=function(T){return function(C){this[T]=String(C)}}(p[A]);return y})},379:He=>{"use strict";var Ae=[];function Ce(N){for(var r=-1,m=0;m<Ae.length;m++)if(Ae[m].identifier===N){r=m;break}return r}function _e(N,r){for(var m={},u=[],c=0;c<N.length;c++){var p=N[c],h=r.base?p[0]+r.base:p[0],l=m[h]||0,d="".concat(h," ").concat(l);m[h]=l+1;var y=Ce(d),g={css:p[1],media:p[2],sourceMap:p[3],supports:p[4],layer:p[5]};if(y!==-1)Ae[y].references++,Ae[y].updater(g);else{var b=x(g,r);r.byIndex=c,Ae.splice(c,0,{identifier:d,updater:b,references:1})}u.push(d)}return u}function x(N,r){var m=r.domAPI(r);m.update(N);var u=function(p){if(p){if(p.css===N.css&&p.media===N.media&&p.sourceMap===N.sourceMap&&p.supports===N.supports&&p.layer===N.layer)return;m.update(N=p)}else m.remove()};return u}He.exports=function(N,r){r=r||{},N=N||[];var m=_e(N,r);return function(c){c=c||[];for(var p=0;p<m.length;p++){var h=m[p],l=Ce(h);Ae[l].references--}for(var d=_e(c,r),y=0;y<m.length;y++){var g=m[y],b=Ce(g);Ae[b].references===0&&(Ae[b].updater(),Ae.splice(b,1))}m=d}}},569:He=>{"use strict";var Ae={};function Ce(x){if(typeof Ae[x]=="undefined"){var N=document.querySelector(x);if(window.HTMLIFrameElement&&N instanceof window.HTMLIFrameElement)try{N=N.contentDocument.head}catch(r){N=null}Ae[x]=N}return Ae[x]}function _e(x,N){var r=Ce(x);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(N)}He.exports=_e},216:He=>{"use strict";function Ae(Ce){var _e=document.createElement("style");return Ce.setAttributes(_e,Ce.attributes),Ce.insert(_e,Ce.options),_e}He.exports=Ae},565:(He,Ae,Ce)=>{"use strict";function _e(x){var N=Ce.nc;N&&x.setAttribute("nonce",N)}He.exports=_e},795:He=>{"use strict";function Ae(x,N,r){var m="";r.supports&&(m+="@supports (".concat(r.supports,") {")),r.media&&(m+="@media ".concat(r.media," {"));var u=typeof r.layer!="undefined";u&&(m+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),m+=r.css,u&&(m+="}"),r.media&&(m+="}"),r.supports&&(m+="}");var c=r.sourceMap;c&&typeof btoa!="undefined"&&(m+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(c))))," */")),N.styleTagTransform(m,x,N.options)}function Ce(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x)}function _e(x){var N=x.insertStyleElement(x);return{update:function(m){Ae(N,x,m)},remove:function(){Ce(N)}}}He.exports=_e},589:He=>{"use strict";function Ae(Ce,_e){if(_e.styleSheet)_e.styleSheet.cssText=Ce;else{for(;_e.firstChild;)_e.removeChild(_e.firstChild);_e.appendChild(document.createTextNode(Ce))}}He.exports=Ae},378:(He,Ae,Ce)=>{var _e=Ce(424).RBTree;function x(c,p,h){this.discrete=c===!1,this.delta=c||.01,this.K=p===void 0?25:p,this.CX=h===void 0?1.1:h,this.centroids=new _e(N),this.nreset=0,this.reset()}x.prototype.reset=function(){this.centroids.clear(),this.n=0,this.nreset+=1,this.last_cumulate=0},x.prototype.size=function(){return this.centroids.size},x.prototype.toArray=function(c){var p=[];return c?(this._cumulate(!0),this.centroids.each(function(h){p.push(h)})):this.centroids.each(function(h){p.push({mean:h.mean,n:h.n})}),p},x.prototype.summary=function(){var c=this.discrete?"exact ":"approximating ",p=[c+this.n+" samples using "+this.size()+" centroids","min = "+this.percentile(0),"Q1  = "+this.percentile(.25),"Q2  = "+this.percentile(.5),"Q3  = "+this.percentile(.75),"max = "+this.percentile(1)];return p.join(`
`)};function N(c,p){return c.mean>p.mean?1:c.mean<p.mean?-1:0}function r(c,p){return c.mean_cumn-p.mean_cumn}x.prototype.push=function(c,p){p=p||1,c=Array.isArray(c)?c:[c];for(var h=0;h<c.length;h++)this._digest(c[h],p)},x.prototype.push_centroid=function(c){c=Array.isArray(c)?c:[c];for(var p=0;p<c.length;p++)this._digest(c[p].mean,c[p].n)},x.prototype._cumulate=function(c){if(!(this.n===this.last_cumulate||!c&&this.CX&&this.CX>this.n/this.last_cumulate)){var p=0;this.centroids.each(function(h){h.mean_cumn=p+h.n/2,p=h.cumn=p+h.n}),this.n=this.last_cumulate=p}},x.prototype.find_nearest=function(c){if(this.size()===0)return null;var p=this.centroids.lowerBound({mean:c}),h=p.data()===null?p.prev():p.data();if(h.mean===c||this.discrete)return h;var l=p.prev();return l&&Math.abs(l.mean-c)<Math.abs(h.mean-c)?l:h},x.prototype._new_centroid=function(c,p,h){var l={mean:c,n:p,cumn:h};return this.centroids.insert(l),this.n+=p,l},x.prototype._addweight=function(c,p,h){p!==c.mean&&(c.mean+=h*(p-c.mean)/(c.n+h)),c.cumn+=h,c.mean_cumn+=h/2,c.n+=h,this.n+=h},x.prototype._digest=function(c,p){var h=this.centroids.min(),l=this.centroids.max(),d=this.find_nearest(c);if(d&&d.mean===c)this._addweight(d,c,p);else if(d===h)this._new_centroid(c,p,0);else if(d===l)this._new_centroid(c,p,this.n);else if(this.discrete)this._new_centroid(c,p,d.cumn);else{var y=d.mean_cumn/this.n,g=Math.floor(4*this.n*this.delta*y*(1-y));g-d.n>=p?this._addweight(d,c,p):this._new_centroid(c,p,d.cumn)}this._cumulate(!1),!this.discrete&&this.K&&this.size()>this.K/this.delta&&this.compress()},x.prototype.bound_mean=function(c){var p=this.centroids.upperBound({mean:c}),h=p.prev(),l=h.mean===c?h:p.next();return[h,l]},x.prototype.p_rank=function(c){var p=Array.isArray(c)?c:[c],h=p.map(this._p_rank,this);return Array.isArray(c)?h:h[0]},x.prototype._p_rank=function(c){if(this.size()!==0){{if(c<this.centroids.min().mean)return 0;if(c>this.centroids.max().mean)return 1}this._cumulate(!0);var p=this.bound_mean(c),h=p[0],l=p[1];if(this.discrete)return h.cumn/this.n;var d=h.mean_cumn;return h!==l&&(d+=(c-h.mean)*(l.mean_cumn-h.mean_cumn)/(l.mean-h.mean)),d/this.n}},x.prototype.bound_mean_cumn=function(c){this.centroids._comparator=r;var p=this.centroids.upperBound({mean_cumn:c});this.centroids._comparator=N;var h=p.prev(),l=h&&h.mean_cumn===c?h:p.next();return[h,l]},x.prototype.percentile=function(c){var p=Array.isArray(c)?c:[c],h=p.map(this._percentile,this);return Array.isArray(c)?h:h[0]},x.prototype._percentile=function(c){if(this.size()!==0){this._cumulate(!0);var p=this.n*c,h=this.bound_mean_cumn(p),l=h[0],d=h[1];return d===l||l===null||d===null?(l||d).mean:this.discrete?p<=l.cumn?l.mean:d.mean:l.mean+(p-l.mean_cumn)*(d.mean-l.mean)/(d.mean_cumn-l.mean_cumn)}};function m(c){var p=Math.floor(Math.random()*c.length);return c.splice(p,1)[0]}x.prototype.compress=function(){if(!this.compressing){var c=this.toArray();for(this.reset(),this.compressing=!0;c.length>0;)this.push_centroid(m(c));this._cumulate(!0),this.compressing=!1}};function u(c){this.config=c||{},this.mode=this.config.mode||"auto",x.call(this,this.mode==="cont"?c.delta:!1),this.digest_ratio=this.config.ratio||.9,this.digest_thresh=this.config.thresh||1e3,this.n_unique=0}u.prototype=Object.create(x.prototype),u.prototype.constructor=u,u.prototype.push=function(c){x.prototype.push.call(this,c),this.check_continuous()},u.prototype._new_centroid=function(c,p,h){this.n_unique+=1,x.prototype._new_centroid.call(this,c,p,h)},u.prototype._addweight=function(c,p,h){c.n===1&&(this.n_unique-=1),x.prototype._addweight.call(this,c,p,h)},u.prototype.check_continuous=function(){return this.mode!=="auto"||this.size()<this.digest_thresh?!1:this.n_unique/this.size()>this.digest_ratio?(this.mode="cont",this.discrete=!1,this.delta=this.config.delta||.01,this.compress(),!0):!1},He.exports={TDigest:x,Digest:u}},480:()=>{}},Di={};function ft(He){var Ae=Di[He];if(Ae!==void 0)return Ae.exports;var Ce=Di[He]={id:He,loaded:!1,exports:{}};return bn[He].call(Ce.exports,Ce,Ce.exports,ft),Ce.loaded=!0,Ce.exports}ft.n=He=>{var Ae=He&&He.__esModule?()=>He.default:()=>He;return ft.d(Ae,{a:Ae}),Ae},ft.d=(He,Ae)=>{for(var Ce in Ae)ft.o(Ae,Ce)&&!ft.o(He,Ce)&&Object.defineProperty(He,Ce,{enumerable:!0,get:Ae[Ce]})},ft.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(He){if(typeof window=="object")return window}}(),ft.o=(He,Ae)=>Object.prototype.hasOwnProperty.call(He,Ae),ft.r=He=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(He,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(He,"__esModule",{value:!0})},ft.nmd=He=>(He.paths=[],He.children||(He.children=[]),He),ft.nc=void 0;var md={};(()=>{"use strict";var He={};ft.r(He),ft.d(He,{browserLanguage:()=>al,browserLanguageItem:()=>gs,browserLanguageKey:()=>va,closeOverlay:()=>rl,firebaseContext:()=>gn,gameManagerContext:()=>fi,isMusicActive:()=>Lo,isSettingsOverlayVisible:()=>mn,isSoundActive:()=>vi,isToggleLocked:()=>_n,languageList:()=>qn,languageStrings:()=>Xi,lastSelectedAdditionalLanguage:()=>Jn,levelManagerContext:()=>Gs,mainMenuContext:()=>sn,progressManagerContext:()=>dr,scale:()=>fr,selectedLanguage:()=>rn,selectedLayout:()=>Kn,setBrowserLanguageItem:()=>ol,setFadeOutCallback:()=>pr,setFirebaseContext:()=>lr,setGameManagerContext:()=>sl,setIsMusicActive:()=>Mo,setIsSoundActive:()=>ur,setIsToggleLocked:()=>Yn,setLanguageList:()=>gr,setLanguageStrings:()=>ae,setLastSelectedAdditionalLanguage:()=>an,setLevelManagerContext:()=>Ro,setMainMenuContext:()=>_i,setOverlayVisible:()=>Fr,setProgressManagerContext:()=>ya,setScale:()=>No,setSelectedLanguage:()=>ms,setSelectedLayout:()=>Ki,setSettingsOverlayVisibility:()=>cr,setWordBoardContext:()=>nl,settingsOverlayTransitionState:()=>Xn,wordBoardContext:()=>jn});class Ae{constructor(s){this.log=[],this.isVisible=!0,this.gameObjectsMap=new Map,this.soundsMap=new Map,this.texturesToLoad=new Set,this.atlasesToLoad=new Set,this.bitmapFontsToLoad=new Set,this.selectedSounds=[],this.soundState=new Map,this.isTextureLoadComplete=!0,this.isSoundLoadComplete=!0,this.update(s),this.drawReferenceRectangle=!1}requireParameters(s,o){let v=new Set;if(o.forEach(S=>{_.has(s,S)||v.add(S)}),v.size>0)throw{message:"missing parameters",object:JSON.stringify(Array.from(v))}}set Scene(s){this.scene=s}set IsVisible(s){this.isVisible=s,_.isNil(this.scene)||this.scene.components.forEach(o=>{o.parentId===this.componentId&&(o.IsVisible=s,o.render())})}get LeftAbsoluteX(){let s;if(_.isNil(this.parent)?s=this.RelativeX*this.BaseWidth-.5*this.AbsoluteWidth+this.BaseLeftX:s=this.parent.LeftAbsoluteX+this.RelativeX*this.parent.AbsoluteWidth-.5*this.AbsoluteWidth,Number.isNaN(s))throw"value is NaN";return s}get TopAbsoluteY(){let s;if(_.isNil(this.parent)?s=this.RelativeY*this.scene.game.canvas.height-.5*this.AbsoluteHeight:s=this.parent.TopAbsoluteY+this.RelativeY*this.parent.AbsoluteHeight-.5*this.AbsoluteHeight,Number.isNaN(s))throw"value is NaN";return s}get AspectRatio(){return Math.min(this.scene.game.canvas.width,this.scene.game.canvas.height)/Math.max(this.scene.game.canvas.width,this.scene.game.canvas.height)}get BaseWidth(){let s;if(_.has(this,"options.shouldForcePortraitMode")&&this.options.shouldForcePortraitMode&&this.scene.game.canvas.width>=this.scene.game.canvas.height)s=this.scene.game.canvas.height*(this.scene.game.canvas.height/this.scene.game.canvas.width);else{const o=this.scene.game.canvas.width/667,v=this.scene.game.canvas.height/375;s=v<=o?667*v:this.scene.game.canvas.width}return s}get BaseLeftX(){return(this.scene.game.canvas.width-this.BaseWidth)*.5}get AbsoluteWidth(){let s;if(_.isNil(this.parent)?s=this.RelativeWidth*this.BaseWidth:s=this.RelativeWidth*this.parent.AbsoluteWidth,Number.isNaN(s))throw"value is NaN";return s}get AbsoluteHeight(){let s;if(_.isNil(this.parent)?s=this.RelativeHeight*this.scene.game.canvas.height:s=this.RelativeHeight*this.parent.AbsoluteHeight,Number.isNaN(s))throw"value is NaN";return s}get CenterAbsoluteX(){let s;if(_.isNil(this.parent)?s=this.RelativeX*this.BaseWidth:s=this.parent.LeftAbsoluteX+this.RelativeX*this.parent.AbsoluteWidth,Number.isNaN(s))throw"value is NaN";return s}get CenterAbsoluteY(){let s;if(_.isNil(this.parent)?s=this.RelativeY*this.scene.game.canvas.height:s=this.parent.TopAbsoluteY+this.RelativeY*this.parent.AbsoluteHeight,Number.isNaN(s))throw"value is NaN";return s}get RelativeX(){const s=_.get(this,`position.${this.scene.getOrientation()}.x`);if(_.isNil(s))throw"could not get relative x";return s}get RelativeY(){const s=_.get(this,`position.${this.scene.getOrientation()}.y`);if(_.isNil(s))throw"could not get relative y";return s}get RelativeWidth(){const s=_.get(this,`size.${this.scene.getOrientation()}.width`);if(_.isNil(s))throw"could not get relative width";return s}get RelativeHeight(){const s=_.get(this,`size.${this.scene.getOrientation()}.height`);if(_.isNil(s))throw"could not get relative height";return s}textureLoadComplete(){if(this.isTextureLoadComplete=!0,_.isNil(this.componentId))throw{message:"this component's componentId is nil",component:this};console.debug(`${this.componentId} : All textures loaded on component`),_.hasIn(this,"onTexturesLoaded")&&this.onTexturesLoaded({componentId:this.componentId})}textureLoadHandler(s){this.scene.texturesSentToTextureManager.delete(s),this.texturesToLoad.delete(s);const o=Array.from(this.texturesToLoad).every(v=>!this.scene.texturesSentToTextureManager.has(v));this.texturesToLoad.size===0&&o&&this.textureLoadComplete()}loadTextures(){this.isTextureLoadComplete=!1;let s;if(_.has(this,"selectedImages"))s=this.selectedImages;else throw{message:"this component has no selectedImages",component:this};if(Object.entries(s).every(([v,S])=>!S.some(E=>!this.scene.textures.exists(E.key)))){this.textureLoadComplete();return}Object.entries(s).forEach(([v,S])=>{S.forEach(E=>{if(_.has(E,"data"))this.texturesToLoad.add(E.key);else if(_.has(E,"filePath")){const k=E.filePath.split(".")[0];this.texturesToLoad.add(k)}})}),Object.entries(s).forEach(([v,S])=>{S.forEach(E=>{if(_.has(E,"data"))!this.scene.texturesSentToTextureManager.has(E.key)&&!this.scene.textures.exists(E.key)?(this.scene.texturesSentToTextureManager.add(E.key),this.scene.textures.addBase64(E.key,E.data),this.scene.textures.on("onerror",R=>{throw{message:"this texture cannot be loaded",textureKey:R}}),this.scene.textures.on("onload",(R,k)=>{E.key===R&&this.textureLoadHandler(E.key)})):this.scene.texturesSentToTextureManager.has(E.key)&&!this.scene.textures.exists(E.key)?this.scene.textures.on("onload",(R,k)=>{E.key===R&&this.textureLoadHandler(E.key)}):this.textureLoadHandler(E.key);else if(_.has(E,"filePath")){const k=E.filePath.split(".")[0];E.key=k,!this.scene.texturesSentToTextureManager.has(k)&&!this.scene.textures.exists(k)?(this.scene.texturesSentToTextureManager.add(k),this.scene.load.image(k,"./assets/"+E.filePath),this.scene.load.on("loaderror",W=>{const K=W.src.split("/"),q=K[K.length-1];E.filePath===q&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedImages."+v,E.filePath),console.warn({message:"this file cannot be loaded",file:W}))}),this.scene.load.on("filecomplete-image-"+k,(W,K,q)=>{this.textureLoadHandler(k)})):this.scene.textures.exists(k)?this.textureLoadHandler(k):this.scene.load.on("filecomplete-image-"+k,(W,K,q)=>{this.textureLoadHandler(k)}),this.scene.load.start()}else throw{message:"this texture object does not have data or file property",object:this}})})}loadAtlases(){this.isAtlasesLoadComplete=!1;let s;if(_.has(this,"selectedAtlases"))s=this.selectedAtlases;else throw{message:"this component has no selectedAtlases",component:this};let o=!0;const v=Object.values(s);for(let R=0;R<v.length&&o!==!1;R++){const k=_.filter(v[R],W=>W.variant==="image");for(let W=0;W<k.length;W++){if(_.has(k[W],"filePath")){const q=k[W].filePath.split(".")[0];k[W].key=q}if(this.scene.textures.exists(k[W].key))o=!0;else{o=!1;break}}}if(o)return this.atlasesLoadComplete();Object.entries(s).forEach(([R,k])=>{const W=_.filter(k,K=>K.variant==="image");for(let K=0;K<W.length;K++)if(_.has(W[K],"data"))this.atlasesToLoad.add(W[K].key);else if(_.has(W[K],"filePath")){const $=W[K].filePath.split(".")[0];W[K].key=$,this.atlasesToLoad.add($)}});let S=!1;Object.entries(s).forEach(([R,k])=>{const W=_.filter(k,q=>q.variant==="image"),K=_.filter(k,q=>q.variant==="JSON");for(let q=0;q<W.length;q++)if(_.has(W[q],"data"))if(!this.scene.atlasesSentToTextureManager.has(W[q].key)&&!this.scene.textures.exists(W[q].key)){let $=new Image;$.onload=()=>{this.scene.textures.addAtlas(W[q].key,$,K[q].JSON)},$.src=W[q].data,this.scene.textures.on("addtexture",(ne,oe)=>{W[q].key===ne&&this.atlasLoadHandler(W[q].key)})}else this.scene.atlasesSentToTextureManager.has(W[q].key)&&!this.scene.textures.exists(W[q].key)?this.scene.textures.on("addtexture",($,ne)=>{W[q].key===$&&this.atlasLoadHandler(W[q].key)}):this.scene.textures.on("addtexture",($,ne)=>{W[q].key===$&&this.atlasLoadHandler(W[q].key)});else if(_.has(W[q],"filePath"))if(S=!0,!this.scene.atlasesSentToTextureManager.has(W[q].key)&&!this.scene.textures.exists(W[q].key)){if(this.scene.atlasesSentToTextureManager.add(W[q].key),!_.isNil(W[q])&&!_.isNil(K[q]))this.scene.load.atlas({key:W[q].key,textureURL:"./assets/"+W[q].filePath,atlasURL:"./assets/"+K[q].filePath});else throw{message:"this animation set does not have image or json file",key:W[q].key};this.scene.load.on("loaderror",$=>{const ne=$.src.split("/"),oe=ne[ne.length-1];W[q].filePath===oe&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedAtlases."+R,W[q].filePath),console.warn({message:"this file cannot be loaded",file:$})),K[q].filePath===oe&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedAtlases."+R,K[q].filePath),console.warn({message:"this file cannot be loaded",file:$}))}),this.scene.load.on("filecomplete",$=>{$===W[q].key&&this.atlasLoadHandler(W[q].key)})}else this.scene.textures.exists(W[q].key)?this.atlasLoadHandler(W[q].key):this.scene.load.on("filecomplete",$=>{$===W[q].key&&this.atlasLoadHandler(W[q].key)});else throw{message:"this atlas object does not have image or JSON property",object:this}});const E=Array.from(this.atlasesToLoad).every(R=>!this.scene.atlasesSentToTextureManager.has(R));this.atlasesToLoad.size===0&&E&&this.atlasesLoadComplete(),S&&this.scene.load.start()}atlasLoadHandler(s){this.scene.atlasesSentToTextureManager.delete(s),this.atlasesToLoad.delete(s);const o=Array.from(this.atlasesToLoad).every(v=>!this.scene.atlasesSentToTextureManager.has(v));this.atlasesToLoad.size===0&&o&&this.atlasesLoadComplete()}atlasesLoadComplete(){this.isAtlasesLoadComplete=!0}loadSounds(){if(this.scene.platformSetting.isSoundSupported===!1){this.soundLoadComplete();return}if(this.isSoundLoadComplete=!1,Object.entries(this.selectedSounds).forEach(([v,S])=>{S.forEach(E=>{if(_.has(E,"filePath")){const k=E.filePath.split(".")[0];E.key=k,E.gameObjectName=v}})}),Object.entries(this.selectedSounds).every(([v,S])=>this.soundState.get(S[0].key)==="loaded"))return this.soundLoadComplete();const o=Object.values(this.selectedSounds).map(v=>v[0]);o.forEach((v,S,E)=>{if(this.soundState.get(v.key)==="loaded")this.scene.soundsSentToSoundManager.delete(v.key),o.every((k,W,K)=>this.soundState.get(k.key)==="loaded")&&this.soundLoadComplete();else if(this.soundState.get(v.key)!=="loading"){if(this.soundState.set(v.key,"loading"),_.has(v,"data"))!this.scene.soundsSentToSoundManager.has(v.key)&&_.isNil(this.scene.sound.get(v.key))?(this.scene.soundsSentToSoundManager.add(v.key),this.scene.sound.decodeAudio(v.key,v.data),this.scene.sound.on("decoded",R=>{R===v.key&&(this.soundState.set(R,"loaded"),this.scene.soundsSentToSoundManager.delete(R),o.every((W,K,q)=>this.soundState.get(W.key)==="loaded")&&this.soundLoadComplete())})):this.scene.soundsSentToSoundManager.has(v.key)&&this.scene.sound.on("decoded",R=>{R===v.key&&(this.soundState.set(R,"loaded"),this.scene.soundsSentToSoundManager.delete(R),o.every((W,K,q)=>this.soundState.get(W.key)==="loaded")&&this.soundLoadComplete())});else if(_.has(v,"filePath")){if(!_.isNil(this.scene.sound.get(v.key))){this.soundState.set(v.key,"loaded"),this.scene.soundsSentToSoundManager.delete(v.key),o.every((k,W,K)=>this.soundState.get(k.key)==="loaded")&&this.soundLoadComplete();return}!this.scene.soundsSentToSoundManager.has(v.key)&&_.isNil(this.scene.sound.get(v.key))?(this.scene.soundsSentToSoundManager.add(v.key),this.scene.load.audio(v.key,"./assets/"+v.filePath),this.scene.load.on("loaderror",R=>{const k=R.src.split("/"),W=k[k.length-1];v.filePath===W&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedSounds."+v.gameObjectName,v.filePath),console.warn({message:"this file cannot be loaded",file:R}))}),this.scene.load.on("filecomplete-audio-"+v.key,()=>{this.soundState.set(v.key,"loaded"),this.scene.soundsSentToSoundManager.delete(v.key),o.every((k,W,K)=>this.soundState.get(k.key)==="loaded")&&this.soundLoadComplete()}),this.scene.load.start()):this.scene.soundsSentToSoundManager.has(v.key)&&this.scene.load.on("filecomplete-audio-"+v.key,()=>{this.soundState.set(v.key,"loaded"),this.scene.soundsSentToSoundManager.delete(v.key),o.every((k,W,K)=>this.soundState.get(k.key)==="loaded")&&this.soundLoadComplete()})}}})}soundLoadComplete(){this.isSoundLoadComplete=!0}loadBitmapFonts(){this.isBitmapFontsLoadComplete=!1;let s;if(_.has(this,"selectedBitmapFonts"))s=this.selectedBitmapFonts;else throw{message:"this component has no selectedBitmapFonts",component:this};let o=!0;const v=Object.values(s);for(let E=0;E<v.length&&o!==!1;E++){const R=_.filter(v[E],k=>k.variant==="image");for(let k=0;k<R.length;k++){if(_.has(R[k],"filePath")){const K=R[k].filePath.split(".")[0];R[k].key=K}if(this.scene.textures.exists(R[k].key))o=!0;else{o=!1;break}}}if(o)return this.bitmapFontsLoadComplete();Object.entries(s).forEach(([E,R])=>{const k=_.filter(R,W=>W.variant==="image");for(let W=0;W<k.length;W++)if(_.has(k[W],"data"))this.bitmapFontsToLoad.add(k[W].key);else if(_.has(k[W],"filePath")){const q=k[W].filePath.split(".")[0];k[W].key=q,this.bitmapFontsToLoad.add(q)}});let S=!1;Object.entries(s).forEach(([E,R])=>{const k=_.filter(R,K=>K.variant==="image"),W=_.filter(R,K=>K.variant==="XML");for(let K=0;K<k.length;K++)if(_.has(k[K],"data"))if(!this.scene.bitmapFontsSentToTextureManager.has(k[K].key)&&!this.scene.textures.exists(k[K].key)){this.scene.bitmapFontsSentToTextureManager.add(k[K].key);let q=this.scene.textures.addBase64(k[K].key,k[K].data),$=Phaser.DOM.ParseXML(atob(W[K].XML.split("base64,")[1])),ne=$.getElementsByTagName("kernings")[0];$.documentElement.removeChild(ne);let oe=Phaser.GameObjects.BitmapText.ParseXMLBitmapFont($,this.scene.textures.getFrame(k[K].key),0,0,q);this.scene.load.cacheManager.bitmapFont.add(k[K].key,{data:oe,texture:k[K].key,frame:null}),this.scene.textures.on("addtexture",(ce,me)=>{k[K].key===ce&&this.bitmapFontLoadHandler(k[K].key)})}else this.scene.bitmapFontsSentToTextureManager.has(k[K].key)&&!this.scene.textures.exists(k[K].key)?this.scene.textures.on("addtexture",(q,$)=>{k[K].key===q&&this.bitmapFontLoadHandler(k[K].key)}):this.scene.textures.on("addtexture",(q,$)=>{k[K].key===q&&this.bitmapFontLoadHandler(k[K].key)});else if(_.has(k[K],"filePath"))if(S=!0,!this.scene.bitmapFontsSentToTextureManager.has(k[K].key)&&!this.scene.textures.exists(k[K].key)){if(this.scene.bitmapFontsSentToTextureManager.add(k[K].key),!_.isNil(k[K])&&!_.isNil(W[K]))this.scene.load.bitmapFont(k[K].key,"./assets/"+k[K].filePath,"./assets/"+W[K].filePath);else throw{message:"this animation set does not have image or json file",key:k[K].key};this.scene.load.on("loaderror",q=>{const $=q.src.split("/"),ne=$[$.length-1];k[K].filePath===ne&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedBitmapFonts."+E,k[K].filePath),console.warn({message:"this file cannot be loaded",file:q})),W[K].file===ne&&(this.scene.fileLoadErrorHandler(this.componentId+".selectedBitmapFonts."+E,W[K].filePath),console.warn({message:"this file cannot be loaded",file:q}))}),this.scene.load.on("complete",()=>{this.bitmapFontLoadHandler(k[K].key)})}else this.scene.textures.exists(k[K].key)?this.bitmapFontLoadHandler(k[K].key):this.scene.load.on("complete",()=>{this.bitmapFontLoadHandler(k[K].key)});else throw{message:"this bitmapFont object does not have image or xml property",object:this}}),S&&this.scene.load.start()}bitmapFontLoadHandler(s){this.scene.bitmapFontsSentToTextureManager.delete(s),this.bitmapFontsToLoad.delete(s);const o=Array.from(this.bitmapFontsToLoad).every(v=>!this.scene.bitmapFontsSentToTextureManager.has(v));this.bitmapFontsToLoad.size===0&&o&&this.bitmapFontsLoadComplete()}bitmapFontsLoadComplete(){this.isBitmapFontsLoadComplete=!0}renderReferenceRectangle(s=65280){let o;_.isNil(this.gameObjectsMap.get("referenceRectangle"))?(o=this.scene.add.graphics(),this.gameObjectsMap.set("referenceRectangle",o)):(o=this.gameObjectsMap.get("referenceRectangle"),o.clear()),o.lineStyle(5,s,1),o.strokeRect(this.LeftAbsoluteX,this.TopAbsoluteY,this.AbsoluteWidth,this.AbsoluteHeight)}render(){console.debug(`${this.componentId} : is rendering`)}onReady(){let s=_.get(this,"scene","None");console.debug(`${this.componentId} : is ready scene: `,this.scene)}load(){if(!_.has(this,"scene"))throw{message:"component has no scene",component:this};if(_.has(this,"parentId")){if(!_.hasIn(this,"scene.components"))throw{message:"scene doesn't have components",scene:this.scene};this.parent=this.scene.components.get(this.parentId)}}update(s){if(Object.entries(s).forEach(([o,v])=>{_.set(this,o,v),this.log.push({key:o,value:v,timestamp:new Date})}),_.has(s,"textures")){let o=new Set;s.textures.forEach(v=>{o.add(v.key)}),this.texturesToLoad=o}}getGameObjectByName(s){const o=this.scene.children.getByName(s);return _.isNil(o)?null:o}}const Ce=new Audio("assets/sound/click.mp3"),_e=375,x=667,N={LANDSCAPE_ABS_WIDTH:x/_e,PORTRAIT_ABS_HEIGHT:_e/x},r=1.8,m=-120,u={VoyageText:"VoyageText",LevelText:"LevelText"},c=-650,p=c-114,h=c+114;class l extends Ae{constructor(s){super(s),super.update(s),this.drawReferenceRectangle=!1,this.active=!0,this.eventsEnabled=!0,this.commonAssetsLoaderContext=null,this.fortuneWheelContext=null,this.mainMenuBackgroundContext=null,this.stringsManagerContext=null,this.settingsContext=null,this.uiStateModule=null,this.threeSliceFrameNames=["left","center","right"],this.container=null,this.containerObjects=[],this.mainLogo=null,this.mainLogoRussian=null,this.voyageCircle=null,this.buttonContainer=null,this.buttonContainerPosition={x:.5,y:.65},this.buttonFrames=[],this.buttonColor=5931987,this.buttonText=null,this.buttonSpacing=0,this.initialTweensRendered=!1,this.birdAnimTween=null,this.birdAnimFrames=[],this.bgBirdObjects=[],this.voyageCircleLevelText=null,this.voyageCircleLabelText=null}load(){super.load(),this.loadAtlases()}initOnComponentsReady(s,o,v,S,E,R){if(this.commonAssetsLoaderContext=s,this.fortuneWheelContext=o,this.mainMenuBackgroundContext=v,this.stringsManagerContext=S,this.settingsContext=E,this.uiStateModule=R,!_.isNil(this.container))return;this.parseStrings(),this.container=this.scene.add.container(0,0),this.addSlicedFrames(this.commonAssetsLoaderContext.selectedImages.whiteButton[0].key,this.commonAssetsLoaderContext.whiteButtonEdgeMultiplier,this.commonAssetsLoaderContext.whiteButtonCenterMultiplier),this.mainLogo=this.scene.add.image(0,0,this.commonAssetsLoaderContext.selectedImages.mainLogo[0].key),this.addToContainer(this.mainLogo),this.mainLogoRussian=this.scene.add.image(0,0,this.commonAssetsLoaderContext.selectedImages.mainLogoRussian[0].key),this.addToContainer(this.mainLogoRussian),this.voyageCircle=this.createVoyageCircle(),this.addToContainer(this.voyageCircle);const{buttonContainer:k}=this.createButtonContainer();this.buttonContainer=k,this.addToContainer(k),this.birdAnimFrames=this.createBgBirdObjectsAndAnim(),this.playBgBirdAnim(this.birdAnimFrames),this.initResizeHandler()}atlasesLoadComplete(){super.atlasesLoadComplete(),this.isAtlasesLoadComplete&&(this.onReady(),this.isAtlasesLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),super.render(),this.resizeContainer(),console.log("PREV rendering initial tweens"),this.initialTweensRendered||(console.log("rendering initial tweens"),this.initialObjectTweens(),this.initialTweensRendered=!0),this.parseStrings(),this.updateStrings()}parseStrings(){const s=Object.entries(u).reduce((o,[,v])=>(o[v]=this.stringsManagerContext.getCaptionByKey(v),o),{});this.strings=s}updateStrings(){if(this.voyageCircleLevelText&&this.voyageCircleLevelText.setText((this.getCurrentLevelCallback()-1).toString()),this.voyageCircleLabelText){const s=this.getVoyageCircleLabelTextValue();this.voyageCircleLabelText.setText(s);const o=this.getTextOriginYCallback();this.voyageCircleLabelText.setOrigin(.5,o)}if(this.buttonText){const s=this.getButtonTextValue(),o=this.getCurrentLevelCallback();this.buttonText.levelText.setText(s),this.buttonText.levelNumber.setText(o);const v=this.getButtonTextXValues();this.buttonText.levelText.setX(v.levelText),this.buttonText.levelNumber.setX(v.levelNumber),this.buttonText.whiteSpace.setX(v.whiteSpace);const S=this.getTextOriginYCallback();this.buttonText.levelText.setOrigin(.5,S)}}getVoyageCircleLabelTextValue(){return this.isCurrentLanguageRightToLeftCallback()?Array.from(this.strings[u.VoyageText].toUpperCase()).reverse().join(""):this.strings[u.VoyageText].toUpperCase()}getButtonTextValue(){let s;return this.isCurrentLanguageRightToLeftCallback()?s=Array.from(this.strings[u.LevelText].toUpperCase()).reverse().join(""):s=this.strings[u.LevelText].toUpperCase(),s}calculateBounds(){let s=this.AbsoluteWidth,o=this.AbsoluteWidth*N.LANDSCAPE_ABS_WIDTH,v=this.LeftAbsoluteX,S=this.TopAbsoluteY+(this.AbsoluteHeight-o)/2;return o>this.AbsoluteHeight&&(o=this.AbsoluteHeight,s=this.AbsoluteHeight*N.PORTRAIT_ABS_HEIGHT,v=this.LeftAbsoluteX+(this.AbsoluteWidth-s)/2,S=this.TopAbsoluteY),{leftAbsoluteX:v,topAbsoluteY:S,width:s,height:o}}getRelativePosition(s,o){return{x:this.LeftAbsoluteX+s*this.AbsoluteWidth,y:this.TopAbsoluteY+o*this.AbsoluteHeight}}getBgBirdAtlasKey(){return _.find(this.selectedAtlases.bgBird,s=>s.variant==="image").key}getFrameObjectName(s,o){return`${s}-${o}`}initResizeHandler(){this.scene.scale.on("resize",()=>{this.birdAnimTween&&(this.birdAnimTween.seek(1),this.birdAnimTween.complete())})}addSlicedFrames(s,o,v){const S=this.scene.textures.get(s),E=S.get(0),R=S,k=E,W=k.width*o,K=k.width*v,q=k.height;this.threeSliceFrameNames.forEach($=>{let ne=k.cutX,oe=k.cutY,ce;$==="left"?ce=W:$==="center"?(ne+=W,ce=K):$==="right"&&(ne+=W+K,ce=W),R.has($)||R.add($,0,ne,oe,ce,q)})}render3SlicedFrames(s,o,v,S,E,R=void 0){let k=1,W=0,K=0;const q=[],$=[];for(let ne=0;ne<this.threeSliceFrameNames.length;ne++){const oe=this.threeSliceFrameNames[ne],ce=this.getFrameObjectName(s,oe);let me=this.gameObjectsMap.get(ce);if(_.isNil(me)&&(me=this.scene.add.image(0,0,v,oe),me.setDepth(this.depth),me.setOrigin(0,.5),this.gameObjectsMap.set(ce,me)),W=me.height,k=E/me.height,me.scale!==k&&me.setScale(k),R&&me.setTint(R),oe==="left"){const fe=o.x;q.push(fe)}else if(oe==="center"){const fe=this.gameObjectsMap.get(this.getFrameObjectName(s,"left")),xe=o.x+fe.displayWidth;q.push(xe),me.displayWidth!==S&&(me.displayWidth=S)}else if(oe==="right"){const fe=this.gameObjectsMap.get(this.getFrameObjectName(s,"left")),xe=this.gameObjectsMap.get(this.getFrameObjectName(s,"center")),ve=o.x+fe.displayWidth+xe.displayWidth;q.push(ve),K=fe.displayWidth+xe.displayWidth+me.displayWidth}$.push(me)}for(let ne=0;ne<this.threeSliceFrameNames.length;ne++){const oe=q[ne],ce=this.threeSliceFrameNames[ne],me=this.getFrameObjectName(s,ce),fe=this.gameObjectsMap.get(me),xe=oe-K/2,ve=o.y;(fe.x!==oe||fe.y!==o.y)&&fe.setPosition(xe,ve)}return{scale:k,height:W,totalW:K,frames:$}}getScaleMultiplier(){const{width:s,height:o}=this.calculateBounds();return Math.min(s,o)*this.scale[this.scene.getOrientation()]}addToContainer(s){this.container.add(s),this.containerObjects.push(s)}resizeContainer(){if(!this.container)return;const s=this.containerObjects.map(k=>{var W;return k.width||((W=k.first)==null?void 0:W.width)||0}),o=Math.max(...s),S=this.getScaleMultiplier()/o,{x:E,y:R}=this.getRelativePosition(.5,.5);this.uiStateModule.setScale(S),this.container.setPosition(E,R),this.container.setScale(S),this.container.setDepth(this.depth+1)}createBgBirdObjectsAndAnim(){const s=this.scene.anims.generateFrameNames(this.getBgBirdAtlasKey());this.scene.anims.create({key:"bg_bird",frames:s,showOnStart:!0,repeat:-1});const o=20,v=.3;for(let S=0;S<o;S++){const E=this.scene.add.sprite(0,0,this.getBgBirdAtlasKey());E.setAlpha(0),E.setDepth(this.depth),E.setScale(v),E.flipX=!0,this.bgBirdObjects.push(E)}return s}playBgBirdAnim(s){const{x:S,y:E}=this.getRelativePosition(-.8,.4),R=200,k=800,W=40,K=100,q=12e3,$=5,ne=this.bgBirdObjects.length,oe=Math.floor(Math.random()*(ne-$))+$,ce=this.bgBirdObjects.slice(0,oe);let me=0;const fe=[];for(let We=0;We<ce.length;We++){const Ze=Math.random()*(k-R)+R;Ze>me&&(me=Ze);const ke=Math.random()*(K-W)+W,ut=S+Ze,De=E+ke,Tt=ce[We],xt=Math.floor(Math.random()*s.length),Pt=Math.random()*Math.PI/22;Tt.play("bg_bird",!1,xt),fe.push({birdAnim:Tt,rndAngleOffset:Pt,xOffset:Ze,yOffset:ke,birdX:ut,birdY:De})}const xe=me+this.LeftAbsoluteX,ve={v:0};this.birdAnimTween=this.scene.tweens.add({targets:ve,duration:q,ease:"Linear",v:1,onStart:()=>{if(this.active)for(let We=0;We<fe.length;We++){const{birdAnim:Ze,birdX:ke,birdY:ut}=fe[We];Ze.setPosition(ke-xe,ut),Ze.setAlpha(1)}},onUpdate:We=>{for(let Ze=0;Ze<fe.length;Ze++){const{birdAnim:ke,rndAngleOffset:ut,birdX:De,birdY:Tt}=fe[Ze],xt=We.getValue(),Pt=Math.cos(-Math.PI/16+ut),ot=Math.sin(-Math.PI/16+ut),Ot=De+Pt*xt*(this.LeftAbsoluteX+xe+this.AbsoluteWidth*2)-xe,ze=Tt+ot*xt*(this.TopAbsoluteY+this.AbsoluteHeight*2);ke.setPosition(Ot,ze)}},onComplete:()=>{this.birdAnimTween=null;for(let We=0;We<fe.length;We++){const{birdAnim:Ze}=fe[We];Ze.setAlpha(0)}if(this.active){const We=1e3+Math.random()*2e3;setTimeout(()=>{this.playBgBirdAnim(s)},We)}}})}createVoyageCircle(){const s=this.scene.add.container(0,m);s.setScale(r);const o=this.scene.add.image(0,0,this.commonAssetsLoaderContext.selectedImages.voyageCircle[0].key);s.add(o);const v=this.scene.add.image(0,0,this.commonAssetsLoaderContext.selectedImages.whiteCircleFrame[0].key),S={v:0},E=this.scene.tweens.add({targets:S,duration:3e3,ease:"Cubic.easeInOut",v:1,onUpdate:K=>{const q=K.progress<.5?K.progress*3:(1-K.progress)*3;v.setAlpha(q),v.setScale(.85+K.progress*.1)},onComplete:()=>{setTimeout(()=>{S.v=0,E.restart()},100)}});s.add(v);const R=this.scene.add.bitmapText(0,-24,this.commonAssetsLoaderContext.selectedBitmapFonts.font[0].key,(this.getCurrentLevelCallback()-1).toString(),48);this.voyageCircleLevelText=R,R.setOrigin(.5),s.add(R);const k=this.scene.add.bitmapText(0,36,this.commonAssetsLoaderContext.selectedBitmapFonts.font[0].key,this.getVoyageCircleLabelTextValue(),24);this.voyageCircleLabelText=k;const W=this.getTextOriginYCallback();return k.setOrigin(.5,W),s.add(k),s}createButtonContainer(){const s=this.scene.add.container(0,0),o=1.9;s.setScale(o),s.setDepth(this.depth);const v=300,S=100,E=this.scene.add.container(1,1),{frames:R,totalW:k}=this.render3SlicedFrames("buttonBackground",{x:1,y:1},this.commonAssetsLoaderContext.selectedImages.whiteButton[0].key,v,S,this.buttonColor);this.buttonFrames=R,R.forEach(ne=>{E.add(ne)}),s.add(E),s.setData("width",k);const W=this.scene.add.image(-v/2,-4,this.commonAssetsLoaderContext.selectedImages.buttonShine[0].key);W.setScale(2,.54),W.setAlpha(0),E.add(W);const K=500;setInterval(()=>{this.lampAnimSpinning||this.spinCount<1||this.scene.tweens.add({targets:W,duration:K/2,ease:"Cubic.easeIn",alpha:.7,x:v/4,onStart:()=>{W.setX(-v/2)},onComplete:()=>{this.scene.tweens.add({targets:W,duration:K/2,ease:"Cubic.easeOut",alpha:0,x:v/2.5})}})},5e3);const $=-4;if(!this.buttonText){this.buttonText={},this.buttonText.levelNumber=this.scene.add.bitmapText(0,$,this.commonAssetsLoaderContext.selectedBitmapFonts.font[0].key,this.getCurrentLevelCallback(),32),this.buttonText.levelNumber.setOrigin(.5,.5),this.buttonText.whiteSpace=this.scene.add.bitmapText(0,$,this.commonAssetsLoaderContext.selectedBitmapFonts.font[0].key," ",32),this.buttonText.whiteSpace.setOrigin(.5,.5),this.buttonText.levelText=this.scene.add.bitmapText(0,$,this.commonAssetsLoaderContext.selectedBitmapFonts.font[0].key,this.getButtonTextValue(),32);const ne=this.getTextOriginYCallback();this.buttonText.levelText.setOrigin(.5,ne);const oe=this.getButtonTextXValues();this.buttonText.levelNumber.setX(oe.levelNumber),this.buttonText.whiteSpace.setX(oe.whiteSpace),this.buttonText.levelText.setX(oe.levelText)}E.add([this.buttonText.levelNumber,this.buttonText.whiteSpace,this.buttonText.levelText]);for(let ne=0;ne<R.length;ne++){const oe=R[ne];oe.setInteractive(),oe.on("pointerdown",()=>{if(!this.isFinalLevelCallback()&&this.eventsEnabled){this.scene.tweens.add({duration:50,targets:s,scale:o*.95});for(let ce=0;ce<R.length;ce++)R[ce].once("pointerup",()=>{this.scene.tweens.add({duration:50,targets:s,scale:o}),this.isSoundFxEnabledCallback()&&Ce.play(),this.onButtonPointerupCallback()});this.scene.input.once("pointerup",()=>{this.scene.tweens.add({duration:50,targets:s,scale:1.9});for(let ce=0;ce<R.length;ce++)R[ce].removeListener("pointerup")})}})}return{buttonContainer:s}}getButtonTextXValues(){const s=this.buttonText.levelNumber.width+this.buttonText.whiteSpace.width+this.buttonText.levelText.width,o={};return this.isCurrentLanguageRightToLeftCallback()?(o.levelNumber=-s*.5+this.buttonText.levelNumber.width*.5,o.whiteSpace=-s*.5+this.buttonText.levelNumber.width+this.buttonText.whiteSpace.width*.5,o.levelText=-s*.5+this.buttonText.levelNumber.width+this.buttonText.whiteSpace.width+this.buttonText.levelText.width*.5):(o.levelText=-s*.5+this.buttonText.levelText.width*.5,o.whiteSpace=-s*.5+this.buttonText.levelText.width+this.buttonText.whiteSpace.width*.5,o.levelNumber=-s*.5+this.buttonText.levelText.width+this.buttonText.whiteSpace.width+this.buttonText.levelNumber.width*.5),o}hideVoyageCircle(){this.scene.tweens.add({targets:this.voyageCircle,duration:0+400,delay:0,ease:"Cubic.easeInOut",scale:r*1.2,alpha:0})}showVoyageCircle(){this.voyageCircle.setScale(.1),this.scene.tweens.add({targets:this.voyageCircle,duration:350+400,delay:350,ease:"Back.easeOut",scale:r,alpha:1})}hideMainLogo(){this.scene.tweens.add({targets:[this.mainLogo,this.mainLogoRussian],duration:0+400,delay:0,ease:"Cubic.easeInOut",alpha:0})}showMainLogo(){const s=this.getCurrentLanguageCallback()==="RU",o=350,v=400;s?(this.mainLogo.setY(p),this.mainLogoRussian.setY(h)):this.mainLogo.setY(c),this.scene.tweens.add({targets:[this.mainLogo,this.mainLogoRussian],duration:o+v,delay:o,ease:"Cubic.easeInOut",alpha:(S,E,R,k)=>k===1?s?1:0:1})}hideInGameFortuneWheelButton(){const v=this.fortuneWheelContext.inGameOpenWheelObjects.container.first.height*this.fortuneWheelContext.inGameOpenWheelObjects.container.scale;this.scene.tweens.add({targets:this.fortuneWheelContext.inGameOpenWheelObjects.container,duration:0+400,delay:0,ease:"Cubic.easeInOut",y:-v,alpha:0})}showIngameFortuneWheelButton(){const{X:v,Y:S}=this.fortuneWheelContext.getInGameOpenWheelButtonPos(),E=this.fortuneWheelContext.inGameOpenWheelObjects.container,R=this.fortuneWheelContext.openWheelButtonContainer.first.height*this.fortuneWheelContext.openWheelButtonContainer.scale;E.setPosition(v,-R),this.scene.tweens.add({onStart:()=>{this.scene.input.enabled=!1},targets:E,duration:50+350,delay:50,ease:"Cubic.easeInOut",y:S,alpha:1,onComplete:()=>{this.scene.input.enabled=!0}})}hideFortuneWheelButton(){const v=this.fortuneWheelContext.openWheelButtonContainer.first.height*this.fortuneWheelContext.openWheelButtonContainer.scale;this.scene.tweens.add({targets:this.fortuneWheelContext.openWheelButtonContainer,duration:0+400,delay:0,ease:"Cubic.easeInOut",y:this.AbsoluteHeight+v/1.5,alpha:0})}showFortuneWheelButton(){const{Y:v}=this.fortuneWheelContext.getOpenWheelButtonPos();this.scene.tweens.add({onStart:()=>{this.scene.input.enabled=!1},targets:this.fortuneWheelContext.openWheelButtonContainer,duration:50+350,delay:50,ease:"Cubic.easeInOut",y:v,alpha:1,onComplete:()=>{this.scene.input.enabled=!0}})}hideButton(){this.scene.tweens.add({targets:this.buttonContainer,duration:0+350,delay:0,ease:"Cubic.easeInOut",alpha:0})}showButton(){this.scene.tweens.add({targets:this.buttonContainer,duration:350+400,delay:350,ease:"Cubic.easeInOut",alpha:1})}fadeOutContainer(s){_.isNil(this.container)||this.scene.tweens.add({targets:this.container,duration:s,ease:"Cubic.easeInOut",alpha:0})}fadeInContainer(s){this.scene.tweens.add({targets:this.container,duration:s,ease:"Cubic.easeInOut",alpha:1})}fadeOutBirdAnim(s){this.bgBirdObjects.length!==0&&this.scene.tweens.add({targets:this.bgBirdObjects,duration:s,ease:"Cubic.easeInOut",alpha:0,onComplete:()=>{this.birdAnimTween&&(this.birdAnimTween.seek(1),this.birdAnimTween.complete())}})}hideObjects(s){this.hideVoyageCircle(),this.hideMainLogo(),this.hideFortuneWheelButton(),this.hideButton(),s!=null&&s.keepSettingsButton||this.settingsContext.fadeOutContainer()}showObjects(){this.showVoyageCircle(),this.showMainLogo(),this.showFortuneWheelButton(),this.showButton(),this.settingsContext.fadeInContainer()}hideMainMenu(){this.active=!1,this.fadeOutContainer(500),this.fadeOutBirdAnim(500),this.mainMenuBackgroundContext.fadeOutBackground(500)}showMainMenu(){this.render(),this.fortuneWheelContext.render(),this.hideInGameFortuneWheelButton();const s=500;this.active=!0,this.updateStrings(),this.initialObjectTweens(),this.playBgBirdAnim(this.birdAnimFrames),this.fadeInContainer(s),this.mainMenuBackgroundContext.fadeInBackground(s)}hideAllObjectsWithoutTween(){this.mainLogoRussian.setAlpha(0),this.mainLogo.setAlpha(0),this.voyageCircle.setAlpha(0),this.fortuneWheelContext.openWheelButtonContainer.setAlpha(0),this.buttonContainer.setAlpha(0)}showAllObjectsWithoutTween(){const s=this.getCurrentLanguageCallback()==="RU";this.mainLogoRussian.setAlpha(s?1:0),this.mainLogo.setAlpha(1),this.voyageCircle.setAlpha(1),this.fortuneWheelContext.openWheelButtonContainer.setAlpha(1),this.buttonContainer.setAlpha(1)}initialObjectTweens(){const E=this.getCurrentLanguageCallback()==="RU",R=.85;this.buttonSpacing===0&&(this.buttonSpacing=this.voyageCircle.y+this.voyageCircle.first.height*this.voyageCircle.scale/2+260);const k=this.fortuneWheelContext.openWheelButtonContainer.first.height*this.fortuneWheelContext.openWheelButtonContainer.scale;this.mainLogo.setAlpha(1),this.mainLogo.setPosition(0,0),this.mainLogoRussian.setAlpha(E?1:0),this.mainLogoRussian.setPosition(0,0),this.voyageCircle.setAlpha(0),this.voyageCircle.setScale(r),this.buttonContainer.setAlpha(0),this.buttonContainer.setY(this.buttonSpacing+300),this.fortuneWheelContext.openWheelButtonContainer.setY(this.AbsoluteHeight+k/1.5),this.fortuneWheelContext.openWheelButtonContainer.setAlpha(0),this.scene.tweens.add({targets:[this.mainLogo,this.mainLogoRussian],ease:"Quad.easeInOut",duration:0+600,delay:0,scale:R,y:(W,K,q,$)=>E?$===0?p:h:c,onComplete:()=>{this.scene.tweens.add({targets:this.voyageCircle,duration:600,ease:"Quad.easeInOut",alpha:1}),this.scene.tweens.add({targets:this.buttonContainer,duration:600,ease:"Quad.easeInOut",alpha:1,y:this.buttonSpacing});const{Y:W}=this.fortuneWheelContext.getOpenWheelButtonPos();this.scene.tweens.add({targets:this.fortuneWheelContext.openWheelButtonContainer,duration:600,ease:"Quad.easeInOut",y:W,alpha:1})}})}}var d=ft(566),y=ft.n(d);class g extends Phaser.Scene{constructor(s){super(s),this.texturesSentToTextureManager=new Set,this.spriteSheetsSentToTextureManager=new Set,this.atlasesSentToTextureManager=new Set,this.soundsSentToSoundManager=new Set,this.bitmapFontsSentToTextureManager=new Set}preload(){console.info("do not invoke this method without overriding")}create(){console.info("do not invoke this method without overriding")}getOrientation(){return _.hasIn(this,"options.shouldForcePortraitMode")&&this.options.shouldForcePortraitMode&&this.game.canvas.width>=this.game.canvas.height||this.game.canvas.height>this.game.canvas.width?"portrait":"landscape"}getShortEdge(){return this.game.canvas.height>this.game.canvas.width?this.game.canvas.width:this.game.canvas.height}}class b extends g{constructor(){super("gameScene"),console.info("gameScene constructor has started")}preload(){console.info("gameScene preload has started"),this.setGameSize(),this.components.forEach((s,o)=>{s.Scene=this,s.options=this.options}),this.onGameSceneStarted(),this.load.on("complete",()=>{this.load.totalFailed>0&&this.load.totalToLoad===this.load.totalComplete+this.load.totalFailed&&(console.debug("All files load processed"),console.debug("Here are the files that failed to load",this.filesFailedToLoad),parent.postMessage({missingFiles:this.filesFailedToLoad},"*"))})}loadComponents(s){s.forEach((o,v)=>{o.load()})}fileLoadErrorHandler(s,o){this.filesFailedToLoad.add({path:s,file:o})}create(){this.setGameSize()}update(){}}var A=ft(159),T=ft.n(A),C=ft(460),O=ft.n(C);const L=Object.freeze({HOME_SCREEN:"HOME_SCREEN",IN_GAME:"IN_GAME",END_LEVEL:"END_LEVEL"});function P(I,s){let o=5680;return I>s?o+=(I-s)%(s-5680):o=I,o}const H=ft(452),G=ft(743);class B{constructor(s){if(B._instance)return B._instance;B._instance=this,this.props=s,this.isGamePlayable=!1,this.isGameSceneStarted=!1,this.originYPerLanguage={AR:.6,BU:.6,KK:.6,RU:.6,UK:.6},this.rightToLeftLanguages=["AR","HE"],this.levelCountPerLanguage={AF:6e3,AL:6e3,AR:6e3,AZ:6e3,BR:6e3,BU:6e3,CS:6e3,DA:6e3,DE:6e3,EN:6e3,ES:6e3,FI:6e3,FR:6e3,GR:6e3,HE:6e3,HR:6e3,HU:6e3,ID:6e3,IS:6e3,IT:6e3,JP:6e3,KK:6e3,LT:6e3,LV:6e3,MA:6e3,NL:6e3,NO:6e3,PL:6e3,PT:6e3,RO:6e3,RU:6e3,SE:6e3,SK:6e3,SL:6e3,TR:6e3,UK:6e3},this.filesFailedToLoad=new Set;let o=b;return o.prototype.platformSetting=s.platformSetting,o.prototype.transformCanvas=this.transformCanvas,o.prototype.components=s.components,o.prototype.options=s.options,o.prototype.isGameSceneStarted=this.isGameSceneStarted,o.prototype.filesFailedToLoad=this.filesFailedToLoad,o.prototype.setGameSize=()=>{this.setGameSize()},o.prototype.getGamePlayableStatus=(v={})=>this.isGamePlayable,o.prototype.onGameSceneStarted=(v={})=>{this.isGameSceneStarted=!0,T().isFunction(this.onGameSceneStarted)&&this.onGameSceneStarted()},o.prototype.onGameSceneLoaded=(v={})=>{console.debug("onGameSceneLoaded"),this.onResizeHandler()},this.phaserConfig={type:y().AUTO,parent:"",backgroundColor:"#4d8f8d",width:document.documentElement.clientWidth*window.devicePixelRatio,height:document.documentElement.clientHeight*window.devicePixelRatio,render:{batchSize:512,antialiasGL:!1},scene:[o],scale:{mode:y().Scale.ScaleModes.NONE},audio:{disableWebAudio:!1}},this.filesToLoad=new Set,this.filesData={},this.currentState=s.currentState,this.previousState=s.previousState,B._instance}getOriginYByLanguage(s){const o=this.originYPerLanguage[s];return T().isNil(o)?.5:o}isLanguageRightToLeft(s){return this.rightToLeftLanguages.includes(s)}getCurrentState(){return this.currentState}setCurrentState(s){this.currentState=s}getPreviousState(){return this.previousState}setPreviousState(s){this.previousState=s}getSectionList(){return this.sectionList}setSectionList(s){this.sectionList=s}getNextSet(s){const o=s.currentSectionIndex,v=s.currentSetIndex,S=s.lastSectionIndex,E=s.lastSetIndex;if(o===S&&v===E)return{FirstLevel:0,LastLevel:0,TotalLevelCount:0};const R=this.getSectionList(),k=R[o];let W,K;return v<k.sets.length-1?(W=o,K=v+1):(W=o+1,K=0),R[W].sets[K]}getPreviousSet(s){const o=s.currentSectionIndex,v=s.currentSetIndex;if(o===0&&v===0)return{FirstLevel:0,LastLevel:0,TotalLevelCount:0};let S,E;v>0?(S=o,E=v-1):(S=o-1,E=-1);const k=this.getSectionList()[S];return E===-1&&(E=k.sets.length-1),k.sets[E]}getSectionInfoByLevel(s){const o=this.getSectionList();let v,S,E,R,k=0;return o.some((W,K)=>{if(k+=W.TotalLevelCount,W.FirstLevel<=s&&s<=W.LastLevel)return v=W,S=K,k-=W.TotalLevelCount,W.sets.some((q,$)=>{if(k+=q.TotalLevelCount,q.FirstLevel<=s&&s<=q.LastLevel)return E=q,R=$,!0}),!0}),{data:v,index:S,currentSet:E,currentSetIndex:R,lastSectionIndex:o.length-1,levelCountSoFar:k}}getLevelCountByLanguage(s){return this.levelCountPerLanguage[s]}getLevelFileUrlByLevelAndLanguage(s){const o=s.level,v=s.language,S=this.getLevelCountByLanguage(v);console.log({levelCount:S});let E=P(o,S),R="levels_encrypted/Levels_"+v;return E<=160?R+="_initial.csv":E<=1160?R+="_00.csv":E<=2160?R+="_01.csv":E<=3160?R+="_02.csv":E<=4160?R+="_03.csv":E<=5160?R+="_04.csv":E<=6160?R+="_05.csv":E<=7160?R+="_06.csv":E<=8160?R+="_07.csv":E<=9160?R+="_08.csv":E<=10160?R+="_09.csv":E<=11160?R+="_10.csv":E<=12160?R+="_11.csv":E<=13160?R+="_12.csv":E<=14160?R+="_13.csv":E<=15160&&(R+="_14.csv"),R}loadFiles(s){const o=s.language,v=s.state,S=s.level,E=["strings/Strings"+o,"sections/Sections"+o,"sets/Sets"+o];E.push(this.getLevelFileUrlByLevelAndLanguage({level:S,language:o})),v===L.HOME_SCREEN&&(E.push("sections/Sections"),E.push("sets/Sets"),E.push("languages.csv"));const R=E.length;for(let k=0;k<R;k++)this.filesToLoad.add(E[k]);for(let k=0;k<E.length;k++){const W=E[k].split("/");if(W[0]==="levels_encrypted"){const K=new XMLHttpRequest;K.open("GET","./csv_files/"+E[k],!0),K.send(),K.addEventListener("readystatechange",()=>{if(K.readyState===K.DONE){const q=window.atob("VXFuQHRNQUx2KzNiI0czTg=="),$=H.decrypt(K.response,q),ne=G.stringify($);O().parse(ne,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:oe=>{console.log("papa test Parsing complete:",oe),this.filesData.levels=oe.data,this.filesToLoad.delete(E[k]),this.filesToLoad.size===0&&(this.onFilesLoadedCallback(this.filesData),this.filesData={})}})}})}else O().parse("./csv_files/"+E[k],{header:!0,download:!0,dynamicTyping:!0,complete:K=>{console.log("papa test Parsing complete:",K,E[k]),W[0]==="strings"?this.filesData.strings=K.data:W[0]==="sections"&&W[1].startsWith("Sections")?W[1].length===8?this.filesData.sections=K.data:this.filesData.sections_strings=K.data:W[0]==="sets"&&W[1].startsWith("Sets")?W[1].length===4?this.filesData.sets=K.data:this.filesData.sets_strings=K.data:W[0]==="languages.csv"&&(this.filesData.languages=K.data),this.filesToLoad.delete(E[k]),this.filesToLoad.size===0&&(this.onFilesLoadedCallback(this.filesData),this.filesData={})}})}}loadAdditionalLevelData(s){const o=s.level,v=s.language,S=this.getLevelFileUrlByLevelAndLanguage({level:o,language:v}),E=new XMLHttpRequest;E.open("GET","./csv_files/"+S,!0),E.send(),E.addEventListener("readystatechange",()=>{if(E.readyState===E.DONE){const R=window.atob("VXFuQHRNQUx2KzNiI0czTg=="),k=H.decrypt(E.response,R),W=G.stringify(k);O().parse(W,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:K=>{console.log("papa test Parsing complete:",K),this.onAdditionalLevelDataLoadedCallback(K.data)}})}})}get IsGameSceneStarted(){return this.isGameSceneStarted}startGame(){this.startPhaserGame(),window.addEventListener("resize",s=>{setTimeout(()=>{this.onResizeHandler(),this.setGameSize()},0)})}setGameSize(){const s=this.getScene("gameScene"),o=this.getScreenWidth(),v=this.getScreenHeight();this.phaserGame.scale.resize(document.documentElement.clientWidth,document.documentElement.clientHeight),T().isNil(s)&&console.warn("game scene is nil"),T().isNil(s)||s.scale.resize(o,v),this.transformCanvas(this.phaserGame)}onResizeHandler(){this.setGameSize();const s=this.getScene("gameScene");!T().isNil(s)&&(s.scene.isActive("gameScene")||s.scene.isPaused("gameScene"))&&this.isGamePlayable&&this.renderComponents(this.getComponentsByState(this.getCurrentState()),!0)}getComponentIdsByState(s){const o=new Set;return Array.from(this.props.components.keys()).forEach(v=>{const S=this.props.components.get(v);S.states.includes(s)&&(o.add(v),T().has(S,"parentId")&&o.add(S.parentId))}),Array.from(o)}getComponentsByState(s){const o=new Set;return Array.from(this.props.components.keys()).forEach(v=>{const S=this.props.components.get(v);if(S.states.includes(s)&&(o.add(S),T().has(S,"parentId"))){const E=this.props.components.get(S.parentId);o.add(E)}}),Array.from(o)}renderComponents(s,o=!1){o?s.forEach(v=>{T().isNil(v.parent)&&(console.debug("rendering parent component",v.componentId),this.renderComponent(v,s))}):s.forEach(v=>{this.renderComponent(v,s)}),this.isGamePlayable||(console.debug("game is playable"),this.isGamePlayable=!0)}renderComponent(s,o){T().has(s,"scene")&&(s.scene.game.canvas=this.phaserGame.canvas,console.debug("this component is rendering",s),s.render(),o.forEach(v=>{!T().isNil(v.parentId)&&v.parentId===s.componentId&&this.renderComponent(v,o)}))}getScreenWidth(){return document.documentElement.clientWidth*window.devicePixelRatio}getScreenHeight(){return document.documentElement.clientHeight*window.devicePixelRatio}transformCanvas(s){const o=Number.parseFloat(1/window.devicePixelRatio).toPrecision(4);s.canvas.style.display="inline-block",s.canvas.style.transformOrigin="top left";const v="scale("+o+")";let S="transform-origin: top left; ";S+="transform:"+v+"; ",S+="-webkit-transform:"+v+"; ",S+="-moz-transform:"+v+"; ",S+="-o-transform:"+v+"; ",S+="-ms-transform:"+v+"; ",S+="margin: "+0+"; ",S+="padding: "+0+"; ",S+="position: fixed; ",S+="top: "+0+"; ",S+="left: "+0+"; ",s.canvas.setAttribute("style",S)}startPhaserGame(){T().isNil(this.phaserGame)&&(this.phaserGame=new(y()).Game(this.phaserConfig),console.info("Phaser game started"))}getScene(s){const o=this.phaserGame.scene.getScene(s);return o||(console.log("scene is not ready."),null)}}class F{constructor(){return F._instance||(this.currentLevel=1,this.currentLevelsInfoArray=[],this.currentLevelStateArray=[],this.currentLevelFoundOtherWords=[],F._instance=this),F._instance}getCurrentLevel(){return this.currentLevel}setCurrentLevel(s){this.currentLevel=s}increaseCurrentLevel(){this.currentLevel++}getCurrentLevelFoundOtherWords(){return this.currentLevelFoundOtherWords}setCurrentLevelFoundOtherWords(s){this.currentLevelFoundOtherWords=s}clearCurrentLevelFoundOtherWords(){this.currentLevelFoundOtherWords=[]}pushToCurrentLevelFoundOtherWords(s){this.currentLevelFoundOtherWords.push(s)}getCurrentLevelStateArray(){return this.currentLevelStateArray}setCurrentLevelStateArray(s){this.currentLevelStateArray=s}pushToCurrentLevelStateArray(s){this.currentLevelStateArray.push(s)}clearCurrentLevelStateArray(){this.currentLevelStateArray=[]}findIndexInCurrentLevelStateArrayByRowAndColumnIndex(s){const o=s.rowIndex,v=s.columnIndex;return this.getCurrentLevelStateArray().findIndex(E=>o===E.rowIndex&&v===E.columnIndex)}setStateInCurrentLevelStateArrayByIndex(s){const o=s.index,v=s.value;this.currentLevelsInfoArray[o].state=v}getCurrentLevelsInfoArray(){return this.currentLevelsInfoArray}setCurrentLevelsInfoArray(s){this.currentLevelsInfoArray=s}pushToCurrentLevelsInfoArray(s){this.currentLevelsInfoArray.push(...s)}getLevelInfoObject(s,o){const v=this.getCurrentLevelsInfoArray(),S=P(s,o);let E;return v.some(R=>{if(R.LevelID===S)return E=R,!0}),E}checkNextLevelInfoExist(s){const o=P(this.getCurrentLevel()+1,s);return this.getCurrentLevelsInfoArray().some(S=>{if(S.LevelID===o)return!0})}}class D{constructor(){return D._instance||(this.currentStrings=[],D._instance=this),D._instance}getCurrentStrings(){return this.currentStrings}setCurrentStrings(s){this.currentStrings=s}getCaptionByKey(s){return this.getCurrentStrings().find(v=>v.Key===s).Value}getRibbonCaptions(){const o=this.getCurrentStrings().filter(S=>{if(!_.isNil(S.Key)&&S.Key.startsWith("Ribbon"))return S}),v=[];return o.forEach(S=>{v.push(S.Value)}),v}}class V{constructor(){return V._instance||(this.sets=[],this.currentSetsStrings=[],V._instance=this),V._instance}getSets(){return this.sets}setSets(s){this.sets=s}getCurrentSetsStrings(){return this.currentSetsStrings}setCurrentSetsStrings(s){this.currentSetsStrings=s}getSetsStringBySetIDAndKey(s,o){const v=parseInt(s);return this.getCurrentSetsStrings().find(E=>E.SetID===v)[o]}getRibbonColorBySetFullName(s){return this.getSets().find(v=>v.SetFullName===s).RibbonColor}getBackgroundImageNameBySetFullName(s){return this.getSets().find(v=>v.SetFullName===s).BackgroundImage}getFullNameBySetId(s){return this.getSets().find(v=>v.SetID===s).SetFullName}}class z{constructor(){return z._instance||(this.sections=[],this.currentSectionsStrings=[],z._instance=this),z._instance}setSections(s){this.sections=s}getSections(){return this.sections}getCurrentSectionsStrings(){return this.currentSectionsStrings}setCurrentSectionsStrings(s){this.currentSectionsStrings=s}}const Y="famobi";function j(I){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var v in o)I[v]=o[v]}return I}var X={read:function(I){return I[0]==='"'&&(I=I.slice(1,-1)),I.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(I){return encodeURIComponent(I).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function J(I,s){function o(S,E,R){if(typeof document!="undefined"){R=j({},s,R),typeof R.expires=="number"&&(R.expires=new Date(Date.now()+R.expires*864e5)),R.expires&&(R.expires=R.expires.toUTCString()),S=encodeURIComponent(S).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var k="";for(var W in R)R[W]&&(k+="; "+W,R[W]!==!0&&(k+="="+R[W].split(";")[0]));return document.cookie=S+"="+I.write(E,S)+k}}function v(S){if(!(typeof document=="undefined"||arguments.length&&!S)){for(var E=document.cookie?document.cookie.split("; "):[],R={},k=0;k<E.length;k++){var W=E[k].split("="),K=W.slice(1).join("=");try{var q=decodeURIComponent(W[0]);if(R[q]=I.read(K,q),S===q)break}catch($){}}return S?R[S]:R}}return Object.create({set:o,get:v,remove:function(S,E){o(S,"",j({},E,{expires:-1}))},withAttributes:function(S){return J(this.converter,j({},this.attributes,S))},withConverter:function(S){return J(j({},this.converter,S),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(I)}})}var Q=J(X,{path:"/"});const se=Q,te=3650,ie=Object.freeze({number:"number",string:"string",object:"object"});class re{constructor(){return re._instance||(re._instance=this,this.currentPlatform=Y),re._instance}getCurrentPlatform(){return this.currentPlatform}getIsCookieEnabled(){return window.location.protocol!=="file:"&&navigator.cookieEnabled}convertValue(s,o){const v=typeof s;if(v===ie.string){if(o===ie.number)return parseInt(s);if(o===ie.object)return JSON.parse(s)}else if(v===ie.number){if(o===ie.string)return JSON.stringify(s)}else if(v===ie.object){if(o===ie.string)return JSON.stringify(s)}else throw{message:"Implement unsupported type conversion",value:s,valueType:v,targetType:o,trace:console.trace()}}getValueByName(s){if(T().isNil(s.name))throw{message:"name is Nil.",name:s.name};if(T().isNil(s.returnType))throw{message:"return type is Nil.",returnType:s.returnType};const o=s.name,v=s.returnType,S=this.getCurrentPlatform();let E;if(S==="default")this.getIsCookieEnabled()?E=se.get(o):console.warn("Cookie is not enabled.");else if(S==="famobi")E=window.famobi.localStorage.getItem(o);else throw{message:"current platform is not valid",currentPlatform:this.getCurrentPlatform()};return T().isNil(E)?null:v!==typeof E?this.convertValue(E,v):E}setValueByName(s){if(T().isNil(s.name))throw{message:"name is Nil.",name:s.name};if(T().isNil(s.value))throw{message:"value is Nil.",value:s.value};const o=s.name,v=s.value,S=typeof v,E=this.getCurrentPlatform();if(E==="default")if(this.getIsCookieEnabled()){const R=S===ie.string?v:this.convertValue(v,ie.string);se.set(o,R,{expires:s.expireDuration!==void 0?s.expireDuration:te})}else console.warn("Cookie is not enabled.");else if(E==="famobi"){const R=S===ie.string?v:this.convertValue(v,ie.string);window.famobi.localStorage.setItem(o,R)}else throw{message:"Current platform is not valid",currentPlatform:this.getCurrentPlatform()}}initializeValueByName(s){if(T().isNil(s.name))throw{message:"name is Nil.",name:s.name};if(T().isNil(s.value))throw{message:"value is Nil.",value:s.value};if(T().isNil(s.valueType))throw{message:"valueType is Nil.",valueType:s.valueType};const o=s.name,v=s.value,S=s.valueType,E=this.getCurrentPlatform();if(E==="default"){if(this.getIsCookieEnabled())return T().isNil(this.getValueByName({name:o,returnType:S}))&&this.setValueByName({name:o,value:v}),this.getValueByName({name:o,returnType:S});console.warn("Cookie is not enabled.")}else{if(E==="famobi")return T().isNil(this.getValueByName({name:o,returnType:S}))&&this.setValueByName({name:o,value:v}),this.getValueByName({name:o,returnType:S});throw{message:"Current platform is not valid",currentPlatform:this.getCurrentPlatform()}}}removeByName(s){const o=this.getCurrentPlatform();if(o==="default")this.getIsCookieEnabled()?se.remove(s):console.warn("Cookie is not enabled.");else if(o==="famobi")window.famobi.localStorage.removeItem(s);else throw{message:"Current platform is not valid",currentPlatform:this.getCurrentPlatform()}}}class he extends Ae{constructor(s){super(s),super.update(s),this.currentTextureKey=""}load(){super.load(),this.loadTextures()}loadTextures(){super.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1)}render(){super.render();let s=super.getGameObjectByName(this.name);_.isNil(s)?(s=this.scene.add.image(this.scene.game.canvas.width*.5,this.scene.game.canvas.height*.5,this.getCurrentTextureKey()),s.setName(this.name),s.setDepth(this.depth!==void 0?this.depth:-10),this.componentId==="mainMenuBackground1"&&s.setInteractive()):(s.setX(this.scene.game.canvas.width*.5),s.setY(this.scene.game.canvas.height*.5));const o=_.get(this,`zoom.${this.scene.getOrientation()}`),v=_.get(this,`zoomPosition.${this.scene.getOrientation()}.x`),S=_.get(this,`zoomPosition.${this.scene.getOrientation()}.y`);this.scene.getOrientation()==="landscape"?(s.setScale(this.scene.game.canvas.width/s.width),s.displayWidth=this.scene.game.canvas.width*1.01,s.displayHeight<this.scene.game.canvas.height&&s.setScale(this.scene.game.canvas.height/s.height)):this.scene.getOrientation()==="portrait"?(s.setScale(this.scene.game.canvas.height/s.height),s.displayHeight=this.scene.game.canvas.height*1.01,s.displayWidth<this.scene.game.canvas.width&&s.setScale(this.scene.game.canvas.width/s.width)):(s.setScale(this.scene.getShortEdge()/s.width),s.displayHeight=this.scene.game.canvas.height*1.01,s.displayWidth=this.scene.game.canvas.width*1.01),s.setScale(s.scale*o),s.setX(s.displayWidth*.5+(this.scene.game.canvas.width-s.displayWidth)*(1-v)),s.setY(s.displayHeight*.5+(this.scene.game.canvas.height-s.displayHeight)*(1-S)),_.has(this,"onRender")&&this.onRender({componentId:this.componentId})}setCurrentTextureKey(s){s!==this.getCurrentTextureKey()&&(this.currentTextureKey=s)}changeTexture(s){const o=super.getGameObjectByName(this.name);_.isNil(o)||o.texture.key!==s&&o.setTexture(s)}getCurrentTextureKey(){return this.currentTextureKey}fadeOutBackground(s){const o=super.getGameObjectByName(this.name);o&&this.scene.tweens.add({targets:o,duration:s,ease:"Cubic.easeInOut",alpha:0})}fadeInBackground(s){const o=super.getGameObjectByName(this.name);o&&(this.render(),this.scene.tweens.add({targets:o,duration:s,ease:"Cubic.easeInOut",alpha:1}))}}class de extends Ae{constructor(s){super(s),this.drawReferenceRectangle=!1}load(){super.load(),this.onReady()}get AbsoluteWidth(){return this.BaseWidth}get AbsoluteHeight(){const s=this.scene.components.get("topUIWrapper1"),o=this.scene.components.get("adBannerArea1");return this.scene.game.canvas.height-s.AbsoluteHeight-o.AbsoluteHeight}get BaseLeftX(){return(this.scene.game.canvas.width-this.BaseWidth)*.5}get LeftAbsoluteX(){return this.BaseLeftX}get TopAbsoluteY(){return this.scene.components.get("topUIWrapper1").AbsoluteHeight}render(){_.has(this,"onRender")&&this.onRender({componentId:this.componentId}),this.drawReferenceRectangle&&super.renderReferenceRectangle(0)}}class ue extends Ae{constructor(s){super(s),this.letterGameObjects=[],this.currentSelectedLetters=[],this.currentSelectedLettersBackgroundImages=[],this.selectedLetterBackgroundImagesMap=new Map,this.selectedLetterRingsMap=new Map,this.linesBetweenLetters=[],this.currentSelectedLetterGameObject=null,this.currentOrderCount=0,this.currentWheelLetters=[],this.words=[],this.foundWords=[],this.shuffledLettersInfoArray=[],this.tutorialHandLines=new Map,this.areSceneInputEventListenersAdded=!1,this.isKeyboardInputEventListenerAdded=!1,this.areLettersBeingSelectedByTouching=!1,this.foundOtherWords=[],this.otherWords=[],this.depthNames={circle:"circle",line:"line",shuffle:"shuffle",letter:"letter",letterRing:"letterRing",letterBackground:"letterBackground",previewContainer:"previewContainer",previewLetter:"previewLetter",hand:"hand",cancel:"cancel"},this.deselectCount=0,this.handMovements=[],this.handTweens=[],this.handStartPosition={x:0,y:0},this.isAppearTweenCompleted=!1,this.isHandTutorialEnd=!1,this.isShuffleTutorialEnd=!1,this.drawReferenceRectangle=!1}load(){super.load(),this.loadTextures(),this.loadSounds()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1)}soundLoadComplete(){super.soundLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isSoundLoadComplete=!1,this.isTextureLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),this.clearWheel(),this.renderPreviewLetters(),this.renderLetters(this.shuffledLettersInfoArray),this.renderCircle(),this.renderShuffleButton(),this.shouldHandDisplayCallback()&&this.renderHand(),this.shouldShuffleTutorialDisplayCallback()&&this.renderCancelImage(),this.addSceneInputEventListeners(),this.addKeyboardInputEventListener(),T().has(this,"onRender")&&this.onRender({componentId:this.componentId})}getCancelImage(){return this.gameObjectsMap.get("cancelImage")}renderCancelImage(){const s=this.getCancelImagePositionHelperCallback();let o=this.getCancelImage();T().isNil(o)&&(o=this.scene.add.image(0,0,this.getCancelButtonTextureKeyCallback()).setDepth(this.getDepthByName(this.depthNames.cancel)).setVisible(!1),o.setInteractive(),o.on("pointerdown",()=>{this.onShuffleTutorialEndCallback()}),this.gameObjectsMap.set("cancelImage",o));const v=Math.min(this.BaseWidth,this.scene.game.canvas.height)*.1/o.height;o.scale!==v&&o.setScale(v);const S=s.x-o.displayWidth*.5,E=s.y-o.displayHeight*.67;(o.x!==S||o.y!==E)&&o.setPosition(S,E)}getHandStartPosition(){return this.handStartPosition}setHandStartPosition(s){this.handStartPosition=s}renderHand(){const s=this.getHandStartPosition();let o=this.gameObjectsMap.get("hand");T().isNil(o)?(o=this.scene.add.image(s.x,s.y,this.selectedImages.hand[0].key).setDepth(this.getDepthByName(this.depthNames.hand)).setAlpha(0).setOrigin(.47,0),this.gameObjectsMap.set("hand",o)):((o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y),this.onResizeHandCallback()),o.alpha!==0&&o.setAlpha(0),o.angle!==0&&o.setAngle(0);const v=this.AbsoluteRadius/o.height;if(o.scale!==v&&o.setScale(v),o.visible!==this.isVisible&&o.setVisible(this.isVisible),!this.isVisible){this.killHandTweens();return}}getHand(){return this.gameObjectsMap.get("hand")}killHandTweens(){this.handTweens.forEach((s,o,v)=>{v.pop().stop()})}playHandTweens(){if(this.killHandTweens(),!this.shouldHandDisplayCallback()||!this.isVisible||!this.isAppearTweenCompleted)return;const s=this.getHand(),o=this.getHandStartPosition();(s.x!==o.x||s.y!==o.y)&&s.setPosition(o.x,o.y),s.alpha!==0&&s.setAlpha(0),s.angle!==0&&s.setAngle(0);const v=this.AbsoluteRadius/s.height;s.scale!==v&&s.setScale(v),s.visible!==this.isVisible&&s.setVisible(this.isVisible),this.handTimeline=this.scene.tweens.createTimeline(),this.handTimeline.loop=-1,this.getHandMovements().forEach(E=>{switch(E.action){case"fadeIn":const R=this.handTimeline.add({targets:s,duration:E.duration,alpha:1});this.handTweens.push(R);break;case"fadeOut":const k=this.handTimeline.add({targets:s,duration:E.duration,alpha:0});this.handTweens.push(k);break;case"moveToWithAngle":const W=this.handTimeline.add({targets:s,duration:E.duration,x:E.position.x,y:E.position.y,angle:E.angle,onUpdate:()=>{T().has(E,"onUpdate")&&E.onUpdate()},onComplete:()=>{T().has(E,"onComplete")&&E.onComplete()}});this.handTweens.push(W);break;case"moveTo":const K=this.handTimeline.add({targets:s,duration:E.duration,x:E.position.x,y:E.position.y,onUpdate:()=>{T().has(E,"onUpdate")&&E.onUpdate()},onComplete:()=>{T().has(E,"onComplete")&&E.onComplete()}});this.handTweens.push(K);break}}),this.handTimeline.play()}setHandMovements(s){this.handMovements=s}getHandMovements(){return this.handMovements}getDeselectCount(){return this.deselectCount}increaseDeselectCount(){this.deselectCount++}resetDeselectCount(){this.deselectCount!==0&&(this.deselectCount=0)}playDeselectSound(){if(this.isSoundFxEnabledCallback())switch(this.getDeselectCount()){case 1:this.scene.sound.play(this.selectedSounds.letterDeselect1[0].key);break;case 2:this.scene.sound.play(this.selectedSounds.letterDeselect2[0].key);break;case 3:this.scene.sound.play(this.selectedSounds.letterDeselect3[0].key);break;case 4:this.scene.sound.play(this.selectedSounds.letterDeselect4[0].key);break;case 5:this.scene.sound.play(this.selectedSounds.letterDeselect5[0].key);break;case 6:this.scene.sound.play(this.selectedSounds.letterDeselect6[0].key);break;case 7:this.scene.sound.play(this.selectedSounds.letterDeselect7[0].key);break;case 8:this.scene.sound.play(this.selectedSounds.letterDeselect8[0].key);break;default:this.scene.sound.play(this.selectedSounds.letterDeselect8[0].key);break}}getPrimaryColor(){return this.primaryColor}setPrimaryColor(s){s!==this.getPrimaryColor()&&(this.primaryColor=s)}getLetterGameObjectForKeyboardInput(s){return this.letterGameObjects.find(o=>{if(o.visible&&o.getData("order")===-1&&o.text===s)return o})}clearWheel(){this.currentOrderCount=0,this.currentSelectedLettersBackgroundImages.forEach(E=>{E.setVisible(!1)}),this.currentSelectedLettersBackgroundImages=[];const s=this.getPreviewLetterGameObjects(!0),o=this.getPreviewContainer();s.length>0&&(s.forEach((E,R)=>{E.setText(""),E.setVisible(!1)}),o.setVisible(!1)),this.currentSelectedLetters=[];const v=this.gameObjectsMap.get("shuffle");if(!T().isNil(v)){const E=this.isVisible;v.visible!==E&&v.setVisible(E)}this.letterGameObjects.forEach(E=>{E.clearTint();const R=parseInt("0x"+this.fontColor);E.setTint(R),E.setData("order",-1),E.removeAllListeners("pointerover"),E.setInteractive()}),this.linesBetweenLetters.forEach(E=>{E.clear()}),this.linesBetweenLetters=[];const S=this.gameObjectsMap.get("line");T().isNil(S)||S.clear(),this.currentSelectedLetterGameObject=null}getDepthByName(s){if(s===this.depthNames.circle)return this.shouldHandDisplayCallback()?30:3;if(s===this.depthNames.line)return this.shouldHandDisplayCallback()?32:5;if(s===this.depthNames.shuffle)return this.shouldHandDisplayCallback()?31:this.shouldShuffleTutorialDisplayCallback()?30:4;if(s===this.depthNames.letter)return this.shouldHandDisplayCallback()?33:6;if(s===this.depthNames.letterRing)return this.shouldHandDisplayCallback()?32:5;if(s===this.depthNames.letterBackground)return this.shouldHandDisplayCallback()?32:5;if(s===this.depthNames.previewContainer)return this.shouldHandDisplayCallback()?38:11;if(s===this.depthNames.previewLetter)return this.shouldHandDisplayCallback()?39:12;if(s===this.depthNames.hand)return 34;if(s===this.depthNames.cancel)return 30}addKeyboardInputEventListener(){this.isKeyboardInputEventListenerAdded||(this.isKeyboardInputEventListenerAdded=!0,this.scene.input.keyboard.on("keydown",s=>{if(!this.scene.input.enabled||this.shouldShuffleTutorialDisplayCallback()||this.isHintTutorialDisplayCallback()||this.isHammerTutorialDisplayCallback()||this.checkIsHammerButtonPressedCallback()||this.areLettersBeingSelectedByTouching||this.isWrongAnswerTimelinePlaying||this.getCurrentGameStateCallback()!==L.IN_GAME)return;const o=s.key.toLocaleUpperCase(this.getCurrentLanguageCallback());if(console.log("input",o),o==="ENTER")this.onPointerUp();else if(o==="BACKSPACE"){if(this.currentSelectedLetters.length===1)this.onPointerUp();else if(this.currentSelectedLetters.length>1){const v=this.getLetterGameObjectWithSecondHighestOrder();this.letterPointerOverOnBackTouch(v)}}else{const v=T().clone(this.currentWheelLetters);if(this.currentSelectedLetters.forEach(S=>{if(v.includes(S)){const E=v.indexOf(S);v.splice(E,1)}}),console.log("availableLettersInWheel",v),v.length===0)return;if(v.includes(o)){const S=this.getLetterGameObjectForKeyboardInput(o);if(this.currentSelectedLetters.length===0)this.onLetterPointerDown(S),this.gameObjectsMap.get("shuffle").setVisible(!1);else{this.letterPointerOverOnFirstTouch(S);const E=this.getLetterGameObjectWithSecondHighestOrder(),R=this.getWheelScale();let k=this.gameObjectsMap.get("line");T().isNil(k)&&(k=this.scene.add.graphics(),this.gameObjectsMap.set("line",k));const W=this.getDepthByName(this.depthNames.line);k.depth!==W&&k.setDepth(W),k.clear(),k.lineStyle(this.AbsoluteRadius*this.fontSize*.5*.5*R,this.getPrimaryColor(),1),k.lineBetween(E.x,E.y,S.x,S.y),this.linesBetweenLetters.push(k),this.gameObjectsMap.delete("line")}}}}))}getLetterGameObjectWithSecondHighestOrder(){return this.letterGameObjects.find(o=>{if(o.getData("order")===this.currentOrderCount-2)return o})}set Words(s){this.words=s}getCurrentLettersCoordinates(s){if(s.length===0){console.warn("currentLetters is empty, returning",s);return}const o=this.getWheelScale();let v=[];return s.forEach((S,E,R)=>{v.push({text:S.text,x:this.CircleCenterAbsoluteX+this.AbsoluteRadius*.7*o*Math.cos(2*Math.PI/R.length*E-Math.PI*.5),y:this.CircleCenterAbsoluteY+this.AbsoluteRadius*.7*o*Math.sin(2*Math.PI/R.length*E-Math.PI*.5)})}),v}setOtherWords(s){this.otherWords=s,this.foundOtherWords=[]}setCurrentLevel(s){this.currentWheelLetters=s.wheelLetters,this.foundWords=[];let o=[];this.currentWheelLetters.forEach(v=>{o.push({text:v,x:0,y:0})}),this.shuffledLettersInfoArray=this.getCurrentLettersCoordinates(T().shuffle(o)),this.letterGameObjects.forEach((v,S)=>{S>=this.shuffledLettersInfoArray.length&&v.setVisible(!1)}),this.currentSelectedLetters=[],this.currentSelectedLettersBackgroundImages=[],this.linesBetweenLetters=[],this.currentSelectedLetterGameObject=null,this.currentOrderCount=0,this.previewTotalLetterCount=s.wordsTotalLetterCount+this.shuffledLettersInfoArray.length,this.renderPreviewLetters()}getFirstWordLetterCoordinates(){let s=this.getCurrentLettersCoordinates(this.shuffledLettersInfoArray),o=[];return this.words.length===0?[]:(Array.from(this.words[0]).forEach(v=>{for(let S=0;S<s.length;S++)if(v===s[S].text){o.push({x:s[S].x,y:s[S].y}),s.splice(S,1);break}}),o)}getFirstWord(){return this.words[0]}drawLineForTutorialHand(s){const o=this.getWheelScale(),v=this.getPrimaryColor(),S=this.AbsoluteRadius*this.fontSize*.5*.5*.5*o,E=s.lineStartX.toString()+s.lineStartY.toString();let R=this.tutorialHandLines.get(E);T().isNil(R)?R=this.scene.add.line(0,0,s.lineStartX,s.lineStartY,s.lineEndX,s.lineEndY,v,1).setOrigin(0):(R.visible||R.setVisible(!0),R.strokeColor!==v&&(R.strokeColor=v),R.setTo(s.lineStartX,s.lineStartY,s.lineEndX,s.lineEndY));const k=this.getDepthByName(this.depthNames.line);R.depth!==k&&R.setDepth(k),R.lineWidth!==S&&R.setLineWidth(S),this.tutorialHandLines.set(E,R);const W=s.lineStartX.toString()+s.lineStartY.toString()+"_circle";let K=this.tutorialHandLines.get(W);T().isNil(K)?K=this.scene.add.circle(s.lineStartX,s.lineStartY,S,v,1):(K.visible||K.setVisible(!0),(K.x!==s.lineStartX||K.y!==s.lineStartY)&&K.setPosition(s.lineStartX,s.lineStartY),K.radius!==S&&K.setRadius(S),K.fillColor!==v&&K.setFillStyle(v)),K.depth!==k&&K.setDepth(k),this.tutorialHandLines.set(W,K)}getWheelScale(){return T().get(this,`wheelScale.${this.scene.getOrientation()}`)}clearTutorialHandLines(){Array.from(this.tutorialHandLines.values()).forEach(s=>{s.setVisible(!1)})}getPreviewLetterTextName(s){return"previewLetterText_"+s}renderPreviewLetters(){for(let s=0;s<this.previewTotalLetterCount;s++){const o=this.getPreviewLetterTextName(s);let v=this.gameObjectsMap.get(o);T().isNil(v)&&(v=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),""),v.setVisible(!1).setData("mapKey",o),this.gameObjectsMap.set(o,v));const S=this.getDepthByName(this.depthNames.previewLetter);v.depth!==S&&v.setDepth(S);const E=this.getTextOriginYCallback();v.originY!==E&&v.setOrigin(.5,E),v.visible&&v.setVisible(!1);let R=this.getPreviewLetterFontSize();v.fontSize!==R&&v.setFontSize(R);const k=parseInt("0x"+this.selectedFontColor.replace("#",""));v.tintTopLeft!==k&&(v.clearTint(),v.setTint(k))}}getPreviewLetterFontSize(){const s=this.getWheelScale(),o=this.AbsoluteRadius,v=s*o*.5;return this.fontSize*v}displayPreview(s,o){let v=0,S=[];(this.isCurrentLanguageRightToLeftCallback()?this.currentSelectedLetters.slice().reverse():this.currentSelectedLetters).forEach((W,K,q)=>{const $=this.gameObjectsMap.get(this.getPreviewLetterTextName(K));$.text!==W&&$.setText(W);const ne=this.getPreviewLetterFontSize();$.fontSize!==ne&&$.setFontSize(ne);const oe=$.width;v+=oe,S.push(oe)});let R=[];for(let W=0;W<S.length;W++){let q=this.gameObjectsMap.get(this.getPreviewLetterTextName(W)).width/2,$;if(W===0)$=s-v*.5+q;else{let oe=this.gameObjectsMap.get(this.getPreviewLetterTextName(W-1)).width/2;$=R[W-1]+oe+q}R.push($)}let k=-1;this.currentSelectedLetters.forEach((W,K,q)=>{const $=this.gameObjectsMap.get(this.getPreviewLetterTextName(K));let oe=$.getTextBounds().local.height;k=oe>k?oe:k,$.visible||$.setVisible(!0),$.x!==R[K]&&$.setX(R[K]),$.y!==o&&$.setY(o)}),k*=1.25,this.displayPreviewBackground(s,o,v,k)}getPreviewContainer(){return this.gameObjectsMap.get("previewContainer")}displayPreviewBackground(s,o,v,S){const E=this.getPreviewHalfCircleTextureKeyCallback(),R=this.getPreviewRectangleTextureKeyCallback(),k=this.getWheelScale(),W={width:this.scene.textures.get(E).source[0].width,height:this.scene.textures.get(E).source[0].height},K=S/W.height*k*W.width,q=-(v*.5+K*.5),$=v*.5+K*.5;let ne=this.getPreviewContainer(),oe=this.gameObjectsMap.get("leftHalfCircle"),ce=this.gameObjectsMap.get("rectangle"),me=this.gameObjectsMap.get("rightHalfCircle");T().isNil(ne)?(ne=this.scene.add.container(s,o),oe=this.scene.add.image(q,0,E),ne.add(oe),ce=this.scene.add.image(0,0,R),ne.add(ce),me=this.scene.add.image($,0,E).setRotation(Math.PI),ne.add(me),this.gameObjectsMap.set("previewContainer",ne),this.gameObjectsMap.set("leftHalfCircle",oe),this.gameObjectsMap.set("rectangle",ce),this.gameObjectsMap.set("rightHalfCircle",me)):((ne.x!==s||ne.y!==o)&&ne.setPosition(s,o),ne.visible||ne.setVisible(!0),oe.x!==q&&oe.setX(q),me.x!==$&&me.setX($));const fe=this.getDepthByName(this.depthNames.previewContainer);ne.depth!==fe&&ne.setDepth(fe),oe.tintTopLeft!==this.getPrimaryColor()&&(oe.clearTint(),oe.setTint(this.getPrimaryColor()),ce.clearTint(),ce.setTint(this.getPrimaryColor()),me.clearTint(),me.setTint(this.getPrimaryColor())),oe.displayHeight!==S&&(oe.displayHeight=S,ce.displayHeight=S,me.displayHeight=S),oe.displayWidth!==K&&(oe.displayWidth=K,me.displayWidth=K),ce.displayWidth!==v&&(ce.displayWidth=v)}renderSelectedLetterInWheelBackground(s){let o=this.selectedLetterBackgroundImagesMap.get(s.getData("order"));T().isNil(o)?(o=this.scene.add.image(s.x,s.y,this.selectedImages.letterCircle[0].key),this.selectedLetterBackgroundImagesMap.set(s.getData("order"),o)):((o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y),o.visible!==!0&&o.setVisible(!0));const v=this.getDepthByName(this.depthNames.letterBackground);o.depth!==v&&o.setDepth(v),o.clearTint(),o.setTint(this.getPrimaryColor()),o.setDisplaySize(s.fontSize*1.5,s.fontSize*1.5);const S=parseInt("0x"+this.selectedFontColor.replace("#",""));s.clearTint(),s.setTint(S),this.currentSelectedLettersBackgroundImages.push(o)}renderSelectedLetterInWheelRing(s){let o=this.selectedLetterRingsMap.get(s.getData("order"));T().isNil(o)?(o=this.scene.add.graphics(),this.selectedLetterRingsMap.set(s.getData("order"),o)):o.clear(),o.setDepth(this.getDepthByName(this.depthNames.letterRing)),o.lineStyle(4,this.getPrimaryColor(),1),o.strokeCircle(s.x,s.y,s.fontSize*.75),this.scene.tweens.killTweensOf(o);const v=this.scene.tweens.add({targets:[o],duration:400,props:{x:o.x,y:o.y},onUpdate:()=>{o.clear(),o.lineStyle(4,this.getPrimaryColor(),1-v.progress),o.strokeCircle(s.x,s.y,s.height*(.75+.1*v.progress))},onComplete:()=>{o.clear()}})}letterPointerOverOnFirstTouch(s){if(!this.currentSelectedLetterGameObject)return;if(this.resetDeselectCount(),s.setData("order",this.currentOrderCount),this.currentOrderCount++,this.renderSelectedLetterInWheelBackground(s),this.renderSelectedLetterInWheelRing(s),this.currentSelectedLetters.push(s.text),this.isSoundFxEnabledCallback())switch(this.currentSelectedLetters.length){case 1:break;case 2:this.scene.sound.play(this.selectedSounds.letterSelect2[0].key);break;case 3:this.scene.sound.play(this.selectedSounds.letterSelect3[0].key);break;case 4:this.scene.sound.play(this.selectedSounds.letterSelect4[0].key);break;case 5:this.scene.sound.play(this.selectedSounds.letterSelect5[0].key);break;case 6:this.scene.sound.play(this.selectedSounds.letterSelect6[0].key);break;case 7:this.scene.sound.play(this.selectedSounds.letterSelect7[0].key);break;case 8:this.scene.sound.play(this.selectedSounds.letterSelect8[0].key);break;default:this.scene.sound.play(this.selectedSounds.letterSelect8[0].key);break}const o=this.getWheelScale();this.displayPreview(this.CircleCenterAbsoluteX,this.CircleCenterAbsoluteY-this.AbsoluteRadius*(1+parseFloat(this.fontSize)*.5)*o)}letterPointerOverOnBackTouch(s){this.increaseDeselectCount(),this.playDeselectSound();let o;this.letterGameObjects.forEach(R=>{R.getData("order")===s.getData("order")+1&&(o=R)}),o.clearTint();const v=parseInt("0x"+this.fontColor);o.setTint(v),o.setData("order",-1),this.currentOrderCount--,this.gameObjectsMap.get(this.getPreviewLetterTextName(this.currentOrderCount)).setVisible(!1);const S=this.getWheelScale();this.currentSelectedLetters.pop(),this.displayPreview(this.CircleCenterAbsoluteX,this.CircleCenterAbsoluteY-this.AbsoluteRadius*(1+parseFloat(this.fontSize)*.5)*S),this.currentSelectedLettersBackgroundImages.pop().setVisible(!1),this.linesBetweenLetters.length!==this.currentOrderCount-1&&this.linesBetweenLetters.pop().clear();const E=this.gameObjectsMap.get("line");T().isNil(E)||E.clear(),this.currentSelectedLetterGameObject=s}renderLetters(s){if(s===""){console.warn("shuffled letters array is empty, returning",s);return}this.getCurrentLettersCoordinates(s).forEach((v,S,E)=>{if(this.letterGameObjects.length===0||this.letterGameObjects.length<S+1){const $=this.scene.add.bitmapText(v.x,v.y,this.getBitmapFontKeyCallback(),v.text,this.AbsoluteRadius*this.fontSize),ne=parseInt("0x"+this.fontColor);$.setTint(ne),$.setData("order",-1),$.setName(this.componentId+"_"+S),$.setInteractive(new Phaser.Geom.Circle(0,0,0),Phaser.Geom.Circle.Contains),$.on("pointerdown",()=>{this.areLettersBeingSelectedByTouching=!0,this.clearWheel(),this.onLetterPointerDown($)}),this.letterGameObjects.push($)}else{this.letterGameObjects[S].visible||this.letterGameObjects[S].setVisible(!0),this.letterGameObjects[S].text!==v.text&&this.letterGameObjects[S].setText(v.text),this.letterGameObjects[S].x!==v.x&&this.letterGameObjects[S].setX(v.x),this.letterGameObjects[S].y!==v.y&&this.letterGameObjects[S].setY(v.y);const $=parseInt("0x"+this.fontColor);this.letterGameObjects[S].tintTopLeft!==$&&(this.letterGameObjects[S].clearTint(),this.letterGameObjects[S].setTint($)),this.letterGameObjects[S].getData("order")!==-1&&this.letterGameObjects[S].setData("order",-1)}const R=this.getDepthByName(this.depthNames.letter);this.letterGameObjects[S].depth!==R&&this.letterGameObjects[S].setDepth(R);const k=this.getTextOriginYCallback();this.letterGameObjects[S].originY!==k&&this.letterGameObjects[S].setOrigin(.5,k);const W=this.getWheelScale();this.letterGameObjects[S].fontSize!==this.AbsoluteRadius*this.fontSize*W&&this.letterGameObjects[S].setFontSize(this.AbsoluteRadius*this.fontSize*W);const K=this.letterGameObjects[S].getTextBounds();let q=this.letterGameObjects[S].input.hitArea;(K.local.width!==q.width||K.local.height!==q.height)&&this.letterGameObjects[S].input.hitArea.setTo(K.local.x+K.local.width/2,K.local.y+K.local.height/2,K.local.height*.6),this.letterGameObjects[S].visible!==this.isVisible&&this.letterGameObjects[S].setVisible(this.isVisible)})}onLetterPointerDown(s){if(this.isShufflePlaying)return;this.resetDeselectCount(),this.killShakeTweensOfPreview(),this.shouldHandDisplayCallback()&&(this.clearTutorialHandLines(),this.killHandTweens(),this.getHand().setAlpha(0));const o=this.getPreviewContainer();T().isNil(o)||(o.setPosition(0,0),o.setVisible(!1)),s.setData("order",this.currentOrderCount),this.currentOrderCount++,this.renderSelectedLetterInWheelBackground(s),this.renderSelectedLetterInWheelRing(s),this.currentSelectedLetterGameObject=s,this.currentSelectedLetters.push(s.text),this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.letterSelect1[0].key);const v=this.getWheelScale();this.displayPreview(this.CircleCenterAbsoluteX,this.CircleCenterAbsoluteY-this.AbsoluteRadius*(1+parseFloat(this.fontSize)*.5)*v),this.gameObjectsMap.get("shuffle").setVisible(!1),this.letterGameObjects.forEach(E=>{E.on("pointerover",()=>{E.getData("order")===-1?this.letterPointerOverOnFirstTouch(E):this.currentOrderCount-2===E.getData("order")&&this.letterPointerOverOnBackTouch(E)})})}get CircleRelativeX(){const s=T().get(this,`circlePosition.${this.scene.getOrientation()}.x`);if(T().isNil(s))throw"could not get relative x";return s}get CircleRelativeY(){const s=T().get(this,`circlePosition.${this.scene.getOrientation()}.y`);if(T().isNil(s))throw"could not get relative y";return s}get CircleCenterAbsoluteX(){return this.LeftAbsoluteX+this.AbsoluteRadius+this.CircleRelativeX*(this.AbsoluteWidth-2*this.AbsoluteRadius)}get CircleCenterAbsoluteY(){return this.TopAbsoluteY+this.AbsoluteRadius+this.CircleRelativeY*(this.AbsoluteHeight-2*this.AbsoluteRadius)}get AbsoluteRadius(){return Math.min(this.AbsoluteWidth,this.AbsoluteHeight)*this.radius*.5}handleWordFoundByHint(s){this.words!==[]&&this.words.includes(s)&&(this.words=this.words.filter(o=>o!==s),this.foundWords.push(s))}prepareOtherWordsCurrentState(s){s.forEach(o=>{this.otherWords=this.otherWords.filter(v=>v!==o),this.foundOtherWords.push(o)}),console.log("prepare other words current state",this.otherWords,this.foundOtherWords)}onPointerUp(){this.currentOrderCount=0,this.currentSelectedLettersBackgroundImages.forEach(k=>{k.setVisible(!1)}),this.currentSelectedLettersBackgroundImages=[];const s=this.gameObjectsMap.get("shuffle"),o=this.isVisible;s.visible!==o&&s.setVisible(o);const v=this.getPreviewLetterGameObjects(!0),S=this.getPreviewContainer(),E=this.currentSelectedLetters.join("");if(E==="")return;if(this.words!==[]&&this.words.includes(E))this.words=this.words.filter(k=>k!==E),this.foundWords.push(E),this.currentSelectedLetters=[],v.length>0&&(v.forEach((k,W)=>{this.gameObjectsMap.delete(k.getData("mapKey")),k.setData("mapKey",null),k.setData("order",W)}),S.setVisible(!1)),this.movePreaddedPreviewLettersToFront(v),this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.wordCorrect[0].key),this.onValidMove({word:E,letters:v,scene:this.scene,wordWheel:this});else{if(this.otherWords.length>0&&!this.foundOtherWords.includes(E)&&this.otherWords.includes(E))this.otherWords=this.otherWords.filter(k=>k!==E),this.foundOtherWords.push(E),this.currentSelectedLetters=[],v.length>0&&(v.forEach((k,W)=>{this.gameObjectsMap.delete(k.getData("mapKey")),k.setData("mapKey",null),k.setData("order",W)}),S.setVisible(!1)),this.movePreaddedPreviewLettersToFront(v),this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.otherWordFound[0].key),this.onOtherWordFound({word:E,letters:v});else if(this.currentSelectedLetters.length>=3){const k=Math.min(this.scene.game.canvas.width,this.scene.game.canvas.height),W=60,K=k*.02;let q=this.gameObjectsMap.get("wrongAnswerContainer");T().isNil(q)&&(q=this.scene.add.container(0,0).setDepth(v[0].depth),this.gameObjectsMap.set("wrongAnswerContainer",q)),q.add([S,...v]);const $=this.scene.tweens.timeline({targets:q,loop:2,tweens:[{x:K,ease:"Linear",duration:W,yoyo:!0},{x:-K,duration:W,yoyo:!0}],onStart:()=>{this.isWrongAnswerTimelinePlaying=!0},onComplete:()=>{this.isWrongAnswerTimelinePlaying=!1,this.currentSelectedLetters=[],v.forEach(oe=>{oe.setText(""),oe.setVisible(!1)}),S.setPosition(0,0),S.setVisible(!1),q.getAll().forEach(oe=>{this.scene.add.existing(oe)}),q.removeAll()}});E!==""&&this.foundOtherWords.includes(E)?this.onDuplicateOtherWordFound(E):this.foundWords!==[]&&this.foundWords.includes(E)?(this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.wordDuplicate[0].key),this.onDuplicateMove({word:E})):this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.wordInvalid[0].key)}else this.currentSelectedLetters=[],v.length>0&&(v.forEach(k=>{k.setText(""),k.setVisible(!1)}),S.setVisible(!1));this.onInvalidMoveCallback()}this.letterGameObjects.forEach(k=>{k.clearTint();const W=parseInt("0x"+this.fontColor);k.setTint(W),k.setData("order",-1),k.removeAllListeners("pointerover"),k.setInteractive()}),this.linesBetweenLetters.forEach(k=>{k.clear()}),this.linesBetweenLetters=[];const R=this.gameObjectsMap.get("line");T().isNil(R)||R.clear(),this.currentSelectedLetterGameObject=null,this.shouldHandDisplayCallback()&&this.playHandTweens()}movePreaddedPreviewLettersToFront(s){this.getPreviewLetterGameObjects(!1).forEach((v,S,E)=>{const R=v.getData("mapKey");this.gameObjectsMap.delete(R);const k=R.split("_"),W=k[1]-s.length,K=k[0]+"_"+W;v.setData("mapKey",K),this.gameObjectsMap.set(K,v)})}getPreviewLetterGameObjects(s){let o=[];return this.gameObjectsMap.forEach((v,S)=>{S.startsWith("previewLetterText_")&&v.visible===s&&o.push(v)}),o}killShakeTweensOfPreview(){this.isWrongAnswerTimelinePlaying=!1;const s=this.gameObjectsMap.get("wrongAnswerContainer");T().isNil(s)||(this.scene.tweens.killTweensOf(s),s.getAll().forEach(E=>{this.scene.add.existing(E)}),s.removeAll(),s.setPosition(0,0)),this.getPreviewLetterGameObjects(!0).forEach(S=>{this.scene.tweens.killTweensOf(S),this.currentSelectedLetters=[],S.setText(""),S.setVisible(!1)});const v=this.getPreviewContainer();T().isNil(v)||(this.scene.tweens.killTweensOf(v),v.setPosition(0,0),v.setVisible(!1))}addSceneInputEventListeners(){this.areSceneInputEventListenersAdded||(this.areSceneInputEventListenersAdded=!0,this.scene.input.on("pointerup",()=>{this.areLettersBeingSelectedByTouching?(this.onPointerUp(),this.areLettersBeingSelectedByTouching=!1):this.clearWheel()}),this.scene.input.on("pointermove",(s,o)=>{if(!this.areLettersBeingSelectedByTouching||!this.currentSelectedLetterGameObject||!T().isNil(o[0])&&o[0].getData("order")!==-1&&this.currentOrderCount>o[0].getData("order"))return;const v=this.currentWheelLetters.length;if(this.linesBetweenLetters.length===v-1)return;const S=this.getWheelScale();if(this.shouldHandDisplayCallback()&&T().isNil(o[0].text)||o.length===0){let E=this.gameObjectsMap.get("line");T().isNil(E)&&(E=this.scene.add.graphics(),this.gameObjectsMap.set("line",E));const R=this.getDepthByName(this.depthNames.line);E.depth!==R&&E.setDepth(R),E.clear(),E.lineStyle(this.AbsoluteRadius*this.fontSize*.5*.5*S,this.getPrimaryColor(),1),E.lineBetween(this.currentSelectedLetterGameObject.x,this.currentSelectedLetterGameObject.y,s.x,s.y)}if(o.length===1&&!T().isNil(o[0].text)&&!T().isEqual(o[0],this.currentSelectedLetterGameObject)){let E=this.gameObjectsMap.get("line");T().isNil(E)&&(E=this.scene.add.graphics(),this.gameObjectsMap.set("line",E));const R=this.getDepthByName(this.depthNames.line);E.depth!==R&&E.setDepth(R),E.clear(),E.lineStyle(this.AbsoluteRadius*this.fontSize*.5*.5*S,this.getPrimaryColor(),1),E.lineBetween(this.currentSelectedLetterGameObject.x,this.currentSelectedLetterGameObject.y,o[0].x,o[0].y),this.linesBetweenLetters.push(E),this.gameObjectsMap.delete("line"),this.currentSelectedLetterGameObject=o[0]}}))}renderShuffleButton(){const s=this.getWheelScale();let o=this.gameObjectsMap.get("shuffle");if(T().isNil(o)){if(!this.scene.textures.exists(this.selectedImages.shuffleIcon[0].key))throw{message:"texture key does not exist in scene",textureKey:this.selectedImages.shuffleIcon[0].key,scene:this.scene};o=this.scene.add.image(this.CircleCenterAbsoluteX,this.CircleCenterAbsoluteY,this.selectedImages.shuffleIcon[0].key),o.setInteractive(),o.setName("shuffle"),o.on("pointerdown",()=>{if(!this.shouldHandDisplayCallback()&&this.isVisible&&!this.isShufflePlaying&&(this.isShufflePlaying=!0,this.onShufflePointerdownCallback(),this.shouldShuffleTutorialDisplayCallback()&&this.onShuffleTutorialEndCallback(),this.currentWheelLetters.length>0)){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.shuffleLetters[0].key),this.shuffledLettersInfoArray=T().shuffle(this.shuffledLettersInfoArray);const R=this.getCurrentLettersCoordinates(this.shuffledLettersInfoArray);let k=[];this.shuffledLettersInfoArray.forEach(($,ne,oe)=>{k.push({index:ne,text:$.text,hasTween:!1})});const W=[],K=[];this.letterGameObjects.forEach(($,ne,oe)=>{if(ne<this.shuffledLettersInfoArray.length){let ce,me;if(k.forEach((fe,xe,ve)=>{T().isNil(ce)&&T().isNil(me)&&!fe.hasTween&&fe.text===$.text&&(ce=R[xe].x,me=R[xe].y,fe.hasTween=!0)}),T().isNil(ce)||T().isNil(me))throw{message:"x or y is not initialized",x:ce,y:me};W.push($),K.push({x:ce,y:me})}});const q=this.scene.tweens.add({targets:W,duration:150,x:{getEnd:($,ne,oe,ce)=>K[ce].x},y:{getEnd:($,ne,oe,ce)=>K[ce].y},onComplete:()=>{this.isShufflePlaying=!1}})}}),this.gameObjectsMap.set("shuffle",o)}else o.setX(this.CircleCenterAbsoluteX),o.setY(this.CircleCenterAbsoluteY),o.texture.key!==this.selectedImages.shuffleIcon[0].key&&o.setTexture(this.selectedImages.shuffleIcon[0].key);const v=this.getDepthByName(this.depthNames.shuffle);o.depth!==v&&o.setDepth(v);const S=this.isVisible;o.visible!==S&&o.setVisible(S);const E=this.AbsoluteRadius/o.width*T().get(this,`shuffleButtonScale.${this.scene.getOrientation()}`)*s;o.scale!==E&&o.setScale(E)}renderCircle(){const s=this.getWheelScale();let o=this.gameObjectsMap.get("circle");T().isNil(o)?(o=this.scene.add.image(this.CircleCenterAbsoluteX,this.CircleCenterAbsoluteY,this.selectedImages.wordWheel[0].key),this.gameObjectsMap.set("circle",o)):((o.x!==this.CircleCenterAbsoluteX||o.y!==this.CircleCenterAbsoluteY)&&o.setPosition(this.CircleCenterAbsoluteX,this.CircleCenterAbsoluteY),o.texture.key!==this.selectedImages.wordWheel[0].key&&o.setTexture(this.selectedImages.wordWheel[0].key));const v=this.getDepthByName(this.depthNames.circle);o.depth!==v&&o.setDepth(v),o.tintTopLeft!==this.wheelColor&&(o.clearTint(),o.setTint(this.wheelColor)),o.alpha!==this.wheelAlpha&&o.setAlpha(this.wheelAlpha),o.displayWidth!==this.AbsoluteRadius*2&&(o.displayWidth=this.AbsoluteRadius*2),o.displayHeight!==this.AbsoluteRadius*2&&(o.displayHeight=this.AbsoluteRadius*2),o.scale!==s*o.scale&&o.setScale(s*o.scale),o.visible!==this.isVisible&&o.setVisible(this.isVisible)}getWheelTweenContainer(){let s=this.gameObjectsMap.get("wheelTweenContainer");T().isNil(s)?(s=this.scene.add.container(this.CircleCenterAbsoluteX,this.CircleCenterAbsoluteY),this.gameObjectsMap.set("wheelTweenContainer",s)):(s.x!==this.CircleCenterAbsoluteX||s.y!==this.CircleCenterAbsoluteY)&&s.setPosition(this.CircleCenterAbsoluteX,this.CircleCenterAbsoluteY);const o=this.getDepthByName(this.depthNames.circle);return s.depth!==o&&s.setDepth(o),s}appearWheel(s){this.isAppearTweenCompleted=!1;const o=this.getWheelTweenContainer();o.setAlpha(1),o.setScale(1);const v=[],S=this.gameObjectsMap.get("circle");S.setPosition(S.x-this.CircleCenterAbsoluteX,S.y-this.CircleCenterAbsoluteY),v.push(S),this.letterGameObjects.forEach(R=>{R.visible&&(R.setPosition(R.x-this.CircleCenterAbsoluteX,R.y-this.CircleCenterAbsoluteY),v.push(R))});const E=this.gameObjectsMap.get("shuffle");E.setPosition(E.x-this.CircleCenterAbsoluteX,E.y-this.CircleCenterAbsoluteY),v.push(E),o.add(v),o.setAlpha(0),o.setScale(0),this.scene.tweens.add({targets:o,duration:s,alpha:1,onStart:()=>{this.scene.tweens.add({targets:o,duration:s*.5,scale:1.15,onComplete:()=>{this.scene.tweens.add({duration:s*.5,targets:o,scale:1})}})},onComplete:()=>{o.getAll().forEach(k=>{k.setDepth(k.depth),this.scene.add.existing(k)}),o.removeAll(),this.isVisible=!0,this.render(),this.isAppearTweenCompleted=!0,this.playHandTweens()}}),console.log("wheel depth",o.depth)}disappearWheel(s){this.clearWheel();const o=this.getWheelTweenContainer();o.setAlpha(1),o.setScale(1);const v=[],S=this.gameObjectsMap.get("circle");S.setPosition(S.x-this.CircleCenterAbsoluteX,S.y-this.CircleCenterAbsoluteY),v.push(S),this.letterGameObjects.forEach(R=>{R.visible&&(R.setPosition(R.x-this.CircleCenterAbsoluteX,R.y-this.CircleCenterAbsoluteY),v.push(R))});const E=this.gameObjectsMap.get("shuffle");E.setPosition(E.x-this.CircleCenterAbsoluteX,E.y-this.CircleCenterAbsoluteY),v.push(E),o.add(v),this.scene.tweens.add({targets:o,duration:s,alpha:0,onStart:()=>{this.scene.tweens.add({targets:o,duration:s*.5,scale:1.15,onComplete:()=>{this.scene.tweens.add({duration:s*.5,targets:o,scale:0})}})},onComplete:()=>{o.getAll().forEach(k=>{this.scene.add.existing(k)}),o.removeAll(),this.isVisible=!1,this.render()}})}}function Te(I,s,o){return(1-o)*I+o*s}class ye extends Ae{constructor(s){super(s),this.boxState={empty:"empty",hasLetter:"hasLetter",emphasized:"emphasized",hinted:"hinted",full:"full"},this.depthNames={boxShadow:"boxShadow",boxInactive:"boxInactive",frameInactive:"frameInactive",boxActive:"boxActive",frameActive:"frameActive",hintAnimationSprite:"hintAnimationSprite",letter:"letter",bonusImage:"bonusImage",hammer:"hammer",hammerRing:"hammerRing",butterfly:"butterfly"},this.tweens=new Map,this.wordsMap=new Map,this.tintTweenStates=[],this.board=[],this.bonusCoordinates=[],this.butterflyCoordinate={},this.butterflyType="",this.butterflyFailCount=-1,this.butterflyWaitTime=-1,this.butterflyPrize=-1,this.butterflyPrizePool="",this.hasButterflyOnCurrentLevel=!1,this.butterflyAnimationChangeTimer=null,this.drawReferenceRectangle=!1,this.disappearMultiplier=.5}load(){super.load(),this.loadTextures(),this.loadSounds(),this.loadAtlases()}atlasesLoadComplete(){super.atlasesLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isAtlasesLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isAtlasesLoadComplete=!1)}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isAtlasesLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isAtlasesLoadComplete=!1)}soundLoadComplete(){super.soundLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&this.isAtlasesLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1,this.isAtlasesLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(16711680),this.measure();for(let s=0;s<this.boardNumRows;s++)for(let o=0;o<this.boardNumColumns;o++){if(this.boxShadow.isEnabled)this.addBoxShadow({rowIndex:s,columnIndex:o,delay:0});else{const S=this.getBoxShadowName({rowIndex:s,columnIndex:o}),E=this.gameObjectsMap.get(S);_.isNil(E)||E.setVisible(!1)}switch(this.renderHintAnimationSprite({rowIndex:s,columnIndex:o}),_.get(this,`board[${s}][${o}].state`,"empty")){case"empty":this.renderBoxClear({rowIndex:s,columnIndex:o,delay:0});break;case"hasLetter":this.renderBoxHasLetter({rowIndex:s,columnIndex:o,delay:0});break;case"emphasized":this.renderBoxEmphasize({rowIndex:s,columnIndex:o,delay:0});const S=this.gameObjectsMap.get(this.getLetterName({rowIndex:s,columnIndex:o}));!_.isNil(S)&&S.visible&&this.renderHintedBoxLetter({rowIndex:s,columnIndex:o,delay:0,shouldPlayHintAnimation:!1});break;case"hinted":this.renderBoxHasLetter({rowIndex:s,columnIndex:o,delay:0}),this.renderHintedBoxLetter({rowIndex:s,columnIndex:o,delay:0,shouldPlayHintAnimation:!1});break;case"full":this.renderBoxFull({rowIndex:s,columnIndex:o,delay:0}),this.renderBoxLetter({rowIndex:s,columnIndex:o,delay:0});break;default:break}}this.bonusCoordinates.forEach(s=>{this.renderBonusImage({rowIndex:s.rowIndex,columnIndex:s.columnIndex})}),this.renderButterfly(),_.has(this,"onRender")&&this.onRender({componentId:this.componentId})}getPrimaryColor(){return this.primaryColor}setPrimaryColor(s){s!==this.getPrimaryColor()&&(this.primaryColor=s)}getButterflySprite(){return this.gameObjectsMap.get("butterflySprite")}renderButterfly(){if(_.isEmpty(this.butterflyCoordinate))return;let s,o;if(this.butterflyType==="B")s=this.getButterflyAtlasKeyByNameCallback("butterfly_normal"),o=this.getButterflyAtlasPlayKeyByNameAndStateCallback("normal","idle_1");else if(this.butterflyType==="G")s=this.getButterflyAtlasKeyByNameCallback("butterfly_golden"),o=this.getButterflyAtlasPlayKeyByNameAndStateCallback("golden","idle_1");else if(this.butterflyType==="L")s=this.getButterflyAtlasKeyByNameCallback("butterfly_legendary"),o=this.getButterflyAtlasPlayKeyByNameAndStateCallback("legendary","idle_1");else throw{message:"please provide proper butterfly type during render butterfly",butterflyType:this.butterflyType};const v=this.visibleLeftX+(this.butterflyCoordinate.columnIndex+.5)*this.boxSize,S=this.visibleTopY+(this.butterflyCoordinate.rowIndex+.5)*this.boxSize;let E=this.gameObjectsMap.get("butterflySprite");_.isNil(E)?(E=this.scene.add.sprite(v,S,s).setDepth(this.getDepthByName(this.depthNames.butterfly)),this.butterflyAnimationChangeTimer=this.scene.time.addEvent({delay:8e3,callback:()=>{const k=this.getButterflySprite();if(this.butterflyType===""||this.butterflyType==="E"||_.isNil(k))_.isNil(this.butterflyAnimationChangeTimer)||(this.butterflyAnimationChangeTimer.remove(!1),this.butterflyAnimationChangeTimer=null);else{let W,K;if(this.butterflyType==="B")W=this.getButterflyAtlasPlayKeyByNameAndStateCallback("normal","idle_1"),K=this.getButterflyAtlasPlayKeyByNameAndStateCallback("normal","idle_2");else if(this.butterflyType==="G")W=this.getButterflyAtlasPlayKeyByNameAndStateCallback("golden","idle_1"),K=this.getButterflyAtlasPlayKeyByNameAndStateCallback("golden","idle_2");else if(this.butterflyType==="L")W=this.getButterflyAtlasPlayKeyByNameAndStateCallback("legendary","idle_1"),K=this.getButterflyAtlasPlayKeyByNameAndStateCallback("legendary","idle_2");else throw{message:"please provide proper butterfly type during butterfly animation change timer",butterflyType:this.butterflyType};k.play(K);const q=this.visibleTopY+(this.butterflyCoordinate.rowIndex+.5)*this.boxSize;let $;if(this.butterflyType==="B")$=k.displayHeight*.025;else if(this.butterflyType==="G")$=k.displayHeight*.035;else if(this.butterflyType==="L")$=k.displayHeight*.035;else throw{message:"please provide proper butterfly type during butterfly animation change timer2",butterflyType:this.butterflyType};k.setY(q-$),k.once("animationcomplete",()=>{if(_.isEmpty(this.butterflyCoordinate))return;k.play(W);const ne=this.visibleTopY+(this.butterflyCoordinate.rowIndex+.5)*this.boxSize;k.setY(ne)})}},callbackScope:this,loop:!0}),E.setData("isTweenPlaying",!1),E.play(o),this.gameObjectsMap.set("butterflySprite",E)):(E.getData("isTweenPlaying")||(E.x!==v||E.y!==S)&&E.setPosition(v,S),E.texture.key!==s&&E.setTexture(s));const R=this.boxSizeInner*1.2;if(E.displayWidth!==R&&(E.displayWidth=R,E.displayHeight=R),!E.getData("isTweenPlaying")){const k=this.getButterflyVisibilityCallback()&&this.isVisible;E.visible!==k&&E.setVisible(k)}}renderHintAnimationSprite(s){const o=s.rowIndex,v=s.columnIndex,S=this.getAtlasKeyByName("hint");let E=this.gameObjectsMap.get("hintAnimation");if(_.isNil(E)){const K=this.getAtlasPlayKeyByName("hint");E=this.scene.anims.create({key:K,frames:this.scene.anims.generateFrameNames(S),showOnStart:!0,hideOnComplete:!0}),this.gameObjectsMap.set("hintAnimation",E)}const R=this.getHintAnimationSpriteName({rowIndex:o,columnIndex:v});let k=this.gameObjectsMap.get(R);_.isNil(k)&&(k=this.scene.add.sprite(0,0,S).setDepth(this.getDepthByName(this.depthNames.hintAnimationSprite)).setVisible(!1),this.gameObjectsMap.set(R,k));const W=this.boxSizeInner*3/k.width;k.scale!==W&&k.setScale(W)}getHintAnimationSpriteName(s){return"hintAnimationSprite_"+s.rowIndex+"_"+s.columnIndex}getAtlasKeyByName(s){return _.find(this.selectedAtlases[s],o=>o.variant==="image").key}getAtlasPlayKeyByName(s){return this.getAtlasKeyByName(s)+"_"+this.componentId}renderBonusImage(s){const o=s.rowIndex,v=s.columnIndex,S=this.visibleLeftX+s.columnIndex*this.boxSize+this.boxSize*.5,E=this.visibleTopY+s.rowIndex*this.boxSize+this.boxSize*.5,R=this.getBonusImageName({rowIndex:o,columnIndex:v});let k=this.gameObjectsMap.get(R);_.isNil(k)?(k=this.scene.add.image(S,E,this.getBonusImageTextureKeyCallback()).setDepth(this.getDepthByName(this.depthNames.bonusImage)),this.gameObjectsMap.set(R,k)):(k.x!==S||k.y!==E)&&k.setPosition(S,E);const W=this.boxSizeInner*.6;k.displayWidth!==W&&(k.displayWidth=W,k.displayHeight=W),!this.isVisible&&this.isVisible!==k.visible&&k.setVisible(this.isVisible)}onLetterRevealedInBonusBox(s,o){const v=this.gameObjectsMap.get(this.getBonusImageName({rowIndex:s.rowIndex,columnIndex:s.columnIndex}));if(_.isNil(v))throw{message:"bonus image does not exist",coordinate:s};this.scene.tweens.add({duration:750,targets:v,ease:"Back.easeIn",x:o.x,y:o.y,onComplete:()=>{v.destroy()}})}playHammerHintSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.hammerHint[0].key)}getMiddlePositionByRowAndColumnIndex(s){const o=s.rowIndex,v=s.columnIndex;return{x:this.visibleLeftX+v*this.boxSize+this.boxSize*.5,y:this.visibleTopY+o*this.boxSize+this.boxSize*.5}}playHammerRingTween(s){const o=s.rowIndex,v=s.columnIndex;let S=this.gameObjectsMap.get("hammerRing");_.isNil(S)&&(S=this.scene.add.image(0,0,this.selectedImages.hammerRing[0].key).setDepth(this.getDepthByName(this.depthNames.hammerRing)).setVisible(!1),this.gameObjectsMap.set("hammerRing",S));const E=this.boxSize*1.5/S.width;this.scene.tweens.killTweensOf(S),this.scene.tweens.add({duration:750,targets:S,scale:E*20,alpha:0,onStart:()=>{const R=this.getMiddlePositionByRowAndColumnIndex({rowIndex:o,columnIndex:v});(S.x!==R.x||S.y!==R.y)&&S.setPosition(R.x,R.y),S.setScale(E),S.setAlpha(1),S.setVisible(!0)},onComplete:()=>{S.setVisible(!1)}})}playHammerTween(s){const o=s.rowIndex,v=s.columnIndex;let S=this.gameObjectsMap.get("hammer");_.isNil(S)&&(S=this.scene.add.image(0,0,this.selectedImages.hammer[0].key).setDepth(this.getDepthByName(this.depthNames.hammer)).setAlpha(0),this.gameObjectsMap.set("hammer",S));const E=this.getMiddlePositionByRowAndColumnIndex({rowIndex:o,columnIndex:v});let R=!1,k=47,W,K,q=30,$=-2,ne=-10,oe=30,ce=55,me=15,fe;v>this.boardNumColumns/2?(fe={x:0,y:.9},R=!0,k*=-1,q*=-1,W=o+1.25,K=v-2,$*=-1,ne*=-1,oe*=-1,ce*=-1,me*=-1):(fe={x:1,y:.9},W=o+1.25,K=v+2),S.flipX!==R&&S.setFlipX(R),S.setOrigin(fe.x,fe.y);const xe=this.getMiddlePositionByRowAndColumnIndex({rowIndex:W,columnIndex:K});S.setPosition(xe.x,xe.y);const ve=this.boxSize/S.height;this.scene.tweens.killTweensOf(S),this.scene.tweens.add({duration:250,targets:S,scale:ve*3,alpha:1,angle:k,onStart:()=>{S.setAlpha(0),S.setScale(ve),S.setAngle(q)},onComplete:()=>{this.scene.tweens.add({duration:75,targets:S,angle:k+$,yoyo:!0,onStart:()=>{this.scene.tweens.add({duration:100,targets:S,scale:ve*2.8})},onComplete:()=>{this.scene.tweens.add({duration:75,targets:S,angle:k-$,yoyo:!0,onComplete:()=>{this.scene.tweens.add({duration:75,targets:S,angle:k+$,yoyo:!0,onComplete:()=>{this.scene.tweens.add({duration:75,targets:S,angle:k-$,yoyo:!0,onComplete:()=>{this.scene.tweens.add({duration:150,targets:S,angle:k+ne,onComplete:()=>{this.scene.tweens.add({duration:250,targets:S,angle:k+oe,onComplete:()=>{this.scene.tweens.add({duration:100,targets:S,angle:k-ce,onComplete:()=>{this.onHammerHitCallback({rowIndex:o,columnIndex:v});const We=this.getBox({rowIndex:o,columnIndex:v});this.scene.tweens.add({duration:75,targets:We,displayWidth:this.boxSizeInner,displayHeight:this.boxSizeInner,onStart:()=>{We.displayWidth=this.boxSizeInner*.75,We.displayHeight=this.boxSizeInner*.75,this.getCoordinatesByStates({states:[this.boxState.hasLetter,this.boxState.emphasized,this.boxState.hinted,this.boxState.full],exceptCoordinate:{rowIndex:o,columnIndex:v}}).forEach(ke=>{this.playShockwaveTween({rowIndex:ke.rowIndex,columnIndex:ke.columnIndex,shockCenterX:E.x,shockCenterY:E.y})})}}),this.playHammerRingTween({rowIndex:o,columnIndex:v}),this.scene.tweens.add({duration:500,targets:S,angle:k+me,onComplete:()=>{this.scene.tweens.add({delay:250,duration:250,targets:S,scale:ve,alpha:0,onComplete:()=>{this.makeHammerButtonAvailableCallback()}})}})}})}})}})}})}})}})}})}})}getDepthByName(s){if(s===this.depthNames.boxShadow)return-1;if(s===this.depthNames.boxInactive)return 0;if(s===this.depthNames.frameInactive)return 1;if(s===this.depthNames.boxActive)return 30;if(s===this.depthNames.frameActive)return 31;if(s===this.depthNames.hintAnimationSprite)return 2;if(s===this.depthNames.letter)return 3;if(s===this.depthNames.bonusImage)return 32;if(s===this.depthNames.hammer)return 34;if(s===this.depthNames.hammerRing)return 26;if(s===this.depthNames.butterfly)return 25}setAllBoxesAndFramesDepthToInactive(){for(let s=0;s<this.boardNumRows;s++)for(let o=0;o<this.boardNumColumns;o++)if(!_.isNil(this.board[s][o])&&this.board[s][o].state!=="empty"){const v=this.getDepthByName(this.depthNames.boxInactive),S=this.getDepthByName(this.depthNames.frameInactive);this.setBoxAndFrameDepthByRowAndColumnIndex({rowIndex:s,columnIndex:o,boxDepth:v,frameDepth:S})}}setBoxAndFrameDepthByRowAndColumnIndex(s){const o=s.rowIndex,v=s.columnIndex,S=s.boxDepth,E=s.frameDepth,R=this.gameObjectsMap.get(this.getBoxName({rowIndex:o,columnIndex:v}));if(_.isNil(R))throw{message:"box is nil by row and column index",rowIndex:o,columnIndex:v};R.depth!==S&&R.setDepth(S);const k=this.gameObjectsMap.get(this.getFrameImageName({rowIndex:o,columnIndex:v}));!_.isNil(k)&&k.depth!==E&&k.setDepth(E)}checkAndRemoveCoordinateInBonusCoordinates(s){const o=s.rowIndex,v=s.columnIndex,S=this.bonusCoordinates.findIndex(E=>_.isEqual(E,{rowIndex:o,columnIndex:v}));return S===-1?!1:(this.bonusCoordinates.splice(S,1),!0)}getBonusImageName(s){return"bonusImage_"+s.rowIndex+"_"+s.columnIndex}getBonusImage(s){const o=s.rowIndex,v=s.columnIndex;return this.gameObjectsMap.get(this.getBonusImageName({rowIndex:o,columnIndex:v}))}renderBoxEmphasize(s){const o=s.rowIndex,v=s.columnIndex,S=this.getBoxName({rowIndex:o,columnIndex:v});let E=this.gameObjectsMap.get(S);const R=this.visibleLeftX+v*this.boxSize+this.boxSize*.5,k=this.visibleTopY+o*this.boxSize+this.boxSize*.5;_.isNil(E)?(E=this.scene.add.image(R,k,this.selectedImages.boxBackground[0].key).setDepth(this.getDepthByName(this.depthNames.boxInactive)),E.setData("rowIndex",o),E.setData("columnIndex",v),E.setInteractive(),E.on("pointerdown",()=>{this.onBoxPointerdownCallback({box:E,rowIndex:o,columnIndex:v})}),this.gameObjectsMap.set(S,E)):((E.x!==R||E.y!==k)&&E.setPosition(R,k),E.texture.key!==this.selectedImages.boxBackground[0].key&&E.setTexture(this.selectedImages.boxBackground[0].key)),E.tintTopLeft!==this.boxHasLetterColor&&(E.clearTint(),E.setTint(this.boxHasLetterColor)),E.displayWidth!==this.boxSizeInner&&(E.displayWidth=this.boxSizeInner,E.displayHeight=this.boxSizeInner),E.alpha!==this.boxHasLetterAlpha&&E.setAlpha(this.boxHasLetterAlpha),E.visible!==this.isVisible&&E.setVisible(this.isVisible);const W=this.getFrameImageName({rowIndex:o,columnIndex:v});let K=this.gameObjectsMap.get(W);_.isNil(K)?(K=this.scene.add.image(R,k,this.selectedImages.boxBackgroundFrame[0].key).setDepth(this.getDepthByName(this.depthNames.frameInactive)),K.setData("rowIndex",o),K.setData("columnIndex",v),K.setData("isFrameImage",!0),this.gameObjectsMap.set(W,K)):(K.x!==R||K.y!==k)&&K.setPosition(R,k),K.displayWidth!==this.boxSizeInner&&(K.displayWidth=this.boxSizeInner,K.displayHeight=this.boxSizeInner),K.tintTopLeft!==this.getPrimaryColor()&&(K.clearTint(),K.setTint(this.getPrimaryColor())),K.alpha!==this.boxEmphasizedAlpha&&K.setAlpha(this.boxEmphasizedAlpha),this.isVisible?K.visible||K.setVisible(!0):K.visible&&K.setVisible(!1)}getFrameImageName(s){return"frameImage_"+s.rowIndex+"_"+s.columnIndex}setFoundWordInWordsMap(s){const o=this.wordsMap.get(s);if(_.isNil(o))throw{message:"Found word is not in wordsMap",foundWord:s,wordsMap:this.wordsMap};o.isFound=!0,this.checkAndEscapeButterfly(),this.onSetFoundWordCallback(o.wordString)}checkAndEscapeButterfly(){const s=Array.from(this.wordsMap.values()).filter(o=>o.hasButterfly&&!o.isFound);if(s.length>0&&Array.from(this.wordsMap.values()).filter(v=>v.isFound).length===this.butterflyFailCount){this.butterflyCoordinate={},s.forEach(E=>{E.hasButterfly=!1});const v=this.getButterflySprite();let S;if(this.butterflyType==="B")S=this.getButterflyAtlasPlayKeyByNameAndStateCallback("normal","Flying");else if(this.butterflyType==="G")S=this.getButterflyAtlasPlayKeyByNameAndStateCallback("golden","Flying");else if(this.butterflyType==="L")S=this.getButterflyAtlasPlayKeyByNameAndStateCallback("legendary","Flying");else throw{message:"please provide proper butterfly type during escape",butterflyType:this.butterflyType};v.play(S),this.onButterflyEscapeCallback(),this.scene.tweens.add({targets:v,duration:1e3,x:-this.scene.game.canvas.width*.5,onStart:()=>{this.gameObjectsMap.delete("butterflySprite")},onComplete:()=>{v.destroy()}})}}getLastNotFoundWordObject(){const s=Array.from(this.wordsMap.values()).filter(o=>{if(!o.isFound)return o});if(s.length>1)throw{message:"not found words more than one",notFoundWordObjects:s};return s[0]}emphasizeLastNotFoundWordInBoard(){const s=this.getLastNotFoundWordObject();_.isNil(s)||s.coordinates.forEach(o=>{const v=o.rowIndex,S=o.columnIndex,E=this.board[v][S].state;if(E==="full")return;const R=this.getLetter({rowIndex:v,columnIndex:S}),k=parseInt("0x"+this.FontColor);!_.isNil(R)&&R.visible&&R.tintTopLeft===k||(E==="hinted"&&this.renderHintedBoxLetter({rowIndex:v,columnIndex:S,delay:0,shouldPlayHintAnimation:!1}),this.board[v][S].state="emphasized",this.renderBoxEmphasize({rowIndex:v,columnIndex:S}))})}get AbsoluteFontSize(){return this.fontSize*this.boxSizeInner}get HintedFontColor(){return this.hintedFontColor}get FontColor(){return this.fontColor}setCurrentLevel(s){const o=s.wordsInfoArray,v=this.isCurrentLanguageRightToLeftCallback();if(this.gameObjectsMap.forEach((S,E)=>{if(E.startsWith("wordBoardletter"))S.setVisible(!1);else if(E.startsWith("wordBoardBox")){S.visible&&S.setVisible(!1);const R=this.getDepthByName(this.depthNames.boxInactive);S.depth!==R&&S.setDepth(R)}else if(E.startsWith("frameImage")){S.visible&&S.setVisible(!1);const R=this.getDepthByName(this.depthNames.frameInactive);S.depth!==R&&S.setDepth(R)}else E.startsWith("bonusImage")&&S.visible&&S.setVisible(!1)}),this.board=[],this.tintTweenStates=[],this.bonusCoordinates=[],this.butterflyCoordinate={},this.butterflyType="",this.butterflyFailCount=-1,this.butterflyWaitTime=-1,this.butterflyPrize=-1,this.butterflyPrizePool="",this.hasButterflyOnCurrentLevel=!1,this.wordsMap.clear(),o.forEach((S,E,R)=>{const k=S.split(",");if(k.length<4){console.warn("wordRecord is not good for processing, returning",S);return}const W=Number(k[0]),K=Number(k[1]),q=k[2];let $,ne="";k[3].length===2?(ne=k[3][0],$=k[3][1]):$=k[3];const oe=Array.from(q),ce=[];oe.forEach((ve,We,Ze)=>{let ke;$==="H"?ke={rowIndex:W,columnIndex:K+We}:$==="V"&&(ke={rowIndex:W+We,columnIndex:K}),ce.push({rowIndex:ke.rowIndex,columnIndex:ke.columnIndex}),ne==="B"&&this.bonusCoordinates.push({rowIndex:ke.rowIndex,columnIndex:ke.columnIndex})});const me={rowIndex:W,columnIndex:K,orientation:$,bonus:ne,wordIndex:E,letters:oe,coordinates:ce,wordString:q,isFound:!1,hasButterfly:!1};this.wordsMap.set(q,me);let fe=Number(W),xe=Number(K);oe.forEach((ve,We,Ze)=>{if(this.board.length<fe+1)for(let ke=this.board.length;ke<=fe;ke++)this.board.push([]),this.tintTweenStates.push([]);if(this.board[fe].length<xe+1)for(let ke=this.board[fe].length;ke<=xe;ke++)this.board[fe].push({state:"empty"}),this.tintTweenStates[fe].push({state:"notPlaying"});this.board[fe][xe]={letter:ve,state:"hasLetter"},$==="H"?xe++:$==="V"&&fe++})}),v){let S=0;this.board.forEach((E,R,k)=>{E.length>S&&(S=E.length)}),this.wordsMap.forEach((E,R,k)=>{E.columnIndex=S-1-E.columnIndex,E.coordinates.forEach(W=>{W.columnIndex=S-1-W.columnIndex}),k.set(R,E)});for(let E=0;E<this.board.length;E++){const R=this.board[E].length;if(R<S){const k=S-R;for(let W=0;W<k;W++)this.board[E].push({state:"empty"}),this.tintTweenStates[E].push({state:"notPlaying"})}}this.board=this.board.map(function(E){return E.reverse()})}this.measure()}appearBoard(s){this.bonusCoordinates.forEach(E=>{this.getBonusImage({rowIndex:E.rowIndex,columnIndex:E.columnIndex}).setVisible(!1)});const o=this.getButterflySprite(),v=this.getButterflyVisibilityCallback();!_.isNil(o)&&v&&o.setVisible(!1);const S=[];console.log("board",this.board);for(let E=0;E<this.boardNumRows;E++)for(let R=0;R<this.boardNumColumns;R++){const k=_.get(this,`board[${E}][${R}].state`,"empty");if(k==="hasLetter"){const W=this.getBox({rowIndex:E,columnIndex:R});if(W.displayWidth*=this.disappearMultiplier,W.displayHeight*=this.disappearMultiplier,W.setAlpha(0),S.push(W),this.boxShadow.isEnabled){const K=this.gameObjectsMap.get(this.getBoxShadowName({rowIndex:E,columnIndex:R}));K.displayWidth*=this.disappearMultiplier,K.displayHeight*=this.disappearMultiplier,K.setAlpha(0),S.push(K)}}else if(k==="emphasized"){const W=this.getBox({rowIndex:E,columnIndex:R});if(W.displayWidth*=this.disappearMultiplier,W.displayHeight*=this.disappearMultiplier,W.setAlpha(0),S.push(W),this.boxShadow.isEnabled){const ne=this.gameObjectsMap.get(this.getBoxShadowName({rowIndex:E,columnIndex:R}));ne.displayWidth*=this.disappearMultiplier,ne.displayHeight*=this.disappearMultiplier,ne.setAlpha(0),S.push(ne)}const K=this.getFrameImageName({rowIndex:E,columnIndex:R}),q=this.gameObjectsMap.get(K);q.displayWidth*=this.disappearMultiplier,q.displayHeight*=this.disappearMultiplier,q.setAlpha(0),S.push(q);const $=this.getLetter({rowIndex:E,columnIndex:R});_.isNil($)||($.setFontSize($.fontSize*this.disappearMultiplier),$.setAlpha(0),S.push($))}else if(k==="hinted"){const W=this.getBox({rowIndex:E,columnIndex:R});if(W.displayWidth*=this.disappearMultiplier,W.displayHeight*=this.disappearMultiplier,W.setAlpha(0),S.push(W),this.boxShadow.isEnabled){const q=this.gameObjectsMap.get(this.getBoxShadowName({rowIndex:E,columnIndex:R}));q.displayWidth*=this.disappearMultiplier,q.displayHeight*=this.disappearMultiplier,q.setAlpha(0),S.push(q)}const K=this.getLetter({rowIndex:E,columnIndex:R});K.setFontSize(K.fontSize*this.disappearMultiplier),K.setAlpha(0),S.push(K)}else if(k==="full"){const W=this.getBox({rowIndex:E,columnIndex:R});if(W.displayWidth*=this.disappearMultiplier,W.displayHeight*=this.disappearMultiplier,W.setAlpha(0),S.push(W),this.boxShadow.isEnabled){const q=this.gameObjectsMap.get(this.getBoxShadowName({rowIndex:E,columnIndex:R}));q.displayWidth*=this.disappearMultiplier,q.displayHeight*=this.disappearMultiplier,q.setAlpha(0),S.push(q)}const K=this.getLetter({rowIndex:E,columnIndex:R});K.setFontSize(K.fontSize*this.disappearMultiplier),K.setAlpha(0),S.push(K)}}this.scene.tweens.add({targets:S,duration:s,alpha:{getEnd:(E,R,k,W)=>{const K=E.getData("rowIndex"),q=E.getData("columnIndex");if(E.type!=="BitmapText"){const $=_.get(this,`board[${K}][${q}].state`,"empty");if(E.getData("isShadow"))return this.boxShadow.alpha;if($==="emphasized")return E.getData("isFrameImage")?1:this.boxEmphasizedAlpha;if($==="hinted"||$==="hasLetter")return this.boxHasLetterAlpha;if($==="full")return this.boxFullAlpha}return 1}},fontSize:{getEnd:(E,R,k,W)=>E.type==="BitmapText"?this.AbsoluteFontSize:E.fontSize},displayWidth:{getEnd:(E,R,k,W)=>E.getData("isFrameImage")?this.boxSizeInner:E.getData("isShadow")?this.getBoxShadowSize():E.type!=="BitmapText"?this.boxSizeInner:E.displayWidth},displayHeight:{getEnd:(E,R,k,W)=>E.getData("isFrameImage")?this.boxSizeInner:E.getData("isShadow")?this.getBoxShadowSize():E.type!=="BitmapText"?this.boxSizeInner:E.displayHeight},onComplete:()=>{this.gameObjectsMap.forEach((k,W)=>{W.startsWith("wordBoardletter")&&k.alpha!==1&&k.setAlpha(1)});const E=this.getButterflySprite(),R=this.getButterflyVisibilityCallback();if(!_.isNil(E)&&R&&this.scene.tweens.add({duration:100,targets:E,alpha:1,onStart:()=>{E.setAlpha(0),E.setVisible(R)}}),this.bonusCoordinates.length>0){const k=[];this.bonusCoordinates.forEach(W=>{const K=this.getBonusImage({rowIndex:W.rowIndex,columnIndex:W.columnIndex});k.push(K)}),this.scene.tweens.add({duration:100,targets:k,alpha:1,onStart:()=>{k.forEach(W=>{W.setAlpha(0),W.setVisible(!0)})}})}}})}disappearBoard(s){const o=this.getAllVisibleGameObjects();this.scene.tweens.add({targets:o,duration:s,alpha:0,scale:{getEnd:v=>v.type!=="BitmapText"?v.scale*this.disappearMultiplier:v.scale},fontSize:{getEnd:v=>v.type==="BitmapText"?v.fontSize*this.disappearMultiplier:v.fontSize},onComplete:()=>{this.isVisible=!1,this.render()}})}getAllVisibleGameObjects(){return Array.from(this.gameObjectsMap.values()).filter(s=>{if(s.visible)return s})}isItButterflyLevel(s){if(this.butterflyProps.isActive!==1)return!1;let o="",v="";const S=this.butterflyString.split(",");console.log("splitButterflyString",S),S.forEach(R=>{const k=R.split("-");if(k[0]!=="0")for(let W=0;W<k[0];W++)o+=k[1];else v=k[1]}),console.log("butterflyBeforeLoopString",o,"butterflyLoopString",v);let E;return s<=o.length?E=o[s-1]:(console.log("enters here butterfly value",s,o.length,v.length),E=v[(s-o.length-1)%v.length]),this.butterflyType=E,console.log("butterflyvalue",E,s),this.hasButterflyOnCurrentLevel=E!=="E",E!=="E"}setButterflyCoordinate(){const s=this.butterflyType,o=Math.floor(Math.random()*2);s==="B"?(this.butterflyFailCount=parseInt(this.butterflyProps.normal_butterfly_fail_count.split("-")[o]),this.butterflyWaitTime=this.butterflyProps.normal_butterfly_waiting_time,this.butterflyPrize=parseInt(this.butterflyProps.normal_butterfly_prize.split("-")[o]),this.butterflyPrizePool=this.butterflyProps.normal_butterfly_prize_pool):s==="G"?(this.butterflyFailCount=parseInt(this.butterflyProps.golden_butterfly_fail_count.split("-")[o]),this.butterflyWaitTime=this.butterflyProps.golden_butterfly_waiting_time,this.butterflyPrize=parseInt(this.butterflyProps.golden_butterfly_prize.split("-")[o]),this.butterflyPrizePool=this.butterflyProps.golden_butterfly_prize_pool):s==="L"&&(this.butterflyFailCount=parseInt(this.butterflyProps.legendary_butterfly_fail_count.split("-")[o]),this.butterflyWaitTime=this.butterflyProps.legendary_butterfly_waiting_time,this.butterflyPrize=parseInt(this.butterflyProps.legendary_butterfly_prize.split("-")[o]),this.butterflyPrizePool=this.butterflyProps.legendary_butterfly_prize_pool);const v=[];for(let R=0;R<this.board.length;R++)for(let k=0;k<this.board[R].length;k++)this.board[R][k].state==="hasLetter"&&this.bonusCoordinates.findIndex(K=>_.isEqual(K,{rowIndex:R,columnIndex:k}))===-1&&v.push({rowIndex:R,columnIndex:k});const S=Math.floor(Math.random()*v.length);this.butterflyCoordinate=v[S],this.getWordObjectsByRowAndColumnIndex({rowIndex:this.butterflyCoordinate.rowIndex,columnIndex:this.butterflyCoordinate.columnIndex}).forEach(R=>{R.hasButterfly=!0})}checkButterflyStateByCoordinate(s){if(this.butterflyProps.isActive!==1||!this.hasButterflyOnCurrentLevel||_.isEmpty(this.butterflyCoordinate))return;const o=s.rowIndex,v=s.columnIndex;this.butterflyCoordinate.rowIndex===o&&this.butterflyCoordinate.columnIndex===v&&this.onButterflyCatch()}checkButterflyStateByWordObject(s){this.butterflyProps.isActive===1&&this.hasButterflyOnCurrentLevel&&(_.isEmpty(this.butterflyCoordinate)||(s.hasButterfly?this.onButterflyCatch():this.checkAndEscapeButterfly()))}onButterflyCatch(){this.butterflyCoordinate={},_.isNil(this.butterflyAnimationChangeTimer)||(this.butterflyAnimationChangeTimer.remove(!1),this.butterflyAnimationChangeTimer=null),Array.from(this.wordsMap.values()).forEach(S=>{S.hasButterfly&&(S.hasButterfly=!1)});const s=this.getButterflySprite(),o=this.getButterflyDestinationPositionCallback();let v;if(this.butterflyType==="B")v=this.getButterflyAtlasPlayKeyByNameAndStateCallback("normal","transform");else if(this.butterflyType==="G")v=this.getButterflyAtlasPlayKeyByNameAndStateCallback("golden","transform");else if(this.butterflyType==="L")v=this.getButterflyAtlasPlayKeyByNameAndStateCallback("legendary","transform");else throw{message:"please provide proper butterfly type during catch",butterflyType:this.butterflyType};this.scene.tweens.add({duration:2e3,targets:s,x:o.x,y:o.y,onStart:()=>{s.setData("isTweenPlaying",!0);const S=this.getButterflyFlyingSizeCallback();s.displayWidth!==S&&(s.displayWidth=S,s.displayHeight=S);let E;if(this.butterflyType==="B")E=this.getButterflyAtlasPlayKeyByNameAndStateCallback("normal","Flying");else if(this.butterflyType==="G")E=this.getButterflyAtlasPlayKeyByNameAndStateCallback("golden","Flying");else if(this.butterflyType==="L")E=this.getButterflyAtlasPlayKeyByNameAndStateCallback("legendary","Flying");else throw{message:"please provide proper butterfly type during catch tween",butterflyType:this.butterflyType};s.play(E);const R=this.getButterflyPrize();this.gameObjectsMap.delete("butterflySprite"),this.onButterflyCatchCallback(R,this.butterflyWaitTime,s)},onComplete:()=>{const S=this.getButterflyDestinationPositionCallback();(s.x!==S.x||s.y!==S.y)&&s.setPosition(S.x,S.y),s.setData("isTweenPlaying",!1),s.play(v),s.once("animationcomplete",()=>{this.onButterflyTransformCompleteCallback()})}})}getButterflyPrize(){if(this.butterflyPrizePool==="GEM")return this.butterflyPrize;throw{message:"please handle other butterfly prize pool",pool:this.butterflyPrizePool}}measure(){const s=_.get(this,`boardScale.${this.scene.getOrientation()}`),o=_.get(this,`boardPosition.${this.scene.getOrientation()}.x`),v=_.get(this,`boardPosition.${this.scene.getOrientation()}.y`);this.boardNumRows=this.board.length,this.boardNumColumns=0,this.board.forEach((k,W,K)=>{k.length>this.boardNumColumns&&(this.boardNumColumns=k.length)});let S="width";this.boardNumColumns===3?this.boxSize=this.AbsoluteWidth*s*.19:this.boardNumColumns===4?this.boxSize=this.AbsoluteWidth*s*.19:this.boardNumColumns===5?this.boxSize=this.AbsoluteWidth*s*.16:this.boardNumColumns===6?this.boxSize=this.AbsoluteWidth*s*.13:this.boardNumColumns===7?this.boxSize=this.AbsoluteWidth*s*.13:this.boxSize=this.AbsoluteWidth*s/this.boardNumColumns;let E=this.boxSize*this.boardNumRows,R=this.boxSize*this.boardNumColumns;E>this.AbsoluteHeight*s&&(S="height",this.boxSize=this.AbsoluteHeight*s/this.boardNumRows,E=this.boxSize*this.boardNumRows,R=this.boxSize*this.boardNumColumns),this.spacing=this.boxSize*this.letterBoxSpacing,this.boxSizeInner=this.boxSize-2*this.spacing,this.visibleLeftX=this.LeftAbsoluteX+(this.AbsoluteWidth-R)*o,this.visibleTopY=this.TopAbsoluteY+(this.AbsoluteHeight-E)*v}makeMoveByCoordinate(s){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.letterFit[0].key);const o=s.rowIndex,v=s.columnIndex,S=this.gameObjectsMap.get(this.getBoxName({rowIndex:o,columnIndex:v})),E=this.gameObjectsMap.get(this.getLetterName({rowIndex:o,columnIndex:v})),R=this.gameObjectsMap.get(this.getFrameImageName({rowIndex:o,columnIndex:v})),k=this.gameObjectsMap.get(this.getBoxShadowName({rowIndex:o,columnIndex:v}));S.setAlpha(1),!_.isNil(R)&&R.visible&&R.setVisible(!1);const W=parseInt(this.FontColor,16);E.tintTopLeft!==W&&(E.clearTint(),E.setTint(W));const K=this.getBoxFullTweenName({rowIndex:o,columnIndex:v});let q=this.tweens.get(K);_.isNil(q)?(q=this.scene.tweens.addCounter({from:0,to:1,duration:200,onStart:()=>{this.tintTweenStates[o][v].state="playing"},onUpdate:$=>{const ne=$.getValue();if(this.board[o][v].state!=="full"){const me={r:(this.boxHasLetterColor&16711680)>>16,g:(this.boxHasLetterColor&65280)>>8,b:this.boxHasLetterColor&255},fe={r:(this.getPrimaryColor()&16711680)>>16,g:(this.getPrimaryColor()&65280)>>8,b:this.getPrimaryColor()&255},xe=Te(me.r,fe.r,ne),ve=Te(me.g,fe.g,ne),We=Te(me.b,fe.b,ne),Ze=(xe<<16)+(ve<<8)+We;S.setTint(Ze)}const oe=.25,ce=this.getBoxShadowSize();ne<.5?(S.displayWidth=this.boxSizeInner*(1+oe*ne),S.displayHeight=this.boxSizeInner*(1+oe*ne),E.setFontSize(this.AbsoluteFontSize*(1+oe*ne)),this.boxShadow.isEnabled&&(k.displayWidth=ce*(1+oe*ne),k.displayHeight=ce*(1+oe*ne))):(S.displayWidth=this.boxSizeInner*(1+(1-ne)*oe),S.displayHeight=this.boxSizeInner*(1+(1-ne)*oe),E.setFontSize(this.AbsoluteFontSize*(1+(1-ne)*oe)),this.boxShadow.isEnabled&&(k.displayWidth=ce*(1+(1-ne)*oe),k.displayHeight=ce*(1+(1-ne)*oe)))},onComplete:()=>{this.board[o][v].state="full",this.tintTweenStates[o][v].state="notPlaying",S.displayWidth!==this.boxSizeInner&&(S.displayWidth=this.boxSizeInner,S.displayHeight=this.boxSizeInner),S.tintTopLeft!==this.getPrimaryColor()&&(S.clearTint(),S.setTint(this.getPrimaryColor()));const $=this.getDepthByName(this.depthNames.boxInactive);if(S.depth!==$&&S.setDepth($),!_.isNil(R)){const ne=this.getDepthByName(this.depthNames.frameInactive);R.depth!==ne&&R.setDepth(ne)}if(this.boxShadow.isEnabled){const ne=this.getBoxShadowSize();k.displayWidth!==ne&&(k.displayWidth=ne,k.displayHeight=ne)}this.onMakeMoveTweenCompleteCallback({rowIndex:o,columnIndex:v})}}),this.tweens.set(K,q)):this.tintTweenStates[o][v].state!=="playing"&&(this.tintTweenStates[o][v].state="playing",q.restart())}getBoxFullTweenName(s){return"tintTween_"+s.rowIndex+"_"+s.columnIndex}getLetter(s){const o=s.rowIndex,v=s.columnIndex;return this.gameObjectsMap.get(this.getLetterName({rowIndex:o,columnIndex:v}))}getBox(s){const o=s.rowIndex,v=s.columnIndex;return this.gameObjectsMap.get(this.getBoxName({rowIndex:o,columnIndex:v}))}getFrameImage(s){const o=s.rowIndex,v=s.columnIndex;return this.gameObjectsMap.get(this.getFrameImageName({rowIndex:o,columnIndex:v}))}makeDuplicateMoveByWord(s){this.measure();const o=this.wordsMap.get(s.word);if(_.isNil(o))throw{message:"word does not exist in wordsMap",word:o,wordsMap:this.wordsMap};o.coordinates.forEach((v,S,E)=>{this.shakeBox({rowIndex:v.rowIndex,columnIndex:v.columnIndex,duration:this.tweenDuplicateGlowDuration}),this.shakeBoxShadow({rowIndex:v.rowIndex,columnIndex:v.columnIndex,duration:this.tweenDuplicateGlowDuration*.25}),this.shakeLetter({rowIndex:v.rowIndex,columnIndex:v.columnIndex,duration:this.tweenDuplicateGlowDuration*.25})})}getBoxName(s){return`wordBoardBox_row${s.rowIndex}_column${s.columnIndex}`}getBoxShadowName(s){return`wordBoardBoxShadow_row${s.rowIndex}_column${s.columnIndex}`}getLetterName(s){return`wordBoardletter_row${s.rowIndex}_column${s.columnIndex}`}getCoordinatesByStates(s){const o=s.states,v=s.exceptCoordinate,S=[];for(let E=0;E<this.board.length;E++)for(let R=0;R<this.board[E].length;R++)(v.rowIndex!==E||v.columnIndex!==R)&&o.includes(this.board[E][R].state)&&S.push({rowIndex:E,columnIndex:R});return S}getLettersAndCoordinatesForHintByBoxStates(s){let o=[];if(_.isEmpty(this.butterflyCoordinate)||this.getWordObjectsByRowAndColumnIndex({rowIndex:this.butterflyCoordinate.rowIndex,columnIndex:this.butterflyCoordinate.columnIndex}).forEach(S=>{S.coordinates.forEach(E=>{const R=E.rowIndex,k=E.columnIndex;if((R!==this.butterflyCoordinate.rowIndex||k!==this.butterflyCoordinate.columnIndex)&&s.includes(this.board[R][k].state)){const W=this.gameObjectsMap.get(this.getLetterName({rowIndex:R,columnIndex:k}));if(_.isNil(W)||!W.visible){const K=_.get(this.board,`[${R}][${k}].letter`,"");o.findIndex($=>_.isEqual($,{rowIndex:E.rowIndex,columnIndex:E.columnIndex}))===-1&&o.push({letter:K,rowIndex:R,columnIndex:k})}}})}),o.length===0){for(let v=0;v<this.board.length;v++)for(let S=0;S<this.board[v].length;S++)if((v!==this.butterflyCoordinate.rowIndex||S!==this.butterflyCoordinate.columnIndex)&&s.includes(this.board[v][S].state)){const E=this.gameObjectsMap.get(this.getLetterName({rowIndex:v,columnIndex:S}));if(_.isNil(E)||!E.visible){const R=_.get(this.board,`[${v}][${S}].letter`,"");o.push({letter:R,rowIndex:v,columnIndex:S})}}}if(!_.isEmpty(this.butterflyCoordinate)&&o.length===0&&s.includes(this.board[this.butterflyCoordinate.rowIndex][this.butterflyCoordinate.columnIndex].state)){const v=this.gameObjectsMap.get(this.getLetterName({rowIndex:this.butterflyCoordinate.rowIndex,columnIndex:this.butterflyCoordinate.columnIndex}));if(_.isNil(v)||!v.visible){const S=_.get(this.board,`[${this.butterflyCoordinate.rowIndex}][${this.butterflyCoordinate.columnIndex}].letter`,"");o.push({letter:S,rowIndex:this.butterflyCoordinate.rowIndex,columnIndex:this.butterflyCoordinate.columnIndex})}}return o}getLettersAndCoordinatesByBoxStates(s){let o=[];for(let v=0;v<this.board.length;v++)for(let S=0;S<this.board[v].length;S++)if(s.includes(this.board[v][S].state)){const E=this.gameObjectsMap.get(this.getLetterName({rowIndex:v,columnIndex:S}));if(_.isNil(E)||!E.visible){const R=_.get(this.board,`[${v}][${S}].letter`,"");o.push({letter:R,rowIndex:v,columnIndex:S})}}return o}renderBoxFull(s){const o=s.rowIndex,v=s.columnIndex,S=this.getBoxName({rowIndex:s.rowIndex,columnIndex:s.columnIndex});let E=this.gameObjectsMap.get(S);const R=this.visibleLeftX+s.columnIndex*this.boxSize+this.boxSize*.5,k=this.visibleTopY+s.rowIndex*this.boxSize+this.boxSize*.5;_.isNil(E)?(E=this.scene.add.image(R,k,this.selectedImages.boxBackground[0].key).setDepth(this.getDepthByName(this.depthNames.boxInactive)),E.setData("rowIndex",o),E.setData("columnIndex",v),E.setInteractive(),E.on("pointerdown",()=>{this.onBoxPointerdownCallback({box:E,rowIndex:o,columnIndex:v})}),this.gameObjectsMap.set(S,E)):(E.x!==R||E.y!==k)&&E.setPosition(R,k),E.tintTopLeft!==this.getPrimaryColor()&&(E.clearTint(),E.setTint(this.getPrimaryColor())),E.alpha!==this.boxFullAlpha&&E.setAlpha(this.boxFullAlpha),E.displayWidth!==this.boxSizeInner&&(E.displayWidth=this.boxSizeInner),E.displayHeight!==this.boxSizeInner&&(E.displayHeight=this.boxSizeInner),E.visible!==this.isVisible&&E.setVisible(this.isVisible)}renderBoxHasLetter(s){const o=s.rowIndex,v=s.columnIndex,S=this.boxHasLetterColor,E=this.getBoxName({rowIndex:o,columnIndex:v});let R=this.gameObjectsMap.get(E);const k=this.visibleLeftX+v*this.boxSize+this.boxSize*.5,W=this.visibleTopY+o*this.boxSize+this.boxSize*.5;_.isNil(R)?(R=this.scene.add.image(k,W,this.selectedImages.boxBackground[0].key).setDepth(this.getDepthByName(this.depthNames.boxInactive)),R.setData("rowIndex",o),R.setData("columnIndex",v),R.setInteractive(),R.on("pointerdown",()=>{this.onBoxPointerdownCallback({box:R,rowIndex:o,columnIndex:v})}),this.gameObjectsMap.set(E,R)):(R.x!==k||R.y!==W)&&R.setPosition(k,W),R.tintTopLeft!==S&&(R.clearTint(),R.setTint(S)),R.alpha!==this.boxHasLetterAlpha&&R.setAlpha(this.boxHasLetterAlpha),R.displayWidth!==this.boxSizeInner&&(R.displayWidth=this.boxSizeInner),R.displayHeight!==this.boxSizeInner&&(R.displayHeight=this.boxSizeInner),R.visible!==this.isVisible&&R.setVisible(this.isVisible)}getBoxShadowPosition(s){const o=s.rowIndex,v=s.columnIndex,S=this.getMiddlePositionByRowAndColumnIndex({rowIndex:o,columnIndex:v}),E=this.boxSizeInner*((this.boxShadow.offset.x-.5)/10),R=this.boxSizeInner*((this.boxShadow.offset.y-.5)/10),k=this.boxSizeInner*this.boxHasLetterBorderWidth;return{x:S.x+k*.5+E,y:S.y+k*.5+R}}addBoxShadow(s){const o=s.rowIndex,v=s.columnIndex,S=this.getBoxShadowName({rowIndex:o,columnIndex:v});let E=this.gameObjectsMap.get(S);const R=this.getBoxShadowSize(),k=this.getBoxShadowPosition({rowIndex:o,columnIndex:v});_.isNil(E)?(E=this.scene.add.image(k.x,k.y,this.selectedImages.boxBackground[0].key),E.setDepth(this.getDepthByName(this.depthNames.boxShadow)),E.setData("rowIndex",o),E.setData("columnIndex",v),E.setData("isShadow",!0),this.gameObjectsMap.set(S,E)):(E.x!==k.x||E.y!==k.y)&&E.setPosition(k.x,k.y);const W=this.boxShadow.isEnabled&&this.isVisible;E.visible!==W&&E.setVisible(W),E.displayWidth!==R&&(E.displayWidth=R),E.displayHeight!==R&&(E.displayHeight=R),E.tintTopLeft!==this.boxShadow.color&&(E.clearTint(),E.setTint(this.boxShadow.color)),E.alpha!==this.boxShadow.alpha&&E.setAlpha(this.boxShadow.alpha)}getBoxShadowSize(){const s=this.boxSizeInner*this.boxHasLetterBorderWidth;return this.boxSizeInner-s}renderBoxLetter(s){const o=s.rowIndex,v=s.columnIndex,S=this.getLetterName({rowIndex:o,columnIndex:v});let E=this.gameObjectsMap.get(S);const R=_.get(this.board,`[${o}][${v}].letter`,""),k=this.visibleLeftX+v*this.boxSize,W=this.visibleTopY+o*this.boxSize;if(_.isNil(E)){E=this.scene.add.bitmapText(k+this.boxSize/2,W+this.boxSize/2,this.getBitmapFontKeyCallback(),R);let q=parseInt("0x"+this.fontColor);E.setTint(q),E.setDepth(this.getDepthByName(this.depthNames.letter)),E.setData("rowIndex",o),E.setData("columnIndex",v),this.gameObjectsMap.set(S,E)}else{E.text!==R&&E.setText(R),E.x!==k+this.boxSize/2&&E.setX(k+this.boxSize/2),E.y!==W+this.boxSize/2&&E.setY(W+this.boxSize/2);const q=parseInt("0x"+this.fontColor);E.tintTopLeft!==q&&(E.clearTint(),E.setTint(q))}const K=this.getTextOriginYCallback();E.originY!==K&&E.setOrigin(.5,K),E.fontSize!==this.AbsoluteFontSize&&E.setFontSize(this.AbsoluteFontSize),E.visible!==this.isVisible&&E.setVisible(this.isVisible)}renderHintedBoxLetter(s){const o=s.rowIndex,v=s.columnIndex,S=s.shouldPlayHintAnimation;this.board[o][v].state!=="emphasized"&&(this.board[o][v].state="hinted");const R=this.getLetterName({rowIndex:o,columnIndex:v});let k=this.gameObjectsMap.get(R);const W=_.get(this.board,`[${o}][${v}].letter`,""),K=this.visibleLeftX+v*this.boxSize+this.boxSize/2,q=this.visibleTopY+o*this.boxSize+this.boxSize/2;_.isNil(k)?(k=this.scene.add.bitmapText(K,q,this.getBitmapFontKeyCallback(),W),k.setDepth(this.getDepthByName(this.depthNames.letter)).setAlpha(0),k.setData("rowIndex",o),k.setData("columnIndex",v),this.gameObjectsMap.set(R,k)):(k.text!==W&&k.setText(W),k.x!==K&&k.setX(K),k.y!==q&&k.setY(q));const $=this.getTextOriginYCallback();k.originY!==$&&k.setOrigin(.5,$),k.fontSize!==this.AbsoluteFontSize&&k.setFontSize(this.AbsoluteFontSize);const ne=parseInt("0x"+this.hintedFontColor.replace("#",""));k.tintTopLeft!==ne&&(k.clearTint(),k.setTint(ne)),S?setTimeout(()=>{k!==this.isVisible&&k.setVisible(this.isVisible),this.playHintAnimation({x:K,y:q,rowIndex:o,columnIndex:v,letter:k})},150):(k!==this.isVisible&&k.setVisible(this.isVisible),k.alpha!==1&&k.setAlpha(1))}playHintAnimation(s){const o=s.x,v=s.y,S=s.rowIndex,E=s.columnIndex,R=s.letter,k=this.getAtlasPlayKeyByName("hint");this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.hint[0].key),this.scene.tweens.add({targets:R,duration:100,alpha:1,fontSize:this.AbsoluteFontSize*1.5,onStart:()=>{R.setAlpha(0)},onComplete:()=>{this.scene.tweens.add({targets:R,duration:100,fontSize:this.AbsoluteFontSize,onComplete:()=>{R.fontSize!==this.AbsoluteFontSize&&R.setFontSize(this.AbsoluteFontSize);const K=this.getWordObjectsByRowAndColumnIndex({rowIndex:S,columnIndex:E});this.processFoundWordObjects(K)}})}});const W=this.gameObjectsMap.get(this.getHintAnimationSpriteName({rowIndex:S,columnIndex:E}));(W.x!==o||W.y!==v)&&W.setPosition(o,v),W.play(k)}getFoundWordObjectsByRowAndColumnIndex(s){const o=s.rowIndex,v=s.columnIndex;return this.getWordObjectsByRowAndColumnIndex({rowIndex:o,columnIndex:v}).filter(E=>E.isFound)}playShockwaveTween(s){const o=s.rowIndex,v=s.columnIndex,S=s.shockCenterX,E=s.shockCenterY,R=[],k=this.getBox({rowIndex:o,columnIndex:v});R.push(k);const W=this.getFrameImage({rowIndex:o,columnIndex:v});!_.isNil(W)&&W.visible&&R.push(W);const K=this.getLetter({rowIndex:o,columnIndex:v});!_.isNil(K)&&K.visible&&R.push(K);const q=this.getBonusImage({rowIndex:o,columnIndex:v});if(!_.isNil(q)&&q.visible&&R.push(q),this.boxShadow.isEnabled){const We=this.gameObjectsMap.get(this.getBoxShadowName({rowIndex:o,columnIndex:v}));R.push(We)}if(!_.isEmpty(this.butterflyCoordinate)&&this.butterflyCoordinate.rowIndex===o&&this.butterflyCoordinate.columnIndex===v){const We=this.getButterflySprite();R.push(We)}const $=this.boxSize*.2,ne=.05,oe=this.getMiddlePositionByRowAndColumnIndex({rowIndex:o,columnIndex:v}),ce=Math.sqrt(Math.pow(oe.x-S,2)+Math.pow(oe.y-E,2)),me={x:oe.x-S,y:oe.y-E};let fe=180/Math.PI*Math.atan2(Math.abs(me.x),Math.abs(me.y))/10;me.x>0&&me.y===0?fe*=-1:me.x<0&&me.y===0||(me.x<0&&me.y>0?fe*=-1:me.x<0&&me.y<0||(me.x>0&&me.y<0?fe*=-1:me.x>0&&me.y>0));const xe=me.x*$/ce,ve=me.y*$/ce;this.scene.tweens.add({duration:250,delay:ce*ne,targets:R,x:"+="+xe,y:"+="+ve,angle:fe,ease:"Sine.easeOut",onComplete:()=>{const We=me.x*$/ce,Ze=me.y*$/ce;this.scene.tweens.add({duration:200,targets:R,x:"-="+We,y:"-="+Ze,angle:0,ease:"Sine.easeInOut",onComplete:()=>{R.forEach(ut=>{const De=this.getMiddlePositionByRowAndColumnIndex({rowIndex:o,columnIndex:v});if(ut.getData("isShadow")){const Tt=this.getBoxShadowPosition({rowIndex:o,columnIndex:v});(ut.x!==Tt.x||ut.y!==Tt.y)&&ut.setPosition(Tt.x,Tt.y)}else(ut.x!==De.x||ut.y!==De.y)&&ut.setPosition(De.x,De.y)});const ke=this.getWordObjectsByRowAndColumnIndex({rowIndex:o,columnIndex:v});this.processFoundWordObjects(ke)}})}})}getBoxHitTweenName(s){const o=s.rowIndex,v=s.columnIndex;return"boxHitTween_"+o+"_"+v}playBoxHitTween(s){const o=s.rowIndex,v=s.columnIndex,S=this.getBox({rowIndex:o,columnIndex:v});if(_.isNil(S)||this.scene.tweens.killTweensOf(S),this.boxShadow.isEnabled){const q=this.gameObjectsMap.get(this.getBoxShadowName({rowIndex:o,columnIndex:v}));_.isNil(q)||this.scene.tweens.killTweensOf(q)}const E=this.getFrameImage({rowIndex:o,columnIndex:v});_.isNil(E)||this.scene.tweens.killTweensOf(E);const R=this.getLetter({rowIndex:o,columnIndex:v});_.isNil(R)||this.scene.tweens.killTweensOf(R);const k=this.getBonusImage({rowIndex:o,columnIndex:v});_.isNil(k)||this.scene.tweens.killTweensOf(k);const W=this.getBoxHitTweenName({rowIndex:o,columnIndex:v});let K=this.tweens.get(W);_.isNil(K)?(K=this.scene.tweens.addCounter({from:1,to:.85,duration:150,yoyo:!0,onUpdate:q=>{const $=q.getValue(),ne=this.boxSizeInner*$,oe=this.getBox({rowIndex:o,columnIndex:v});if(_.isNil(oe)||(oe.displayWidth=ne,oe.displayHeight=ne),this.boxShadow.isEnabled){const xe=this.getBoxShadowSize()*$,ve=this.gameObjectsMap.get(this.getBoxShadowName({rowIndex:o,columnIndex:v}));_.isNil(ve)||(ve.displayWidth=xe,ve.displayHeight=xe)}const ce=this.getFrameImage({rowIndex:o,columnIndex:v});_.isNil(ce)||(ce.displayWidth=ne,ce.displayHeight=ne);const me=this.getBonusImage({rowIndex:o,columnIndex:v});_.isNil(me)||(me.displayWidth=ne*.6,me.displayHeight=ne*.6);const fe=this.getLetter({rowIndex:o,columnIndex:v});!_.isNil(fe)&&fe.visible&&fe.setFontSize(this.AbsoluteFontSize*$)}}),this.tweens.set(W,K)):K.restart()}getWordObjectsByRowAndColumnIndex(s){const o=s.rowIndex,v=s.columnIndex,S=Array.from(this.wordsMap.values()).filter(E=>{if(E.coordinates.some(k=>{if(k.rowIndex===o&&k.columnIndex===v)return!0}))return E});if(S.length===0)throw{message:"could not find a word object by row and column index",rowIndex:o,columnIndex:v};return S}getIsWordFoundFromBoardByCoordinates(s){return!s.coordinates.some(v=>{const S=this.board[v.rowIndex][v.columnIndex].state;if(S!=="full"&&S!=="hinted")return!0})}checkAllWordObjectsIsFoundPropertyTrue(){return!Array.from(this.wordsMap.values()).some(s=>!s.isFound)}processFoundWordObjects(s){s.forEach(o=>{if(o.isFound)return;!o.coordinates.some((S,E)=>{const R=this.gameObjectsMap.get(this.getLetterName({rowIndex:S.rowIndex,columnIndex:S.columnIndex}));return!(!_.isNil(R)&&R.visible&&R.text===o.letters[E])})&&(this.setFoundWordInWordsMap(o.wordString),o.coordinates.forEach((S,E,R)=>{const k=S.rowIndex,W=S.columnIndex;this.makeMoveByCoordinate({rowIndex:k,columnIndex:W})}))})}renderBoxClear(s){const o=this.getBoxName({rowIndex:s.rowIndex,columnIndex:s.columnIndex}),v=this.getLetterName({rowIndex:s.rowIndex,columnIndex:s.columnIndex}),S=this.gameObjectsMap.get(o);_.isNil(S)||S.setVisible(!1);const E=this.gameObjectsMap.get(v);_.isNil(E)||E.setVisible(!1);const R=this.getBoxShadowName({rowIndex:s.rowIndex,columnIndex:s.columnIndex}),k=this.gameObjectsMap.get(R);_.isNil(k)||k.setVisible(!1)}getShakeTintBoxTweenName(s){return`shakeTintBoxTween_${s.rowIndex}_${s.columnIndex}`}getShakeBoxTweenName(s){return`shakeBoxTween_${s.rowIndex}_${s.columnIndex}`}getShakeBoxShadowTweenName(s){return`shakeBoxShadowTween_${s.rowIndex}_${s.columnIndex}`}getShakeLetterTweenName(s){return`shakeLetterTween_${s.rowIndex}_${s.columnIndex}`}getMoveDestinationsAbsoluteByWord(s){const o=this.wordsMap.get(s),v=[],S=o.coordinates[0].rowIndex,E=o.coordinates[0].columnIndex,R=this.visibleLeftX+this.boxSize/2+E*this.boxSize,k=this.visibleTopY+this.boxSize/2+S*this.boxSize;return o.coordinates.forEach((W,K,q)=>{o.orientation==="H"?v.push({x:R+(W.columnIndex-E)*this.boxSize,y:k}):o.orientation==="V"&&v.push({x:R,y:k+(W.rowIndex-S)*this.boxSize})}),v}shakeBox(s){const o=s.rowIndex,v=s.columnIndex,S=this.getBoxName({rowIndex:o,columnIndex:v});let E=this.gameObjectsMap.get(S);const R=this.getShakeTintBoxTweenName(o,v);let k=this.tweens.get(R);_.isNil(k)?(this.scene.tweens.addCounter({from:0,to:2,duration:s.duration,onUpdate:q=>{const $=q.getValue();if($<1){const ne={r:(this.getPrimaryColor()&16711680)>>16,g:(this.getPrimaryColor()&65280)>>8,b:this.getPrimaryColor()&255},oe={r:255,g:255,b:255},ce=Te(ne.r,oe.r,$),me=Te(ne.g,oe.g,$),fe=Te(ne.b,oe.b,$),xe=(ce<<16)+(me<<8)+fe;E.setTint(xe)}else{const ne={r:255,g:255,b:255},oe={r:(this.getPrimaryColor()&16711680)>>16,g:(this.getPrimaryColor()&65280)>>8,b:this.getPrimaryColor()&255},ce=Te(ne.r,oe.r,$-1),me=Te(ne.g,oe.g,$-1),fe=Te(ne.b,oe.b,$-1),xe=(ce<<16)+(me<<8)+fe;E.setTint(xe)}}}),this.tweens.set(R,k)):k.restart();const W=this.getShakeBoxTweenName({rowIndex:o,columnIndex:v});let K=this.tweens.get(W);!_.isNil(K)&&K.isPlaying()||(K=this.scene.tweens.timeline({targets:[E],loop:1,tweens:[{x:E.x+this.boxSize*this.shakePercentage,ease:"Linear",duration:s.duration*.25,yoyo:!0},{x:E.x-this.boxSize*this.shakePercentage,ease:"Linear",duration:s.duration*.25,yoyo:!0}]}),this.tweens.set(W,K))}shakeBoxShadow(s){if(this.boxShadow.isEnabled===!1)return;const o=this.getShakeBoxShadowTweenName({rowIndex:s.rowIndex,columnIndex:s.columnIndex});let v=this.tweens.get(o);const S=this.getBoxShadowName({rowIndex:s.rowIndex,columnIndex:s.columnIndex});let E=this.gameObjectsMap.get(S);!_.isNil(v)&&v.isPlaying()||(v=this.scene.tweens.timeline({targets:[E],loop:1,tweens:[{x:E.x+this.boxSize*this.shakePercentage,ease:"Linear",duration:s.duration,yoyo:!0},{x:E.x-this.boxSize*this.shakePercentage,ease:"Linear",duration:s.duration,yoyo:!0}]}),this.tweens.set(o,v))}shakeLetter(s){const o=this.getShakeLetterTweenName({rowIndex:s.rowIndex,columnIndex:s.columnIndex});let v=this.tweens.get(o);const S=this.getLetterName({rowIndex:s.rowIndex,columnIndex:s.columnIndex});let E=this.gameObjectsMap.get(S);!_.isNil(v)&&v.isPlaying()||(v=this.scene.tweens.timeline({targets:[E],loop:1,tweens:[{x:E.x+this.boxSize*this.shakePercentage,ease:"Linear",duration:s.duration,yoyo:!0},{x:E.x-this.boxSize*this.shakePercentage,ease:"Linear",duration:s.duration,yoyo:!0}]}),this.tweens.set(o,v))}}class Ne extends Ae{constructor(s){super(s),this.defaultColor=0}load(){super.load(),this.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1)}render(){const s={x:this.scene.game.canvas.width*.5,y:this.scene.game.canvas.height*.5};let o=this.gameObjectsMap.get("dimmer");T().isNil(o)?(o=this.scene.add.image(s.x,s.y,this.selectedImages.whiteBg[0].key),o.setTint(this.defaultColor),o.setInteractive(),this.gameObjectsMap.set("dimmer",o)):(o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y),o.displayWidth!==this.scene.game.canvas.width&&(o.displayWidth=this.scene.game.canvas.width),o.displayHeight!==this.scene.game.canvas.height&&(o.displayHeight=this.scene.game.canvas.height),o.visible!==this.isVisible&&o.setVisible(this.isVisible)}setDimmerAlpha(s){const o=this.gameObjectsMap.get("dimmer");if(T().isNil(o))throw{message:"dimmer is nil"};o.alpha!==s&&o.setAlpha(s)}setDimmerDepth(s){const o=this.gameObjectsMap.get("dimmer");if(T().isNil(o))throw{message:"dimmer is nil"};o.depth!==s&&o.setDepth(s)}getDimmerSetAlpha(){return .9}fadeInDimmer(s,o,v){const S=this.gameObjectsMap.get("dimmer");if(T().isNil(S))throw{message:"dimmer is nil"};this.isVisible=!0,this.render(),this.setDimmerAlpha(0),this.scene.tweens.add({targets:S,alpha:s,duration:o,delay:v,ease:"Power2"})}fadeOutDimmer(s,o){const v=this.gameObjectsMap.get("dimmer");if(T().isNil(v))throw{message:"dimmer is nil"};this.scene.tweens.add({targets:v,alpha:0,duration:s,delay:o,ease:"Linear",onComplete:()=>{this.isVisible=!1,this.render()}})}getDimmerButterflyDepth(){return 8}getDimmerTutorialDepth(){return 29}getDimmerTutorialAlpha(){return .6}getDimmerRewardCollectAlpha(){return .6}getDimmerButterflyAlpha(){return .6}getDimmerShuffleTutorialDepth(){return 29}getDimmerShuffleTutorialAlpha(){return .6}getDimmerHammerHintTutorialDepth(){return 29}getDimmerHammerHintTutorialAlpha(){return .6}getDimmerHintTutorialDepth(){return 29}getDimmerHintTutorialAlpha(){return .6}getDimmerHammerDepth(){return 29}getDimmerHammerAlpha(){return .3}getDimmerFortuneWheelAlpha(){return .7}getDimmerEndLevelDepth(){return 0}getDimmerEndLevelAlpha(){return .6}get Dimmer(){return this.gameObjectsMap.get("dimmer")}}class Ve extends Ae{constructor(s){super(s),this.nineSliceFrameNames=["topLeft","topMiddle","topRight","leftMiddle","center","rightMiddle","bottomLeft","bottomMiddle","bottomRight"],this.typeNames={hammer:"hammer",default:"default",tutorial:"tutorial",hintTutorial:"hintTutorial",hammerHintTutorial:"hammerHintTutorial",shuffleTutorial:"shuffleTutorial"},this.currentType="default",this.roundedFrameCornerMultiplier=.1,this.roundedFrameEdgeMultiplier=1-this.roundedFrameCornerMultiplier*2,this.roundedRectangleCornerMultiplier=.1,this.roundedRectangleEdgeMultiplier=1-this.roundedRectangleCornerMultiplier*2,this.areFramesAdded=!1}load(){super.load(),this.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1)}render(){if(!this.areFramesAdded){this.areFramesAdded=!0;const S=this.scene.textures.get(this.selectedImages.roundedFrame[0].key),E=S.get(0);this.addFrames(S,E,this.roundedFrameCornerMultiplier,this.roundedFrameEdgeMultiplier);const R=this.scene.textures.get(this.selectedImages.roundedRectangle[0].key),k=R.get(0);this.addFrames(R,k,this.roundedRectangleCornerMultiplier,this.roundedRectangleEdgeMultiplier)}const s=this.getCurrentCenterPosition(),o=this.getCurrentWidth(),v=this.getCurrentHeight();this.renderBox(s,o,v),this.renderTextObject(s,o,v)}getCurrentWidthMultiplier(){let s;if(this.currentType===this.typeNames.hammer)s=this.scene.getOrientation()==="portrait"?.6:.2;else if(this.currentType===this.typeNames.default)s=.95;else if(this.currentType===this.typeNames.tutorial)s=this.scene.getOrientation()==="portrait"?.8:.2;else if(this.currentType===this.typeNames.hintTutorial)s=this.scene.getOrientation()==="portrait"?.6:.3;else if(this.currentType===this.typeNames.hammerHintTutorial)s=this.scene.getOrientation()==="portrait"?.6:.3;else if(this.currentType===this.typeNames.shuffleTutorial)s=this.scene.getOrientation()==="portrait"?.6:.3;else throw{message:"no valid type to set current width multiplier for rounded text box"};return s}getCurrentHeightMultiplier(){let s;if(this.currentType===this.typeNames.hammer)s=.15;else if(this.currentType===this.typeNames.default)s=.5;else if(this.currentType===this.typeNames.tutorial)s=.15;else if(this.currentType===this.typeNames.hintTutorial)s=.15;else if(this.currentType===this.typeNames.hammerHintTutorial)s=.15;else if(this.currentType===this.typeNames.shuffleTutorial)s=.15;else throw{message:"no valid type to set current height multiplier for rounded text box"};return s}setCurrentType(s){this.currentType=s}getCurrentType(){return this.currentType}getCurrentWidth(){return this.AbsoluteWidth*this.getCurrentWidthMultiplier()}getCurrentHeight(){return this.AbsoluteHeight*this.getCurrentHeightMultiplier()}getCurrentCenterPosition(){let s;if(this.currentType===this.typeNames.hammer)this.scene.getOrientation()==="portrait"?s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.6}:s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.75,y:this.TopAbsoluteY+this.AbsoluteHeight*.38};else if(this.currentType===this.typeNames.default)s={x:this.CenterAbsoluteX,y:this.CenterAbsoluteY};else if(this.currentType===this.typeNames.tutorial)this.scene.getOrientation()==="portrait"?s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.4}:s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.5};else if(this.currentType===this.typeNames.hintTutorial)this.scene.getOrientation()==="portrait"?s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.4}:s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.5};else if(this.currentType===this.typeNames.hammerHintTutorial)this.scene.getOrientation()==="portrait"?s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.4}:s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.5};else if(this.currentType===this.typeNames.shuffleTutorial)this.scene.getOrientation()==="portrait"?s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.4}:s={x:this.LeftAbsoluteX+this.AbsoluteWidth*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.5};else throw{message:"no valid type to set current center position for rounded text box"};return s}getFontSize(){let s;if(this.currentType===this.typeNames.hammer)s=.7;else if(this.currentType===this.typeNames.default)s=1;else if(this.currentType===this.typeNames.tutorial)s=.7;else if(this.currentType===this.typeNames.hintTutorial)s=.7;else if(this.currentType===this.typeNames.hammerHintTutorial)s=.7;else if(this.currentType===this.typeNames.shuffleTutorial)s=.7;else throw{message:"no valid type to set font size for rounded text box"};return s}getCaption(){let s;if(this.currentType===this.typeNames.hammer)s=this.getCaptionByKeyCallback("HammerHintTutorial");else if(this.currentType===this.typeNames.default)s="default text";else if(this.currentType===this.typeNames.tutorial){s=this.getCaptionByKeyCallback("Tutorial1");const o=/(<([^>]+)>)/gi;s=s.replace(o,""),s=s.replace("%@",this.getFirstWordCallback())}else if(this.currentType===this.typeNames.hintTutorial){s=this.getCaptionByKeyCallback("HintTutorialNew");const o=/(<([^>]+)>)/gi;s=s.replace(o,"")}else if(this.currentType===this.typeNames.hammerHintTutorial){s=this.getCaptionByKeyCallback("HammerTutorialNew");const o=/(<([^>]+)>)/gi;s=s.replace(o,"")}else if(this.currentType===this.typeNames.shuffleTutorial){s=this.getCaptionByKeyCallback("ShuffleTutorialText");const o=/(<([^>]+)>)/gi;s=s.replace(o,"")}else throw{message:"no valid type to set caption for rounded text box"};return s}getRoundedTextBoxObjects(){const s=[];this.nineSliceFrameNames.forEach(v=>{const S=this.gameObjectsMap.get(this.getRoundedFrameImageFrameObjectName(v));if(T().isNil(S))throw{message:"rounded frame image frame is nil"};s.push(S);const E=this.gameObjectsMap.get(this.getRoundedRectangleImageFrameObjectName(v));if(T().isNil(E))throw{message:"rounded rectangle image frame is nil"};s.push(E)});const o=this.gameObjectsMap.get("textObject");return s.push(o),s}setRoundedTextBoxAlpha(s){this.nineSliceFrameNames.forEach(o=>{const v=this.gameObjectsMap.get(this.getRoundedFrameImageFrameObjectName(o));if(T().isNil(v))throw{message:"rounded frame image frame is nil"};const S=this.gameObjectsMap.get(this.getRoundedRectangleImageFrameObjectName(o));if(T().isNil(S))throw{message:"rounded rectangle image frame is nil"};const E=this.gameObjectsMap.get("textObject");if(T().isNil(E))throw{message:"text object is nil"};E.alpha!==s&&E.setAlpha(s),v.alpha!==s&&v.setAlpha(s),S.alpha!==s&&S.setAlpha(s)})}getCurrentDepth(){let s;if(this.currentType===this.typeNames.hammer)s=31;else if(this.currentType===this.typeNames.default)s=0;else if(this.currentType===this.typeNames.tutorial)s=35;else if(this.currentType===this.typeNames.hintTutorial)s=30;else if(this.currentType===this.typeNames.hammerHintTutorial)s=30;else if(this.currentType===this.typeNames.shuffleTutorial)s=30;else throw{message:"current type is not valid for getting depth",currentType:this.currentType};return s}applyCurrentDepth(){const s=this.getCurrentDepth();this.nineSliceFrameNames.forEach(o=>{const v=this.gameObjectsMap.get(this.getRoundedFrameImageFrameObjectName(o));if(T().isNil(v))throw{message:"rounded frame image frame is nil"};const S=this.gameObjectsMap.get(this.getRoundedRectangleImageFrameObjectName(o));if(T().isNil(S))throw{message:"rounded rectangle image frame is nil"};const E=this.gameObjectsMap.get("textObject");if(T().isNil(E))throw{message:"text object is nil"};E.depth!==s+2&&E.setDepth(s+2),v.depth!==s+1&&v.setDepth(s+1),S.depth!==s&&S.setDepth(s)})}addFrames(s,o,v,S){const E=o.width*v,R=o.height*v,k=o.width*S,W=o.height*S;this.nineSliceFrameNames.forEach(K=>{let q=o.cutX,$=o.cutY,ne,oe;K==="topLeft"?(ne=E,oe=R):K==="topMiddle"?(q+=E,ne=k,oe=R):K==="topRight"?(q+=E+k,ne=E,oe=R):K==="leftMiddle"?($+=R,ne=E,oe=W):K==="center"?(q+=E,$+=R,ne=k,oe=W):K==="rightMiddle"?(q+=E+k,$+=R,ne=E,oe=W):K==="bottomLeft"?($+=R+W,ne=E,oe=R):K==="bottomMiddle"?(q+=E,$+=R+W,ne=E,oe=R):K==="bottomRight"&&(q+=E+k,$+=R+W,ne=E,oe=R),s.has(K)||s.add(K,0,q,$,ne,oe)})}renderBox(s,o,v){this.renderRoundedRectangle(s,o,v),this.renderRoundedFrame(s,o,v)}renderRoundedFrame(s,o,v){this.nineSliceFrameNames.forEach(S=>{const E=this.getRoundedFrameImageFrameObjectName(S);let R=this.gameObjectsMap.get(E);T().isNil(R)&&(R=this.scene.add.image(0,0,this.selectedImages.roundedFrame[0].key,S),R.setTint(this.frameColor),S==="topLeft"?R.setOrigin(0,0):S==="topMiddle"?R.setOrigin(.5,0):S==="topRight"?R.setOrigin(1,0):S==="leftMiddle"?R.setOrigin(0,.5):S==="center"?R.setOrigin(.5,.5):S==="rightMiddle"?R.setOrigin(1,.5):S==="bottomLeft"?R.setOrigin(0,1):S==="bottomMiddle"?R.setOrigin(.5,1):S==="bottomRight"&&R.setOrigin(1,1),this.gameObjectsMap.set(E,R));const k=this.getBoxCornerWidth(o,v),W=this.getCenterRectangleFrameWidth(o,k),K=this.getCenterRectangleFrameHeight(v,k);let q,$,ne,oe;if(S==="topLeft")q=$=k,ne=s.x-o*.5,oe=s.y-v*.5;else if(S==="topMiddle")q=W,$=k,ne=s.x,oe=s.y-v*.5;else if(S==="topRight")q=$=k,ne=s.x+o*.5,oe=s.y-v*.5;else if(S==="leftMiddle")q=k,$=K,ne=s.x-o*.5,oe=s.y;else if(S==="center")q=W,$=K,ne=s.x,oe=s.y;else if(S==="rightMiddle")q=k,$=K,ne=s.x+o*.5,oe=s.y;else if(S==="bottomLeft")q=k,$=k,ne=s.x-o*.5,oe=s.y+v*.5;else if(S==="bottomMiddle")q=W,$=k,ne=s.x,oe=s.y+v*.5;else if(S==="bottomRight")q=k,$=k,ne=s.x+o*.5,oe=s.y+v*.5;else throw{message:"frame could NOT be found by frameName",frameName:S};R.displayWidth!==q&&(R.displayWidth=q),R.displayHeight!==$&&(R.displayHeight=$),(ne!==R.x||oe!==R.y)&&R.setPosition(ne,oe),R.visible!==this.isVisible&&R.setVisible(this.isVisible)})}getRoundedFrameImageFrameObjectName(s){return"roundedFrameImage_"+s}renderRoundedRectangle(s,o,v){this.nineSliceFrameNames.forEach(S=>{const E=this.getRoundedRectangleImageFrameObjectName(S);let R=this.gameObjectsMap.get(E);T().isNil(R)&&(R=this.scene.add.image(0,0,this.selectedImages.roundedRectangle[0].key,S),S==="topLeft"?(R.setOrigin(0,0),R.setTint(this.boxTopColor)):S==="topMiddle"?(R.setOrigin(.5,0),R.setTint(this.boxTopColor)):S==="topRight"?(R.setOrigin(1,0),R.setTint(this.boxTopColor)):S==="leftMiddle"?(R.setOrigin(0,.5),R.setTint(this.boxTopColor,this.boxTopColor,this.boxBottomColor,this.boxBottomColor)):S==="center"?(R.setOrigin(.5,.5),R.setTint(this.boxTopColor,this.boxTopColor,this.boxBottomColor,this.boxBottomColor)):S==="rightMiddle"?(R.setOrigin(1,.5),R.setTint(this.boxTopColor,this.boxTopColor,this.boxBottomColor,this.boxBottomColor)):S==="bottomLeft"?(R.setOrigin(0,1),R.setTint(this.boxBottomColor)):S==="bottomMiddle"?(R.setOrigin(.5,1),R.setTint(this.boxBottomColor)):S==="bottomRight"&&(R.setOrigin(1,1),R.setTint(this.boxBottomColor)),this.gameObjectsMap.set(E,R));const k=this.getBoxCornerWidth(o,v),W=this.getCenterRectangleFrameWidth(o,k),K=this.getCenterRectangleFrameHeight(v,k);let q,$,ne,oe;S==="topLeft"?(q=$=k,ne=s.x-o*.5,oe=s.y-v*.5):S==="topMiddle"?(q=W,$=k,ne=s.x,oe=s.y-v*.5):S==="topRight"?(q=$=k,ne=s.x+o*.5,oe=s.y-v*.5):S==="leftMiddle"?(q=k,$=K,ne=s.x-o*.5,oe=s.y):S==="center"?(q=W,$=K,ne=s.x,oe=s.y):S==="rightMiddle"?(q=k,$=K,ne=s.x+o*.5,oe=s.y):S==="bottomLeft"?(q=k,$=k,ne=s.x-o*.5,oe=s.y+v*.5):S==="bottomMiddle"?(q=W,$=k,ne=s.x,oe=s.y+v*.5):S==="bottomRight"?(q=k,$=k,ne=s.x+o*.5,oe=s.y+v*.5):console.warn("frame could NOT be found by frameName",S),R.displayWidth!==q&&(R.displayWidth=q),R.displayHeight!==$&&(R.displayHeight=$),(ne!==R.x||oe!==R.y)&&R.setPosition(ne,oe),R.visible!==this.isVisible&&R.setVisible(this.isVisible)})}getBoxCornerWidth(s,o){return Math.min(s,o)*.1}getCenterRectangleFrameWidth(s,o){return s-o*2}getCenterRectangleFrameHeight(s,o){return s-o*2}getRoundedRectangleImageFrameObjectName(s){return"roundedRectangle_"+s}renderTextObject(s,o,v){const S=v*.25,E=this.getCaption(),R=this.isCurrentLanguageRightToLeftCallback()?Array.from(E).reverse().join(""):E,k=this.getFontSize();let W=this.gameObjectsMap.get("textObject");T().isNil(W)?(W=this.scene.add.bitmapText(s.x,s.y,this.getBitmapFontKeyCallback(),R),W.setCenterAlign(),this.gameObjectsMap.set("textObject",W)):((W.x!==s.x||W.y!==s.y)&&W.setPosition(s.x,s.y),W.text!==R&&W.setText(R));const K=this.getTextOriginYCallback();W.originY!==K&&W.setOrigin(.5,K);const q=k*S;W.fontSize!==q&&W.setFontSize(q);const $=parseInt("0x"+this.fontColor);W.tintTopLeft!==$&&(W.clearTint(),W.setTint($)),W.setMaxWidth(o*.9);let ne=W.fontSize;const oe=v-ne*.5;if(W.height>oe){const ce=Math.sqrt((oe-W.fontSize*.5)/W.height);W.setFontSize(ne*ce)}W.visible!==this.isVisible&&W.setVisible(this.isVisible)}}class we extends Ae{constructor(s){super(s),super.update(s),this.freeHintCount=-1,this.isTutorialEnd=!1,this.drawReferenceRectangle=!1}load(){super.load(),super.loadTextures(),super.loadSounds()}soundLoadComplete(){super.soundLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1)}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),super.render();const s=this.renderContainer(),o=this.renderHintButtonBackground(s),v=this.renderHintButton(s),S=this.renderGemImage(s,o,v);this.renderHintButtonText(s,o,v,S);const E=this.getContainerPosition();(s.x!==E.x||s.y!==E.y)&&s.setPosition(E.x,E.y),this.renderInputContainer(E.x,E.y),this.getFreeHintCount()>0&&this.renderFreeHintCountImageAndText(s,o),this.shouldHintTutorialDisplayCallback()&&this.renderCancelImage()}renderCancelImage(){const s=this.getCancelImagePositionHelperCallback();let o=this.getCancelImage();_.isNil(o)&&(o=this.scene.add.image(0,0,this.getCancelButtonTextureKeyCallback()).setDepth(this.getCurrentDepth()).setVisible(!1),o.setInteractive(),o.on("pointerdown",()=>{this.onHintTutorialEndCallback()}),this.gameObjectsMap.set("cancelImage",o));const v=Math.min(this.BaseWidth,this.scene.game.canvas.height)*.1/o.height;o.scale!==v&&o.setScale(v);const S=s.x-o.displayWidth*.5,E=s.y-o.displayHeight*.67;(o.x!==S||o.y!==E)&&o.setPosition(S,E)}getCancelImage(){return this.gameObjectsMap.get("cancelImage")}getCurrentDepth(){return this.shouldHintTutorialDisplayCallback()?31:0}renderFreeHintCountImageAndText(s,o){const v={x:o.displayWidth*.35,y:-o.displayHeight*.35};let S=this.getFreeHintCountImage();_.isNil(S)?(S=this.scene.add.image(v.x,v.y,this.getWhiteButtonTextureKeyCallback(),"__BASE").setTint(15554635),s.add(S),this.gameObjectsMap.set("freeHintCountImage",S)):(S.x!==v.x||S.y!==v.y)&&S.setPosition(v.x,v.y);const E=o.displayHeight*.4/S.height;S.scale!==E&&S.setScale(E);let R=this.getFreeHintCountText();_.isNil(R)?(R=this.scene.add.bitmapText(v.x,v.y,this.getBitmapFontKeyCallback(),this.getFreeHintCount()).setOrigin(.5,.6),s.add(R),this.gameObjectsMap.set("freeHintCountText",R)):(R.x!==v.x||R.y!==v.y)&&R.setPosition(v.x,v.y);const k=S.displayHeight*.6;R.fontSize!==k&&R.setFontSize(k);const W=this.getFreeHintCount()>0;S.visible!==W&&(S.setVisible(W),R.setVisible(W))}getFreeHintCountText(){return this.gameObjectsMap.get("freeHintCountText")}getFreeHintCountImage(){return this.gameObjectsMap.get("freeHintCountImage")}getFreeHintCount(){return this.freeHintCount}setFreeHintCount(s){this.freeHintCount=s}decreaseFreeHintCount(){this.freeHintCount--}getContainerPosition(){const s=this.getPositionYHelperCallback(),o=this.getHintButtonBackground();return{x:this.CenterAbsoluteX,y:s+o.displayHeight*.5}}renderInputContainer(s,o){const v=this.getBackgroundHeightCallback()*.5;let S=this.gameObjectsMap.get("inputContainer");_.isNil(S)?(S=this.scene.add.container(s,o),S.setInteractive(new Phaser.Geom.Circle(0,0,v),Phaser.Geom.Circle.Contains),S.on("pointerdown",()=>{this.onHintPointerdownCallback()}),this.gameObjectsMap.set("inputContainer",S)):((S.x!==s||S.y!==o)&&S.setPosition(s,o),S.input.hitArea.radius!==v&&(S.input.hitArea=new Phaser.Geom.Circle(0,0,v)));const E=this.getCurrentDepth();S.depth!==E&&S.setDepth(E);const R=this.isVisible&&this.isEnabled;S.setVisible(R)}playHintPressSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.hintPress[0].key)}renderHintButtonText(s,o,v,S){const E={x:-S.displayWidth*.2,y:v.displayHeight*.35};let R=this.gameObjectsMap.get("hintButtonText");if(_.isNil(R)){R=this.scene.add.bitmapText(E.x,E.y,this.getBitmapFontKeyCallback(),this.gemCost);const q={x:1-this.origin.x,y:1-this.origin.y};R.setOrigin(q.x,q.y),s.add(R),this.gameObjectsMap.set("hintButtonText",R)}else(R.x!==E.x||R.y!==E.y)&&R.setPosition(E.x,E.y);const k=parseInt("0x"+this.fontColor);R.tintTopLeft!==k&&(R.clearTint(),R.setTint(k));const W=this.fontSize*o.displayHeight;R.fontSize!==W&&R.setFontSize(W);const K=this.getFreeHintCount()<1;R.visible!==K&&R.setVisible(K)}getContainer(){return this.gameObjectsMap.get("container")}renderContainer(){let s=this.gameObjectsMap.get("container");_.isNil(s)&&(s=this.scene.add.container(0,0),this.gameObjectsMap.set("container",s));const o=this.getCurrentDepth();s.depth!==o&&s.setDepth(o);const v=this.isVisible&&this.isEnabled;return s.setVisible(v),s}renderGemImage(s,o,v){const S={x:-v.displayWidth*.125,y:v.displayHeight*.45};let E=this.gameObjectsMap.get("gemImage");_.isNil(E)?(E=this.scene.add.image(S.x,S.y,this.getGemImageTextureKeyCallback()).setOrigin(1,0),E.setAngle(this.gemImageAngle),s.add(E),this.gameObjectsMap.set("gemImage",E)):(E.x!==S.x||E.y!==S.y)&&E.setPosition(S.x,S.y);const R=.5*(o.y+o.displayHeight*.5-(v.y+v.displayHeight))/E.height;E.scale!==R&&E.setScale(R);const k=this.getFreeHintCount()<1;return E.visible!==k&&E.setVisible(k),E}getHintButtonPosition(){const s=this.getHintButtonBackground();return this.getFreeHintCount()>0?{x:0,y:-s.displayHeight*.25}:{x:0,y:-s.displayHeight*.4}}getHintButtonScale(){const s=this.getHintButton(),o=this.getHintButtonBackground();return this.getFreeHintCount()>0?.5*o.displayHeight/s.height:.45*o.displayHeight/s.height}getHintButton(){return this.gameObjectsMap.get("hintButton")}renderHintButton(s){const o=this.getHintButtonPosition();let v=this.gameObjectsMap.get("hintButton");_.isNil(v)?(v=this.scene.add.image(o.x,o.y,this.selectedImages.hintButton[0].key).setOrigin(.5,0),s.add(v),this.gameObjectsMap.set("hintButton",v)):(v.x!==o.x||v.y!==o.y)&&v.setPosition(o.x,o.y);const S=this.getHintButtonScale();return v.scale!==S&&v.setScale(S),v}playPressTween(){const s=this.gameObjectsMap.get("container");let o=this.gameObjectsMap.get("pressTween");_.isNil(o)?(o=this.scene.tweens.add({targets:s,duration:50,onStart:()=>{s.scale!==1&&s.setScale(1)},scale:.9}),this.gameObjectsMap.set("pressTween",o)):o.restart()}playUnpressTween(){const s=this.gameObjectsMap.get("container");if(s.scale===1)return;let o=this.gameObjectsMap.get("unpressTween");_.isNil(o)?(o=this.scene.tweens.add({targets:s,duration:50,onComplete:()=>{s.scale!==1&&s.setScale(1)},scale:1}),this.gameObjectsMap.set("unpressTween",o)):o.restart()}getHintButtonBackground(){return this.gameObjectsMap.get("hintButtonBackground")}renderHintButtonBackground(s){let o=this.gameObjectsMap.get("hintButtonBackground");_.isNil(o)&&(o=this.scene.add.image(0,0,this.getBackgroundTextureKeyCallback()),s.add(o),this.gameObjectsMap.set("hintButtonBackground",o));const v=this.getBackgroundHeightCallback()/o.height;return o.scale!==v&&o.setScale(v),o}getGemCost(){return this.gemCost}getInputContainer(){return this.gameObjectsMap.get("inputContainer")}disappearHint(s){const o=this.getContainer(),v=this.getHintButtonBackground();this.scene.tweens.add({duration:s,targets:o,x:this.scene.game.canvas.width+v.displayWidth,onComplete:()=>{this.isVisible=!1,this.render()}})}appearHint(s){const o=this.getContainer(),v=this.getHintButtonBackground();this.scene.tweens.add({duration:s,targets:o,x:this.getContainerPosition().x,onStart:()=>{this.isVisible=!0,this.render(),o.setX(this.scene.game.canvas.width+v.displayWidth)}})}}class Ue extends Ae{constructor(s){super(s),super.update(s),this.drawReferenceRectangle=!1,this.startRadianForCircle=Math.PI/2,this.progresFullTweenInterval=null}load(){super.load(),this.loadTextures(),this.loadSounds()}soundLoadComplete(){super.soundLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1)}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),super.render();const s=this.renderContainer(),o=this.renderBackground(s),v=this.renderIcon(s,o),S=this.renderClapperContainer(s,o),E=this.renderCircle(s,o),k=this.getPositionYHelperCallback()-o.displayHeight*.5;s.y!==k&&s.setY(k),this.applyMaskToCircle(),this.renderDialogBoxContainer(this.CenterAbsoluteX,k-o.displayHeight*.65);const W=this.isVisible&&this.isEnabled;s.visible!==W&&s.setVisible(W),W?this.playProgressFullTween():this.resetProgressFullTween()}getClapperContainer(){return this.gameObjectsMap.get("clapperContainer")}renderClapperContainer(s,o){let v=this.getClapperContainer();_.isNil(v)&&(v=this.scene.add.container(0,0).setAlpha(0),s.add(v),this.gameObjectsMap.set("clapperContainer",v));const S=this.renderClapper(v,o);return this.renderClapperText(v,o,S),this.renderClapperGem(v,o,S),v}renderClapperGem(s,o,v){const S={x:-v.displayWidth*.1,y:v.y+v.displayHeight*1};let E=this.gameObjectsMap.get("clapperGem");_.isNil(E)?(E=this.scene.add.image(S.x,S.y,this.getGemTextureKeyCallback()).setOrigin(1,.5).setAngle(30),s.add(E),this.gameObjectsMap.set("clapperGem",E)):(E.x!==S.x||E.y!==S.y)&&E.setPosition(S.x,S.y);const R=o.displayHeight*.2/E.height;E.scale!==R&&E.setScale(R)}getClapperTextValue(){return"x"+this.rewardedAdMultiplier}renderClapperText(s,o,v){const S={x:0,y:v.y+v.displayHeight*.9},E=o.displayHeight*.2;let R=this.gameObjectsMap.get("clapperText");return _.isNil(R)?(R=this.scene.add.bitmapText(S.x,S.y,this.getBitmapFontKeyCallback(),this.getClapperTextValue()).setOrigin(0,.5),s.add(R),this.gameObjectsMap.set("clapperText",R)):(R.x!==S.x||R.y!==S.y)&&R.setPosition(S.x,S.y),R.fontSize!==E&&R.setFontSize(E),R}renderClapper(s,o){const v={x:0,y:-o.displayHeight*.15};let S=this.gameObjectsMap.get("clapper");_.isNil(S)?(S=this.scene.add.image(v.x,v.y,this.getClapperTextureKeyCallback()),s.add(S),this.gameObjectsMap.set("clapper",S)):(S.x!==v.x||S.y!==v.y)&&S.setPosition(v.x,v.y);const E=o.displayHeight*.4/S.height;return S.scale!==E&&S.setScale(E),S}renderDialogBoxContainer(s,o){let v=this.gameObjectsMap.get("dialogBoxContainer");if(_.isNil(v)){v=this.scene.add.container(s,o).setDepth(this.depth).setAlpha(0);const E=100,R=this.scene.add.image(0,-E*.125,this.getArrowTextureKeyCallback());R.setData("type","arrow"),R.setScale(E*.25/R.height),v.add(R);const k=this.scene.add.image(0,-E*.625,this.getRectangleTextureKeyCallback());k.setData("type","rectangle"),k.displayHeight=E*.75,v.add(k);const W=this.scene.add.image(-56.5,k.y,this.getHalfCircleTextureKeyCallback());W.setData("type","leftHalfCircle"),W.setScale(k.displayHeight/W.height),v.add(W);const K=this.scene.add.image(56.5,k.y,this.getHalfCircleTextureKeyCallback());K.setFlipX(!0),K.setData("type","rightHalfCircle"),K.setScale(k.displayHeight/K.height),v.add(K);const q=this.scene.add.bitmapText(0,k.y,this.getBitmapFontKeyCallback(),"TEST");q.setOrigin(.5),q.setData("type","text"),q.setFontSize(k.displayHeight*.5),q.setTint(3883372),v.add(q);const $=v.getBounds();v.setData("initialHeight",$.height),this.gameObjectsMap.set("dialogBoxContainer",v)}else(v.x!==s||v.y!==o)&&v.setPosition(s,o);const S=this.getDialogBoxContainerScale(v.getData("initialHeight"));v.scale!==S&&v.setScale(S)}getDialogBoxContainerScale(s){return this.gameObjectsMap.get("background").displayHeight*.5/s}playOnOtherWordFoundTween(){const s=this.gameObjectsMap.get("container"),o=this.gameObjectsMap.get("circle"),v=this.getCurrentProgress(),S=this.gameObjectsMap.get("maskShape"),E=this.gameObjectsMap.get("icon"),R=E.scale,k=S.getData("finishRadian"),W=this.startRadianForCircle+2*Math.PI*v;this.scene.tweens.addCounter({from:0,to:1,duration:300,onUpdate:K=>{const q=K.getValue();q<.5?E.setScale(R*(1-q/2)):E.setScale(R*(q+(1-q)/2)),S.clear(),S.slice(s.x,s.y,o.displayWidth,this.startRadianForCircle,k+(W-k)*q),S.fillPath()},onComplete:()=>{S.setData("finishRadian",W),this.playProgressFullTween()}})}applyMaskToCircle(){const s=this.gameObjectsMap.get("container"),o=this.gameObjectsMap.get("circle"),v=this.getCurrentProgress();let S=this.gameObjectsMap.get("maskShape");if(_.isNil(S)){S=this.scene.make.graphics();const R=S.createGeometryMask(S);o.setMask(R),this.gameObjectsMap.set("maskShape",S)}else S.clear();const E=this.startRadianForCircle+2*Math.PI*v;S.slice(s.x,s.y,o.displayWidth,this.startRadianForCircle,E),S.getData("finishRadian")!==E&&S.setData("finishRadian",E),S.fillPath()}getCurrentProgress(){return this.currentState.found/this.progressArray[this.currentState.level]}playProgressFullTween(){if(this.getCurrentProgress()!==1)return;const s=this.getClapperContainer(),o=this.getIcon();this.resetProgressFullTween();const v=500,S=3e3,E=()=>{this.scene.tweens.add({duration:v,targets:o,alpha:0,onComplete:()=>{this.scene.tweens.add({duration:v,targets:s,alpha:1,onComplete:()=>{setTimeout(()=>{this.scene.tweens.add({duration:v,targets:s,alpha:0,onComplete:()=>{this.scene.tweens.add({duration:v,targets:o,alpha:1})}})},S)}})}})};E(),this.progresFullTweenInterval=setInterval(()=>{E()},v*4+S*2)}resetProgressFullTween(){const s=this.getClapperContainer(),o=this.getIcon();this.scene.tweens.killTweensOf(s),this.scene.tweens.killTweensOf(o),s.setAlpha(0),o.setAlpha(1),this.progresFullTweenInterval!==null&&clearInterval(this.progresFullTweenInterval)}getRewardedAdMultiplier(){return this.rewardedAdMultiplier}getRewardValue(){return this.progressArray[this.currentState.level]}renderCircle(s,o){let v=this.gameObjectsMap.get("circle");_.isNil(v)&&(v=this.scene.add.image(0,0,this.selectedImages.circle[0].key),s.add(v),this.gameObjectsMap.set("circle",v));const S=o.displayHeight/v.height;return v.scale!==S&&v.setScale(S),v}getIcon(){return this.gameObjectsMap.get("icon")}renderIcon(s,o){let v=this.gameObjectsMap.get("icon");_.isNil(v)&&(v=this.scene.add.image(0,0,this.selectedImages.icon[0].key).setAlpha(1),s.add(v),this.gameObjectsMap.set("icon",v));const S=o.displayHeight/v.height;return v.scale!==S&&v.setScale(S),v}getBackground(){return this.gameObjectsMap.get("background")}renderBackground(s){let o=this.gameObjectsMap.get("background");_.isNil(o)&&(o=this.scene.add.image(0,0,this.getBackgroundTextureKeyCallback()),o.setInteractive(new Phaser.Geom.Circle(o.width*.5,o.height*.5,o.width*.5),Phaser.Geom.Circle.Contains),o.on("pointerup",()=>{const E=this.getClapperContainer().alpha>0;this.onOtherWordsPointerupCallback(E)}),s.add(o),this.gameObjectsMap.set("background",o));const v=this.getBackgroundHeightCallback()/o.height;return o.scale!==v&&o.setScale(v),o}getContainerX(){return this.CenterAbsoluteX}renderContainer(){const s=this.getContainerX();let o=this.gameObjectsMap.get("container");_.isNil(o)?(o=this.scene.add.container(s,0).setDepth(this.depth),this.gameObjectsMap.set("container",o)):o.x!==s&&o.setX(s);const v=this.isVisible&&this.isEnabled;return o.setVisible(v),o}onRewardCollect(){return this.currentState.level<this.progressArray.length-1&&this.currentState.level++,this.currentState.found=0,this.currentState}increaseCurrentState(){const s=this.progressArray[this.currentState.level];if(s===this.currentState.found)return console.log("reward is not taken yet"),this.currentState;const o=this.currentState.found+1;if(o===s)console.log("reward is available"),this.currentState.found=o;else if(o<s)this.currentState.found=o;else throw{message:"found count cannot be higher than current level word count",foundCount:o,currentLevelWordCount:s};return this.currentState}onDuplicateOtherWordFound(s){const o=this.gameObjectsMap.get("dialogBoxContainer"),v=this.getDialogBoxContainerScale(o.getData("initialHeight")),S=o.list.find(K=>K.getData("type")==="text"),E=o.list.find(K=>K.getData("type")==="rectangle"),R=o.list.find(K=>K.getData("type")==="leftHalfCircle"),k=o.list.find(K=>K.getData("type")==="rightHalfCircle"),W=this.getTextOriginYCallback();S.originY!==W&&S.setOrigin(.5,W),S.text!==s&&S.setText(s),E.displayWidth!==S.width&&(E.displayWidth=S.width,R.x=-.5*(E.displayWidth+R.displayWidth),k.x=.5*(E.displayWidth+k.displayWidth),o.setScale(v)),this.scene.tweens.killTweensOf(o),this.scene.tweens.add({duration:100,targets:o,scale:v*1.1,alpha:1,onStart:()=>{o.setAlpha(0),o.setScale(0),this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.duplicate[0].key)},onComplete:()=>{this.scene.tweens.add({duration:50,targets:o,scale:v,onComplete:()=>{this.scene.tweens.add({duration:100,delay:1500,targets:o,scale:0,alpha:0})}})}})}playLetterMoveTween(s){const o=s.letters,v=s.offsets,S=s.midPoint,E=this.getContainer(),R=new Phaser.Curves.QuadraticBezier({x:S.x,y:S.y},{x:E.x,y:S.y},{x:E.x,y:E.y}),k={t:0,vec:new Phaser.Math.Vector2};let W=this.gameObjectsMap.get("letterMoveTweenContainer");_.isNil(W)?(W=this.scene.add.container(S.x,S.y).setDepth(o[0].depth),this.gameObjectsMap.set("letterMoveTweenContainer",W)):(S.x!==W.x||S.y!==W.y)&&W.setPosition(S.x,S.y),W.removeAll(),o.forEach((K,q)=>{K.setPosition(v[q].x,v[q].y),W.add(K)}),this.scene.tweens.add({targets:k,t:1,duration:350,onUpdate:()=>{R.getPoint(k.t,k.vec),W.setScale(1-k.t/2),W.setPosition(k.vec.x,k.vec.y)},onComplete:()=>{this.playOnOtherWordFoundTween(),o.forEach(K=>{K.destroy()})}})}getContainer(){return this.gameObjectsMap.get("container")}disappearOtherWords(s){const o=this.getContainer(),v=this.getBackground();this.scene.tweens.add({targets:o,duration:s,x:-v.displayWidth,onUpdate:()=>{this.applyMaskToCircle()},onComplete:()=>{this.isVisible=!1,this.render()}})}appearOtherWords(s){const o=this.getContainer(),v=this.getBackground();this.scene.tweens.add({targets:o,duration:s,x:this.getContainerX(),onStart:()=>{this.isVisible=!0,this.render(),o.setX(-v.displayWidth)},onUpdate:()=>{this.applyMaskToCircle()}})}}class Oe extends Ae{constructor(s){super(s),super.update(s),this.drawReferenceRectangle=!1}load(){super.load(),this.onReady()}render(){super.render(),this.drawReferenceRectangle&&super.renderReferenceRectangle()}}class Ye extends Ae{constructor(s){super(s),super.update(s),this.drawReferenceRectangle=!1}load(){super.load(),this.onReady()}render(){super.render(),this.drawReferenceRectangle&&super.renderReferenceRectangle(16711680)}}class st extends Ae{constructor(s){super(s),super.update(s),this.textsArray=[],this.currentCurveLetters=[],this.areRibbonTweensPlaying=!1}load(){super.load(),this.loadTextures(),this.loadSounds()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1)}soundLoadComplete(){super.soundLoadComplete(),this.isTextureLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isSoundLoadComplete=!1)}render(){const s=Math.min(this.AbsoluteWidth,this.AbsoluteHeight);let o=this.gameObjectsMap.get("ribbonSprite");_.isNil(o)?(o=this.scene.add.sprite(this.CenterAbsoluteX,this.CenterAbsoluteY,this.selectedImages.ribbon[0].key).setAlpha(0).setDepth(this.depth),this.gameObjectsMap.set("ribbonSprite",o)):((o.x!==this.CenterAbsoluteX||o.y!==this.CenterAbsoluteY)&&o.setPosition(this.CenterAbsoluteX,this.CenterAbsoluteY),o.texture.key!==this.selectedImages.ribbon[0].key&&o.setTexture(this.selectedImages.ribbon[0].key));const v=s/o.width*_.get(this,`scale.${this.scene.getOrientation()}`);o.scale!==v&&o.setScale(v);for(let S=0;S<this.maxLetterCount;S++){let E=this.gameObjectsMap.get("text"+S);_.isNil(E)&&(E=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),""),E.setDepth(this.depth+1).setAlpha(0),E.setCenterAlign(),this.gameObjectsMap.set("text"+S,E),this.textsArray.push(E));const R=this.getTextOriginYCallback();E.originY!==R&&E.setOrigin(.5,R);const k=this.getFinalFontSize(o);E.fontSize!==`${k}px`&&E.setFontSize(k);const W=parseInt("0x"+this.fontColor);E.tintTopLeft!==W&&(E.clearTint(),E.setTint(W))}}getReferenceText(){return this.gameObjectsMap.get("referenceText")}getInvisibleCubicBezierPoint(s){const o=this.gameObjectsMap.get("ribbonSprite"),v=o.x-o.displayWidth*.015;let S=s.length,E=this.gameObjectsMap.get("referenceText");_.isNil(E)?(E=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),s).setAlpha(0),this.gameObjectsMap.set("referenceText",E)):E.text!==s&&E.setText(s);const R=this.getFinalFontSize(o);E.fontSize!==R&&E.setFontSize(R);let k=o.y-o.displayHeight*.49,W=k+o.displayHeight*.38,K=v-E.width*.5,q=v+E.width*.5;E.width>o.displayWidth*.5&&(E.setFontSize(E.fontSize*o.displayWidth*.5/E.width),k=o.y-o.displayHeight*.62,W=k+o.displayHeight*this.textPositionYOffsetMultiplier+E.width*.2,K=v-o.displayWidth*.25,q=v+o.displayWidth*.25);const $=new Phaser.Math.Vector2(K,W),ne=new Phaser.Math.Vector2(K+(v-K)*.5,k+(W-k)*.85),oe=new Phaser.Math.Vector2(v+(q-v)*.5,k+(W-k)*.85),ce=new Phaser.Math.Vector2(q,W);return new Phaser.Curves.CubicBezier($,ne,oe,ce).getSpacedPoints(S+1)}setLettersInCurveType(s){const o=this.getInvisibleCubicBezierPoint(s),v={x:o[1].x,y:o[1].y},S=(s.length-1)/2;this.currentCurveLetters.forEach(R=>{R.setAlpha(0),this.scene.tweens.killTweensOf(R)}),this.currentCurveLetters=[];const E=this.getReferenceText();Array.from(s).forEach((R,k)=>{const W=this.textsArray[k];if(_.isNil(W))return;if(W.setText(R),W.setFontSize(E.fontSize),k===0)W.setPosition(v.x,v.y);else if(k===s.length-1){const q=this.textsArray[k-1];W.setX(q.x+(q.width/2+W.width/2)),W.setY(v.y)}else{const q=this.textsArray[k-1];W.setX(q.x+(q.width/2+W.width/2)),W.setY(o[k+1].y)}let K;k===S?K=0:K=k-S,W.setAngle(K),this.currentCurveLetters.push(W)})}playRibbonTweens(s){if(!s&&this.areRibbonTweensPlaying){console.log("for ribbon is already playing");return}this.areRibbonTweensPlaying=!0;const o=this.gameObjectsMap.get("ribbonSprite");this.scene.tweens.killTweensOf(o),this.scene.tweens.killTweensOf(this.textsArray);const v={x:this.CenterAbsoluteX,y:this.CenterAbsoluteY};o.setPosition(v.x,v.y);let S=this.getCaptionsCallback();const E=S[Math.floor(Math.random()*S.length)];this.setLettersInCurveType(E),this.playAppearanceTween(),this.playSound()}playSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.ribbon[0].key)}playAppearanceTween(){const s=this.gameObjectsMap.get("ribbonSprite");this.scene.tweens.add({targets:s,duration:this.appearanceTweenDurationInMilliseconds,alpha:1,onStart:()=>{s.setAlpha(.3)},onComplete:()=>{this.playDisappearanceTween()}});const o=this.getReferenceText().fontSize;this.scene.tweens.add({targets:this.currentCurveLetters,duration:this.appearanceTweenDurationInMilliseconds*.5,fontSize:o*1.3,yoyo:!0,onStart:()=>{this.currentCurveLetters.forEach(v=>{v.setAlpha(1);const S=this.getReferenceText().fontSize;v.fontSize!==S&&v.setFontSize(S)})}})}playDisappearanceTween(){const s=Math.min(this.AbsoluteWidth,this.AbsoluteHeight),o=this.gameObjectsMap.get("ribbonSprite"),v=this.currentCurveLetters.concat(o);this.scene.tweens.add({delay:this.waitDurationAfterAppearanceInMilliseconds,targets:v,duration:this.disappearanceTweenDurationInMilliseconds,y:{getEnd:S=>S.y-s*.2},alpha:0,onComplete:()=>{this.areRibbonTweensPlaying=!1,this.onCompleteCallback()}})}getFinalFontSize(s){return this.fontSize*s.displayHeight}}class lt extends Ae{constructor(s){super(s),super.update(s),this.threeSliceFrameNames=["left","center","right"],this.gemImageScaleTween=null,this.isGemImageScaleTweenPlaying=!1,this.drawReferenceRectangle=!1}load(){super.load(),this.loadSounds()}soundLoadComplete(){super.soundLoadComplete(),this.isSoundLoadComplete&&(this.onReady(),this.isSoundLoadComplete=!1)}render(){super.render(),this.drawReferenceRectangle&&super.renderReferenceRectangle();const s={x:this.LeftAbsoluteX,y:this.CenterAbsoluteY},o=this.renderGemImage(s.x,s.y),v=this.renderCounterTextObject();this.renderBackground(s,v.width,o,v)}playCollectSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.collect[0].key)}getBackgroundHeight(){const s=this.scene.getOrientation();return this.AbsoluteHeight*(s==="portrait"?.43:.66)}renderCounterTextObject(){let s=this.gameObjectsMap.get("counterTextObject");_.isNil(s)?(s=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),this.currentCount).setOrigin(.5,.5).setDepth(this.depth+1),s.setTint(this.fontColor),this.gameObjectsMap.set("counterTextObject",s)):s.text!==this.currentCount&&s.setText(this.currentCount);const o=this.getBackgroundHeight()*.4;return s.fontSize!==o&&s.setFontSize(o),s.visible!==this.isVisible&&s.setVisible(this.isVisible),s}renderGemImage(s,o){let v=this.gameObjectsMap.get("gemImage");_.isNil(v)&&(v=this.scene.add.image(0,0,this.getGemTextureKeyCallback()).setDepth(this.depth+1).setOrigin(0,.5),this.gameObjectsMap.set("gemImage",v));const S=this.getGemImageScale();v.scale!==S&&v.setScale(S);const E=s-v.displayWidth*.2;return(v.x!==E||v.y!==o)&&v.setPosition(E,o),v.visible!==this.isVisible&&v.setVisible(this.isVisible),v}getBackgroundFrameObjectName(s){return"backgroundFrameObject_"+s}renderBackground(s,o,v,S){this.threeSliceFrameNames.forEach(E=>{const R=this.getBackgroundFrameObjectName(E);let k=this.gameObjectsMap.get(R);_.isNil(k)&&(k=this.scene.add.image(0,0,this.getBackgroundTextureKeyCallback(),E),k.setDepth(this.depth),k.setOrigin(0,.5),this.gameObjectsMap.set(R,k));const W=this.getBackgroundHeight()/k.height;k.scale!==W&&k.setScale(W);let K;if(E==="left")K=s.x;else if(E==="center"){const q=this.gameObjectsMap.get(this.getBackgroundFrameObjectName("left"));K=s.x+q.displayWidth;const $=S.text.length,ne=this.AbsoluteWidth-q.displayWidth*.5,oe=$>5?ne:ne*.5+ne*.1*$;this.checkAndCorrectFontSize(oe),k.displayWidth!==oe&&(k.displayWidth=oe);const ce={x:v.x+v.displayWidth+oe*.5,y:s.y};S.setPosition(ce.x,ce.y)}else if(E==="right"){const q=this.gameObjectsMap.get(this.getBackgroundFrameObjectName("left")),$=this.gameObjectsMap.get(this.getBackgroundFrameObjectName("center"));K=s.x+q.displayWidth+$.displayWidth}(k.x!==K||k.y!==s.y)&&k.setPosition(K,s.y),k.visible!==this.isVisible&&k.setVisible(this.isVisible)})}getRightEndPosition(){const s="right",o=this.getBackgroundFrameObjectName(s),v=this.gameObjectsMap.get(o);return{x:v.x+v.displayWidth,y:v.y}}getCurrentCount(){return this.currentCount}addToCurrentCount(s){this.currentCount+=s,console.log("current count",this.currentCount),this.render()}checkAndCorrectFontSize(s){const o=this.gameObjectsMap.get("counterTextObject");o.width>s&&o.setFontSize(s/o.width*o.fontSize)}playGemImageScaleTween(){if(this.playCollectSound(),_.isNil(this.gemImageScaleTween)){const s=this.gameObjectsMap.get("gemImage");this.isGemImageScaleTweenPlaying=!0,this.gemImageScaleTween=this.scene.tweens.add({duration:75,targets:s,scale:this.getGemImageScale()*.8,yoyo:!0,onComplete:()=>{this.isGemImageScaleTweenPlaying=!1}})}else this.isGemImageScaleTweenPlaying||(this.isGemImageScaleTweenPlaying=!0,this.gemImageScaleTween.data.some(o=>{if(o.key==="scale")return o.getEndValue=()=>this.getGemImageScale()*.8,o.getStartValue=()=>this.getGemImageScale(),!0}),this.gemImageScaleTween.restart())}getGemImageMiddlePosition(){const s=this.gameObjectsMap.get("gemImage");if(_.isNil(s))throw{message:"gem image is nil",gemImage:s};return{x:s.x+s.displayWidth*.5,y:s.y}}getGemImageScale(){const s=this.gameObjectsMap.get("gemImage");return this.getBackgroundHeight()/s.height}getGameObjects(){const s=[],o=this.getGemImage();s.push(o);const v=this.gameObjectsMap.get("counterTextObject");return s.push(v),this.threeSliceFrameNames.forEach(S=>{const E=this.getBackgroundFrameObjectName(S),R=this.gameObjectsMap.get(E);s.push(R)}),s}getGemImage(){return this.gameObjectsMap.get("gemImage")}disappearGemCounter(s){const o=this.getGameObjects();this.scene.tweens.add({duration:s,targets:o,y:-this.scene.game.canvas.height*.25,onComplete:()=>{this.isVisible=!1,this.render()}})}appearGemCounter(s){const o=this.getGameObjects();this.scene.tweens.add({duration:s,targets:o,y:this.CenterAbsoluteY,onStart:()=>{this.isVisible=!0,this.render(),o.forEach(v=>{v.setY(-this.scene.game.canvas.height*.25)})},onComplete:()=>{this.render()}})}}class Ke extends Ae{constructor(s){super(s),this.threeSliceFrameNames=["left","center","right"],this.counterBackgroundEdgeMultiplier=30/64,this.counterBackgroundCenterMultiplier=1-this.counterBackgroundEdgeMultiplier*2,this.areCounterBackgroundFramesAdded=!1,this.whiteButtonEdgeMultiplier=30/64,this.whiteButtonCenterMultiplier=1-this.whiteButtonEdgeMultiplier*2,this.areWhiteButtonFramesAdded=!1,this.progressBarFillEdgeMultiplier=100/220,this.progressBarFillCenterMultiplier=1-this.progressBarFillEdgeMultiplier*2,this.areProgressBarFillFramesAdded=!1,this.areButterflyAnimationsAdded=!1}load(){super.load(),this.loadTextures(),this.loadAtlases(),this.loadBitmapFonts(),this.loadSounds()}soundLoadComplete(){super.soundLoadComplete(),this.isTextureLoadComplete&&this.isAtlasesLoadComplete&&this.isBitmapFontsLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isBitmapFontsLoadComplete=!1,this.isSoundLoadComplete=!1)}atlasesLoadComplete(){super.atlasesLoadComplete(),this.isTextureLoadComplete&&this.isAtlasesLoadComplete&&this.isBitmapFontsLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isBitmapFontsLoadComplete=!1,this.isSoundLoadComplete=!1)}bitmapFontsLoadComplete(){super.bitmapFontsLoadComplete(),this.isTextureLoadComplete&&this.isAtlasesLoadComplete&&this.isBitmapFontsLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isBitmapFontsLoadComplete=!1,this.isSoundLoadComplete=!1)}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isAtlasesLoadComplete&&this.isBitmapFontsLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isBitmapFontsLoadComplete=!1,this.isSoundLoadComplete=!1)}render(){super.render(),this.addCounterBackgroundFrames(),this.addWhiteButtonFrames(),this.addProgressBarFillFrames(),this.addButterflyAnimations()}playLevelStartSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.levelStart[0].key)}getClapperTextureKey(){return this.selectedImages.clapper[0].key}getSetImageFrameTextureKey(){return this.selectedImages.setImageFrame[0].key}getSetImageMaskTextureKey(){return this.selectedImages.setImageMask[0].key}getProgressbarShineTextureKey(){return this.selectedImages.progressbarShine[0].key}getGreenTickTextureKey(){return this.selectedImages.greenTick[0].key}getProgressBarFillTextureKey(){return this.selectedImages.progressBarFill[0].key}getVoyageCircleTextureKey(){return this.selectedImages.voyageCircle[0].key}getWhiteButtonTextureKey(){return this.selectedImages.whiteButton[0].key}getShineImageTextureKey(){return this.selectedImages.shineImage[0].key}addProgressBarFillFrames(){if(!this.areProgressBarFillFramesAdded){this.areProgressBarFillFramesAdded=!0;const s=this.scene.textures.get(this.getProgressBarFillTextureKey()),o=s.get(0),v=s,S=o,E=this.progressBarFillEdgeMultiplier,R=this.progressBarFillCenterMultiplier,k=S.width*E,W=S.width*R,K=S.height;this.threeSliceFrameNames.forEach(q=>{let $=S.cutX,ne=S.cutY,oe;q==="left"?oe=k:q==="center"?($+=k,oe=W):q==="right"&&($+=k+W,oe=k),v.has(q)||v.add(q,0,$,ne,oe,K)})}}addWhiteButtonFrames(){if(!this.areWhiteButtonFramesAdded){this.areWhiteButtonFramesAdded=!0;const s=this.scene.textures.get(this.getWhiteButtonTextureKey()),o=s.get(0),v=s,S=o,E=this.whiteButtonEdgeMultiplier,R=this.whiteButtonCenterMultiplier,k=S.width*E,W=S.width*R,K=S.height;this.threeSliceFrameNames.forEach(q=>{let $=S.cutX,ne=S.cutY,oe;q==="left"?oe=k:q==="center"?($+=k,oe=W):q==="right"&&($+=k+W,oe=k),v.has(q)||v.add(q,0,$,ne,oe,K)})}}addCounterBackgroundFrames(){if(!this.areCounterBackgroundFramesAdded){this.areCounterBackgroundFramesAdded=!0;const s=this.scene.textures.get(this.getCounterBackgroundTextureKey()),o=s.get(0),v=s,S=o,E=this.counterBackgroundEdgeMultiplier,R=this.counterBackgroundCenterMultiplier,k=S.width*E,W=S.width*R,K=S.height;this.threeSliceFrameNames.forEach(q=>{let $=S.cutX,ne=S.cutY,oe;q==="left"?oe=k:q==="center"?($+=k,oe=W):q==="right"&&($+=k+W,oe=k),v.has(q)||v.add(q,0,$,ne,oe,K)})}}getAtlasKeyByName(s){return _.find(this.selectedAtlases[s],o=>o.variant==="image").key}getGiftBoxesFrameNameByPartAndType(s,o){let v;if(o==="B")v="orange";else if(o==="G")v="golden";else if(o==="L")v="purple";else throw{message:"Please provide a proper type",type:o};return"giftbox"+s+"_"+v}getLastFrameOfButterflyAtlasByNameAndState(s,o){const v=this.getAtlasKeyByName(s),S=this.scene.anims.generateFrameNames(v),E=this.getButterflyAnimationFramesByState(S,o),R=_.sortBy(E,k=>k.frame);return R[R.length-1].frame}getButterflyAtlasPlayKeyByNameAndState(s,o){return this.getAtlasKeyByName("butterfly_"+s)+"_"+o+"_"+this.componentId}getButterflyAnimationFramesByState(s,o){return s.filter(v=>v.frame.startsWith(o))}addButterflyAnimations(){if(!this.areButterflyAnimationsAdded){this.areButterflyAnimationsAdded=!0;const s=this.getAtlasKeyByName("butterfly_normal"),o=this.scene.anims.generateFrameNames(s),v=this.getButterflyAtlasPlayKeyByNameAndState("normal","idle_1"),S=this.getButterflyAnimationFramesByState(o,"idle_1"),E=this.scene.anims.create({key:v,frames:S,repeat:-1}),R=this.getButterflyAtlasPlayKeyByNameAndState("normal","idle_2"),k=this.getButterflyAnimationFramesByState(o,"idle_2"),W=this.scene.anims.create({key:R,frames:k,repeat:1}),K=this.getButterflyAtlasPlayKeyByNameAndState("normal","transform"),q=this.getButterflyAnimationFramesByState(o,"transform"),$=this.scene.anims.create({key:K,frames:q}),ne=this.getButterflyAtlasPlayKeyByNameAndState("normal","Flying"),oe=this.getButterflyAnimationFramesByState(o,"Flying"),ce=this.scene.anims.create({key:ne,frames:oe,repeat:-1}),me=this.getAtlasKeyByName("butterfly_golden"),fe=this.scene.anims.generateFrameNames(me),xe=this.getButterflyAtlasPlayKeyByNameAndState("golden","idle_1"),ve=this.getButterflyAnimationFramesByState(fe,"idle_1"),We=this.scene.anims.create({key:xe,frames:ve,repeat:-1}),Ze=this.getButterflyAtlasPlayKeyByNameAndState("golden","idle_2"),ke=this.getButterflyAnimationFramesByState(fe,"idle_2"),ut=this.scene.anims.create({key:Ze,frames:ke,repeat:1}),De=this.getButterflyAtlasPlayKeyByNameAndState("golden","transform"),Tt=this.getButterflyAnimationFramesByState(fe,"transform"),xt=this.scene.anims.create({key:De,frames:Tt}),Pt=this.getButterflyAtlasPlayKeyByNameAndState("golden","Flying"),ot=this.getButterflyAnimationFramesByState(fe,"Flying"),Ot=this.scene.anims.create({key:Pt,frames:ot,repeat:-1}),ze=this.getAtlasKeyByName("butterfly_legendary"),qe=this.scene.anims.generateFrameNames(ze),dt=this.getButterflyAtlasPlayKeyByNameAndState("legendary","idle_1"),Je=this.getButterflyAnimationFramesByState(qe,"idle_1"),Vt=this.scene.anims.create({key:dt,frames:Je,repeat:-1}),_t=this.getButterflyAtlasPlayKeyByNameAndState("legendary","idle_2"),Lt=this.getButterflyAnimationFramesByState(qe,"idle_2"),ii=this.scene.anims.create({key:_t,frames:Lt,repeat:1}),yt=this.getButterflyAtlasPlayKeyByNameAndState("legendary","transform"),at=this.getButterflyAnimationFramesByState(qe,"transform"),gt=this.scene.anims.create({key:yt,frames:at}),In=this.getButterflyAtlasPlayKeyByNameAndState("legendary","Flying"),Or=this.getButterflyAnimationFramesByState(qe,"Flying"),er=this.scene.anims.create({key:In,frames:Or,repeat:-1})}}getTimeIconTextureKey(){return this.selectedImages.timeIcon[0].key}getSnowGlobeFrontTextureKey(){return this.selectedImages.snowGlobeFront[0].key}getSnowGlobeGlassTextureKey(){return this.selectedImages.snowGlobeGlass[0].key}getBitmapFontKey(){return this.selectedBitmapFonts.font[0].key}getRectangleTextureKey(){return this.selectedImages.rectangle[0].key}getHalfCircleTextureKey(){return this.selectedImages.halfCircle[0].key}getArrowTextureKey(){return this.selectedImages.arrow[0].key}getGemTextureKey(){return this.selectedImages.gem[0].key}getCounterBackgroundTextureKey(){return this.selectedImages.counterBackground[0].key}getHintBackgroundTextureKey(){return this.selectedImages.hintBackground[0].key}getCancelButtonTextureKey(){return this.selectedImages.cancel[0].key}}class et extends Ae{constructor(s){super(s),super.update(s),this.depthNames={container:"container",cancel:"cancel"},this.freeHammerHintCount=-1,this.isTutorialEnd=!1,this.drawReferenceRectangle=!1}load(){super.load(),super.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.onReady()}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),super.render();const s=this.getPositionYHelperCallback(),o=this.renderContainer(),v=this.renderHammerBackground(o),S=this.renderHammer(o),E=this.renderGemImage(o,v,S);this.renderHammerText(o,v,S,E);const R={x:this.getContainerX(),y:s+v.displayHeight*.5};(o.x!==R.x||o.y!==R.y)&&o.setPosition(R.x,R.y),this.renderCancel(),this.renderInputContainer(R.x,R.y),this.getFreeHammerHintCount()>0&&this.renderFreeHammerHintCountImageAndText(o,v)}getFreeHammerHintCountText(){return this.gameObjectsMap.get("freeHammerHintCountText")}getFreeHammerHintCountImage(){return this.gameObjectsMap.get("freeHammerHintCountImage")}renderFreeHammerHintCountImageAndText(s,o){const v={x:o.displayWidth*.35,y:-o.displayHeight*.35};let S=this.getFreeHammerHintCountImage();_.isNil(S)?(S=this.scene.add.image(v.x,v.y,this.getWhiteButtonTextureKeyCallback(),"__BASE").setTint(15554635),s.add(S),this.gameObjectsMap.set("freeHammerHintCountImage",S)):(S.x!==v.x||S.y!==v.y)&&S.setPosition(v.x,v.y);const E=o.displayHeight*.4/S.height;S.scale!==E&&S.setScale(E);let R=this.getFreeHammerHintCountText();_.isNil(R)?(R=this.scene.add.bitmapText(v.x,v.y,this.getBitmapFontKeyCallback(),this.getFreeHammerHintCount()).setOrigin(.5,.6),s.add(R),this.gameObjectsMap.set("freeHammerHintCountText",R)):(R.x!==v.x||R.y!==v.y)&&R.setPosition(v.x,v.y);const k=S.displayHeight*.6;R.fontSize!==k&&R.setFontSize(k);const W=this.getFreeHammerHintCount()>0;S.visible!==W&&(S.setVisible(W),R.setVisible(W))}getFreeHammerHintCount(){return this.freeHammerHintCount}setFreeHammerHintCount(s){this.freeHammerHintCount=s}decreaseFreeHammerHintCount(){this.freeHammerHintCount--}getContainerX(){return this.CenterAbsoluteX}playUnpressTween(){const s=this.gameObjectsMap.get("container");if(s.scale===1)return;let o=this.gameObjectsMap.get("unpressTween");_.isNil(o)?(o=this.scene.tweens.add({targets:s,duration:50,onComplete:()=>{s.scale!==1&&s.setScale(1)},scale:1}),this.gameObjectsMap.set("unpressTween",o)):o.restart()}playPressTween(){const s=this.gameObjectsMap.get("container");let o=this.gameObjectsMap.get("pressTween");_.isNil(o)?(o=this.scene.tweens.add({targets:s,duration:50,onStart:()=>{s.scale!==1&&s.setScale(1)},scale:s.scale*.9}),this.gameObjectsMap.set("pressTween",o)):o.restart()}getCancelImage(){return this.gameObjectsMap.get("cancelImage")}getCancelPosition(){const s=this.gameObjectsMap.get("container");return this.shouldHammerHintTutorialDisplayCallback()?this.getCancelImageTutorialPositionHelperCallback():{x:s.x,y:s.y}}renderCancel(){const s=this.getCancelPosition();let o=this.getCancelImage();_.isNil(o)&&(o=this.scene.add.image(s.x,s.y,this.selectedImages.cancel[0].key).setVisible(!1),o.setInteractive(new Phaser.Geom.Circle(o.width*.5,o.height*.5,o.width*.5),Phaser.Geom.Circle.Contains),o.on("pointerdown",()=>{o.once("pointerup",()=>{this.onCancelPointerupCallback()}),this.scene.input.once("pointerup",()=>{o.removeListener("pointerup")})}),this.gameObjectsMap.set("cancelImage",o));const v=this.getDepthByName(this.depthNames.cancel);o.depth!==v&&o.setDepth(v);const S=this.shouldHammerHintTutorialDisplayCallback()?Math.min(this.BaseWidth,this.scene.game.canvas.height)*.1/o.height:this.getBackgroundScale(o);if(o.scale!==S&&o.setScale(S),this.shouldHammerHintTutorialDisplayCallback()){const E=s.x-o.displayWidth*.5,R=s.y-o.displayHeight*.67;(o.x!==E||o.y!==R)&&o.setPosition(E,R)}else(s.x!==o.x||s.y!==o.y)&&o.setPosition(s.x,s.y)}setCancelVisibility(s){const o=this.gameObjectsMap.get("cancelImage");o.visible!==s&&o.setVisible(s)}getDepthByName(s){if(s===this.depthNames.container)return this.shouldHammerHintTutorialDisplayCallback()?29:0;if(s===this.depthNames.cancel)return this.shouldHammerHintTutorialDisplayCallback()?29:30}getGemCost(){return this.gemCost}renderHammerText(s,o,v,S){const E={x:-S.displayWidth*.2,y:v.displayHeight*.35};let R=this.gameObjectsMap.get("hammerText");if(_.isNil(R)){R=this.scene.add.bitmapText(E.x,E.y,this.getBitmapFontKeyCallback(),this.gemCost);const q={x:1-this.origin.x,y:1-this.origin.y};R.setOrigin(q.x,q.y),s.add(R),this.gameObjectsMap.set("hammerText",R)}else(R.x!==E.x||R.y!==E.y)&&R.setPosition(E.x,E.y);const k=parseInt("0x"+this.fontColor);R.tintTopLeft!==k&&(R.clearTint(),R.setTint(k));const W=this.fontSize*o.displayHeight;R.fontSize!==W&&R.setFontSize(W);const K=this.getFreeHammerHintCount()<1;R.visible!==K&&R.setVisible(K)}renderGemImage(s,o,v){const S={x:-v.displayWidth*.125,y:v.displayHeight*.45};let E=this.gameObjectsMap.get("gemImage");_.isNil(E)?(E=this.scene.add.image(S.x,S.y,this.getGemImageTextureKeyCallback()).setOrigin(1,0),E.setAngle(this.gemImageAngle),s.add(E),this.gameObjectsMap.set("gemImage",E)):(E.x!==S.x||E.y!==S.y)&&E.setPosition(S.x,S.y);const R=.5*(o.y+o.displayHeight*.5-(v.y+v.displayHeight))/E.height;E.scale!==R&&E.setScale(R);const k=this.getFreeHammerHintCount()<1;return console.log("visibility",this.getFreeHammerHintCount()<1),E.visible!==k&&E.setVisible(k),E}getHammerPosition(){const s=this.getHammerBackground();return this.getFreeHammerHintCount()>0?{x:0,y:-s.displayHeight*.25}:{x:0,y:-s.displayHeight*.4}}getHammerScale(){const s=this.getHammerBackground(),o=this.getHammer();return this.getFreeHammerHintCount()>0?.5*s.displayHeight/o.height:.45*s.displayHeight/o.height}getHammer(){return this.gameObjectsMap.get("hammer")}renderHammer(s){const o=this.getHammerPosition();let v=this.getHammer();_.isNil(v)?(v=this.scene.add.image(o.x,o.y,this.selectedImages.hammer[0].key).setOrigin(.5,0),s.add(v),this.gameObjectsMap.set("hammer",v)):(v.x!==o.x||v.y!==o.y)&&v.setPosition(o.x,o.y);const S=this.getHammerScale();return v.scale!==S&&v.setScale(S),v}getHammerBackground(){return this.gameObjectsMap.get("hammerBackground")}renderHammerBackground(s){let o=this.gameObjectsMap.get("hammerBackground");_.isNil(o)&&(o=this.scene.add.image(0,0,this.getBackgroundTextureKeyCallback()),s.add(o),this.gameObjectsMap.set("hammerBackground",o));const v=this.getBackgroundScale(o);return o.scale!==v&&o.setScale(v),o}getBackgroundScale(s){return this.getBackgroundHeightCallback()/s.height}getContainer(){return this.gameObjectsMap.get("container")}renderContainer(){let s=this.gameObjectsMap.get("container");_.isNil(s)&&(s=this.scene.add.container(0,0),this.gameObjectsMap.set("container",s));const o=this.getDepthByName(this.depthNames.container);s.depth!==o&&s.setDepth(o);const v=this.isVisible&&this.isEnabled;return s.setVisible(v),s}getInputContainer(){return this.gameObjectsMap.get("inputContainer")}renderInputContainer(s,o){const v=this.getBackgroundHeightCallback()*.5;let S=this.gameObjectsMap.get("inputContainer");_.isNil(S)?(S=this.scene.add.container(s,o),S.setInteractive(new Phaser.Geom.Circle(0,0,v),Phaser.Geom.Circle.Contains),S.on("pointerdown",()=>{this.onHammerPointerdownCallback()}),this.gameObjectsMap.set("inputContainer",S)):((S.x!==s||S.y!==o)&&S.setPosition(s,o),S.input.hitArea.radius!==v&&(S.input.hitArea=new Phaser.Geom.Circle(0,0,v)));const E=this.getDepthByName(this.depthNames.container);S.depth!==E&&S.setDepth(E);const R=this.isVisible&&this.isEnabled;S.setVisible(R)}disappearHammer(s){const o=this.getContainer(),v=this.getHammerBackground();this.scene.tweens.add({targets:o,duration:s,x:-v.displayWidth,onComplete:()=>{this.isVisible=!1,this.render()}})}appearHammer(s){const o=this.getContainer(),v=this.getHammerBackground();this.scene.tweens.add({targets:o,duration:s,x:this.getContainerX(),onStart:()=>{this.isVisible=!0,this.render(),o.setX(-v.displayWidth)}})}}function Xe(I){const s=Math.floor(I/60).toString().padStart(2,"0"),o=(I%60).toString().padStart(2,"0");return s+":"+o}class nt extends Ae{constructor(s){super(s),this.threeSliceFrameNames=["left","center","right"],this.countdownTimerEvent=null,this.countdownTimeInSeconds=s.countdownTimeInSeconds>=0?s.countdownTimeInSeconds:-1,this.currentPrize=s.currentPrize||-1,this.isPrizeAvailable=s.isPrizeAvailable||0,this.giftBoxType=s.giftBoxType||"E",this.isPressTweenPlaying=!1,this.giftBoxSprite=null,this.giftBoxPrizeAvailableSizeMultiplier=1.5,this.areGemsAdded=!1,this.bigGem=null,this.smallGems=[],this.prizeText=null,this.giftBoxOpenText=null,this.drawReferenceRectangle=!1}load(){super.load(),this.onReady()}render(){super.render(),this.drawReferenceRectangle&&this.renderReferenceRectangle();const s=this.renderContainer(),o=this.renderBackground(s),v=this.getContainerPosition();(s.x!==v.x||s.y!==v.y)&&s.setPosition(v.x,v.y),this.renderGiftBox(s),this.renderSnowGlobeGlass(s);const S=this.renderSnowGlobeFront(s,o.displayWidth,o.displayHeight);this.renderTimerBackground(s,S);const E=this.renderTimeIcon(s,S);this.renderTimerText(s,o.displayHeight,E,S),this.renderClaimButton(s,S),this.renderClaimButtonText(s,S),this.renderInputContainer(s.x,s.y),this.renderGiftBoxBottomImage(),this.renderGiftBoxLidImage()}getContainerPosition(){return(this.countdownTimeInSeconds>=0||this.isPrizeAvailable)&&this.isVisible?this.getVisiblePosition():this.getInvisiblePosition()}getGiftBoxLidImage(){return this.gameObjectsMap.get("giftBoxLidImage")}renderGiftBoxLidImage(){if(this.giftBoxType==="E")return;const s=this.getGiftBoxesTextureKeyCallback(),o=this.getGiftBoxesFrameNameCallback("lid",this.giftBoxType);let v=this.gameObjectsMap.get("giftBoxLidImage");if(_.isNil(v)?(v=this.scene.add.image(this.scene.game.canvas.width*.25,this.scene.game.canvas.height*.25,s,o).setOrigin(.5,1).setDepth(this.getGiftBoxLidDepth()).setAlpha(0),this.gameObjectsMap.set("giftBoxLidImage",v)):o!==v.frame.name&&v.setFrame(o,!0,!1),v.visible){const E=this.getGiftBoxLidVisibleWidth()/v.width;v.scale!==E&&v.setScale(E);let R;v.angle!==0?R=this.getGiftBoxLidOpenPosition():R=this.getGiftBoxLidVisiblePosition(),(v.x!==R.x||v.y!==R.y)&&v.setPosition(R.x,R.y)}}getGiftBoxBottomImage(){return this.gameObjectsMap.get("giftBoxBottomImage")}renderGiftBoxBottomImage(){if(this.giftBoxType==="E")return;const s=this.getGiftBoxesTextureKeyCallback(),o=this.getGiftBoxesFrameNameCallback("bottom",this.giftBoxType);let v=this.gameObjectsMap.get("giftBoxBottomImage");if(_.isNil(v)?(v=this.scene.add.image(this.scene.game.canvas.width*.25,this.scene.game.canvas.height*.35,s,o).setOrigin(.5,1).setDepth(this.getGiftBoxBottomDepth()).setAlpha(0),this.gameObjectsMap.set("giftBoxBottomImage",v)):o!==v.frame.name&&v.setFrame(o,!0,!1),v.visible){const E=this.getGiftBoxBottomVisibleWidth()/v.width;v.scale!==E&&v.setScale(E);const R=this.getGiftBoxBottomVisiblePosition();(v.x!==R.x||v.y!==R.y)&&v.setPosition(R.x,R.y)}}getGiftBoxLidDepth(){return 11}getGiftBoxBottomDepth(){return 9}getGiftBoxBottomInitialWidth(){return this.getGiftBoxSize()}getGiftBoxLidInitialWidth(){return 1.1*this.getGiftBoxSize()}getGiftBoxLidVisibleWidth(){return 2.2*this.getGiftBoxSize()}getGiftBoxBottomVisibleWidth(){return 2*this.getGiftBoxSize()}getGiftBoxBottomVisiblePosition(){return{x:this.scene.game.canvas.width*.5,y:this.scene.game.canvas.height*.7}}getGiftBoxLidVisiblePosition(){const s=this.getGiftBoxLidImage(),o=this.getGiftBoxBottomImage();return{x:o.x-s.displayWidth*.025,y:o.y-o.displayHeight*.6}}getGiftBoxLidOpenPosition(){const s=this.getGiftBoxBottomImage(),o=this.getGiftBoxLidVisiblePosition();return{x:o.x-s.displayWidth*.3,y:o.y+s.displayHeight*.1}}renderClaimButtonText(s,o){if(this.giftBoxType==="E"||this.countdownTimeInSeconds>0)return;let v=this.getCaptionByKeyCallback("ClaimText");this.isCurrentLanguageRightToLeftCallback()&&(v=Array.from(v).reverse().join(""));let S=this.gameObjectsMap.get("claimButtonText");_.isNil(S)?(S=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),v),s.addAt(S,12),this.gameObjectsMap.set("claimButtonText",S)):S.text!==v&&S.setText(v);const E=this.getTextOriginYCallback();S.originY!==E&&S.setOrigin(.5,E);const R=Math.min(o.displayHeight*.5,S.fontSize*o.displayWidth*.65/S.width);S.fontSize!==R&&S.setFontSize(R);const k=o.y+o.displayHeight*.15;S.y!==k&&S.setY(k)}renderClaimButton(s,o){this.giftBoxType!=="E"&&(this.countdownTimeInSeconds>0||this.threeSliceFrameNames.forEach((v,S)=>{const E=this.getClaimButtonFrameObjectName(v);let R=this.gameObjectsMap.get(E);_.isNil(R)&&(R=this.scene.add.image(0,0,this.getClaimButtonTextureKeyCallback(),v),R.setTint(6533686),s.addAt(R,9+S),this.gameObjectsMap.set(E,R));const k=o.displayHeight*.55/R.height;R.scale!==k&&R.setScale(k);let W;if(v==="left")W=-o.displayWidth*.4+R.displayWidth*.5;else if(v==="center"){const q=this.gameObjectsMap.get(this.getClaimButtonFrameObjectName("left")),$=o.displayWidth*.8-2*q.displayWidth;R.displayWidth!==$&&(R.displayWidth=$),W=q.x+q.displayWidth*.5+R.displayWidth*.5}else if(v==="right"){const q=this.gameObjectsMap.get(this.getClaimButtonFrameObjectName("left")),$=this.gameObjectsMap.get(this.getClaimButtonFrameObjectName("center"));W=q.x+q.displayWidth*.5+$.displayWidth+R.displayWidth*.5}const K=o.y+R.displayHeight*.3;(R.x!==W||R.y!==K)&&R.setPosition(W,K)}))}getClaimButtonFrameObjectName(s){return"claimButtonFrameObject_"+s}renderTimeIcon(s,o){if(this.giftBoxType==="E")return;let v=this.gameObjectsMap.get("timeIcon");_.isNil(v)&&(v=this.scene.add.image(0,0,this.getTimeIconTextureKeyCallback()),s.addAt(v,7),this.gameObjectsMap.set("timeIcon",v));const S=o.displayHeight*.6/v.height;v.scale!==S&&v.setScale(S);const E={x:-o.displayWidth*.41+v.displayWidth*.5,y:o.y+v.displayHeight*.23};return(v.x!==E.x||v.y!==E.y)&&v.setPosition(E.x,E.y),v}getTimerBackgroundFrameObjectName(s){return"timerBackgroundFrameObject_"+s}renderTimerBackground(s,o){this.giftBoxType!=="E"&&this.threeSliceFrameNames.forEach((v,S)=>{const E=this.getTimerBackgroundFrameObjectName(v);let R=this.gameObjectsMap.get(E);_.isNil(R)&&(R=this.scene.add.image(0,0,this.getTimerBackgroundTextureKeyCallback(),v),s.addAt(R,4+S),this.gameObjectsMap.set(E,R));const k=o.displayHeight*.55/R.height;R.scale!==k&&R.setScale(k);let W;if(v==="left")W=-o.displayWidth*.4+R.displayWidth*.5;else if(v==="center"){const q=this.gameObjectsMap.get(this.getTimerBackgroundFrameObjectName("left")),$=o.displayWidth*.8-2*q.displayWidth;R.displayWidth!==$&&(R.displayWidth=$),W=q.x+q.displayWidth*.5+R.displayWidth*.5}else if(v==="right"){const q=this.gameObjectsMap.get(this.getTimerBackgroundFrameObjectName("left")),$=this.gameObjectsMap.get(this.getTimerBackgroundFrameObjectName("center"));W=q.x+q.displayWidth*.5+$.displayWidth+R.displayWidth*.5}const K=o.y+R.displayHeight*.25;(R.x!==W||R.y!==K)&&R.setPosition(W,K)})}renderSnowGlobeFront(s,o,v){if(this.giftBoxType==="E")return;let S=this.gameObjectsMap.get("snowGlobeFront");_.isNil(S)&&(S=this.scene.add.image(0,0,this.getSnowGlobeFrontTextureKeyCallback()),s.addAt(S,3),this.gameObjectsMap.set("snowGlobeFront",S));const E=1.15*o/S.width;S.scale!==E&&S.setScale(E);const R=v*.5-S.displayHeight*.5;return S.y!==R&&S.setY(R),S}renderSnowGlobeGlass(s){if(this.giftBoxType==="E")return;let o=this.gameObjectsMap.get("snowGlobeGlass");_.isNil(o)&&(o=this.scene.add.image(0,0,this.getSnowGlobeGlassTextureKeyCallback()),this.countdownTimeInSeconds>0?o.setData("maskRatio",1):o.setData("maskRatio",0),s.addAt(o,2),this.gameObjectsMap.set("snowGlobeGlass",o));const v=this.getBackgroundScale(o);o.scale!==v&&o.setScale(v),this.applyMaskToSnowGlobeGlass()}renderGiftBox(s){if(!s.visible||this.giftBoxType==="E"||this.countdownTimeInSeconds===-1)return;if(_.isNil(this.giftBoxSprite)){console.log("gift box type",this.giftBoxType);let S,E;if(this.giftBoxType==="B")S=this.getButterflyAtlasKeyByNameCallback("butterfly_normal"),E=this.getLastFrameOfButterflyAtlasByNameAndStateCallback("butterfly_normal","transform");else if(this.giftBoxType==="G")S=this.getButterflyAtlasKeyByNameCallback("butterfly_golden"),E=this.getLastFrameOfButterflyAtlasByNameAndStateCallback("butterfly_golden","transform");else if(this.giftBoxType==="L")S=this.getButterflyAtlasKeyByNameCallback("butterfly_legendary"),E=this.getLastFrameOfButterflyAtlasByNameAndStateCallback("butterfly_legendary","transform");else throw{message:"provide a valid gift box type",giftBoxType:this.giftBoxType};this.giftBoxSprite=this.scene.add.sprite(0,0,S,E);const R=this.getGiftBoxSize()*(this.isPrizeAvailable?this.giftBoxPrizeAvailableSizeMultiplier:1);this.giftBoxSprite.displayHeight!==R&&(this.giftBoxSprite.displayHeight=R,this.giftBoxSprite.displayWidth=R),this.isPrizeAvailable&&this.countdownTimeInSeconds===0&&this.playGiftBoxAvailableTween(),s.addAt(this.giftBoxSprite,1)}const o=this.getGiftBoxInsideContainerPosition();(this.giftBoxSprite.x!==o.x||this.giftBoxSprite.y!==o.y)&&this.giftBoxSprite.setPosition(o.x,o.y),console.log("this.isPrizeAvailable",this.isPrizeAvailable);const v=this.getGiftBoxSize()*(this.isPrizeAvailable?this.giftBoxPrizeAvailableSizeMultiplier:1);this.giftBoxSprite.displayHeight!==v&&(this.giftBoxSprite.displayHeight=v,this.giftBoxSprite.displayWidth=v)}getGiftBoxSize(){return this.gameObjectsMap.get("background").displayHeight*1}getInvisiblePosition(){const s=this.getPositionYHelperCallback(),o=this.gameObjectsMap.get("background");return{x:-o.displayWidth*1.5,y:s-o.displayHeight*.3}}getGiftBoxInsideContainerPosition(){return{x:-this.gameObjectsMap.get("background").displayWidth*.05,y:0}}getGiftBoxDestinationPosition(){const s=this.getPositionYHelperCallback(),o=this.gameObjectsMap.get("background");return{x:this.CenterAbsoluteX-o.displayWidth*.05,y:s-o.displayHeight*.3}}getVisiblePosition(){const s=this.getPositionYHelperCallback(),o=this.gameObjectsMap.get("background");return{x:this.CenterAbsoluteX,y:s-o.displayHeight*.3}}playDisappearTween(){const s=this.gameObjectsMap.get("container");this.scene.tweens.add({duration:200,targets:[s],x:-this.scene.game.canvas.width*1.5,onComplete:()=>{const o=this.getInputContainer();s.visible!==!1&&(s.setVisible(!1),o.setVisible(!1));const v=this.getInvisiblePosition();(s.x!==v.x||s.y!==v.y)&&s.setPosition(v.x,v.y),this.scene.tweens.killTweensOf(this.giftBoxSprite),s.removeAt(1,!0),this.giftBoxSprite=null,this.renderInputContainer(v.x,v.y)}})}applyMaskToSnowGlobeGlass(){const s=this.gameObjectsMap.get("container"),o=this.getSnowGlobeGlass();if(_.isNil(o))return;let v=this.gameObjectsMap.get("snowGlobeGlassMaskShape");if(_.isNil(v)){v=this.scene.make.graphics();const W=v.createGeometryMask(v);o.setMask(W),this.gameObjectsMap.set("snowGlobeGlassMaskShape",v)}else v.clear();const S=o.displayWidth,E=o.displayHeight*o.getData("maskRatio"),R=s.x-o.displayWidth*.5,k=s.y+o.displayHeight*.5-E;v.fillRect(R,k,S,E)}playGiftBoxAvailableTween(){this.scene.tweens.add({duration:1e3,targets:this.giftBoxSprite,y:`-=${this.giftBoxSprite.displayHeight*.1}`,yoyo:!0,repeat:-1,onRepeat:s=>{s.updateTo("y",this.giftBoxSprite.y-this.giftBoxSprite.displayHeight*.1)}})}playSnowGlobeDisappearTween(){const s=this.getSnowGlobeGlass(),o=this.getClaimButtonFrameObjects(),v=this.getClaimButtonText(),S=[];o.forEach(W=>{S.push({x:W.x,displayWidth:W.displayWidth,displayHeight:W.displayHeight}),W.setAlpha(0)}),v.setAlpha(0);const E=v.fontSize,R=this.getGiftBoxSize();this.scene.tweens.addCounter({from:1,to:0,duration:1e3,onUpdate:W=>{const K=W.getValue();s.setData("maskRatio",K),this.applyMaskToSnowGlobeGlass();const q=R+R*(1-K)*(this.giftBoxPrizeAvailableSizeMultiplier-1);this.giftBoxSprite.displayWidth=q,this.giftBoxSprite.displayHeight=q},onComplete:()=>{const W=this.getGiftBoxSize()*this.giftBoxPrizeAvailableSizeMultiplier;this.giftBoxSprite.displayWidth!==W&&(this.giftBoxSprite.displayWidth=W,this.giftBoxSprite.displayHeight=W),this.playGiftBoxAvailableTween(),this.isPrizeAvailable=1,this.setIsPrizeAvailableProgressCallback()}});const k=1.1;this.scene.tweens.add({duration:500,targets:[...o,v],alpha:1,x:(W,K,q,$)=>$!==3?S[$].x*k:W.x,displayWidth:(W,K,q,$)=>{if($!==3)return S[$].displayWidth*k},displayHeight:(W,K,q,$)=>{if($!==3)return S[$].displayHeight*k},fontSize:(W,K,q,$)=>{if($===3)return E*k},onComplete:()=>{this.scene.tweens.add({duration:500,targets:[...o,v],x:(W,K,q,$)=>$!==3?S[$].x:W.x,displayWidth:(W,K,q,$)=>{if($!==3)return S[$].displayWidth},displayHeight:(W,K,q,$)=>{if($!==3)return S[$].displayHeight},fontSize:(W,K,q,$)=>{if($===3)return E}})}})}playSnowGlobeAppearTween(){const s=this.getSnowGlobeGlass(),o=this.getSnowGlobeFront(),v=this.getTimeBackgroundFrameObjects(),S=this.getTimeIcon(),E=this.getTimerText();s.setData("maskRatio",0),this.applyMaskToSnowGlobeGlass(),o.setAlpha(0),v.forEach(R=>{R.setAlpha(0)}),S.setAlpha(0),E.setAlpha(0),this.scene.tweens.addCounter({from:0,to:1,duration:1e3,onUpdate:R=>{const k=R.getValue();s.setData("maskRatio",k),this.applyMaskToSnowGlobeGlass()}}),this.scene.tweens.add({targets:[o,...v,S,E],duration:250,alpha:1})}playAppearTween(){const s=this.gameObjectsMap.get("container"),o=this.getInputContainer();s.visible!==!0&&(s.setVisible(!0),o.setVisible(!0));const v=this.getSnowGlobeFront();!_.isNil(v)&&v.alpha!==0&&v.setAlpha(0),this.getTimeBackgroundFrameObjects().forEach(K=>{!_.isNil(K)&&K.alpha!==0&&K.setAlpha(0)});const E=this.getTimeIcon();!_.isNil(E)&&E.alpha!==0&&E.setAlpha(0);const R=this.getTimerText();!_.isNil(R)&&R.alpha!==0&&R.setAlpha(0),this.getClaimButtonFrameObjects().forEach(K=>{!_.isNil(K)&&K.alpha!==0&&K.setAlpha(0)});const W=this.getClaimButtonText();!_.isNil(W)&&W.alpha!==0&&W.setAlpha(0),this.scene.tweens.add({duration:200,targets:s,x:this.CenterAbsoluteX,onComplete:()=>{const K=this.getVisiblePosition();(s.x!==K.x||s.y!==K.y)&&s.setPosition(K.x,K.y),this.renderInputContainer(K.x,K.y)}})}renderTimerText(s,o,v,S){if(this.giftBoxType==="E"||this.countdownTimeInSeconds<0)return;let E=this.gameObjectsMap.get("timerText");_.isNil(E)&&(E=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),Xe(this.countdownTimeInSeconds)).setOrigin(.5),this.gameObjectsMap.set("timerText",E),this.countdownTimeInSeconds>0&&this.startCountdownTimerEvent(),s.addAt(E,8));const R=S.displayWidth*.75-v.displayWidth,k=o*.15;E.fontSize!==k&&E.setFontSize(k);const W={x:v.x+v.displayWidth*.5+R*.5,y:v.y};(E.x!==W.x||E.y!==W.y)&&E.setPosition(W.x,W.y)}setIsPrizeAvailable(s){this.isPrizeAvailable=s}getGiftBoxType(){return this.giftBoxType}setGiftBoxType(s){this.giftBoxType=s}setCountdownTimeInSeconds(s){this.countdownTimeInSeconds=s}setCurrentPrize(s){this.currentPrize=s}getCurrentPrize(){return this.currentPrize}getContainer(){return this.gameObjectsMap.get("container")}getInputContainer(){return this.gameObjectsMap.get("inputContainer")}getSnowGlobeFront(){return this.gameObjectsMap.get("snowGlobeFront")}getSnowGlobeGlass(){return this.gameObjectsMap.get("snowGlobeGlass")}getTimeBackgroundFrameObjects(){const s=[];return this.threeSliceFrameNames.forEach(o=>{s.push(this.gameObjectsMap.get(this.getTimerBackgroundFrameObjectName(o)))}),s}getTimeIcon(){return this.gameObjectsMap.get("timeIcon")}getTimerText(){return this.gameObjectsMap.get("timerText")}getClaimButtonFrameObjects(){const s=[];return this.threeSliceFrameNames.forEach(o=>{s.push(this.gameObjectsMap.get(this.getClaimButtonFrameObjectName(o)))}),s}getClaimButtonText(){return this.gameObjectsMap.get("claimButtonText")}startCountdownTimerEvent(){if(!_.isNil(this.countdownTimerEvent))return;const s=this.gameObjectsMap.get("timerText");s.setText(Xe(this.countdownTimeInSeconds)),this.countdownTimerEvent=this.scene.time.addEvent({delay:1e3,callback:()=>{if(this.countdownTimeInSeconds>0)this.countdownTimeInSeconds--,this.countdownTimerEventCallback(this.countdownTimeInSeconds),s.setText(Xe(this.countdownTimeInSeconds));else if(this.countdownTimeInSeconds===0){this.countdownTimerEvent.remove(!1),this.countdownTimerEvent=null;const o=this.getContainer(),v=this.getSnowGlobeFront();this.renderClaimButton(o,v),this.renderClaimButtonText(o,v),this.playSnowGlobeDisappearTween()}},callbackScope:this,loop:!0})}playPressTween(){if(this.isPressTweenPlaying)return;const s=this.gameObjectsMap.get("container");let o=this.gameObjectsMap.get("pressTween");_.isNil(o)?(o=this.scene.tweens.add({targets:s,duration:100,onStart:()=>{this.isPressTweenPlaying=!0},onComplete:()=>{s.scale!==1&&s.setScale(1),this.isPressTweenPlaying=!1},scale:.9,yoyo:!0}),this.gameObjectsMap.set("pressTween",o)):o.restart()}renderInputContainer(s,o){const v=Math.min(this.AbsoluteWidth,this.AbsoluteHeight)*_.get(this,`scale.${this.scene.getOrientation()}`)*.5;let S=this.gameObjectsMap.get("inputContainer");_.isNil(S)?(S=this.scene.add.container(s,o).setDepth(this.depth),S.setInteractive(new Phaser.Geom.Circle(0,0,v),Phaser.Geom.Circle.Contains),S.on("pointerdown",()=>{this.playPressTween(),S.once("pointerup",()=>{this.countdownTimeInSeconds===0&&this.isPrizeAvailable&&(this.playDisappearTween(),this.onButterflyTimerPointerupCallback())}),this.scene.input.once("pointerup",()=>{S.removeListener("pointerup")})}),this.gameObjectsMap.set("inputContainer",S)):((S.x!==s||S.y!==o)&&S.setPosition(s,o),S.input.hitArea.radius!==v&&(S.input.hitArea=new Phaser.Geom.Circle(0,0,v)))}getBackgroundScale(s){return Math.min(this.AbsoluteWidth,this.AbsoluteHeight)/s.width*_.get(this,`scale.${this.scene.getOrientation()}`)}getBackground(){return this.gameObjectsMap.get("background")}renderBackground(s){let o=this.gameObjectsMap.get("background");_.isNil(o)&&(o=this.scene.add.image(0,0,this.getBackgroundTextureKeyCallback()),s.addAt(o,0),this.gameObjectsMap.set("background",o));const v=this.getBackgroundScale(o);return o.scale!==v&&o.setScale(v),o}renderContainer(){let s=this.gameObjectsMap.get("container");return _.isNil(s)&&(s=this.scene.add.container(0,0).setDepth(this.depth),this.gameObjectsMap.set("container",s)),s}disappearButterflyTimer(s){const o=this.getContainer(),v=this.getBackground();this.getInputContainer().setVisible(!1),this.scene.tweens.add({targets:o,duration:s,x:-v.displayWidth,onComplete:()=>{o.setVisible(!1)}})}bringButterflyTimer(s){const o=this.getContainer(),v=this.getInputContainer(),S=this.getBackground(),E=this.getContainerPosition();this.scene.tweens.add({targets:o,duration:s,x:E.x,onUpdate:()=>{this.applyMaskToSnowGlobeGlass()},onStart:()=>{o.setX(-S.displayWidth),o.setVisible(!0)},onComplete:()=>{v.setVisible(!0)}})}}const Se={current_level:"current_level",current_gem_count:"current_gem_count",current_level_state_array:"current_level_state_array",current_other_words_state:"current_other_words_state",current_level_found_other_words:"current_level_found_other_words",is_butterfly_displayed_in_current_level:"is_butterfly_displayed_in_current_level",butterfly_remaining_time:"butterfly_remaining_time",butterfly_current_prize:"butterfly_current_prize",butterfly_is_prize_available:"butterfly_is_prize_available",gift_box_type:"gift_box_type",fortune_wheel_state:"fortune_wheel_state",language:"language",soundfx_enabled:"soundfx_enabled",music_enabled:"music_enabled",free_hint_count:"free_hint_count",free_hammer_hint_count:"free_hammer_hint_count"},Wt=I=>{var s=0,o,v;for(o=0;o<I.length;o++)s+=I[o];for(v=Math.random()*s,o=0;o<I.length;o++){if(v<I[o])return o;v-=I[o]}return-1},Ht=I=>{function s(v){return(v<10?"0":"")+Math.floor(v)}var o=I<0?"-":"";return I=Math.abs(I),o+s(I/3600|0)+":"+s(I%3600/60|0)+":"+s(I%60)},zt=new Audio("assets/sound/ui_slide.mp3"),wt={COIN:"1",LIGHTNING:"-100"},Mt={coin:wt.COIN,lightning:wt.LIGHTNING},Et={WheelSpinText:"WheelSpinText",WheelUntilText:"WheelUntilText",CloseText:"CloseText"};class Jt extends Ae{constructor(s){super(s),super.update(s),this.drawReferenceRectangle=!1,this.container=null,this.spinBg=null,this.spinContainer=null,this.sliceStroke=null,this.spinFrame=null,this.midTable=null,this.middlePin=null,this.middlePinTop=null,this.spinInnerButton=null,this.buttonText=null,this.buttonClapperImage=null,this.spinCountDebugText=null,this.spinCount=this.wheel_spincount,this.maxSpinCount=6,this.spinButtonBgFrames=[],this.spinButtonBgEnabledColor=4437038,this.spinButtonBgDisabledColor=10066329,this.spinButtonBgInactiveColor=4750554,this.spinCountActiveIndicators=[],this.fontColors=[],this.types=[],this.values=[],this.spinSliceItemContainers=[],this.spinFrameLamps=[],this.midFrameLamps=[],this.totalSlices=null,this.sliceAngleDeg=null,this.sliceAngleRad=null,this.coinTransformWeights={},this.lightningTransformWeights={},this.lightningSparks={},this.lightningLines={},this.buttonFrameImages={},this.lampAnimIdle=!0,this.lampAnimSpinning=!1,this.lampAnimInactive=!1,this.showHideAnim=!1,this.gemCounterContext=null,this.celebrationParticleContext=null,this.stringsManagerContext=null,this.mainMenuContext=null,this.buttonActive=!0,this.threeSliceFrameNames=["left","center","right"],this.buttonFrameEdgeMultiplier=30/64,this.buttonFrameCenterMultiplier=1-this.buttonFrameEdgeMultiplier*2,this.buttonFrameScale=1,this.buttonBgEdgeMultiplier=30/64,this.buttonBgCenterMultiplier=1-this.buttonBgEdgeMultiplier*2,this.sparkAnimDepth=1,this.lightningLineAnimDepth=1,this.glowTransitionAnimDepth=1,this.inGameOpenWheelObjects={container:null,button:null,spinCountContainer:null,spinCountText:null},this.openWheelButtonContainer=null,this.openWheelButton=null,this.openWheelButtonSpinCount=null,this.openWheelButtonSpinCountText=null,this.openWheelButtonSpinCountTextColor=15554635,this.closeWheelButton=null,this.wheelInactiveContainer=null,this.wheelInactiveLightLayer=null,this.wheelInactiveTimerText=null,this.wheelInactiveTimerInterval=null,this.progressState={},this.strings={}}load(){super.load(),this.loadTextures(),this.loadBitmapFonts(),this.loadAtlases(),this.loadSounds()}initOnComponentsReady(s,o,v,S,E){if(this.gemCounterContext=s,this.celebrationParticleContext=o,this.stringsManagerContext=v,this.mainMenuContext=E,this.progressManagerContext=S,!_.isNil(this.container))return;this.parseStrings(),this.createOpenWheelButtonContainer(),this.createInGameOpenWheelContainer();const R=this.parent.LeftAbsoluteX+this.parent.AbsoluteWidth/2,k=this.parent.TopAbsoluteY+this.parent.AbsoluteHeight/2;this.container=this.scene.add.container(R,k),this.container.setVisible(!1),this.container.setDepth(this.depth),this.spinBg=this.scene.add.image(0,0,this.selectedImages.spinBg[0].key),this.container.add(this.spinBg),this.spinBg.setInteractive(),this.spinBg.on("pointerdown",()=>{this.showHideAnim||this.container.visible&&(this.lampAnimSpinning||this.spinCount<1||this.spinWheel())}),this.spinContainer=this.scene.add.container(0,0),this.container.add(this.spinContainer),this.initWheelTheInitials(),this.fontColors=this.colors.split(","),this.coinTransformWeights=this.getTransformWeights(this.coinTransformParameters),this.lightningTransformWeights=this.getTransformWeights(this.ligthningConversionParameters),this.totalSlices=this.types.length,this.sliceAngleDeg=360/this.totalSlices,this.sliceAngleRad=Math.PI*2/this.totalSlices;for(let ce=0;ce<this.totalSlices;ce++){const{x:me,y:fe}=this.getRotatedPosition(ce),xe=this.types[ce],ve=this.values[ce],We=this.fontColors[ce],Ze=this.createSliceItem(me,fe,ce,We,xe,ve);this.spinSliceItemContainers.push(Ze),this.spinContainer.add(Ze)}this.sliceStroke=this.scene.add.image(0,0,this.selectedImages.sliceStroke[0].key),this.sliceStroke.setScale(1.88),this.sliceStroke.setAngle(22.5),this.spinContainer.add(this.sliceStroke),this.gemRevealAnim=this.scene.add.sprite(0,0,this.getGlowAtlasKey()).setDepth(this.depth+this.glowTransitionAnimDepth).setScale(3),this.container.add(this.gemRevealAnim),this.midTable=this.scene.add.image(0,0,this.selectedImages.midTable[0].key),this.container.add(this.midTable),this.middlePin=this.scene.add.image(0,-40,this.selectedImages.midPin[0].key),this.container.add(this.middlePin),this.middlePinTop=this.scene.add.image(0,-5,this.selectedImages.midTablePinTop[0].key),this.container.add(this.middlePinTop);const[W,K,q]=this.createWheelInactiveContainer();this.wheelInactiveContainer=W,this.wheelInactiveTimerText=K,this.wheelInactiveLightLayer=q,this.container.add(this.wheelInactiveContainer),this.spinFrame=this.scene.add.image(0,0,this.selectedImages.spinFrame[0].key),this.container.add(this.spinFrame),this.setContainerScale(),this.spinFrameLamps=this.getSpinFrameLamps();for(let ce=0;ce<this.spinFrameLamps.length;ce++)this.container.add(this.spinFrameLamps[ce]);this.midFrameLamps=this.getMidFrameLamps();for(let ce=0;ce<this.midFrameLamps.length;ce++)this.container.add(this.midFrameLamps[ce]);this.lightningSpark1Anim=this.scene.add.sprite(0,0,this.getSpark1AtlasKey()).setDepth(this.depth+this.sparkAnimDepth).setScale(3),this.container.add(this.lightningSpark1Anim),this.addSlicedFrames(this.selectedImages.buttonFrame[0].key,this.buttonFrameEdgeMultiplier,this.buttonFrameCenterMultiplier),this.addSlicedFrames(this.selectedImages.slicedButtonBg[0].key,this.buttonBgEdgeMultiplier,this.buttonBgCenterMultiplier);const{spinButtonContainer:$,spinInnerButtonContainer:ne}=this.createSpinButtonContainer();this.container.add($),this.spinInnerButtonContainer=ne,this.spinCount<1?this.setWheelInactive():this.idleFrameAnims();const oe=this.createSpinButtonCountIndicators();$.add(oe),this.scene.anims.create({key:"glow_transition",frames:this.scene.anims.generateFrameNames(this.getGlowAtlasKey()),showOnStart:!0,hideOnComplete:!0}),this.scene.anims.create({key:"lightning_spark1",frames:this.scene.anims.generateFrameNames(this.getSpark1AtlasKey()),showOnStart:!0,hideOnComplete:!0}),this.scene.anims.create({key:"lightning_spark2",frames:this.scene.anims.generateFrameNames(this.getSpark2AtlasKey()),showOnStart:!0,hideOnComplete:!0})}spinWheel(){const s=this.getWheelItemChanceWeights(this.wheel_percentages);this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.click[0].key);const o=()=>{this.consumeSpinCount(),this.updateSpinCountDebugText();const S=this.getCurrentItemsChanceWeights(this.types,this.values,s),[E,R]=this.pickRandomValue(this.types,S),k=this.getAngleByIndex(R),W=Math.random()*35-17,K=this.durationMax,$=360*2;this.lampAnimIdle=!1,this.lampAnimSpinning=!0,this.spinAnims();let ne=0,oe=0;const ce=$+k+W;this.setSpinButtonDisabled(),this.scene.tweens.add({targets:this.spinContainer,duration:K*1e3,ease:"Cubic.easeInOut",angle:ce,onUpdate:()=>{if(ne===0){ne=this.spinContainer.angle;return}oe+=Math.max(this.spinContainer.angle-ne,0),oe>30&&(oe=0,this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.wheelSpinClick[0].key)),ne=this.spinContainer.angle},onComplete:()=>it(this,null,function*(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.fortuneGoldenGemWon[0].key),this.celebrationParticleContext.trigger(),this.handleAfterSpin(R,E,W,()=>{if(this.spinCount>0){this.lampAnimIdle=!0,this.lampAnimSpinning=!1,this.idleFrameAnims(),this.setSpinButtonEnabled();return}this.setWheelInactive()})})})};let v=!1;if(this.scene.platformSetting.name==="famobi")if(this.buttonClapperImage.visible){this.onRewardedRequestCallback();const S=window.famobi.hasRewardedAd();console.log({hasRewardedAd:S}),S&&window.famobi.rewardedAd(E=>{console.log("rewarded ad end",E),E.rewardGranted&&o()})}else v=!0;else console.warn(this.scene.platformSetting.name," does not support rewarded ad feature"),v=!0;v&&(this.onFreeSpinCallback(),o())}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&this.isBitmapFontsLoadComplete&&this.isAtlasesLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isBitmapFontsLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isSoundLoadComplete=!1)}bitmapFontsLoadComplete(){super.bitmapFontsLoadComplete(),this.isTextureLoadComplete&&this.isBitmapFontsLoadComplete&&this.isAtlasesLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isBitmapFontsLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isSoundLoadComplete=!1)}atlasesLoadComplete(){super.atlasesLoadComplete(),this.isTextureLoadComplete&&this.isBitmapFontsLoadComplete&&this.isAtlasesLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isBitmapFontsLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isSoundLoadComplete=!1)}soundLoadComplete(){super.soundLoadComplete(),this.isTextureLoadComplete&&this.isBitmapFontsLoadComplete&&this.isAtlasesLoadComplete&&this.isSoundLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1,this.isBitmapFontsLoadComplete=!1,this.isAtlasesLoadComplete=!1,this.isSoundLoadComplete=!1)}updateStrings(){const s=this.getTextOriginYCallback();this.buttonActive?this.buttonText.setText(this.strings[Et.WheelSpinText]):this.buttonText.setText(this.strings[Et.CloseText]),this.buttonText.originY!==s&&this.buttonText.setOrigin(.5,s),this.untilText&&this.untilText.setText(this.strings[Et.WheelUntilText]),this.untilText.originY!==s&&this.untilText.setOrigin(.5,s),this.timerText&&this.timerText.setY(this.untilText.getTextBounds().global.y+this.untilText.getTextBounds().global.height+this.textGap*.75)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),super.render(),this.setContainerScale(),this.renderOpenWheelButton(),this.renderInGameOpenWheelButton(),this.renderCloseWheelButton(),this.parseStrings(),this.updateStrings(),this.updateButtonTextAndClapperImagePosition(),console.log("tick main wheel render",this.strings)}playSpinStandardOpeningSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.spinStandardOpening[0].key)}loadProgress(){const s=this.progressManagerContext.getValueByName({name:Se.fortune_wheel_state,returnType:ie.object});if(_.isNil(s))this.progressState={};else{const o=this.getCurrentDayMonthYear();_.isNil(s.year)||_.isNil(s.month)||_.isNil(s.day)||o.year>s.year||o.month>s.month||o.day>s.day?(this.progressManagerContext.setValueByName({name:Se.fortune_wheel_state,value:{}}),this.progressState={}):this.progressState=s}}parseStrings(){const s=this.isCurrentLanguageRightToLeftCallback(),o=Object.entries(Et).reduce((v,[,S])=>(v[S]=s?Array.from(this.stringsManagerContext.getCaptionByKey(S)).reverse().join(""):this.stringsManagerContext.getCaptionByKey(S),v),{});this.strings=o}getCurrentDayMonthYear(){const s=new Date,o=s.getDate(),v=s.getMonth()+1,S=s.getFullYear();return console.log({day:o,month:v,year:S}),{day:o,month:v,year:S}}saveProgress(){const s=this.getCurrentDayMonthYear(),o={spinCount:this.spinCount,types:this.types,values:this.values,spinAngle:this.spinContainer.angle,day:s.day,month:s.month,year:s.year};this.progressManagerContext.setValueByName({name:Se.fortune_wheel_state,value:JSON.stringify(o),expireDuration:te})}createWheelInactiveContainer(){const s=this.scene.add.container(0,0),o=this.scene.add.image(0,0,this.selectedImages.glassTable[0].key);s.add(o);const v=this.scene.add.image(0,0,this.selectedImages.glassTableLight[0].key);v.setAngle(12),s.add(v),s.setAlpha(0);const S=36,E=S*2;this.textGap=E;const R=this.strings[Et.WheelUntilText],k=this.scene.add.bitmapText(0,-(S/2+E/4),this.selectedBitmapFonts.font[0].key,R,S);k.setOrigin(.5),k.setMaxWidth(550),k.setCenterAlign(),this.untilText=k;const W=this.scene.add.bitmapText(0,this.untilText.getTextBounds().global.y+this.untilText.getTextBounds().global.height+E*.75,this.selectedBitmapFonts.font[0].key,"",S*1.2);return W.setOrigin(.5),this.timerText=W,s.add(k),s.add(W),[s,W,v]}startInactiveTimer(){const s=new Date;s.setHours(23,59,59,999),this.wheelInactiveTimerInterval=setInterval(()=>{const o=new Date,v=s.getTime()-o.getTime();if(v>=0){this.wheelInactiveTimerText.setText(Ht(v/1e3));return}this.progressManagerContext.removeByName(Se.fortune_wheel_state),this.progressState={},this.resetWheelObjects(),this.setWheelActive(),this.saveProgress(),clearInterval(this.wheelInactiveTimerInterval)},500)}fadeInWheelInactiveContainer(){this.startInactiveTimer(),this.scene.tweens.add({targets:this.wheelInactiveContainer,duration:1500,ease:"Cubic.easeInOut",alpha:1})}fadeOutWheelInactiveContainer(){this.scene.tweens.add({targets:this.wheelInactiveContainer,duration:500,ease:"Cubic.easeInOut",alpha:0})}wheelInactiveAnim(){const s=()=>it(this,null,function*(){yield this.playSpinFrameSingleLightInactiveAnim(),this.lampAnimInactive&&s()});s()}idleFrameAnims(){const o=()=>it(this,null,function*(){this.playSpinFrameSingleLightAnim(),yield this.playMidFrameSingleLightAnim(),yield this.playMidFrameSingleLightAnim(),yield this.playMidFrameAllLightAnim(),yield this.playMidFrameAllLightAnim(),yield this.playMidFrameAllLightAnim(),it(this,null,function*(){yield this.playSpinFrameDoubleLightAnim(),yield this.playSpinFrameDoubleLightAnim(),yield this.playSpinFrameDoubleLightAnim()}),yield this.playMidFrameDoubleLightAnim(),yield this.playMidFrameDoubleLightAnim(),yield this.playMidFrameDoubleLightAnim(),yield this.playMidFrameAllLightAnim(),yield this.playMidFrameAllLightAnim(),yield this.playMidFrameAllLightAnim(),setTimeout(()=>{this.lampAnimIdle&&o()},500)});o()}spinAnims(){const s=()=>it(this,null,function*(){it(this,null,function*(){yield this.playSpinFrameAllLightAnim(),yield this.playSpinFrameAllLightAnim(),yield this.playSpinFrameAllLightAnim()}),yield this.playMidFrameAllLightAnim(),yield this.playMidFrameAllLightAnim(),yield this.playMidFrameAllLightAnim(),this.lampAnimSpinning&&s()});s()}initWheelTheInitials(){this.loadProgress();const[s,o]=this.parseWheelData(this.prizeString);if(this.types=this.progressState.types||s,this.values=this.progressState.values||o,this.progressState.spinCount!==void 0?this.spinCount=this.progressState.spinCount:this.spinCount=this.wheel_spincount,this.progressState.spinAngle!==void 0?this.spinContainer.setAngle(this.progressState.spinAngle):this.spinContainer.setAngle(0),this.spinCount>this.maxSpinCount){const v=this.createSpinCountDebugText();this.container.add(v),this.updateSpinCountDebugText()}}resetWheelObjects(){this.initWheelTheInitials();for(let S=0;S<this.spinSliceItemContainers.length;S++){const E=this.spinSliceItemContainers[S],R=this.types[S],k=this.values[S];if(console.log("slice",S,R,k),R===Number(wt.COIN)){const W=E.getData("gem");E.getData("text").setText(k),W.setAlpha(1)}}const s=this.maxSpinCount,o=this.spinCount>s?s:this.spinCount,v=s-o;for(let S=0;S<s;S++){const E=this.spinCountActiveIndicators[S];S>=v&&E.setAlpha(1)}this.openWheelButtonSpinCountText.setText(this.spinCount),this.inGameOpenWheelObjects.spinCountText.setText(this.spinCount),_.isNil(this.spinCountDebugText)||this.spinCountDebugText.setAlpha(1)}setWheelInactive(){this.lampAnimIdle=!1,this.lampAnimSpinning=!1,this.setSpinButtonDisabled(),this.fadeInWheelInactiveContainer(),this.lampAnimInactive=!0,this.wheelInactiveAnim(),this.setSpinButtonInactive()}setWheelActive(){this.lampAnimIdle=!0,this.lampAnimSpinning=!1,this.lampAnimInactive=!1,this.fadeOutWheelInactiveContainer(),this.idleFrameAnims(),this.setSpinButtonEnabled()}createSpinButtonCountIndicators(){const s={x:0,y:0},o=1.6,v=this.scene.add.container(s.x,s.y);v.setScale(o);const S=this.maxSpinCount,E=-40,R=28,k=this.spinCount>S?S:this.spinCount,W=S-k;for(let K=0;K<S;K++){const q=this.scene.add.image(K*R,E,this.selectedImages.spinNumberPassive[0].key);v.add(q);const $=this.scene.add.image(K*R+.2,E,this.selectedImages.spinNumberActive[0].key);$.setScale(.65),$.setAlpha(0),v.add($),this.spinCountActiveIndicators.push($),K>=W&&$.setAlpha(1)}return v.setX(s.x-S*R*.65),v}consumeSpinCount(){const s=this.maxSpinCount-this.spinCount,o=this.spinCountActiveIndicators[s];s>-1&&s<this.maxSpinCount&&o.setAlpha(0),this.spinCount--,this.openWheelButtonSpinCountText.setText(this.spinCount),this.inGameOpenWheelObjects.spinCountText.setText(this.spinCount)}createSpinButtonContainer(){const s={x:0,y:480},o={x:1,y:1},v={x:1,y:26},S=this.scene.add.container(s.x,s.y),E=328,R=191,{frames:k}=this.render3SlicedFrames("buttonFrame",o,this.selectedImages.buttonFrame[0].key,E,R);k.forEach(xe=>{S.add(xe)});const W=378,K=130,q=this.scene.add.container(v.x,v.y),{frames:$}=this.render3SlicedFrames("buttonBackground",{x:1,y:1},this.selectedImages.slicedButtonBg[0].key,W,K,this.spinButtonBgEnabledColor);this.spinButtonBgFrames=$,$.forEach(xe=>{q.add(xe)}),S.add(q);const ne=this.scene.add.image(-W/2,-6,this.selectedImages.buttonShine[0].key);ne.setScale(2,.67),ne.setAlpha(0),q.add(ne);const oe=500;setInterval(()=>{this.lampAnimSpinning||this.spinCount<1||this.scene.tweens.add({targets:ne,duration:oe/2,ease:"Cubic.easeIn",alpha:.7,x:W/4,onStart:()=>{ne.setX(-W/2)},onComplete:()=>{this.scene.tweens.add({targets:ne,duration:oe/2,ease:"Cubic.easeOut",alpha:0,x:W/2.5})}})},5e3);const me=0,fe=-6;if(this.buttonText||(this.buttonText=this.scene.add.bitmapText(0,fe,this.selectedBitmapFonts.font[0].key,this.strings[Et.WheelSpinText],52),this.buttonText.setOrigin(.5)),q.add(this.buttonText),!this.buttonClapperImage){this.buttonClapperImage=this.scene.add.image(me,fe,this.getClapperTextureKeyCallback()),console.log("clapper pos",this.buttonClapperImage.x,this.buttonClapperImage.y);const xe=this.spinButtonBgFrames[0].height*.3/this.buttonClapperImage.height;this.buttonClapperImage.scale!==xe&&this.buttonClapperImage.setScale(xe),q.add(this.buttonClapperImage)}this.updateButtonTextAndClapperImagePosition(q);for(let xe=0;xe<$.length;xe++){const ve=$[xe];ve.setInteractive(),ve.on("pointerdown",()=>{if(!this.showHideAnim)if(this.spinCount<1&&this.container.visible&&!this.lampAnimSpinning)this.onWheelCloseCallback(),this.hideWheel(),this.isGameStateInGameCallback()?this.mainMenuContext.showIngameFortuneWheelButton():this.mainMenuContext.showObjects();else{if(!this.container.visible||this.lampAnimSpinning||this.spinCount<1)return;this.spinWheel()}})}return{spinButtonContainer:S,spinInnerButtonContainer:q}}updateButtonTextAndClapperImagePosition(s=this.spinInnerButtonContainer){const o=this.getClapperVisibility();if(o){const v=this.buttonClapperImage.displayWidth*s.scale,S=this.buttonText.width*s.scale,E=v*.2,R=v+S+E;this.buttonClapperImage.setX(-R*.5+v*.5),this.buttonText.setX(-R*.5+v+E+S*.5)}else this.buttonText.setX(0);this.buttonClapperImage.setVisible(o)}createSpinCountDebugText(){return this.spinCountDebugText||(this.spinCountDebugText=this.scene.add.bitmapText(0,365,this.selectedBitmapFonts.font[0].key,"",32),this.spinCountDebugText.setOrigin(.5)),this.spinCountDebugText}updateSpinCountDebugText(){this.spinCountDebugText&&(this.spinCountDebugText.setText(`${this.spinCount} FREE SPIN`),this.spinCount<=6&&this.spinCountDebugText.setAlpha(0))}getClapperVisibility(){return this.spinCount>0&&this.spinCount<this.maxSpinCount}setSpinButtonEnabled(){for(let s=0;s<this.spinButtonBgFrames.length;s++)this.spinButtonBgFrames[s].setTint(this.spinButtonBgEnabledColor);this.buttonActive=!0,this.buttonText.setText(this.strings[Et.WheelSpinText]),this.updateButtonTextAndClapperImagePosition()}setSpinButtonDisabled(){for(let s=0;s<this.spinButtonBgFrames.length;s++)this.spinButtonBgFrames[s].setTint(this.spinButtonBgDisabledColor);this.buttonText.setText(this.strings[Et.WheelSpinText])}setSpinButtonInactive(){for(let s=0;s<this.spinButtonBgFrames.length;s++)this.spinButtonBgFrames[s].setTint(this.spinButtonBgInactiveColor);this.buttonActive=!1,this.buttonText.setText(this.strings[Et.CloseText]),this.updateButtonTextAndClapperImagePosition()}updateGemCount(s){this.gemCounterContext.addToCurrentCount(s),this.progressManagerContext.setValueByName({name:Se.current_gem_count,value:this.gemCounterContext.getCurrentCount()})}setContainerScale(){const s=this.getShortEdge()/this.spinBg.width;this.container.setScale(s);const o=this.wheelPosition[this.scene.getOrientation()];this.container.setPosition(this.LeftAbsoluteX+this.AbsoluteWidth*o.x,this.TopAbsoluteY+this.AbsoluteHeight*o.y)}getRotatedPosition(s){const o=Math.sin(s*this.sliceAngleRad),v=Math.cos(s*this.sliceAngleRad);return{x:o,y:v}}getRotatedPositionByDeg(s){const o=Math.sin(Math.PI/180*s),v=Math.cos(Math.PI/180*s);return{x:o,y:v}}getShortEdge(){const s=this.getCalculatedAbsoluteWidth();return Math.min(s,this.AbsoluteHeight)}getCalculatedAbsoluteWidth(){let s=this.AbsoluteHeight*.5622188905547226;return s>this.AbsoluteWidth&&(s=this.AbsoluteWidth),s}parseWheelData(s){const o=[],v=[],S=s.split("|");for(let E=0;E<S.length;E++){const R=S[E].split(",");o.push(Number(R[0])),v.push(Number(R[1]))}return[o,v]}getWheelItemChanceWeights(s){return s.split("|").reduce((o,v)=>{const[S,E]=v.split(",");return o[S]=Number(E),o},{})}findNearestWeight(s,o){const v=Object.keys(o);let S=v[0];for(let E=0;E<v.length;E++){const R=v[E],k=Math.abs(s-R),W=Math.abs(s-S);S=k<W?R:S}return o[S]}getCurrentItemsChanceWeights(s,o,v){const S=[];for(let E=0;E<s.length;E++){if(s[E]===Number(wt.COIN)){const R=this.findNearestWeight(o[E],v);S.push(R);continue}S.push(v[s[E].toString()])}return S}getTransformWeights(s){return s.split("|").reduce((o,v)=>{const[S,E]=v.split(",");return o[E]=Number(S),o},{})}pickRandomValue(s,o){const v=Wt(o);return[s[v],v]}createSliceItem(s,o,v,S,E,R){const k=this.getSliceItemContainer(s,o,v,parseInt(`0x${S}`));if(E===Number(wt.COIN)){const W=this.getSliceGemItem(s,o,v);k.add(W),k.setData("gem",W);const K=this.getSliceGemEffectItem(s,o,v),q=this.getSliceGemEffectItem(s,o,v),$=K.x,ne=K.y,oe=this.scene.tweens.add({targets:K,duration:3e3,ease:"Cubic.easeInOut",yoyo:!0,delay:1e3,alpha:.75,scale:.7+Math.random()*.25,repeat:-1,angle:K.angle+36,onRepeat:()=>{const fe=Math.random()*60-30,xe=Math.random()*60-30;K.setPosition($+fe,ne+xe)}}),ce=this.scene.tweens.add({targets:q,duration:3e3,ease:"Cubic.easeInOut",yoyo:!0,delay:1e3+Math.random()*2e3,alpha:.75,scale:.4+Math.random()*.25,repeat:-1,angle:K.angle+36,onRepeat:()=>{const fe=Math.random()*60-30,xe=Math.random()*60-30;q.setPosition($+fe,ne+xe)}});k.add(K),k.setData("gemEffectSliceItem",K),k.setData("gemEffectTween",oe),k.add(q),k.setData("gemEffectSliceItem2",q),k.setData("gemEffectTween2",ce);const me=this.getSliceText(s,o,v,R);return k.add(me),k.setData("text",me),k}if(E===Number(wt.LIGHTNING)){const W=this.getSliceLightningItem(s,o,v);return k.add(W),k}return k}getSliceItemContainer(s,o,v,S){const k=-s*150,W=-o*150,K=-v*this.sliceAngleDeg,q=this.scene.add.container(k,W),$=this.scene.add.image(0,0,this.selectedImages.spinSlice[0].key);return $.setTint(S),$.setAngle(K),q.add($),q.setData("rotatedXY",{x:s,y:o}),q}getSliceGemItem(s,o,v){const R=-s*75,k=-o*75,W=-v*this.sliceAngleDeg,K=this.scene.add.image(R,k,this.selectedImages.gemSliceItem[0].key);return K.setAngle(W),K.setScale(.65),K}getSliceGemEffectItem(s,o,v){const R=-s*75,k=-o*75,W=-v*this.sliceAngleDeg,K=this.scene.add.image(R,k,this.selectedImages.glowStarSliceItem[0].key);return K.setAngle(W),K.setAlpha(0),K.setScale(.35),K}getSliceLightningItem(s,o,v){const R=-s*60,k=-o*60,W=-v*this.sliceAngleDeg,K=this.scene.add.image(R,k,this.selectedImages.gemLightningSliceItem[0].key);return K.setAngle(W+155),K.setScale(.95),K}getSliceText(s,o,v,S){const k=-s*15,W=-o*15,K=-v*this.sliceAngleDeg,q=this.scene.add.bitmapText(k,W,this.selectedBitmapFonts.font[0].key,S,32);return q.setAngle(K),q.setOrigin(.5),q}getSpinFrameLamps(){const s=[],v=this.spinFrame.width/2-38,S=this.spinFrame.height/2-38;for(let E=0;E<this.totalSlices;E++){const R=Math.sin(E*this.sliceAngleRad),k=Math.cos(E*this.sliceAngleRad),W=-R*v,K=-k*S,q=this.scene.add.image(W,K,this.selectedImages.spinFrameLamp[0].key);q.setAlpha(0),q.setScale(.5),s.push(q)}return s}getMidFrameLamps(){const s=[],v=this.midTable.width/2-25,S=this.midTable.height/2-25;for(let E=1;E<this.totalSlices;E++){const R=Math.sin(E*this.sliceAngleRad),k=Math.cos(E*this.sliceAngleRad),W=-R*v,K=-k*S,q=this.scene.add.image(W,K,this.selectedImages.spinFrameLamp[0].key);q.setAlpha(0),q.setScale(.4),s.push(q)}return s}getAngleByIndex(s){const o=s*this.sliceAngleDeg,v=this.spinContainer.angle;let S=o<v?o+360:o;return v===S&&(console.log("selected angle --- 1",o,v,S),S+=360),console.log("selected angle",o,v,S),S}spinFrameDoubleLightAnim(s,o){return it(this,null,function*(){if(this.lampAnimIdle)return new Promise(v=>{s.setAlpha(1),o.setAlpha(1),setTimeout(()=>{s.setAlpha(0),o.setAlpha(0),v()},180)})})}playSpinFrameDoubleLightAnim(){return it(this,null,function*(){for(let s=0;s<this.spinFrameLamps.length/2;s++){const o=s,v=s+4;yield this.spinFrameDoubleLightAnim(this.spinFrameLamps[o],this.spinFrameLamps[v])}})}spinFrameSingleLightAnim(s,o=150){return it(this,null,function*(){if(this.lampAnimIdle)return new Promise(v=>{this.scene.tweens.add({targets:s,duration:o,ease:"Cubic.easeInOut",alpha:1,onComplete:()=>{this.scene.tweens.add({targets:s,duration:150,ease:"Cubic.easeInOut",alpha:0,onComplete:()=>{v()}})}})})})}playSpinFrameSingleLightAnim(s=150){return it(this,null,function*(){for(let o=0;o<this.spinFrameLamps.length;o++)yield this.spinFrameSingleLightAnim(this.spinFrameLamps[o],s)})}spinFrameSingleLightInactiveAnim(s){return it(this,null,function*(){if(this.lampAnimInactive)return new Promise(o=>{this.scene.tweens.add({targets:[s,this.wheelInactiveLightLayer],duration:500,ease:"Cubic.easeInOut",alpha:1,onComplete:()=>{this.scene.tweens.add({targets:[s,this.wheelInactiveLightLayer],duration:500,ease:"Cubic.easeInOut",alpha:0,onComplete:()=>{o()}})}})})})}playSpinFrameSingleLightInactiveAnim(){return it(this,null,function*(){for(let s=this.spinFrameLamps.length-1;s>-1;s--)this.wheelInactiveLightLayer.setAngle(this.wheelInactiveLightLayer.angle+this.sliceAngleDeg),yield this.spinFrameSingleLightInactiveAnim(this.spinFrameLamps[s])})}playSpinFrameAllLightAnim(){if(this.lampAnimSpinning)return new Promise(s=>{this.scene.tweens.add({targets:this.spinFrameLamps,duration:125,ease:"Cubic.easeInOut",alpha:1,onComplete:()=>{this.scene.tweens.add({targets:this.spinFrameLamps,duration:125,ease:"Cubic.easeInOut",alpha:0,onComplete:()=>{s()}})}})})}midFrameSingleLightAnim(s,o=75){return it(this,null,function*(){if(this.lampAnimIdle)return new Promise(v=>{this.scene.tweens.add({targets:s,duration:o,ease:"Cubic.easeInOut",alpha:1,onComplete:()=>{this.scene.tweens.add({targets:s,duration:75,ease:"Cubic.easeInOut",alpha:0,onComplete:()=>{v()}})}})})})}playMidFrameSingleLightAnim(s=75){return it(this,null,function*(){for(let o=this.midFrameLamps.length-1;o>-1;o--)yield this.midFrameSingleLightAnim(this.midFrameLamps[o],s)})}playMidFrameAllLightAnim(){return new Promise(s=>{this.scene.tweens.add({targets:this.midFrameLamps,duration:125,ease:"Cubic.easeInOut",alpha:1,onComplete:()=>{this.scene.tweens.add({targets:this.midFrameLamps,duration:125,ease:"Cubic.easeInOut",alpha:0,onComplete:()=>{s()}})}})})}midFrameDoubleLightAnim(s,o){if(this.lampAnimIdle)return new Promise(v=>{s&&s.setAlpha(1),o&&o.setAlpha(1),setTimeout(()=>{s&&s.setAlpha(0),o&&o.setAlpha(0),v()},180)})}playMidFrameDoubleLightAnim(){return it(this,null,function*(){for(let s=Math.floor(this.midFrameLamps.length/2);s>-1;s--){const o=s+4,v=s;yield this.midFrameDoubleLightAnim(this.midFrameLamps[o],this.midFrameLamps[v])}})}findImageAbsPos(s){const o=new Phaser.GameObjects.Components.TransformMatrix,v=new Phaser.GameObjects.Components.TransformMatrix;return s.getWorldTransformMatrix(o,v),o.decomposeMatrix()}handleAfterSpinGem(s,o,v,S,E,R){const ce=s.getData("gem");if(!ce)return;const me=this.findImageAbsPos(ce),fe=this.gemCounterContext.gameObjectsMap.get("gemImage"),xe=this.findImageAbsPos(fe),ve=this.gemCounterContext.getGemImageScale(),We=this.getGemCollectCurve({spinGemPosX:me.translateX,spinGemPosY:me.translateY,scoreGemPosX:xe.translateX,scoreGemPosY:xe.translateY});let Ze=null,ke=null,ut=0;const De=()=>{ut++,ut===10&&R()};this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.collectCoin[0].key);for(let ot=0;ot<10;ot++){const Ot=this.scene.add.image(me.translateX,me.translateY,this.selectedImages.gemSliceItem[0].key),ze=ve*2;Ot.setScale(ze),Ot.setAlpha(0),Ot.setDepth(this.depth+ot),Ot.setAngle(me.rotation*180/Math.PI);const qe=ot*80,dt=Ot.angle,Je={t:1,vec:new Phaser.Math.Vector2};let Vt=!1;this.scene.tweens.add({targets:Je,t:0,ease:"Quad.easeInOut",duration:720+qe,delay:qe,onUpdate:()=>{We.getPoint(Je.t,Je.vec),Ot.setPosition(Je.vec.x,Je.vec.y),Ot.setAngle(dt+(1-Je.t)*.5*-53);const _t=ze-ve*1.25;if(Ot.setScale(ze-(1-Je.t)*_t),Je.t<.03&&!Vt){Vt=!0,Ot.setAlpha(0);const Lt=this.values[o],ii=Lt%10,yt=(Lt-ii)/10;this.updateGemCount(ot<10-1?yt:yt+ii),this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.uiCoinNew[0].key),Ze&&Ze.complete(),Ze=this.scene.tweens.add({targets:fe,ease:"Linear",duration:75,scale:ve*.75,onComplete:()=>{ke&&ke.complete(),ke=this.scene.tweens.add({targets:fe,ease:"Linear",duration:75,scale:ve})}})}else Vt||Ot.setAlpha(Math.min(1,1-Je.t*1))},onComplete:()=>{Ot.destroy(),De()}})}const Tt=this.values[o],xt=s.getData("text");if(!xt)return;const Pt=720+(10-1)*80;this.scene.tweens.add({targets:ce,duration:Pt,alpha:0,ease:"Quad.easeInOut",onComplete:()=>{const ot=Math.sin(Math.PI/180*S),Ot=Math.cos(Math.PI/180*S),ze=-135,qe=135,dt=-ot*ze,Je=-Ot*qe;this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.spinMorf[0].key),this.gemRevealAnim.setAngle(S),this.gemRevealAnim.setPosition(dt,Je),this.gemRevealAnim.play("glow_transition"),setTimeout(()=>{const Vt=Mt[E];if(Vt===wt.COIN){this.coinTransition(Tt,o,xt,ce);return}if(Vt===wt.LIGHTNING){this.lightningTransition(o,s,xt);return}},800)}}),this.playGemValueCountdownTween(xt,Tt,Pt)}handleAfterSpinLightningSpark1Anim(s,o,v){this.lightningSpark1Anim.setPosition(s,o),this.lightningSpark1Anim.setOrigin(.47,.2),this.lightningSpark1Anim.setRotation(v),this.lightningSpark1Anim.play("lightning_spark1")}getAfterLightningSlice(s){const{x:o,y:v}=this.getRotatedPosition(s),S=this.fontColors[s],E=this.types[s],R=this.values[s],k=this.createSliceItem(o,v,s,S,E,R);return this.spinContainer.add(k),k}handleAfterSpinSpark2Anim(s,o,v,S){return it(this,null,function*(){const K=this.lightning_struck_count;for(let q=0;q<K;q++){console.log("lightning test",this.types);let $=this.lightningSparks[`spark${q}`];$||($=this.scene.add.sprite(0,0,this.getSpark2AtlasKey()).setDepth(this.depth+this.sparkAnimDepth).setScale(2),this.container.add($));const ne=v.splice(Math.floor(Math.random()*v.length),1)[0],oe=ne*this.sliceAngleDeg-o,{x:ce,y:me}=this.getRotatedPositionByDeg(oe),fe=s,xe=(fe+ne)%this.values.length,ve=Math.min(Math.abs(fe-xe),this.values.length-Math.abs(fe-xe)),{x:We,y:Ze}=this.getRotatedPositionByDeg(o),ke=-We*-180,ut=-Ze*180,De=ce*-200,Tt=me*-200,xt=ke-De,Pt=ut-Tt,ot=Math.atan2(Pt,xt)+Math.PI/2;this.handleAfterSpinLightningSpark1Anim(ke,ut,ot);const Ot=this.spinSliceItemContainers[xe],ze=Object.keys(this.lightningTransformWeights),qe=Object.values(this.lightningTransformWeights),[dt,Je]=this.pickRandomValue(ze,qe);if(console.log("lightning",dt,Mt[dt],this.types[xe]),Mt[dt]===wt.COIN){const Vt=this.getAfterLightningSlice(xe);this.types[xe]===Number(wt.COIN)&&this.coinLightningTransition(this.values[xe],xe,Ot.getData("text"),Ot.getData("gem")),this.shakeSliceTween(Vt,()=>{this.spinContainer.remove(Vt),Vt.destroy()}),$.setPosition(De,Tt),$.play("lightning_spark2"),this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.wheelElectro[0].key),yield this.handleAfterSpinLightningLineAnim(q,ot,ke,ut,ve);continue}console.warn("Undefined lightning transform type",dt)}S()})}handleAfterSpinLightningLineAnim(s,o,v,S,E){return new Promise(R=>{let k=this.lightningLines[`line${s}`];k||(k=this.scene.add.sprite(0,0,this.selectedImages.lightning[0].key).setDepth(this.depth+this.lightningLineAnimDepth),k.setOrigin(.5,0),this.container.add(k)),k.setScale(k.scaleX+E/3,E+.5),k.setAlpha(0),k.setPosition(v,S),k.setRotation(o),this.scene.tweens.add({targets:k,ease:"Cubic.easeInOut",duration:25,yoyo:!0,alpha:1,scaleX:k.scaleX*1.2,scaleY:k.scaleY*1.1,onComplete:()=>{this.scene.tweens.add({targets:k,ease:"Cubic.easeInOut",duration:50,yoyo:!0,alpha:.5,scaleX:k.scaleX*1.5,scaleY:k.scaleY*1.4,onComplete:()=>{this.scene.tweens.add({targets:k,ease:"Cubic.easeInOut",duration:25,yoyo:!0,alpha:.85,scaleX:k.scaleX*1.2,scaleY:k.scaleY*1.1,onComplete:()=>{setTimeout(()=>{R()},1e3)}})}})}})})}handleAfterSpinLightning(s,o,v){const S=new Array(7).fill(0).map((E,R)=>R+1);this.handleAfterSpinSpark2Anim(s,o,S,v)}handleAfterSpin(s,o,v,S){const E=this.spinSliceItemContainers[s];if(o===Number(wt.COIN)){const R=Object.keys(this.coinTransformWeights),k=Object.values(this.coinTransformWeights),[W,K]=this.pickRandomValue(R,k);setTimeout(()=>{this.handleAfterSpinGem(E,s,o,v,W,S)},1e3);return}if(o===Number(wt.LIGHTNING)){setTimeout(()=>{this.handleAfterSpinLightning(s,v,S)},500);return}}getGlowAtlasKey(){return _.find(this.selectedAtlases.glowTransition,s=>s.variant==="image").key}getSpark1AtlasKey(){return _.find(this.selectedAtlases.spark1,s=>s.variant==="image").key}getSpark2AtlasKey(){return _.find(this.selectedAtlases.spark2,s=>s.variant==="image").key}getGemTransformValue(s){if(s<=10){const k=s*(Math.floor(Math.random()*3)+3);return Math.floor(k)}if(s<50){const k=s*(Math.floor(Math.random()*3)+2);return Math.floor(k)}if(s<200){const k=s*((Math.floor(Math.random()*3)+3)/2);return Math.floor(k)}const o=3,v=5,S=s*((Math.floor(Math.random()*(v-o+1))+o)/10);return Math.floor(S)}getLightningConversionGemValue(s){let o=3;s>=40&&(o=2),s>=250&&(o=1);let v=1;for(let E=0;E<o;E++)v*=Math.random()*2+1;return Math.floor(s*v/10)*10}playGemValueCountdownTween(s,o,v){const S={value:o};this.scene.tweens.add({targets:S,value:0,duration:v,ease:"Quad.easeInOut",onUpdate:()=>{s.setText(Math.floor(S.value))}})}coinTransition(s,o,v,S){const E=this.getGemTransformValue(s);v.setText(E),S.setAlpha(1),this.values[o]=E,this.saveProgress()}coinLightningTransition(s,o,v,S){const E=this.getLightningConversionGemValue(s);v.setText(E),S.setAlpha(1),this.values[o]=E,this.saveProgress()}lightningTransition(s,o,v){if(this.types[s]=Number(wt.LIGHTNING),v.setAlpha(0),this.values[s]=1,this.saveProgress(),!o.getData("lightning")){const{x:S,y:E}=this.getRotatedPosition(s),R=this.getSliceLightningItem(S,E,s);o.add(R),o.setData("lightning",R)}o.getData("gemEffectTween").stop(),o.getData("gemEffectSliceItem").setAlpha(0),o.getData("gemEffectTween2").stop(),o.getData("gemEffectSliceItem2").setAlpha(0)}shakeSliceTween(s,o){const E={v:0},R=s.x,k=s.y,{x:W,y:K}=s.getData("rotatedXY"),q=20;this.scene.tweens.add({targets:E,v:1,duration:1500,ease:"Quad.easeInOut",onUpdate:()=>{s.setPosition(R+Math.random()*16-8,k+Math.random()*16-8)},onComplete:()=>{s.setPosition(R,k),this.scene.tweens.add({targets:E,v:0,duration:1500,ease:"Quad.easeInOut",onUpdate:()=>{s.setPosition(s.x-W*q,s.y-K*q)},onComplete:o})}})}getFrameObjectName(s,o){return`${s}-${o}`}addSlicedFrames(s,o,v){const S=this.scene.textures.get(s),E=S.get(0),R=S,k=E,W=k.width*o,K=k.width*v,q=k.height;this.threeSliceFrameNames.forEach($=>{let ne=k.cutX,oe=k.cutY,ce;$==="left"?ce=W:$==="center"?(ne+=W,ce=K):$==="right"&&(ne+=W+K,ce=W),R.has($)||R.add($,0,ne,oe,ce,q)})}render3SlicedFrames(s,o,v,S,E,R=void 0){let k=1,W=0,K=0;const q=[],$=[];for(let ne=0;ne<this.threeSliceFrameNames.length;ne++){const oe=this.threeSliceFrameNames[ne],ce=this.getFrameObjectName(s,oe);let me=this.gameObjectsMap.get(ce);if(_.isNil(me)&&(me=this.scene.add.image(0,0,v,oe),me.setDepth(this.depth),me.setOrigin(0,.5),this.gameObjectsMap.set(ce,me)),W=me.height,k=E/me.height,me.scale!==k&&me.setScale(k),R&&me.setTint(R),oe==="left"){const fe=o.x;q.push(fe)}else if(oe==="center"){const fe=this.gameObjectsMap.get(this.getFrameObjectName(s,"left")),xe=o.x+fe.displayWidth;q.push(xe),me.displayWidth!==S&&(me.displayWidth=S)}else if(oe==="right"){const fe=this.gameObjectsMap.get(this.getFrameObjectName(s,"left")),xe=this.gameObjectsMap.get(this.getFrameObjectName(s,"center")),ve=o.x+fe.displayWidth+xe.displayWidth;q.push(ve),K=fe.displayWidth+xe.displayWidth+me.displayWidth}$.push(me)}for(let ne=0;ne<this.threeSliceFrameNames.length;ne++){const oe=q[ne],ce=this.threeSliceFrameNames[ne],me=this.getFrameObjectName(s,ce),fe=this.gameObjectsMap.get(me),xe=oe-K/2,ve=o.y;(fe.x!==oe||fe.y!==o.y)&&fe.setPosition(xe,ve)}return{scale:k,height:W,totalW:K,frames:$}}getGemCollectCurve({spinGemPosX:s,spinGemPosY:o,scoreGemPosX:v,scoreGemPosY:S}){const E=new Phaser.Math.Vector2(v,S),R=new Phaser.Math.Vector2(s,S),k=new Phaser.Math.Vector2(s,o),W=new Phaser.Math.Vector2(s,o);return new Phaser.Curves.CubicBezier(E,R,k,W)}getOpenWheelButtonPos(){const s=this.parent.LeftAbsoluteX+this.parent.AbsoluteWidth*.88,o=this.parent.TopAbsoluteY+this.parent.AbsoluteHeight*1;return{X:s,Y:o}}getInGameOpenWheelButtonPos(){const s=this.gemCounterContext.getRightEndPosition(),o=this.inGameOpenWheelObjects.container.first.width*this.inGameOpenWheelObjects.container.scale;return{X:s.x+o,Y:s.y}}createOpenWheelButtonContainer(){this.openWheelButtonContainer||(this.openWheelButtonContainer=this.scene.add.container(0,0))}createInGameOpenWheelContainer(){this.inGameOpenWheelObjects.container||(this.inGameOpenWheelObjects.container=this.scene.add.container(0,0).setAlpha(0))}renderOpenWheelButton(){const{X:s,Y:o}=this.getOpenWheelButtonPos();this.openWheelButton||(this.openWheelButton=this.scene.add.image(0,0,this.selectedImages.fwToggleIcon[0].key),this.openWheelButtonContainer.add(this.openWheelButton),this.openWheelButton.on("pointerdown",()=>{this.showHideAnim||this.container.visible||(setTimeout(()=>{this.isSoundFxEnabledCallback()&&Ce.play(),this.mainMenuContext.hideObjects(),setTimeout(()=>{this.playSpinStandardOpeningSound(),this.showWheel()},250)},10),this.onOpenWheelButtonPointerdownCallback(this.spinCount))}));const E=Math.min(this.parent.AbsoluteWidth,this.parent.AbsoluteHeight)*.165/this.openWheelButton.width;if(this.openWheelButtonContainer.setPosition(s,o),this.openWheelButtonContainer.setScale(E),this.openWheelButtonContainer.setDepth(this.depth),this.openWheelButton.setInteractive(new Phaser.Geom.Circle(this.openWheelButton.width*.5,this.openWheelButton.height*.5,this.openWheelButton.width*.5),Phaser.Geom.Circle.Contains),!this.openWheelButtonSpinCount){this.openWheelButtonSpinCount=this.scene.add.container(70,-70),this.openWheelButtonContainer.add(this.openWheelButtonSpinCount);const{frames:W}=this.render3SlicedFrames("openWheelButtonSpinCount",{x:1,y:1},this.selectedImages.slicedButtonBg[0].key,8,80,this.openWheelButtonSpinCountTextColor);W.forEach(K=>{this.openWheelButtonSpinCount.add(K)}),this.openWheelButtonSpinCountText=this.scene.add.bitmapText(1,-1,this.selectedBitmapFonts.font[0].key,this.spinCount.toString(),48),this.openWheelButtonSpinCountText.setOrigin(.5),this.openWheelButtonSpinCount.add(this.openWheelButtonSpinCountText)}}renderInGameOpenWheelButton(){this.inGameOpenWheelObjects.button||(this.inGameOpenWheelObjects.button=this.scene.add.image(0,0,this.selectedImages.fwToggleIcon[0].key),this.inGameOpenWheelObjects.container.add(this.inGameOpenWheelObjects.button),this.inGameOpenWheelObjects.button.on("pointerdown",()=>{this.showHideAnim||this.container.visible||(setTimeout(()=>{this.isSoundFxEnabledCallback()&&Ce.play(),this.mainMenuContext.hideInGameFortuneWheelButton(),setTimeout(()=>{this.playSpinStandardOpeningSound(),this.showWheel()},250)},10),this.onOpenWheelButtonPointerdownCallback(this.spinCount))}));const s=this.gemCounterContext.getBackgroundHeight()/this.inGameOpenWheelObjects.button.width;this.inGameOpenWheelObjects.container.setScale(s);const{X:o,Y:v}=this.getInGameOpenWheelButtonPos();if(this.inGameOpenWheelObjects.container.setPosition(o,v),this.inGameOpenWheelObjects.container.setDepth(this.depth),this.inGameOpenWheelObjects.button.setInteractive(new Phaser.Geom.Circle(this.inGameOpenWheelObjects.button.width*.5,this.inGameOpenWheelObjects.button.height*.5,this.inGameOpenWheelObjects.button.width*.5),Phaser.Geom.Circle.Contains),!this.inGameOpenWheelObjects.spinCountContainer){this.inGameOpenWheelObjects.spinCountContainer=this.scene.add.container(70,-70),this.inGameOpenWheelObjects.container.add(this.inGameOpenWheelObjects.spinCountContainer);const{frames:R}=this.render3SlicedFrames("inGameOpenWheelButtonSpinCount",{x:1,y:1},this.selectedImages.slicedButtonBg[0].key,8,80,this.openWheelButtonSpinCountTextColor);R.forEach(k=>{this.inGameOpenWheelObjects.spinCountContainer.add(k)}),this.inGameOpenWheelObjects.spinCountText=this.scene.add.bitmapText(1,-1,this.selectedBitmapFonts.font[0].key,this.spinCount.toString(),48),this.inGameOpenWheelObjects.spinCountText.setOrigin(.5),this.inGameOpenWheelObjects.spinCountContainer.add(this.inGameOpenWheelObjects.spinCountText)}}renderCloseWheelButton(){this.closeWheelButton||(this.closeWheelButton=this.scene.add.image(0,0,this.getCancelButtonTextureKey()),this.closeWheelButton.setVisible(!1),this.closeWheelButton.on("pointerdown",()=>{this.showHideAnim||(this.onWheelCloseCallback(),this.container.visible&&!this.lampAnimSpinning&&(this.isSoundFxEnabledCallback()&&Ce.play(),this.hideWheel(),this.isGameStateInGameCallback()?this.mainMenuContext.showIngameFortuneWheelButton():this.mainMenuContext.showObjects()))}));const v=this.getShortEdge()*.15/this.closeWheelButton.width;this.closeWheelButton.setPosition(this.parent.LeftAbsoluteX+this.parent.AbsoluteWidth*.85,this.scene.game.canvas.height*.05),this.closeWheelButton.setScale(v),this.closeWheelButton.setDepth(this.depth),this.closeWheelButton.setInteractive(new Phaser.Geom.Circle(this.closeWheelButton.width*.5,this.closeWheelButton.height*.5,this.closeWheelButton.width*.5),Phaser.Geom.Circle.Contains)}showWheel(){this.showHideAnim=!0,this.container.setVisible(!0),this.closeWheelButton.setVisible(!0),this.showDimmer(),this.container.setY(-this.parent.AbsoluteHeight/2);const s=this.wheelPosition[this.scene.getOrientation()];this.scene.tweens.add({targets:this.container,duration:600,ease:"Back.easeOut",y:this.TopAbsoluteY+this.AbsoluteHeight*s.y,onComplete:()=>{this.showHideAnim=!1}})}hideWheel(){this.showHideAnim=!0,this.isSoundFxEnabledCallback()&&zt.play(),this.hideDimmer(),this.scene.tweens.add({targets:this.container,duration:600,ease:"Back.easeIn",y:-this.parent.AbsoluteHeight/2,onComplete:()=>{this.container.setVisible(!1),this.showHideAnim=!1}}),this.closeWheelButton.setVisible(!1)}}class jt extends Ae{constructor(s){super(s),this.update(s),this.drawReferenceRectangle=!1,this.particleEmitter=null,this.backgroundParticle=null,this.areWindTweensAdded=!1,this.frequencyMultiplier=32}load(){super.load(),this.loadTextures()}loadTextures(){super.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),_.hasIn(this,"onReady")&&this.onReady()}trigger(){if(this.drawReferenceRectangle&&super.renderReferenceRectangle(),this.areWindTweensAdded||(this.areWindTweensAdded=!0,this.highWind={tween:this.scene.tweens.addCounter({from:1,to:-1,duration:4*1e3,loop:Phaser.FOREVER,ease:"Sine.easeInOut"}),processor:{active:!0,update:o=>{o.velocityX+=this.highWind.tween.getValue()}}}),!this.isEnabled){this.destroyParticleAndEmitter();return}const s=this.getEmitterScale();_.isNil(this.backgroundParticle)?this.addParticleAndEmitter(s):this.backgroundParticle.scale!==s?(this.destroyParticleAndEmitter(),this.addParticleAndEmitter(s)):(this.backgroundParticle.texture.key!==this.selectedImages.particle[0].key&&this.backgroundParticle.setTexture(this.selectedImages.particle[0].key),this.particleEmitter.setFrequency(4e3-this.frequencyMultiplier*this.frequencyScaler))}destroyParticleAndEmitter(){_.isNil(this.backgroundParticle)||(this.particleEmitter.killAll(),this.particleEmitter=null,this.backgroundParticle.destroy(),this.backgroundParticle=null)}addParticleAndEmitter(s){this.backgroundParticle=this.scene.add.particles(this.selectedImages.particle[0].key),this.backgroundParticle.setDepth(this.depth!==void 0?this.depth:-1),this.backgroundParticle.addGravityWell(this.highWind.processor),this.particleEmitter=this.backgroundParticle.createEmitter({rotate:{min:0,max:360,random:!0},lifespan:12e3,quantity:1,frequency:400-this.frequencyMultiplier*this.frequencyScaler,maxParticles:150,tint:[2872466,5793235,5793235,5793235,9953093,16764954],scale:{start:s,end:s*.5,ease:"Bounce.easeInOut"},gravityY:300,emitZone:{type:"random",source:{getRandomPoint:o=>{this.calculateRandomPoint(o)}}}})}getEmitterScale(){const s=Math.min(this.AbsoluteHeight,this.AbsoluteWidth);return this.scale*(s/this.scene.textures.get(this.selectedImages.particle[0].key).source[0].width)*.3}calculateRandomPoint(s){let o=this.LeftAbsoluteX+this.AbsoluteWidth*1.5,v=this.LeftAbsoluteX-this.AbsoluteWidth*.5,S=Math.floor(Math.random()*(o-v+1)+v);return s.x=S,s.y=-250,s}}class yi extends Ae{constructor(s){super(s),this.threeSliceFrameNames=["left","center","right"],this.barFrontSizeMultiplier=1,this.buttonColors={nextLevel:5474020,setClaim:6797623},this.buttonTypes={nextLevel:"nextLevel",setClaim:"setClaim"},this.giftBoxStates={onProgressBar:"onProgressBar",opened:"opened",claimed:"claimed"},this.setImageStates={onProgressBar:"onProgressBar",beforeClaim:"beforeClaim",claimed:"claimed"},this.giftBoxCurrentState=this.giftBoxStates.onProgressBar,this.setImageCurrentState=this.setImageStates.onProgressBar,this.currentPrize="80",this.giftBarCurrentProgress=0,this.setBarCurrentProgress=0,this.giftBarCurrentLevel=0,this.giftBarCurrentLength=0,this.setBarCurrentLevel=0,this.setBarCurrentLength=0,this.currentSetID=1,this.giftBarMultiplier=.95,this.setBarMultiplier=.95,this.progressTypes={gift:"gift",set:"set"},this.drawReferenceRectangle=!1}load(){super.load(),this.loadSounds()}soundLoadComplete(){super.soundLoadComplete(),this.isSoundLoadComplete&&(this.onReady(),this.isSoundLoadComplete=!1)}render(){this.drawReferenceRectangle&&this.renderReferenceRectangle(),super.render();const s=this.renderButtonContainer(this.buttonTypes.nextLevel);this.renderButton(s,this.buttonTypes.nextLevel),this.renderNextLevelButtonText(s),this.renderButtonInputContainer(this.buttonTypes.nextLevel);const o=this.renderButtonContainer(this.buttonTypes.setClaim);this.renderButton(o,this.buttonTypes.setClaim),this.renderSetClaimButtonText(o),this.renderButtonInputContainer(this.buttonTypes.setClaim),this.renderCongratsText();const v=this.renderVoyageCircleContainer();this.renderVoyageCircle(v);const S=this.renderVoyageLevelText(v);if(this.renderVoyageText(v,S.height),this.renderBarBackground(this.progressTypes.gift,this.getGiftBarY()),this.renderBarFront(this.progressTypes.gift,this.getGiftBarY()),this.renderProgressText(this.progressTypes.gift,this.getGiftBarY()),this.renderGiftBoxBottom(),this.renderGiftBoxLid(),this.renderGreenTick(this.progressTypes.gift),this.addProgressbarShine(this.progressTypes.gift),this.isVisible){const E=this.getMaskWidth(this.progressTypes.gift);this.applyMaskToProgressBarFront(this.progressTypes.gift,E)}if(this.renderSetText(),this.renderBarBackground(this.progressTypes.set,this.getSetBarY()),this.renderBarFront(this.progressTypes.set,this.getSetBarY()),this.renderProgressText(this.progressTypes.set,this.getSetBarY()),this.renderSetImage(),this.applyMaskToSetImage(),this.renderSetImageFrame(),this.renderShineImage(),this.renderSetClaimTopText(),this.renderSetClaimBottomText(),this.renderGreenTick(this.progressTypes.set),this.addProgressbarShine(this.progressTypes.set),this.isVisible){const E=this.getMaskWidth(this.progressTypes.set);this.applyMaskToProgressBarFront(this.progressTypes.set,E)}}playLevelEndSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.levelEnd[0].key)}playButtonShineSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.buttonShine[0].key)}getAbsoluteWidth(){const s=this.scene.game.canvas.height*.5622188905547226;return s>this.AbsoluteWidth?this.AbsoluteWidth:s}getShineImage(){return this.gameObjectsMap.get("shineImage")}playShineImageTween(){const s=this.getShineImage();s.setAlpha(.1),this.scene.tweens.add({targets:s,angle:360,duration:10800,loop:-1})}renderShineImage(){const s=this.getSetImagePosition(this.setImageStates.beforeClaim);let o=this.getShineImage();_.isNil(o)?(o=this.scene.add.image(s.x,s.y,this.getShineImageTextureKeyCallback()).setAlpha(0).setDepth(this.depth),this.gameObjectsMap.set("shineImage",o)):(o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y);const v=this.getSetImageDisplayHeight(this.setImageStates.beforeClaim)*2/o.height;o.scale!==v&&o.setScale(v),o.visible!==this.isVisible&&o.setVisible(this.isVisible)}getSetImageFrame(){return this.gameObjectsMap.get("setImageFrame")}renderSetImageFrame(){const s=this.getSetImagePosition();let o=this.getSetImageFrame();_.isNil(o)?(o=this.scene.add.image(s.x,s.y,this.getSetImageFrameTextureKeyCallback()).setDepth(this.depth+5).setAlpha(0),this.gameObjectsMap.set("setImageFrame",o)):(o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y);const v=this.getSetImageAngle();o.angle!==v&&o.setAngle(v);const S=this.getSetImageDisplayHeight()/o.height;o.scale!==S&&o.setScale(S),this.isVisible!==o.visible&&o.setVisible(this.isVisible)}getSetClaimBottomTextPosition(){return{x:this.scene.game.canvas.width*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.72}}changeSetClaimTopTextObject(s,o){const v=this.getTextOriginYCallback();s.originY!==v&&s.setOrigin(.5,v);let S="";this.isCurrentLanguageRightToLeftCallback()?o.split(`
`).forEach((R,k)=>{k===1&&(S+=`
`),S+=Array.from(R).reverse().join("")}):S=o,s.text!==S&&s.setText(S)}changeTextObject(s,o){const v=this.getTextOriginYCallback();s.originY!==v&&s.setOrigin(.5,v);const S=this.isCurrentLanguageRightToLeftCallback()?Array.from(o).reverse().join(""):o;s.text!==S&&s.setText(S)}getSetClaimBottomText(){return this.gameObjectsMap.get("setClaimBottomText")}renderSetClaimBottomText(){const s=this.getSetClaimBottomTextPosition();let o=this.getSetClaimBottomText();_.isNil(o)?(o=this.scene.add.bitmapText(s.x,s.y,this.getBitmapFontKeyCallback(),"set claim bottom text").setOrigin(.5).setAlpha(0).setDepth(this.depth+4),o.setCenterAlign(),this.gameObjectsMap.set("setClaimBottomText",o)):(o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y),o.maxWidth!==this.getAbsoluteWidth()*.8&&o.setMaxWidth(this.getAbsoluteWidth()*.8);const v=Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.04;o.fontSize!==v&&o.setFontSize(v),o.visible!==this.isVisible&&o.setVisible(this.isVisible)}getSetClaimTopTextPosition(){return{x:this.scene.game.canvas.width*.5,y:this.TopAbsoluteY+this.AbsoluteHeight*.12}}getSetClaimTopText(){return this.gameObjectsMap.get("setClaimTopText")}renderSetClaimTopText(){const s=this.getSetClaimTopTextPosition();let o=this.getSetClaimTopText();_.isNil(o)?(o=this.scene.add.bitmapText(s.x,s.y,this.getBitmapFontKeyCallback(),"set claim top text").setOrigin(.5).setAlpha(0).setDepth(this.depth+4),o.setCenterAlign(),this.gameObjectsMap.set("setClaimTopText",o)):(o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y),o.maxWidth!==this.getAbsoluteWidth()&&o.setMaxWidth(this.getAbsoluteWidth());const v=Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.05;o.fontSize!==v&&o.setFontSize(v),o.visible!==this.isVisible&&o.setVisible(this.isVisible)}getSetImageMask(){return this.gameObjectsMap.get("setImageMask")}applyMaskToSetImage(){const s=this.getSetImage(),o=this.scene.game.canvas.height>this.scene.game.canvas.width?"portrait":"landscape";let v=this.getSetImageMask();if(_.isNil(v)){v=this.scene.make.image({x:s.x,y:s.y,key:this.getSetImageMaskTextureKeyCallback(),add:!1}),v.setData("orientation",o);const E=new Phaser.Display.Masks.BitmapMask(this.scene,v);s.setMask(E),this.gameObjectsMap.set("setImageMask",v)}v.angle!==s.angle&&v.setAngle(s.angle);const S=s.displayHeight/v.height;if(v.scale!==S&&v.setScale(S),(v.x!==s.x||v.y!==s.y)&&v.setPosition(s.x,s.y),v.getData("orientation")!==o){v.setData("orientation",o),s.clearMask(!0);const E=new Phaser.Display.Masks.BitmapMask(this.scene,v);s.setMask(E)}}getSetImage(){return this.gameObjectsMap.get("setImage")}getSetImagePosition(s=this.setImageCurrentState){if(s===this.setImageStates.onProgressBar||s===this.setImageStates.claimed){const o=this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.set,"right"));return{x:o.x+o.displayWidth*.4,y:this.getSetBarY()}}else if(s===this.setImageStates.beforeClaim)return{x:this.scene.game.canvas.width*.5,y:this.scene.game.canvas.height*.43}}getSetImageAngle(s=this.setImageCurrentState){if(s===this.setImageStates.onProgressBar||s===this.setImageStates.claimed)return 10;if(s===this.setImageStates.beforeClaim)return 0}renderSetImage(){const s=this.getSetImagePosition();let o=this.gameObjectsMap.get("setImage");_.isNil(o)?(o=this.scene.add.image(s.x,s.y,this.getSetImageTextureKeyCallback()).setDepth(this.depth+4),this.gameObjectsMap.set("setImage",o)):(o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y);const v=this.getSetImageAngle();o.angle!==v&&o.setAngle(v);const S=this.getSetImageDisplayHeight()/o.height;o.scale!==S&&o.setScale(S),o.visible!==this.isVisible&&o.setVisible(this.isVisible)}getSetImageDisplayHeight(s=this.setImageCurrentState){if(s===this.setImageStates.onProgressBar||s===this.setImageStates.claimed)return this.getBarBackgroundDisplayHeight()*1.8;if(s===this.setImageStates.beforeClaim)return this.getBarBackgroundDisplayHeight()*9}getCurrentSetID(){return this.currentSetID}setCurrentSetID(s){this.currentSetID=s}getGiftBarCurrentLevel(){return this.giftBarCurrentLevel}setGiftBarCurrentLevel(s){this.giftBarCurrentLevel=s}getGiftBarCurrentLength(){return this.giftBarCurrentLength}setGiftBarCurrentLength(s){this.giftBarCurrentLength=s}getSetBarCurrentLevel(){return this.setBarCurrentLevel}setSetBarCurrentLevel(s){this.setBarCurrentLevel=s}getSetBarCurrentLength(){return this.setBarCurrentLength}setSetBarCurrentLength(s){this.setBarCurrentLength=s}getMaskWidth(s){let o;s===this.progressTypes.gift?o=this.giftBarMultiplier:s===this.progressTypes.set&&(o=this.setBarMultiplier);let v;s===this.progressTypes.gift?v=this.giftBarCurrentProgress:s===this.progressTypes.set&&(v=this.setBarCurrentProgress);const S=this.getTotalProgressDisplayWidthByType(s),R=S*o*v;return v===1?S:R}getMaskPositionByType(s){const o=this.getBarFrontFrame(s,"left");return{x:o.x,y:o.y-o.displayHeight*.5}}getMaskShapeName(s){return"maskShape_"+s}getBarFrontFrame(s,o){return this.gameObjectsMap.get(this.getBarFrontFrameObjectName(s,o))}getBarBackgroundFrame(s,o){return this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(s,o))}clearMaskForProgressBarFront(s){const o=this.gameObjectsMap.get(this.getMaskShapeName(s));_.isNil(o)||o.clear()}applyMaskToProgressBarFront(s,o){const v=this.getMaskPositionByType(s),S=this.getProgressDisplayHeightByType(s),E=this.getMaskShapeName(s);let R=this.gameObjectsMap.get(E);if(_.isNil(R)){R=this.scene.make.graphics();const k=R.createGeometryMask(R);this.threeSliceFrameNames.forEach(W=>{this.getBarFrontFrame(s,W).setMask(k)}),this.gameObjectsMap.set(E,R)}else R.clear();R.fillStyle(16777215),R.beginPath(),R.fillRect(v.x,v.y,o,S)}getProgressbarShineName(s){return"progressbarShine_"+s}getProgressbarShine(s){return this.gameObjectsMap.get(this.getProgressbarShineName(s))}addProgressbarShine(s){const o=this.getProgressbarShineName(s);let v=this.gameObjectsMap.get(o);_.isNil(v)&&(v=this.scene.add.image(0,0,this.getProgressbarShineTextureKeyCallback()).setOrigin(0,.5).setDepth(this.depth+3).setVisible(!1),this.gameObjectsMap.set(o,v))}getGreenTickName(s){return"greenTick_"+s}getGreenTickByType(s){return this.gameObjectsMap.get(this.getGreenTickName(s))}getGreenTickFinalDisplayWidth(s){if(s===this.progressTypes.gift)return this.getGiftBoxBottomDisplayWidth(this.giftBoxStates.claimed)*.8;if(s===this.progressTypes.set)return this.getSetImageDisplayHeight(this.setImageStates.claimed)*.8}getGreenTickPositionByType(s){if(s===this.progressTypes.gift){const o=this.getGiftBoxBottomPosition(this.giftBoxStates.claimed),v=this.getGiftBoxBottomDisplayWidth(this.giftBoxStates.claimed);return{x:o.x+v*.35,y:o.y-v*.25}}else if(s===this.progressTypes.set){const o=this.getSetImagePosition(this.setImageStates.claimed),v=this.getSetImageDisplayHeight(this.setImageStates.claimed);return{x:o.x+v*.2,y:o.y+v*.45}}}renderGreenTick(s){const o=this.getGreenTickName(s);let v=this.gameObjectsMap.get(o);if(_.isNil(v)&&(v=this.scene.add.image(0,0,this.getGreenTickTextureKeyCallback()).setVisible(!1).setDepth(this.depth+5),this.gameObjectsMap.set(o,v)),v.visible){const S=this.getGreenTickFinalDisplayWidth(s)/v.width;v.scale!==S&&v.setScale(S);const E=this.getGreenTickPositionByType(s);(v.x!==E.x||v.y!==E.y)&&v.setPosition(E.x,E.y)}}getButtonInputContainerName(s){return"buttonInputContainer_"+s}getButtonInputContainer(s){return this.gameObjectsMap.get(this.getButtonInputContainerName(s))}playButtonUnpressTween(s){const o=this.getButtonContainer(s);if(o.scale===1)return;let v=this.gameObjectsMap.get("buttonUnpressTween_"+s);_.isNil(v)?(v=this.scene.tweens.add({targets:o,duration:50,onComplete:()=>{o.scale!==1&&o.setScale(1)},scale:1}),this.gameObjectsMap.set("buttonUnpressTween_"+s,v)):v.restart()}playButtonPressTween(s){const o=this.getButtonContainer(s);let v=this.gameObjectsMap.get("buttonPressTween_"+s);_.isNil(v)?(v=this.scene.tweens.add({targets:o,duration:50,onStart:()=>{o.scale!==1&&o.setScale(1)},scale:.9}),this.gameObjectsMap.set("buttonPressTween_"+s,v)):v.restart()}renderButtonInputContainer(s){const o=this.getButtonContainerPosition(s),v=this.getButtonDisplayWidth(s),S=this.getButtonDisplayHeight(s);let E=this.getButtonInputContainer(s);_.isNil(E)?(E=this.scene.add.container(o.x,o.y).setDepth(this.depth).setVisible(!1),E.setInteractive(new Phaser.Geom.Rectangle(-v*.5,-S*.5,v,S),Phaser.Geom.Rectangle.Contains),E.on("pointerdown",()=>{this.isSoundFxEnabledCallback()&&Ce.play(),this.playButtonPressTween(s),this.onButtonPointerdownCallback(s)}),this.gameObjectsMap.set(this.getButtonInputContainerName(s),E)):((E.x!==o.x||E.y!==o.y)&&E.setPosition(o.x,o.y),(E.input.hitArea.width!==v||E.input.hitArea.height!==S)&&(E.input.hitArea=new Phaser.Geom.Rectangle(-v*.5,-S*.5,v,S)))}getProgressData(s){const o=s.currentLevel,v=s.sectionIndex,S=s.setIndex,E=s.currentSet,R=s.previousSetLevelsCount,k=s.lastSectionIndex,W=s.lastSetIndex,K=s.levelCountSoFar,q=s.nextSet,$=q.TotalLevelCount,ne=o-1,oe=(E.LastLevel-E.FirstLevel+1)/2,ce=ne-E.FirstLevel+1;let me=E.TotalLevelCount/2,fe;ce<=oe?(fe=E.FirstLevel+E.TotalLevelCount/2-1,S===0?v===0?(me=8,fe=8):me=Math.floor(R/2+E.TotalLevelCount/2):S===1&&v===0?(me=8,fe=8):me=Math.floor(R/2+E.TotalLevelCount/2)):ce>oe&&(v===0&&S===0?(me=8,fe=8):v===k&&S===W?(fe=K+E.TotalLevelCount/2,me=60):(me=Math.floor($/2+E.TotalLevelCount/2),fe=q.FirstLevel+$/2-1));const xe=fe-me,ve=ne-xe,We=ve/me,Ze=ne-(E.FirstLevel-1),ke=E.LastLevel-(E.FirstLevel-1),ut=Ze/ke;return console.log({currentSetLastLevel:E.LastLevel,currentSetFirstLevel:E.FirstLevel,currentLevelForGift:ve,barLengthForGift:me,giftLevel:fe,giftProgressFillAmount:We,setProgressFillAmount:ut,currentLevelForSet:Ze,barLengthForSet:ke}),{giftProgressFillAmount:We,setProgressFillAmount:ut,currentLevelForGift:ve,barLengthForGift:me,currentLevelForSet:Ze,barLengthForSet:ke}}getTotalProgressDisplayWidthByType(s){let o=0;return this.threeSliceFrameNames.forEach(v=>{const S=this.getBarFrontFrame(s,v);o+=S.displayWidth}),o}getProgressDisplayHeightByType(s){return this.getBarFrontFrame(s,"left").displayHeight}getGiftProgressTextValue(){return this.getGiftBarCurrentLevel()+"/"+this.getGiftBarCurrentLength()}getSetProgressTextValue(){return this.getSetBarCurrentLevel()+"/"+this.getSetBarCurrentLength()}appearEndLevelScreenObjects(s){const o=s.currentLevel,v=s.sectionIndex,S=s.setIndex,E=s.currentSet,R=s.previousSetLevelsCount,k=s.lastSectionIndex,W=s.lastSetIndex,K=s.levelCountSoFar,q=s.nextSet,$=s.onSetCompleteCallback,ne=s.onGiftAchieveCallback,oe=E.t;this.setCurrentSetID(oe);const ce=this.getProgressData({currentLevel:o,sectionIndex:v,setIndex:S,currentSet:E,previousSetLevelsCount:R,lastSectionIndex:k,lastSetIndex:W,levelCountSoFar:K,nextSet:q});this.setGiftBarCurrentLevel(ce.currentLevelForGift-1),this.setGiftBarCurrentLength(ce.barLengthForGift),this.setSetBarCurrentLevel(ce.currentLevelForSet-1),this.setSetBarCurrentLength(ce.barLengthForSet),console.log("progressData",ce);const me=(ce.currentLevelForGift-1)/ce.barLengthForGift;if(me!==this.giftBarCurrentProgress){this.giftBarCurrentProgress=me,this.renderBarFront(this.progressTypes.gift,this.getGiftBarY());const Je=this.getMaskWidth(this.progressTypes.gift);this.applyMaskToProgressBarFront(this.progressTypes.gift,Je)}const fe=(ce.currentLevelForSet-1)/ce.barLengthForSet;if(fe!==this.setBarCurrentProgress){this.setBarCurrentProgress=fe,this.renderBarFront(this.progressTypes.set,this.getSetBarY());const Je=this.getMaskWidth(this.progressTypes.set);this.applyMaskToProgressBarFront(this.progressTypes.set,Je)}const xe=[];this.getButtonContainer(this.buttonTypes.nextLevel).setAlpha(0);const We=this.getVoyageCircleContainer();We.setAlpha(0);const Ze=this.getVoyageLevelText();Ze.text!==o-1&&Ze.setText(o-1);const ke=this.getCongratsText();ke.setAlpha(0);const ut=this.getSetText(),De=this.getSetTextValueByCallback(this.getCurrentSetID());this.changeTextObject(ut,De),ut.setAlpha(0),xe.push(ut);const Tt=this.getGiftProgressText(),xt=this.getGiftProgressTextValue();Tt.text!==xt&&Tt.setText(xt),Tt.setAlpha(0),xe.push(Tt);const Pt=this.getSetProgressText(),ot=this.getSetProgressTextValue();Pt.text!==ot&&Pt.setText(ot),Pt.setAlpha(0),xe.push(Pt),this.threeSliceFrameNames.forEach(Je=>{const Vt=this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.gift,Je));Vt.setAlpha(0),xe.push(Vt);const _t=this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.set,Je));_t.setAlpha(0),xe.push(_t);const Lt=this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.gift,Je));Lt.setAlpha(0),xe.push(Lt);const ii=this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.set,Je));ii.setAlpha(0),xe.push(ii)});const Ot=this.getGiftBoxBottom();Ot.setAlpha(0),xe.push(Ot);const ze=this.getGiftBoxLid();ze.setAlpha(0),xe.push(ze);const qe=this.getSetImage();qe.setAlpha(0),xe.push(qe);const dt=this.getSetImageFrame();dt.setAlpha(0),xe.push(dt),this.scene.tweens.add({duration:150,targets:ke,fontSize:this.getCongratsTextFontSize()*1.1,alpha:1,onComplete:()=>{this.scene.tweens.add({duration:100,targets:ke,fontSize:this.getCongratsTextFontSize(),onComplete:()=>{this.scene.tweens.add({duration:150,targets:We,scale:1.1,alpha:1,onStart:()=>{We.setScale(0)},onComplete:()=>{this.scene.tweens.add({duration:100,targets:We,scale:1}),this.scene.tweens.add({duration:100,targets:xe,alpha:1,onComplete:()=>{const Je=this.getTotalProgressDisplayWidthByType(this.progressTypes.gift),Vt=Je*this.giftBarMultiplier,_t=Vt*this.giftBarCurrentProgress;let Lt;ce.giftProgressFillAmount===1?Lt=ce.giftProgressFillAmount-this.giftBarCurrentProgress*this.giftBarMultiplier:Lt=(ce.giftProgressFillAmount-this.giftBarCurrentProgress)*this.giftBarMultiplier,this.giftBarCurrentProgress=ce.giftProgressFillAmount,this.playProgressTween({progressFillAmount:ce.giftProgressFillAmount,type:this.progressTypes.gift,currentLevel:o,progressDisplayWidthBeforeTween:_t,visibleTotalProgressDisplayWidth:Vt,totalProgressDisplayWidth:Je,stepProgress:Lt,canPlayButtonTween:!1,onProgressCompleteCallback:ne});const ii=this.getTotalProgressDisplayWidthByType(this.progressTypes.set),yt=ii*this.setBarMultiplier,at=yt*this.setBarCurrentProgress;let gt;ce.setProgressFillAmount===1?gt=ce.setProgressFillAmount-this.setBarCurrentProgress*this.setBarMultiplier:gt=(ce.setProgressFillAmount-this.setBarCurrentProgress)*this.setBarMultiplier,this.setBarCurrentProgress=ce.setProgressFillAmount,this.playProgressTween({progressFillAmount:ce.setProgressFillAmount,type:this.progressTypes.set,currentLevel:o,progressDisplayWidthBeforeTween:at,visibleTotalProgressDisplayWidth:yt,totalProgressDisplayWidth:ii,stepProgress:gt,canPlayButtonTween:ce.giftProgressFillAmount!==1&&ce.setProgressFillAmount!==1,onProgressCompleteCallback:$})}})}})}})}})}getProgressbarShinePositionByType(s){const o=this.getBarFrontFrame(s,"left");return{x:o.x,y:o.y}}playProgressTween(s){const o=s.progressFillAmount,v=s.type,S=s.currentLevel,E=s.progressDisplayWidthBeforeTween,R=s.visibleTotalProgressDisplayWidth,k=s.totalProgressDisplayWidth,W=s.stepProgress,K=s.canPlayButtonTween,q=this.getProgressDisplayHeightByType(v),$=o===1?k:R,ne=E+$*W;this.scene.tweens.addCounter({from:0,to:W,duration:500,onUpdate:me=>{const fe=me.getValue();this.applyMaskToProgressBarFront(v,E+$*fe)}});const oe=this.getProgressbarShine(v),ce=this.getProgressbarShinePositionByType(v);oe.displayHeight=q,oe.setAlpha(0),oe.displayWidth=0,oe.setPosition(ce.x,ce.y),oe.setVisible(!0),this.scene.tweens.add({duration:400,targets:oe,alpha:1,onComplete:()=>{if(v===this.progressTypes.gift){this.setGiftBarCurrentLevel(this.getGiftBarCurrentLevel()+1);const me=this.getGiftProgressText(),fe=this.getGiftProgressTextValue();me.text!==fe&&me.setText(fe)}else if(v===this.progressTypes.set){this.setSetBarCurrentLevel(this.getSetBarCurrentLevel()+1);const me=this.getSetProgressText(),fe=this.getSetProgressTextValue();me.text!==fe&&me.setText(fe)}this.scene.tweens.add({duration:200,targets:oe,alpha:0,onComplete:()=>{o===1?(v===this.progressTypes.gift&&this.playAlphaTweenExceptGiftBox(0,300),s.onProgressCompleteCallback()):K&&this.appearNextLevelButtonContainer(S),oe.setVisible(!1)}})}}),this.scene.tweens.add({duration:500,targets:oe,displayWidth:ne})}getSetProgressText(){return this.gameObjectsMap.get(this.getProgressTextName(this.progressTypes.set))}getGiftProgressText(){return this.gameObjectsMap.get(this.getProgressTextName(this.progressTypes.gift))}getNextLevelButtonTextXValues(s,o,v){const S=s.width+o.width+v.width,E={};return this.isCurrentLanguageRightToLeftCallback()?(E.levelNumber=-S*.5+v.width*.5,E.whiteSpace=-S*.5+v.width+o.width*.5,E.levelText=-S*.5+v.width+o.width+s.width*.5):(E.levelText=-S*.5+s.width*.5,E.whiteSpace=-S*.5+s.width+o.width*.5,E.levelNumber=-S*.5+s.width+o.width+v.width*.5),E}appearNextLevelButtonContainer(s){const o=this.getButtonInputContainer(this.buttonTypes.nextLevel);o.setVisible(!1);const v=this.getButtonContainer(this.buttonTypes.nextLevel);v.setAlpha(0),v.setScale(0);const S=v.getData("levelText"),E=this.getButtonTextCaptionByKeyCallback("LevelText").toLocaleUpperCase(this.getCurrentLanguageCallback()),R=this.isCurrentLanguageRightToLeftCallback()?Array.from(E).reverse().join(""):E;S.text!==R&&S.setText(R);const k=v.getData("whiteSpace");k.text!==" "&&k.setText(" ");const W=v.getData("levelNumber");W.text!==s-1&&W.setText(s-1);const K=this.getNextLevelButtonTextXValues(S,k,W);S.x!==K.levelText&&S.setX(K.levelText),k.x!==K.whiteSpace&&k.setX(K.whiteSpace),W.x!==K.levelNumber&&W.setX(K.levelNumber),this.scene.tweens.add({duration:600,targets:v,alpha:1,scale:1.1,onComplete:()=>{this.scene.tweens.add({duration:300,targets:v,scale:1,onComplete:()=>{this.playButtonShineSound();const q=this.getButtonFrames(this.buttonTypes.nextLevel);this.scene.tweens.addCounter({from:0,to:1,duration:300,yoyo:!0,onUpdate:ne=>{const oe=ne.getValue(),ce={r:(this.buttonColors.nextLevel&16711680)>>16,g:(this.buttonColors.nextLevel&65280)>>8,b:this.buttonColors.nextLevel&255},me={r:168,g:194,b:243},fe=Te(ce.r,me.r,oe),xe=Te(ce.g,me.g,oe),ve=Te(ce.b,me.b,oe),We=(fe<<16)+(xe<<8)+ve;q.forEach(Ze=>{Ze.setTint(We)})}}),o.setVisible(!0),W.setText(s);const $=this.getNextLevelButtonTextXValues(S,k,W);S.x!==$.levelText&&S.setX($.levelText),k.x!==$.whiteSpace&&k.setX($.whiteSpace),W.x!==$.levelNumber&&W.setX($.levelNumber)}})}})}setGiftBoxCurrentState(s){this.giftBoxCurrentState=s}setSetImageCurrentState(s){this.setImageCurrentState=s}getCurrentPrize(){return this.currentPrize}getGiftBoxLid(){return this.gameObjectsMap.get("giftBoxLid")}getGiftBoxBottom(){return this.gameObjectsMap.get("giftBoxBottom")}disappearObjectsBeforeNextLevel(s){const o=[];this.getButtonInputContainer(this.buttonTypes.nextLevel).setVisible(!1);const S=this.getButtonContainer(this.buttonTypes.nextLevel);o.push(S);const E=this.getGreenTickByType(this.progressTypes.gift);E.visible&&o.push(E);const R=this.getGreenTickByType(this.progressTypes.set);R.visible&&o.push(R);const k=this.getGiftBoxBottom();o.push(k);const W=this.getGiftBoxLid();o.push(W);const K=this.getSetImage();o.push(K);const q=this.getSetImageFrame();o.push(q);const $=this.getVoyageCircleContainer();o.push($);const ne=this.getCongratsText();o.push(ne);const oe=this.getSetText();o.push(oe);const ce=this.getGiftProgressText();o.push(ce);const me=this.getSetProgressText();o.push(me),this.threeSliceFrameNames.forEach(fe=>{o.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.gift,fe))),o.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.set,fe))),o.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.gift,fe))),o.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.set,fe)))}),this.scene.tweens.add({duration:s,targets:o,alpha:0,onComplete:()=>{this.clearMaskForProgressBarFront(this.progressTypes.gift),this.clearMaskForProgressBarFront(this.progressTypes.set)}})}playAlphaTweenAfterSetCompleteTweensCompleted(s,o){this.renderSetImage(),this.applyMaskToSetImage(),this.renderSetImageFrame();const v=this.getGreenTickByType(this.progressTypes.set);v.setAlpha(0),v.setVisible(!0);const S=this.getGreenTickFinalDisplayWidth(this.progressTypes.set)/v.width;v.scale!==S&&v.setScale(S);const E=this.getGreenTickPositionByType(this.progressTypes.set);(v.x!==E.x||v.y!==E.y)&&v.setPosition(E.x,E.y);const R=[],k=this.getSetImage();R.push(k);const W=this.getSetImageFrame();R.push(W);const K=this.getGiftBoxBottom();R.push(K);const q=this.getGiftBoxLid();R.push(q);const $=this.getVoyageCircleContainer();R.push($);const ne=this.getCongratsText();R.push(ne);const oe=this.getSetText();R.push(oe);const ce=this.getGiftProgressText();R.push(ce);const me=this.getSetProgressText();R.push(me),this.threeSliceFrameNames.forEach(fe=>{R.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.gift,fe))),R.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.set,fe))),R.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.gift,fe))),R.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.set,fe)))}),this.scene.tweens.add({duration:300,targets:R,alpha:s,onComplete:()=>{this.appearNextLevelButtonContainer(o)}}),this.scene.tweens.add({duration:200,delay:250,targets:v,angle:k.angle,scale:S,alpha:1,onStart:()=>{v.setAngle(k.angle-30),v.setScale(S*2),v.setAlpha(0)}})}playAlphaTweenAfterGiftBoxOpened(s,o){this.renderGiftBoxBottom(),this.renderGiftBoxLid();const v=this.getGreenTickByType(this.progressTypes.gift);v.setAlpha(0),v.setVisible(!0);const S=this.getGreenTickFinalDisplayWidth(this.progressTypes.gift)/v.width;v.scale!==S&&v.setScale(S);const E=this.getGreenTickPositionByType(this.progressTypes.gift);(v.x!==E.x||v.y!==E.y)&&v.setPosition(E.x,E.y);const R=[],k=this.getSetImage();R.push(k);const W=this.getSetImageFrame();R.push(W);const K=this.getGiftBoxBottom();R.push(K);const q=this.getGiftBoxLid();R.push(q);const $=this.getVoyageCircleContainer();R.push($);const ne=this.getCongratsText();R.push(ne);const oe=this.getSetText();R.push(oe);const ce=this.getGiftProgressText();R.push(ce);const me=this.getSetProgressText();R.push(me),this.threeSliceFrameNames.forEach(fe=>{R.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.gift,fe))),R.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.set,fe))),R.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.gift,fe))),R.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.set,fe)))}),this.scene.tweens.add({duration:300,targets:R,alpha:s,onComplete:()=>{this.appearNextLevelButtonContainer(o)}}),this.scene.tweens.add({duration:200,delay:250,targets:v,angle:0,scale:S,alpha:1,onStart:()=>{v.setAngle(-30),v.setScale(S*2),v.setAlpha(0)}})}playAlphaTweenExceptSetImage(s,o){const v=[],S=this.getGiftBoxBottom();v.push(S);const E=this.getGiftBoxLid();v.push(E);const R=this.getVoyageCircleContainer();v.push(R);const k=this.getCongratsText();v.push(k);const W=this.getSetText();v.push(W);const K=this.getGiftProgressText();v.push(K);const q=this.getSetProgressText();v.push(q),this.threeSliceFrameNames.forEach($=>{v.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.gift,$))),v.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.set,$))),v.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.gift,$))),v.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.set,$)))}),this.scene.tweens.add({duration:o,targets:v,alpha:s})}playAlphaTweenExceptGiftBox(s,o){const v=[],S=this.getSetImage();v.push(S);const E=this.getSetImageFrame();v.push(E);const R=this.getVoyageCircleContainer();v.push(R);const k=this.getCongratsText();v.push(k);const W=this.getSetText();v.push(W);const K=this.getGiftProgressText();v.push(K);const q=this.getSetProgressText();v.push(q),this.threeSliceFrameNames.forEach($=>{v.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.gift,$))),v.push(this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.set,$))),v.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.gift,$))),v.push(this.gameObjectsMap.get(this.getBarFrontFrameObjectName(this.progressTypes.set,$)))}),this.scene.tweens.add({duration:o,targets:v,alpha:s})}getGiftBoxBottomPosition(s=this.giftBoxCurrentState){if(s===this.giftBoxStates.onProgressBar||s===this.giftBoxStates.claimed){const o=this.gameObjectsMap.get(this.getBarBackgroundFrameObjectName(this.progressTypes.gift,"right"));return{x:o.x+o.displayWidth*.4,y:this.getGiftBarY()+o.displayHeight*.55}}else if(s===this.giftBoxStates.opened)return{x:this.scene.game.canvas.width*.5,y:this.scene.game.canvas.height*.7}}getGiftBoxLidPosition(s=this.giftBoxCurrentState){const o=this.gameObjectsMap.get("giftBoxBottom");if(s===this.giftBoxStates.onProgressBar)return{x:o.x-o.displayWidth*.025,y:o.y-o.displayHeight*.6};if(s===this.giftBoxStates.opened)return{x:o.x-o.displayWidth*.325,y:o.y-o.displayHeight*.5};if(s===this.giftBoxStates.claimed)return{x:o.x-o.displayWidth*.625,y:o.y+o.displayHeight*.15}}getGiftBoxBottomDisplayWidth(s=this.giftBoxCurrentState){if(s===this.giftBoxStates.onProgressBar||s===this.giftBoxStates.claimed)return this.getBarBackgroundDisplayHeight()*1.4;if(s===this.giftBoxStates.opened)return this.getBarBackgroundDisplayHeight()*3.5}getGiftBoxLidDisplayWidth(s=this.giftBoxCurrentState){return this.getGiftBoxBottomDisplayWidth(s)*1.1}renderGiftBoxLid(){const s=this.getGiftBoxLidPosition(),o=this.getGiftBoxesTextureKeyCallback(),v=this.getGiftBoxesFrameNameCallback("lid","L");let S=this.gameObjectsMap.get("giftBoxLid");_.isNil(S)?(S=this.scene.add.image(s.x,s.y,o,v).setOrigin(.5,1).setDepth(this.depth+4),this.gameObjectsMap.set("giftBoxLid",S)):(S.x!==s.x||S.y!==s.y)&&S.setPosition(s.x,s.y);const E=this.getGiftBoxLidDisplayWidth()/S.width;S.scale!==E&&S.setScale(E),S.visible!==this.isVisible&&S.setVisible(this.isVisible)}renderGiftBoxBottom(){const s=this.getGiftBoxBottomPosition(),o=this.getGiftBoxesTextureKeyCallback(),v=this.getGiftBoxesFrameNameCallback("bottom","L");let S=this.gameObjectsMap.get("giftBoxBottom");_.isNil(S)?(S=this.scene.add.image(s.x,s.y,o,v).setOrigin(.5,1).setDepth(this.depth+3),this.gameObjectsMap.set("giftBoxBottom",S)):(S.x!==s.x||S.y!==s.y)&&S.setPosition(s.x,s.y);const E=this.getGiftBoxBottomDisplayWidth()/S.width;S.scale!==E&&S.setScale(E),S.visible!==this.isVisible&&S.setVisible(this.isVisible)}getSetTextY(){return this.getGiftBarY()+this.getBarBackgroundDisplayHeight()*1.5}getSetText(){return this.gameObjectsMap.get("setText")}renderSetText(){const s={x:this.CenterAbsoluteX,y:this.getSetTextY()},o=this.getSetTextValueByCallback(this.getCurrentSetID()),v=this.isCurrentLanguageRightToLeftCallback()?Array.from(o).reverse().join(""):o;let S=this.gameObjectsMap.get("setText");_.isNil(S)?(S=this.scene.add.bitmapText(s.x,s.y,this.getBitmapFontKeyCallback(),v).setDepth(this.depth),this.gameObjectsMap.set("setText",S)):((S.x!==s.x||S.y!==s.y)&&S.setPosition(s.x,s.y),S.text!==v&&S.setText(v));const E=this.getTextOriginYCallback();S.originY!==E&&S.setOrigin(.5,E);const R=this.getBarBackgroundDisplayHeight()*.6;S.fontSize!==R&&S.setFontSize(R),S.visible!==this.isVisible&&S.setVisible(this.isVisible)}getProgressTextName(s){return s+"progressText"}renderProgressText(s,o){const v={x:this.CenterAbsoluteX,y:o},S=this.getProgressTextName(s);let E=this.gameObjectsMap.get(S);_.isNil(E)?(E=this.scene.add.bitmapText(v.x,v.y,this.getBitmapFontKeyCallback(),s).setOrigin(.5).setDepth(this.depth+2),this.gameObjectsMap.set(S,E)):(E.x!==v.x||E.y!==v.y)&&E.setPosition(v.x,v.y);const R=this.getBarBackgroundDisplayHeight()*.6;E.fontSize!==R&&E.setFontSize(R),E.visible!==this.isVisible&&E.setVisible(this.isVisible)}getSetBarY(){return this.getGiftBarY()+this.getBarBackgroundDisplayHeight()*2.5}getBarFrontFrameObjectName(s,o){return s+"BarFrontFrameObject_"+o}renderBarFront(s,o){this.threeSliceFrameNames.forEach(v=>{const S=this.getBarFrontFrameObjectName(s,v);let E=this.gameObjectsMap.get(S);_.isNil(E)&&(E=this.scene.add.image(0,0,this.getBarFrontTextureKeyCallback(),v).setDepth(this.depth+1).setOrigin(0,.5),this.gameObjectsMap.set(S,E));const R=this.getBarFrontFrameScale(E);E.scale!==R&&E.setScale(R);const k=this.getBarFrontFrameCenterDisplayWidth();let W=this.CenterAbsoluteX;v==="left"?W+=-(k*.5+E.displayWidth):v==="center"?(W-=k*.5,E.displayWidth!==k&&(E.displayWidth=k)):v==="right"&&(W+=k*.5),(E.x!==W||E.y!==o)&&E.setPosition(W,o),E.visible!==this.isVisible&&E.setVisible(this.isVisible)})}getBarFrontFrameCenterDisplayWidth(){return this.getBarBackgroundCenterFrameDisplayWidth()*this.barFrontSizeMultiplier}getBarFrontFrameScale(s){return this.getBarBackgroundDisplayHeight()*this.barFrontSizeMultiplier/s.height}getGiftBarY(){return this.TopAbsoluteY+this.AbsoluteHeight*.6}getBarBackgroundFrameObjectName(s,o){return s+"BarBackgroundFrameObject_"+o}renderBarBackground(s,o){this.threeSliceFrameNames.forEach(v=>{const S=this.getBarBackgroundFrameObjectName(s,v);let E=this.gameObjectsMap.get(S);_.isNil(E)&&(E=this.scene.add.image(0,0,this.getBarBackgroundTextureKeyCallback(),v).setDepth(this.depth),this.gameObjectsMap.set(S,E));const R=this.getBarBackgroundDisplayHeight()/E.height;E.scale!==R&&E.setScale(R);const k=this.getBarBackgroundCenterFrameDisplayWidth();let W=this.CenterAbsoluteX;v==="left"?W+=-(k+E.displayWidth)*.5:v==="center"?(W+=0,E.displayWidth!==k&&(E.displayWidth=k)):v==="right"&&(W+=(k+E.displayWidth)*.5),(E.x!==W||E.y!==o)&&E.setPosition(W,o),E.visible!==this.isVisible&&E.setVisible(this.isVisible)})}getBarBackgroundDisplayHeight(){return Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.07}getBarBackgroundCenterFrameDisplayWidth(){return Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.6}renderVoyageText(s,o){const v=this.getVoyageTextCaptionByKeyCallback("VoyageText").toLocaleUpperCase(this.getCurrentLanguageCallback()),S=this.isCurrentLanguageRightToLeftCallback()?Array.from(v).reverse().join(""):v;let E=this.gameObjectsMap.get("voyageText");_.isNil(E)?(E=this.scene.add.bitmapText(0,o,this.getBitmapFontKeyCallback(),S),s.add(E),this.gameObjectsMap.set("voyageText",E)):(E.y!==o&&E.setY(o),E.text!==S&&E.setText(S));const R=this.getTextOriginYCallback();E.originY!==R&&E.setOrigin(.5,R);const k=this.getVoyageCircleDisplayHeight()*.1;E.fontSize!==k&&E.setFontSize(k)}getVoyageLevelText(){return this.gameObjectsMap.get("voyageLevelText")}renderVoyageLevelText(s){let o=this.gameObjectsMap.get("voyageLevelText");const v=this.getVoyageCircleDisplayHeight()*.16,S=-v*.5;return _.isNil(o)?(o=this.scene.add.bitmapText(0,S,this.getBitmapFontKeyCallback(),"0").setOrigin(.5),o.setTint(16777215),s.add(o),this.gameObjectsMap.set("voyageLevelText",o)):o.y!==S&&o.setY(S),o.fontSize!==v&&o.setFontSize(v),o}getVoyageCircleDisplayHeight(){return Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.4}renderVoyageCircle(s){let o=this.gameObjectsMap.get("voyageCircle");_.isNil(o)&&(o=this.scene.add.image(0,0,this.getVoyageCircleTextureKeyCallback()).setDepth(this.depth),s.add(o),this.gameObjectsMap.set("voyageCircle",o));const v=this.getVoyageCircleDisplayHeight()/o.height;o.scale!==v&&o.setScale(v)}getVoyageCircleContainer(){return this.gameObjectsMap.get("voyageCircleContainer")}renderVoyageCircleContainer(){const s={x:this.CenterAbsoluteX,y:this.TopAbsoluteY+this.AbsoluteHeight*.33};let o=this.gameObjectsMap.get("voyageCircleContainer");return _.isNil(o)?(o=this.scene.add.container(s.x,s.y).setDepth(this.depth),this.gameObjectsMap.set("voyageCircleContainer",o)):(o.x!==s.x||o.y!==s.y)&&o.setPosition(s.x,s.y),o.visible!==this.isVisible&&o.setVisible(this.isVisible),o}getCongratsText(){return this.gameObjectsMap.get("congratsText")}renderCongratsText(){const s={x:this.CenterAbsoluteX,y:this.TopAbsoluteY+this.AbsoluteHeight*.1},o=this.getCongratsTextCaptionByKeyCallback("CongratulationsText").toLocaleUpperCase(this.getCurrentLanguageCallback()),v=this.isCurrentLanguageRightToLeftCallback()?Array.from(o).reverse().join(""):o;let S=this.gameObjectsMap.get("congratsText");_.isNil(S)?(S=this.scene.add.bitmapText(s.x,s.y,this.getBitmapFontKeyCallback(),v).setDepth(this.depth),this.gameObjectsMap.set("congratsText",S)):((S.x!==s.x||S.y!==s.y)&&S.setPosition(s.x,s.y),S.text!==v&&S.setText(v));const E=this.getTextOriginYCallback();S.originY!==E&&S.setOrigin(.5,E);const R=this.getCongratsTextFontSize();S.fontSize!==R&&S.setFontSize(R),S.visible!==this.isVisible&&S.setVisible(this.isVisible)}getCongratsTextFontSize(){return Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.08}getButtonTextName(s){return"buttonText_"+s}renderNextLevelButtonText(s){for(let R=0;R<3;R++){const k=this.getButtonTextName(this.buttonTypes.nextLevel+"_"+R);let W=this.gameObjectsMap.get(k);_.isNil(W)&&(W=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),""),W.setTint(16777215),R===0?s.setData("levelText",W):R===1?s.setData("whiteSpace",W):R===2&&s.setData("levelNumber",W),s.add(W),this.gameObjectsMap.set(k,W));const K=this.getTextOriginYCallback()+.1;W.originY!==K&&W.setOrigin(.5,K);const q=this.getButtonDisplayHeight(this.buttonTypes.nextLevel)*.4;W.fontSize!==q&&W.setFontSize(q)}const o=s.getData("levelText"),v=s.getData("whiteSpace"),S=s.getData("levelNumber"),E=this.getNextLevelButtonTextXValues(o,v,S);o.x!==E.levelText&&o.setX(E.levelText),v.x!==E.whiteSpace&&v.setX(E.whiteSpace),S.x!==E.levelNumber&&S.setX(E.levelNumber)}renderSetClaimButtonText(s){const o=this.getButtonTextCaptionByKeyCallback("ClaimText"),v=this.isCurrentLanguageRightToLeftCallback()?Array.from(o).reverse().join(""):o,S=this.getButtonTextName(this.buttonTypes.setClaim);let E=this.gameObjectsMap.get(S);_.isNil(E)?(E=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),v),E.setTint(16777215),s.add(E),this.gameObjectsMap.set(S,E)):E.text!==v&&E.setText(v);const R=this.getTextOriginYCallback()+.1;E.originY!==R&&E.setOrigin(.5,R);const k=this.getButtonDisplayHeight(this.buttonTypes.setClaim)*.4;E.fontSize!==k&&E.setFontSize(k)}getButtonFrameObjectName(s,o){return"buttonFrameObjectName_"+s+"_"+o}getButtonContainerName(s){return"buttonContainer_"+s}getButtonContainer(s){return this.gameObjectsMap.get(this.getButtonContainerName(s))}renderButtonContainer(s){const o=this.getButtonContainerPosition(s);let v=this.getButtonContainer(s);return _.isNil(v)?(v=this.scene.add.container(o.x,o.y).setDepth(this.depth).setAlpha(0),this.gameObjectsMap.set(this.getButtonContainerName(s),v)):(v.x!==o.x||v.y!==o.y)&&v.setPosition(o.x,o.y),v.visible!==this.isVisible&&v.setVisible(this.isVisible),v}getButtonContainerPosition(s){if(s===this.buttonTypes.nextLevel)return{x:this.CenterAbsoluteX,y:this.TopAbsoluteY+this.AbsoluteHeight*.89};if(s===this.buttonTypes.setClaim)return{x:this.CenterAbsoluteX,y:this.TopAbsoluteY+this.AbsoluteHeight*.89}}getButtonDisplayHeight(s){if(s===this.buttonTypes.nextLevel)return Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.17;if(s===this.buttonTypes.setClaim)return Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.17}getButtonFrames(s){const o=[];return this.threeSliceFrameNames.forEach(v=>{const S=this.getButtonFrameObjectName(v,s),E=this.gameObjectsMap.get(S);o.push(E)}),o}getButtonDisplayWidth(s){let o=0;return this.threeSliceFrameNames.forEach(v=>{const S=this.getButtonFrameObjectName(v,s),E=this.gameObjectsMap.get(S);o+=E.displayWidth}),o}renderButton(s,o){this.threeSliceFrameNames.forEach((v,S)=>{const E=this.getButtonFrameObjectName(v,o);let R=this.gameObjectsMap.get(E);_.isNil(R)&&(R=this.scene.add.image(0,0,this.getButtonTextureKeyCallback(),v),R.setTint(this.buttonColors[o]),s.add(R),this.gameObjectsMap.set(E,R));const k=this.getButtonDisplayHeight(o)/R.height;R.scale!==k&&R.setScale(k);const W=this.getButtonCenterDisplayWidth(o);let K;v==="left"?K=-(W+R.displayWidth)*.5:v==="center"?(K=0,R.displayWidth!==W&&(R.displayWidth=W)):v==="right"&&(K=(W+R.displayWidth)*.5),R.x!==K&&R.setX(K)})}getButtonCenterDisplayWidth(s){if(s===this.buttonTypes.nextLevel)return Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.4;if(s===this.buttonTypes.setClaim)return Math.min(this.getAbsoluteWidth(),this.AbsoluteHeight)*.4}}class Qt extends Ae{constructor(s){super(s),this.smallGems=[],this.areGemsAdded=!1}load(){super.load(),this.loadSounds()}soundLoadComplete(){super.soundLoadComplete(),this.isSoundLoadComplete&&(this.onReady(),this.isSoundLoadComplete=!1)}render(){super.render(),this.addGems(),this.addPrizeText(),this.addGiftBoxOpenText()}playBoxOpenSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.boxOpen[0].key)}playGemShowSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.gemShow[0].key)}playGemDiffuseSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.gemDiffuse[0].key)}getBigGemPosition(s){return{x:s.x-s.displayWidth*.04,y:this.scene.game.canvas.height*.25}}getBigGemMaskPosition(s){return{x:s.x-s.displayWidth*.015,y:s.y-s.displayHeight*.75}}playGiftBoxOpenTween(s){const o=s.lidImage,v=s.bottomImage,S=s.lidImageInitialScale,E=s.bottomImageInitialScale,R=s.lidImageFinalScale,k=s.bottomImageFinalScale,W=s.curveForCenter,K=this.isCurrentLanguageRightToLeftCallback()?Array.from(s.prizeTextValue).reverse().join(""):s.prizeTextValue,q=s.isEndLevel,$=this.getBigGemPosition(v),ne={t:0,vec:new Phaser.Math.Vector2};W.getPoint(ne.t,ne.vec),v.setScale(E),o.setScale(S),v.setPosition(ne.vec.x,ne.vec.y),o.setPosition(ne.vec.x-o.displayWidth*.025,ne.vec.y-v.displayHeight*.6),v.setAlpha(1),o.setAlpha(1),this.playBoxOpenSound(),this.scene.tweens.add({targets:ne,duration:700,t:1,onStart:()=>{},onUpdate:()=>{W.getPoint(ne.t,ne.vec),o.setScale(ne.t*(R-S)+S),v.setScale(ne.t*(k-E)+E),o.setPosition(ne.vec.x-o.displayWidth*.025,ne.vec.y-v.displayHeight*.6),v.setPosition(ne.vec.x,ne.vec.y)},onComplete:()=>{this.scene.tweens.addCounter({duration:250,from:1,to:1.2,onUpdate:oe=>{const ce=oe.getValue();v.scaleX=k+(ce-1)*k,v.scaleY=k-(ce-1)*.5*k,o.scaleX=R+(ce-1)*R,o.scaleY=R-(ce-1)*.5*R},onComplete:()=>{const oe=v.scaleX,ce=v.scaleY,me=o.scaleX,fe=o.scaleY,xe=new Phaser.Curves.QuadraticBezier({x:o.x,y:o.y},{x:o.x,y:o.y-v.displayHeight},{x:o.x-v.displayWidth*.25,y:o.y-v.displayHeight}),ve={t:0,vec:new Phaser.Math.Vector2};this.scene.tweens.add({duration:350,targets:ve,t:1,onUpdate:()=>{xe.getPoint(ve.t,ve.vec),o.setAngle(-30*ve.t),o.setPosition(ve.vec.x,ve.vec.y);const We=ve.t<.5?ve.t*2:1;v.scaleX=oe+(k-oe)*We,ve.t<.5?v.scaleY=ce+(k*1.2-ce)*ve.t*2:v.scaleY=k*(1.2-.4*(ve.t-.5)),o.scaleX=me+(R-me)*ve.t,o.scaleY=fe+(R-fe)*ve.t},onComplete:()=>{this.scene.tweens.add({duration:350,targets:o,y:v.y-k*v.height*.5,onComplete:()=>{this.scene.tweens.add({duration:100,targets:o,angle:-75,onComplete:()=>{s.onOpenCallback();const We=this.getBigGemFinalScale(v),Ze=We*.5;this.playGemShowSound(),this.scene.tweens.add({duration:300,targets:this.bigGem,y:$.y,scale:We,onStart:()=>{this.bigGem.setScale(Ze);const ke=this.getBigGemPosition(v);this.bigGem.setPosition(ke.x,v.y),this.bigGem.setVisible(!0),this.bigGem.setAlpha(1);const ut=this.getBigGemMaskPosition(v);this.applyMaskToBigGem(ut.x,ut.y)},onComplete:()=>{this.clearMaskForBigGem();const ke=.25;this.scene.tweens.add({duration:800,targets:[this.prizeText,this.bigGem],y:"+="+this.bigGem.displayHeight*ke,alpha:1,onStart:()=>{this.prizeText!==K&&this.prizeText.setText(K);const ut=this.getPrizeTextFontSize();this.prizeText.fontSize!==ut&&this.prizeText.setFontSize(ut);const De=this.getPrizeTextPosition();(this.prizeText.x!==De.x||this.prizeText.y!==De.y)&&this.prizeText.setPosition(De.x,De.y),this.prizeText.setAlpha(0),this.prizeText.setVisible(!0)},onComplete:()=>{this.scene.tweens.add({duration:300,targets:this.giftBoxOpenText,alpha:1,onStart:()=>{const ut=this.getCaptionByKeyCallback("GiftboxOpenText"),De=this.isCurrentLanguageRightToLeftCallback()?Array.from(ut).reverse().join(""):ut;this.giftBoxOpenText.text!==De&&this.giftBoxOpenText.setText(De);const Tt=this.getGiftBoxOpenTextFontSize(v);this.giftBoxOpenText.fontSize!==Tt&&this.giftBoxOpenText.setFontSize(Tt);const xt=this.getGiftBoxOpenTextPosition(v);(this.giftBoxOpenText.x!==xt.x||this.giftBoxOpenText.y!==xt.y)&&this.giftBoxOpenText.setPosition(xt.x,xt.y),this.giftBoxOpenText.setAlpha(0),this.giftBoxOpenText.setVisible(!0),this.scene.tweens.add({duration:800,targets:[this.prizeText,this.bigGem],y:"-="+this.bigGem.displayHeight*ke,onComplete:()=>{this.scene.tweens.add({duration:800,targets:[this.bigGem,this.prizeText],y:Pt=>Pt.y+this.bigGem.displayHeight*ke,yoyo:!0,repeat:-1,onRepeat:Pt=>{const ot=this.getBigGemFinalScale(v);this.bigGem.scale!==ot&&this.bigGem.setScale(ot);const Ot=this.getBigGemPosition(v);(this.bigGem.x!==Ot.x||this.bigGem.y!==Ot.y)&&this.bigGem.setPosition(Ot.x,Ot.y);const ze=this.getPrizeTextFontSize();this.prizeText.fontSize!==ze&&this.prizeText.setFontSize(ze);const qe=this.getPrizeTextPosition();(this.prizeText.x!==qe.x||this.prizeText.y!==qe.y)&&this.prizeText.setPosition(qe.x,qe.y);const dt=this.getGiftBoxOpenTextFontSize(v);this.giftBoxOpenText.fontSize!==dt&&this.giftBoxOpenText.setFontSize(dt);const Je=this.getGiftBoxOpenTextPosition(v);(this.giftBoxOpenText.x!==Je.x||this.giftBoxOpenText.y!==Je.y)&&this.giftBoxOpenText.setPosition(Je.x,Je.y),Pt.data.forEach(_t=>{_t.key==="y"&&(_t.target.type==="Image"?_t.start!==Ot.x&&(_t.start=Ot.y):_t.target.type==="BitmapText"&&_t.start!==qe.y&&(_t.start=qe.y))})}})}})}}),this.scene.input.once("pointerdown",()=>{s.onTapToClaimCallback(),this.scene.tweens.killTweensOf(this.bigGem),this.scene.tweens.killTweensOf(this.prizeText);const ut=this.getBigGemFinalScale(v),De=this.getPrizeTextFontSize();this.scene.tweens.add({duration:300,targets:[this.bigGem,this.prizeText],scale:(Tt,xt,Pt,ot)=>ot===0?ut*1.25:Tt.scale,fontSize:(Tt,xt,Pt,ot)=>ot===1?De*1.25:Tt.fontSize,alpha:(Tt,xt,Pt,ot)=>ot===1?0:Tt.alpha,onComplete:()=>{this.playGemDiffuseSound(),this.scene.tweens.add({duration:300,targets:[this.bigGem,this.giftBoxOpenText],scale:(Tt,xt,Pt,ot)=>ot===0?0:Tt.scale,alpha:0,onStart:()=>{const Tt=this.getBigGemFinalScale(v),xt=this.bigGem.x,Pt=this.bigGem.y,ot=this.bigGem.displayWidth,Ot=this.bigGem.displayHeight,ze=parseInt(this.prizeText.text),qe=[],dt=Math.floor(ze/this.smallGems.length);this.currentPrize=-1,this.smallGems.forEach((Je,Vt,_t)=>{Vt===_t.length-1&&qe.push(dt+(ze-dt*_t.length)),qe.push(dt),Je.setAlpha(0),Je.setScale(0),Je.setAngle(30),Je.setVisible(!0);let Lt,ii,yt,at,gt;if(Vt===0)Lt=xt-ot*.1,ii=Pt-Ot*.4,yt=xt-ot*.5,at=Pt-Ot*.7,gt=50;else if(Vt===1)Lt=xt+ot*.1,ii=Pt-Ot*.2,yt=xt+ot*.5,at=Pt-Ot*.5,gt=100;else if(Vt===2)Lt=xt+ot*.1,ii=Pt+Ot*.2,yt=xt-ot*.7,at=Pt+Ot*.2,gt=150;else if(Vt===3)Lt=xt+ot*.2,ii=Pt+Ot*.2,yt=xt+ot*.8,at=Pt+Ot*.4,gt=200;else if(Vt===4)Lt=xt,ii=Pt+Ot*.3,yt=xt+ot*.1,at=Pt+Ot,gt=250;else if(Vt===5)Lt=xt,ii=Pt+Ot*.3,yt=xt+ot*.1,at=Pt+Ot*.1,gt=300;else if(Vt===6)Lt=xt-ot*.2,ii=Pt+Ot*.2,yt=xt-ot*.5,at=Pt,gt=350;else if(Vt===7)Lt=xt,ii=Pt,yt=xt+ot*.5,at=Pt+Ot*.5,gt=400;else return;Je.setPosition(Lt,ii),this.scene.tweens.add({duration:300,delay:gt,targets:Je,x:yt,y:at,scale:Tt*.4,alpha:1,onComplete:()=>{this.scene.tweens.killTweensOf([this.bigGem,v,o,this.prizeText]),this.moveGemToGemCounterCallback({gem:Je,prize:qe[Vt],giftBoxBottomImage:v,giftBoxLidImage:o,isEndLevel:Vt===_t.length-1?q:!1,isLastGem:Vt===_t.length-1})}})})}})}})})}})}})}})}})}})}})}})}getBigGemFinalScale(s){return s.displayWidth/this.bigGem.width}getGiftBoxOpenTextFontSize(s){return s.displayHeight*.15}getGiftBoxOpenTextPosition(s){return{x:this.scene.game.canvas.width*.5,y:s.y+s.displayHeight*.5}}getPrizeTextPosition(){return{x:this.bigGem.x+this.bigGem.displayWidth*.05,y:this.bigGem.y+this.bigGem.displayHeight}}getPrizeTextFontSize(){return this.bigGem.displayHeight*.2}applyMaskToBigGem(s,o){let v=this.gameObjectsMap.get("bigGemMaskShape");if(_.isNil(v)?(v=this.scene.make.graphics(),this.gameObjectsMap.set("bigGemMaskShape",v)):v.clear(),_.isNil(this.bigGem.mask)){const S=v.createGeometryMask(v);this.bigGem.setMask(S)}v.slice(s,o,Math.min(this.scene.game.canvas.width,this.scene.game.canvas.height),195*Math.PI/180,348*Math.PI/180),v.fillPath()}clearMaskForBigGem(){const s=this.gameObjectsMap.get("bigGemMaskShape");_.isNil(s)||s.clear(),this.bigGem.clearMask()}addGems(){if(!this.areGemsAdded){this.areGemsAdded=!0;for(let s=0;s<9;s++){const o=this.scene.add.image(0,0,this.getGemTextureKeyCallback()).setDepth(this.getGemDepth()).setAngle(30).setAlpha(0);s===0?this.bigGem=o:this.smallGems.push(o)}}}getGemDepth(){return this.depth+10}getTextDepth(){return this.depth+9}addPrizeText(){_.isNil(this.prizeText)&&(this.prizeText=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),"").setDepth(this.getTextDepth()).setOrigin(.5).setAlpha(0));const s=this.getTextOriginYCallback();this.prizeText.originY!==s&&this.prizeText.setOrigin(.5,s)}addGiftBoxOpenText(){_.isNil(this.giftBoxOpenText)&&(this.giftBoxOpenText=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),"").setDepth(this.getTextDepth()).setOrigin(.5).setAlpha(0));const s=this.getTextOriginYCallback();this.giftBoxOpenText.originY!==s&&this.giftBoxOpenText.setOrigin(.5,s)}}function Yi(I){return Yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Yi(I)}function Fi(I,s){if(Yi(I)!=="object"||I===null)return I;var o=I[Symbol.toPrimitive];if(o!==void 0){var v=o.call(I,s||"default");if(Yi(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(I)}function Tn(I){var s=Fi(I,"string");return Yi(s)==="symbol"?s:String(s)}function Ci(I,s,o){return s=Tn(s),s in I?Object.defineProperty(I,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):I[s]=o,I}var zn,Rt,kh,Iu,Lr,Mr,Dh,Ms={},lo=[],Fh=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ln(I,s){for(var o in s)I[o]=s[o];return I}function uo(I){var s=I.parentNode;s&&s.removeChild(I)}function Fe(I,s,o){var v,S,E,R={};for(E in s)E=="key"?v=s[E]:E=="ref"?S=s[E]:R[E]=s[E];if(arguments.length>2&&(R.children=arguments.length>3?zn.call(arguments,2):o),typeof I=="function"&&I.defaultProps!=null)for(E in I.defaultProps)R[E]===void 0&&(R[E]=I.defaultProps[E]);return ir(I,R,v,S,null)}function ir(I,s,o,v,S){var E={type:I,props:s,key:o,ref:v,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:S==null?++kh:S};return S==null&&Rt.vnode!=null&&Rt.vnode(E),E}function yd(){return{current:null}}function ia(I){return I.children}function nr(I,s){this.props=I,this.context=s}function ls(I,s){if(s==null)return I.__?ls(I.__,I.__.__k.indexOf(I)+1):null;for(var o;s<I.__k.length;s++)if((o=I.__k[s])!=null&&o.__e!=null)return o.__e;return typeof I.type=="function"?ls(I):null}function co(I){var s,o;if((I=I.__)!=null&&I.__c!=null){for(I.__e=I.__c.base=null,s=0;s<I.__k.length;s++)if((o=I.__k[s])!=null&&o.__e!=null){I.__e=I.__c.base=o.__e;break}return co(I)}}function fo(I){(!I.__d&&(I.__d=!0)&&Lr.push(I)&&!Rr.__r++||Mr!==Rt.debounceRendering)&&((Mr=Rt.debounceRendering)||setTimeout)(Rr)}function Rr(){for(var I;Rr.__r=Lr.length;)I=Lr.sort(function(s,o){return s.__v.__b-o.__v.__b}),Lr=[],I.some(function(s){var o,v,S,E,R,k;s.__d&&(R=(E=(o=s).__v).__e,(k=o.__P)&&(v=[],(S=Ln({},E)).__v=E.__v+1,ra(k,E,S,o.__n,k.ownerSVGElement!==void 0,E.__h!=null?[R]:null,v,R==null?ls(E):R,E.__h),yo(v,E),E.__e!=R&&co(E)))})}function po(I,s,o,v,S,E,R,k,W,K){var q,$,ne,oe,ce,me,fe,xe=v&&v.__k||lo,ve=xe.length;for(o.__k=[],q=0;q<s.length;q++)if((oe=o.__k[q]=(oe=s[q])==null||typeof oe=="boolean"?null:typeof oe=="string"||typeof oe=="number"||typeof oe=="bigint"?ir(null,oe,null,null,oe):Array.isArray(oe)?ir(ia,{children:oe},null,null,null):oe.__b>0?ir(oe.type,oe.props,oe.key,oe.ref?oe.ref:null,oe.__v):oe)!=null){if(oe.__=o,oe.__b=o.__b+1,(ne=xe[q])===null||ne&&oe.key==ne.key&&oe.type===ne.type)xe[q]=void 0;else for($=0;$<ve;$++){if((ne=xe[$])&&oe.key==ne.key&&oe.type===ne.type){xe[$]=void 0;break}ne=null}ra(I,oe,ne=ne||Ms,S,E,R,k,W,K),ce=oe.__e,($=oe.ref)&&ne.ref!=$&&(fe||(fe=[]),ne.ref&&fe.push(ne.ref,null,oe),fe.push($,oe.__c||ce,oe)),ce!=null?(me==null&&(me=ce),typeof oe.type=="function"&&oe.__k===ne.__k?oe.__d=W=na(oe,W,I):W=sa(I,oe,ne,xe,ce,W),typeof o.type=="function"&&(o.__d=W)):W&&ne.__e==W&&W.parentNode!=I&&(W=ls(ne))}for(o.__e=me,q=ve;q--;)xe[q]!=null&&xo(xe[q],xe[q]);if(fe)for(q=0;q<fe.length;q++)vo(fe[q],fe[++q],fe[++q])}function na(I,s,o){for(var v,S=I.__k,E=0;S&&E<S.length;E++)(v=S[E])&&(v.__=I,s=typeof v.type=="function"?na(v,s,o):sa(o,v,v,S,v.__e,s));return s}function Hh(I,s){return s=s||[],I==null||typeof I=="boolean"||(Array.isArray(I)?I.some(function(o){Hh(o,s)}):s.push(I)),s}function sa(I,s,o,v,S,E){var R,k,W;if(s.__d!==void 0)R=s.__d,s.__d=void 0;else if(o==null||S!=E||S.parentNode==null)e:if(E==null||E.parentNode!==I)I.appendChild(S),R=null;else{for(k=E,W=0;(k=k.nextSibling)&&W<v.length;W+=1)if(k==S)break e;I.insertBefore(S,E),R=E}return R!==void 0?R:S.nextSibling}function go(I,s,o,v,S){var E;for(E in o)E==="children"||E==="key"||E in s||Nr(I,E,null,o[E],v);for(E in s)S&&typeof s[E]!="function"||E==="children"||E==="key"||E==="value"||E==="checked"||o[E]===s[E]||Nr(I,E,s[E],o[E],v)}function Rs(I,s,o){s[0]==="-"?I.setProperty(s,o):I[s]=o==null?"":typeof o!="number"||Fh.test(s)?o:o+"px"}function Nr(I,s,o,v,S){var E;e:if(s==="style")if(typeof o=="string")I.style.cssText=o;else{if(typeof v=="string"&&(I.style.cssText=v=""),v)for(s in v)o&&s in o||Rs(I.style,s,"");if(o)for(s in o)v&&o[s]===v[s]||Rs(I.style,s,o[s])}else if(s[0]==="o"&&s[1]==="n")E=s!==(s=s.replace(/Capture$/,"")),s=s.toLowerCase()in I?s.toLowerCase().slice(2):s.slice(2),I.l||(I.l={}),I.l[s+E]=o,o?v||I.addEventListener(s,E?Gh:mo,E):I.removeEventListener(s,E?Gh:mo,E);else if(s!=="dangerouslySetInnerHTML"){if(S)s=s.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(s!=="href"&&s!=="list"&&s!=="form"&&s!=="tabIndex"&&s!=="download"&&s in I)try{I[s]=o==null?"":o;break e}catch(R){}typeof o=="function"||(o==null||o===!1&&s.indexOf("-")==-1?I.removeAttribute(s):I.setAttribute(s,o))}}function mo(I){this.l[I.type+!1](Rt.event?Rt.event(I):I)}function Gh(I){this.l[I.type+!0](Rt.event?Rt.event(I):I)}function ra(I,s,o,v,S,E,R,k,W){var K,q,$,ne,oe,ce,me,fe,xe,ve,We,Ze,ke,ut,De,Tt=s.type;if(s.constructor!==void 0)return null;o.__h!=null&&(W=o.__h,k=s.__e=o.__e,s.__h=null,E=[k]),(K=Rt.__b)&&K(s);try{e:if(typeof Tt=="function"){if(fe=s.props,xe=(K=Tt.contextType)&&v[K.__c],ve=K?xe?xe.props.value:K.__:v,o.__c?me=(q=s.__c=o.__c).__=q.__E:("prototype"in Tt&&Tt.prototype.render?s.__c=q=new Tt(fe,ve):(s.__c=q=new nr(fe,ve),q.constructor=Tt,q.render=Ou),xe&&xe.sub(q),q.props=fe,q.state||(q.state={}),q.context=ve,q.__n=v,$=q.__d=!0,q.__h=[],q._sb=[]),q.__s==null&&(q.__s=q.state),Tt.getDerivedStateFromProps!=null&&(q.__s==q.state&&(q.__s=Ln({},q.__s)),Ln(q.__s,Tt.getDerivedStateFromProps(fe,q.__s))),ne=q.props,oe=q.state,$)Tt.getDerivedStateFromProps==null&&q.componentWillMount!=null&&q.componentWillMount(),q.componentDidMount!=null&&q.__h.push(q.componentDidMount);else{if(Tt.getDerivedStateFromProps==null&&fe!==ne&&q.componentWillReceiveProps!=null&&q.componentWillReceiveProps(fe,ve),!q.__e&&q.shouldComponentUpdate!=null&&q.shouldComponentUpdate(fe,q.__s,ve)===!1||s.__v===o.__v){for(q.props=fe,q.state=q.__s,s.__v!==o.__v&&(q.__d=!1),q.__v=s,s.__e=o.__e,s.__k=o.__k,s.__k.forEach(function(xt){xt&&(xt.__=s)}),We=0;We<q._sb.length;We++)q.__h.push(q._sb[We]);q._sb=[],q.__h.length&&R.push(q);break e}q.componentWillUpdate!=null&&q.componentWillUpdate(fe,q.__s,ve),q.componentDidUpdate!=null&&q.__h.push(function(){q.componentDidUpdate(ne,oe,ce)})}if(q.context=ve,q.props=fe,q.__v=s,q.__P=I,Ze=Rt.__r,ke=0,"prototype"in Tt&&Tt.prototype.render){for(q.state=q.__s,q.__d=!1,Ze&&Ze(s),K=q.render(q.props,q.state,q.context),ut=0;ut<q._sb.length;ut++)q.__h.push(q._sb[ut]);q._sb=[]}else do q.__d=!1,Ze&&Ze(s),K=q.render(q.props,q.state,q.context),q.state=q.__s;while(q.__d&&++ke<25);q.state=q.__s,q.getChildContext!=null&&(v=Ln(Ln({},v),q.getChildContext())),$||q.getSnapshotBeforeUpdate==null||(ce=q.getSnapshotBeforeUpdate(ne,oe)),De=K!=null&&K.type===ia&&K.key==null?K.props.children:K,po(I,Array.isArray(De)?De:[De],s,o,v,S,E,R,k,W),q.base=s.__e,s.__h=null,q.__h.length&&R.push(q),me&&(q.__E=q.__=null),q.__e=!1}else E==null&&s.__v===o.__v?(s.__k=o.__k,s.__e=o.__e):s.__e=Uh(o.__e,s,o,v,S,E,R,W);(K=Rt.diffed)&&K(s)}catch(xt){s.__v=null,(W||E!=null)&&(s.__e=k,s.__h=!!W,E[E.indexOf(k)]=null),Rt.__e(xt,s,o)}}function yo(I,s){Rt.__c&&Rt.__c(s,I),I.some(function(o){try{I=o.__h,o.__h=[],I.some(function(v){v.call(o)})}catch(v){Rt.__e(v,o.__v)}})}function Uh(I,s,o,v,S,E,R,k){var W,K,q,$=o.props,ne=s.props,oe=s.type,ce=0;if(oe==="svg"&&(S=!0),E!=null){for(;ce<E.length;ce++)if((W=E[ce])&&"setAttribute"in W==!!oe&&(oe?W.localName===oe:W.nodeType===3)){I=W,E[ce]=null;break}}if(I==null){if(oe===null)return document.createTextNode(ne);I=S?document.createElementNS("http://www.w3.org/2000/svg",oe):document.createElement(oe,ne.is&&ne),E=null,k=!1}if(oe===null)$===ne||k&&I.data===ne||(I.data=ne);else{if(E=E&&zn.call(I.childNodes),K=($=o.props||Ms).dangerouslySetInnerHTML,q=ne.dangerouslySetInnerHTML,!k){if(E!=null)for($={},ce=0;ce<I.attributes.length;ce++)$[I.attributes[ce].name]=I.attributes[ce].value;(q||K)&&(q&&(K&&q.__html==K.__html||q.__html===I.innerHTML)||(I.innerHTML=q&&q.__html||""))}if(go(I,ne,$,S,k),q)s.__k=[];else if(ce=s.props.children,po(I,Array.isArray(ce)?ce:[ce],s,o,v,S&&oe!=="foreignObject",E,R,E?E[0]:o.__k&&ls(o,0),k),E!=null)for(ce=E.length;ce--;)E[ce]!=null&&uo(E[ce]);k||("value"in ne&&(ce=ne.value)!==void 0&&(ce!==I.value||oe==="progress"&&!ce||oe==="option"&&ce!==$.value)&&Nr(I,"value",ce,$.value,!1),"checked"in ne&&(ce=ne.checked)!==void 0&&ce!==I.checked&&Nr(I,"checked",ce,$.checked,!1))}return I}function vo(I,s,o){try{typeof I=="function"?I(s):I.current=s}catch(v){Rt.__e(v,o)}}function xo(I,s,o){var v,S;if(Rt.unmount&&Rt.unmount(I),(v=I.ref)&&(v.current&&v.current!==I.__e||vo(v,null,s)),(v=I.__c)!=null){if(v.componentWillUnmount)try{v.componentWillUnmount()}catch(E){Rt.__e(E,s)}v.base=v.__P=null,I.__c=void 0}if(v=I.__k)for(S=0;S<v.length;S++)v[S]&&xo(v[S],s,o||typeof I.type!="function");o||I.__e==null||uo(I.__e),I.__=I.__e=I.__d=void 0}function Ou(I,s,o){return this.constructor(I,o)}function Wh(I,s,o){var v,S,E;Rt.__&&Rt.__(I,s),S=(v=typeof o=="function")?null:o&&o.__k||s.__k,E=[],ra(s,I=(!v&&o||s).__k=Fe(ia,null,[I]),S||Ms,Ms,s.ownerSVGElement!==void 0,!v&&o?[o]:S?null:s.firstChild?zn.call(s.childNodes):null,E,!v&&o?o:S?S.__e:s.firstChild,v),yo(E,I)}function Lu(I,s){Wh(I,s,Lu)}function vd(I,s,o){var v,S,E,R=Ln({},I.props);for(E in s)E=="key"?v=s[E]:E=="ref"?S=s[E]:R[E]=s[E];return arguments.length>2&&(R.children=arguments.length>3?zn.call(arguments,2):o),ir(I.type,R,v||I.key,S||I.ref,null)}function zh(I,s){var o={__c:s="__cC"+Dh++,__:I,Consumer:function(v,S){return v.children(S)},Provider:function(v){var S,E;return this.getChildContext||(S=[],(E={})[s]=this,this.getChildContext=function(){return E},this.shouldComponentUpdate=function(R){this.props.value!==R.value&&S.some(fo)},this.sub=function(R){S.push(R);var k=R.componentWillUnmount;R.componentWillUnmount=function(){S.splice(S.indexOf(R),1),k&&k.call(R)}}),v.children}};return o.Provider.__=o.Consumer.contextType=o}zn=lo.slice,Rt={__e:function(I,s,o,v){for(var S,E,R;s=s.__;)if((S=s.__c)&&!S.__)try{if((E=S.constructor)&&E.getDerivedStateFromError!=null&&(S.setState(E.getDerivedStateFromError(I)),R=S.__d),S.componentDidCatch!=null&&(S.componentDidCatch(I,v||{}),R=S.__d),R)return S.__E=S}catch(k){I=k}throw I}},kh=0,Iu=function(I){return I!=null&&I.constructor===void 0},nr.prototype.setState=function(I,s){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ln({},this.state),typeof I=="function"&&(I=I(Ln({},o),this.props)),I&&Ln(o,I),I!=null&&this.__v&&(s&&this._sb.push(s),fo(this))},nr.prototype.forceUpdate=function(I){this.__v&&(this.__e=!0,I&&this.__h.push(I),fo(this))},nr.prototype.render=ia,Lr=[],Rr.__r=0,Dh=0;function Mu(I){if(Array.isArray(I))return I}function Ru(I,s){var o=I==null?null:typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(o!=null){var v,S,E,R,k=[],W=!0,K=!1;try{if(E=(o=o.call(I)).next,s===0){if(Object(o)!==o)return;W=!1}else for(;!(W=(v=E.call(o)).done)&&(k.push(v.value),k.length!==s);W=!0);}catch(q){K=!0,S=q}finally{try{if(!W&&o.return!=null&&(R=o.return(),Object(R)!==R))return}finally{if(K)throw S}}return k}}function Vh(I,s){(s==null||s>I.length)&&(s=I.length);for(var o=0,v=new Array(s);o<s;o++)v[o]=I[o];return v}function Nu(I,s){if(I){if(typeof I=="string")return Vh(I,s);var o=Object.prototype.toString.call(I).slice(8,-1);if(o==="Object"&&I.constructor&&(o=I.constructor.name),o==="Map"||o==="Set")return Array.from(I);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Vh(I,s)}}function Bu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ri(I,s){return Mu(I)||Ru(I,s)||Nu(I,s)||Bu()}var Zt,oi,Ao,Yh,Ns=0,jh=[],Ti=[],bo=Rt.__b,sr=Rt.__r,To=Rt.diffed,aa=Rt.__c,en=Rt.unmount;function us(I,s){Rt.__h&&Rt.__h(oi,I,Ns||s),Ns=0;var o=oi.__H||(oi.__H={__:[],__h:[]});return I>=o.__.length&&o.__.push({__V:Ti}),o.__[I]}function rr(I){return Ns=1,Kh(qh,I)}function Kh(I,s,o){var v=us(Zt++,2);if(v.t=I,!v.__c&&(v.__=[o?o(s):qh(void 0,s),function(E){var R=v.__N?v.__N[0]:v.__[0],k=v.t(R,E);R!==k&&(v.__N=[k,v.__[1]],v.__c.setState({}))}],v.__c=oi,!oi.u)){oi.u=!0;var S=oi.shouldComponentUpdate;oi.shouldComponentUpdate=function(E,R,k){if(!v.__c.__H)return!0;var W=v.__c.__H.__.filter(function(q){return q.__c});if(W.every(function(q){return!q.__N}))return!S||S.call(this,E,R,k);var K=!1;return W.forEach(function(q){if(q.__N){var $=q.__[0];q.__=q.__N,q.__N=void 0,$!==q.__[0]&&(K=!0)}}),!(!K&&v.__c.props===E)&&(!S||S.call(this,E,R,k))}}return v.__N||v.__}function oa(I,s){var o=us(Zt++,3);!Rt.__s&&Br(o.__H,s)&&(o.__=I,o.i=s,oi.__H.__h.push(o))}function Xh(I,s){var o=us(Zt++,4);!n.__s&&Br(o.__H,s)&&(o.__=I,o.i=s,oi.__h.push(o))}function Pu(I){return Ns=5,ha(function(){return{current:I}},[])}function dn(I,s,o){Ns=6,Xh(function(){return typeof I=="function"?(I(s()),function(){return I(null)}):I?(I.current=s(),function(){return I.current=null}):void 0},o==null?o:o.concat(I))}function ha(I,s){var o=us(Zt++,7);return Br(o.__H,s)?(o.__V=I(),o.i=s,o.__h=I,o.__V):o.__}function Sn(I,s){return Ns=8,ha(function(){return I},s)}function xd(I){var s=oi.context[I.__c],o=us(Zt++,9);return o.c=I,s?(o.__==null&&(o.__=!0,s.sub(oi)),s.props.value):I.__}function ku(I,s){n.useDebugValue&&n.useDebugValue(s?s(I):I)}function Bs(I){var s=us(Zt++,10),o=rr();return s.__=I,oi.componentDidCatch||(oi.componentDidCatch=function(v,S){s.__&&s.__(v,S),o[1](v)}),[o[0],function(){o[1](void 0)}]}function So(){var I=us(Zt++,11);if(!I.__){for(var s=oi.__v;s!==null&&!s.__m&&s.__!==null;)s=s.__;var o=s.__m||(s.__m=[0,0]);I.__="P"+o[0]+"-"+o[1]++}return I.__}function _o(){for(var I;I=jh.shift();)if(I.__P&&I.__H)try{I.__H.__h.forEach(ar),I.__H.__h.forEach(wo),I.__H.__h=[]}catch(s){I.__H.__h=[],Rt.__e(s,I.__v)}}Rt.__b=function(I){oi=null,bo&&bo(I)},Rt.__r=function(I){sr&&sr(I),Zt=0;var s=(oi=I.__c).__H;s&&(Ao===oi?(s.__h=[],oi.__h=[],s.__.forEach(function(o){o.__N&&(o.__=o.__N),o.__V=Ti,o.__N=o.i=void 0})):(s.__h.forEach(ar),s.__h.forEach(wo),s.__h=[])),Ao=oi},Rt.diffed=function(I){To&&To(I);var s=I.__c;s&&s.__H&&(s.__H.__h.length&&(jh.push(s)!==1&&Yh===Rt.requestAnimationFrame||((Yh=Rt.requestAnimationFrame)||cs)(_o)),s.__H.__.forEach(function(o){o.i&&(o.__H=o.i),o.__V!==Ti&&(o.__=o.__V),o.i=void 0,o.__V=Ti})),Ao=oi=null},Rt.__c=function(I,s){s.some(function(o){try{o.__h.forEach(ar),o.__h=o.__h.filter(function(v){return!v.__||wo(v)})}catch(v){s.some(function(S){S.__h&&(S.__h=[])}),s=[],Rt.__e(v,o.__v)}}),aa&&aa(I,s)},Rt.unmount=function(I){en&&en(I);var s,o=I.__c;o&&o.__H&&(o.__H.__.forEach(function(v){try{ar(v)}catch(S){s=S}}),o.__H=void 0,s&&Rt.__e(s,o.__v))};var hi=typeof requestAnimationFrame=="function";function cs(I){var s,o=function(){clearTimeout(v),hi&&cancelAnimationFrame(s),setTimeout(I)},v=setTimeout(o,100);hi&&(s=requestAnimationFrame(o))}function ar(I){var s=oi,o=I.__c;typeof o=="function"&&(I.__c=void 0,o()),oi=s}function wo(I){var s=oi;I.__c=I.__(),oi=s}function Br(I,s){return!I||I.length!==s.length||s.some(function(o,v){return o!==I[v]})}function qh(I,s){return typeof s=="function"?s(I):s}function Mn(){return Mn=Object.assign?Object.assign.bind():function(I){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var v in o)Object.prototype.hasOwnProperty.call(o,v)&&(I[v]=o[v])}return I},Mn.apply(this,arguments)}function la(I,s){if(I==null)return{};var o={},v=Object.keys(I),S,E;for(E=0;E<v.length;E++)S=v[E],!(s.indexOf(S)>=0)&&(o[S]=I[S]);return o}function fn(I,s){if(I==null)return{};var o=la(I,s),v,S;if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(I);for(S=0;S<E.length;S++)v=E[S],!(s.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(I,v)&&(o[v]=I[v])}return o}var Du=function(s){var o=rr(!1),v=ri(o,2),S=v[0],E=v[1],R=function(){E(!0)},k=function(){E(!1)},W=S?s:"";return{animClass:W,attachAnim:R,detachAnim:k}};const Jh=Du;var Zh=["children","className","onClick"],Co=function(s){var o=s.children,v=s.className,S=s.onClick,E=fn(s,Zh),R=Jh("scale-anim"),k=R.animClass,W=R.attachAnim,K=R.detachAnim,q=function(){W(),S&&S()},$=function(oe){K(),oe.stopPropagation()};return Fe("div",Mn({className:"ui-circle-button ".concat(k," ").concat(v||"")},E,{onClick:q,onAnimationEnd:$}),o,Fe("div",{className:"ui-circle-button-overlay"}))};const ua=Co;function Pr(){throw new Error("Cycle detected")}function or(){if(pn>1)pn--;else{for(var I,s=!1;Ps!==void 0;){var o=Ps;for(Ps=void 0,ca++;o!==void 0;){var v=o.o;if(o.o=void 0,o.f&=-3,!(8&o.f)&&ks(o))try{o.c()}catch(S){s||(I=S,s=!0)}o=v}}if(ca=0,pn--,s)throw I}}function $h(I){if(pn>0)return I();pn++;try{return I()}finally{or()}}var $t=void 0,Ps=void 0,pn=0,ca=0,kr=0;function Qh(I){if($t!==void 0){var s=I.n;if(s===void 0||s.t!==$t)return s={i:0,S:I,p:$t.s,n:void 0,t:$t,e:void 0,x:void 0,r:s},$t.s!==void 0&&($t.s.n=s),$t.s=s,I.n=s,32&$t.f&&I.S(s),s;if(s.i===-1)return s.i=0,s.n!==void 0&&(s.n.p=s.p,s.p!==void 0&&(s.p.n=s.n),s.p=$t.s,s.n=void 0,$t.s.n=s,$t.s=s),s}}function Hi(I){this.v=I,this.i=0,this.n=void 0,this.t=void 0}Hi.prototype.h=function(){return!0},Hi.prototype.S=function(I){this.t!==I&&I.e===void 0&&(I.x=this.t,this.t!==void 0&&(this.t.e=I),this.t=I)},Hi.prototype.U=function(I){if(this.t!==void 0){var s=I.e,o=I.x;s!==void 0&&(s.x=o,I.e=void 0),o!==void 0&&(o.e=s,I.x=void 0),I===this.t&&(this.t=o)}},Hi.prototype.subscribe=function(I){var s=this;return Ee(function(){var o=s.value,v=32&this.f;this.f&=-33;try{I(o)}finally{this.f|=v}})},Hi.prototype.valueOf=function(){return this.value},Hi.prototype.toString=function(){return this.value+""},Hi.prototype.peek=function(){return this.v},Object.defineProperty(Hi.prototype,"value",{get:function(){var I=Qh(this);return I!==void 0&&(I.i=this.i),this.v},set:function(I){if(I!==this.v){ca>100&&Pr(),this.v=I,this.i++,kr++,pn++;try{for(var s=this.t;s!==void 0;s=s.x)s.t.N()}finally{or()}}}});function Si(I){return new Hi(I)}function ks(I){for(var s=I.s;s!==void 0;s=s.n)if(s.S.i!==s.i||!s.S.h()||s.S.i!==s.i)return!0;return!1}function da(I){for(var s=I.s;s!==void 0;s=s.n){var o=s.S.n;if(o!==void 0&&(s.r=o),s.S.n=s,s.i=-1,s.n===void 0){I.s=s;break}}}function Eo(I){for(var s=I.s,o=void 0;s!==void 0;){var v=s.p;s.i===-1?(s.S.U(s),v!==void 0&&(v.n=s.n),s.n!==void 0&&(s.n.p=v)):o=s,s.S.n=s.r,s.r!==void 0&&(s.r=void 0),s=v}I.s=o}function ji(I){Hi.call(this,void 0),this.x=I,this.s=void 0,this.g=kr-1,this.f=4}(ji.prototype=new Hi).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===kr))return!0;if(this.g=kr,this.f|=1,this.i>0&&!ks(this))return this.f&=-2,!0;var I=$t;try{da(this),$t=this;var s=this.x();(16&this.f||this.v!==s||this.i===0)&&(this.v=s,this.f&=-17,this.i++)}catch(o){this.v=o,this.f|=16,this.i++}return $t=I,Eo(this),this.f&=-2,!0},ji.prototype.S=function(I){if(this.t===void 0){this.f|=36;for(var s=this.s;s!==void 0;s=s.n)s.S.S(s)}Hi.prototype.S.call(this,I)},ji.prototype.U=function(I){if(this.t!==void 0&&(Hi.prototype.U.call(this,I),this.t===void 0)){this.f&=-33;for(var s=this.s;s!==void 0;s=s.n)s.S.U(s)}},ji.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var I=this.t;I!==void 0;I=I.x)I.t.N()}},ji.prototype.peek=function(){if(this.h()||Pr(),16&this.f)throw this.v;return this.v},Object.defineProperty(ji.prototype,"value",{get:function(){1&this.f&&Pr();var I=Qh(this);if(this.h(),I!==void 0&&(I.i=this.i),16&this.f)throw this.v;return this.v}});function fa(I){return new ji(I)}function Ds(I){var s=I.u;if(I.u=void 0,typeof s=="function"){pn++;var o=$t;$t=void 0;try{s()}catch(v){throw I.f&=-2,I.f|=8,tn(I),v}finally{$t=o,or()}}}function tn(I){for(var s=I.s;s!==void 0;s=s.n)s.S.U(s);I.x=void 0,I.s=void 0,Ds(I)}function Fu(I){if($t!==this)throw new Error("Out-of-order effect");Eo(this),$t=I,this.f&=-2,8&this.f&&tn(this),or()}function ds(I){this.x=I,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}ds.prototype.c=function(){var I=this.S();try{!(8&this.f)&&this.x!==void 0&&(this.u=this.x())}finally{I()}},ds.prototype.S=function(){1&this.f&&Pr(),this.f|=1,this.f&=-9,Ds(this),da(this),pn++;var I=$t;return $t=this,Fu.bind(this,I)},ds.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ps,Ps=this)},ds.prototype.d=function(){this.f|=8,1&this.f||tn(this)};function Ee(I){var s=new ds(I);try{s.c()}catch(o){throw s.d(),o}return s.d.bind(s)}var Be,Pe;function Qe(I,s){Rt[I]=s.bind(null,Rt[I]||function(){})}function It(I){Pe&&Pe(),Pe=I&&I.S()}function qt(I){var s=this,o=I.data,v=Rn(o);v.value=o;var S=ha(function(){for(var E=s.__v;E=E.__;)if(E.__c){E.__c.__$f|=4;break}return s.__$u.c=function(){s.base.data=S.peek()},fa(function(){var R=v.value.value;return R===0?0:R===!0?"":R||""})},[]);return S.value}qt.displayName="_st",Object.defineProperties(Hi.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:qt},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),Qe("__b",function(I,s){if(typeof s.type=="string"){var o,v=s.props;for(var S in v)if(S!=="children"){var E=v[S];E instanceof Hi&&(o||(s.__np=o={}),o[S]=E,v[S]=E.peek())}}I(s)}),Qe("__r",function(I,s){It();var o,v=s.__c;v&&(v.__$f&=-2,(o=v.__$u)===void 0&&(v.__$u=o=function(S){var E;return Ee(function(){E=this}),E.c=function(){v.__$f|=1,v.setState({})},E}())),Be=v,It(o),I(s)}),Qe("__e",function(I,s,o,v){It(),Be=void 0,I(s,o,v)}),Qe("diffed",function(I,s){It(),Be=void 0;var o;if(typeof s.type=="string"&&(o=s.__e)){var v=s.__np,S=s.props;if(v){var E=o.U;if(E)for(var R in E){var k=E[R];k!==void 0&&!(R in v)&&(k.d(),E[R]=void 0)}else o.U=E={};for(var W in v){var K=E[W],q=v[W];K===void 0?(K=Ei(o,W,q,S),E[W]=K):K.o(q,S)}}}I(s)});function Ei(I,s,o,v){var S=s in I&&I.ownerSVGElement===void 0,E=Si(o);return{o:function(R,k){E.value=R,v=k},d:Ee(function(){var R=E.value.value;v[s]!==R&&(v[s]=R,S?I[s]=R:R?I.setAttribute(s,R):I.removeAttribute(s))})}}Qe("unmount",function(I,s){if(typeof s.type=="string"){var o=s.__e;if(o){var v=o.U;if(v){o.U=void 0;for(var S in v){var E=v[S];E&&E.d()}}}}else{var R=s.__c;if(R){var k=R.__$u;k&&(R.__$u=void 0,k.d())}}I(s)}),Qe("__h",function(I,s,o,v){v<3&&(s.__$f|=2),I(s,o,v)}),nr.prototype.shouldComponentUpdate=function(I,s){var o=this.__$u;if(!(o&&o.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var v in s)return!0;for(var S in I)if(S!=="__source"&&I[S]!==this.props[S])return!0;for(var E in this.props)if(!(E in I))return!0;return!1};function Rn(I){return ha(function(){return Si(I)},[])}function ci(I){var s=t(I);return s.current=I,Be.__$f|=4,i(function(){return e(function(){return s.current()})},[])}function el(I){var s=t(I);s.current=I,f(function(){return a(function(){return s.current()})},[])}var tl="preact-app",Ii=.08,nn="data-main-fade-in",hr="data-main-fade-in-wrapper",Vn,Nn="detach-fade-in-anim",Bn="detach-fade-out-anim",Dt=(Vn={},Ci(Vn,Nn,null),Ci(Vn,Bn,null),Vn),Hu=function(s,o,v){if(!s.getAttribute("".concat(v,"-attached"))){if(console.log("tickanim attach"),s.style.animationDelay="".concat(o,"s"),s.classList.add("ui-bottom-up-fade-in"),s.setAttribute("".concat(v,"-attached"),"true"),Dt[Nn]===null){var S=function(R){return ga(R,v)};Dt[Nn]=S}s.addEventListener("animationend",Dt[Nn],{once:!0})}},pa=0,ga=function(s,o){if(s.animationName==="bottom-up-fade-in"){console.log("tickanim detachFadeInAnim"),s.target.style.animationDelay="unset",s.target.classList.remove("opacity-0"),s.target.classList.remove("ui-bottom-up-fade-in"),s.target.removeEventListener("animationend",Dt[Nn]),Dt[Nn]=null,pa++;var v=document.querySelectorAll("[".concat(o,"]"));pa===v.length&&(pa=0)}},Gu=function(s,o,v,S){if(s.style.animationDelay="".concat(o,"s"),s.classList.add("ui-bottom-down-fade-out"),Dt[Bn]===null){var E=function(k){return Uu(k,v,S)};Dt[Bn]=E}s.addEventListener("animationend",Dt[Bn],{once:!0})},Io=0,Uu=function(s,o,v){if(s.animationName==="bottom-down-fade-out"){console.log("tickanim detachFadeOutAnim"),s.target.style.animationDelay="unset",s.target.classList.add("opacity-0"),s.target.classList.remove("ui-bottom-down-fade-out"),s.target.removeAttribute("".concat(o,"-attached")),s.target.removeEventListener("animationend",Dt[Bn]),Dt[Bn]=null,Io++;var S=document.querySelectorAll("[".concat(o,"]"));Io===S.length&&(Io=0,v&&v())}},ma=function(s){var o=document.querySelectorAll("[".concat(s,"]"));Array.from(o).forEach(function(v){v.classList.add("opacity-0")})},fs=function(s){var o=document.querySelectorAll("[".concat(s,"]"));Array.from(o).forEach(function(v){v.removeEventListener("animationend",Dt[Nn]),v.removeEventListener("animationend",Dt[Bn])})},Dr=function(s,o){var v=document.querySelectorAll("[".concat(s,"]"));console.log("tickanim fadein elements",v),Array.from(v).forEach(function(S,E){var R=S.getAttribute(s),k=Number(R)*o;Hu(S,k,s)})},Fs=function(s,o,v){var S=document.querySelectorAll("[".concat(s,"]"));console.log("tickanim fadeout elements",S),Array.from(S).forEach(function(E){var R=E.getAttribute("".concat(s,"-attached"));if(R){var k=E.getAttribute(s),W=(S.length-Number(k))*o;Gu(E,W,s,v)}})},ps=function(s){var o=document.querySelector("[".concat(s,"]"));o.classList.add("opacity-0")},il=function(s){var o=document.querySelector("[".concat(s,"]"));o.classList.remove("opacity-0")};function Oo(I,s){var o=Object.keys(I);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(I);s&&(v=v.filter(function(S){return Object.getOwnPropertyDescriptor(I,S).enumerable})),o.push.apply(o,v)}return o}function Hs(I){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?Oo(Object(o),!0).forEach(function(v){Ci(I,v,o[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(o)):Oo(Object(o)).forEach(function(v){Object.defineProperty(I,v,Object.getOwnPropertyDescriptor(o,v))})}return I}var gn=Si(null),lr=function(s){gn.value=s},vi=Si(!0),ur=function(s){vi.value=s},Lo=Si(!0),Mo=function(s){Lo.value=s},Wu=300,_n=Si(!1),Yn=function(s){_n.value=s},mn=Si(!1),cr=function(s,o){_n.value||(s?(Dr(nn,Ii),mn.value=s,sn.value&&(sn.value.scene.input.enabled=!1),_n.value||(setTimeout(function(){Yn(!1)},Wu),Yn(!0))):(_n.value||Yn(!0),o&&(mn.value=s,Yn(!1)),sn.value&&(sn.value.scene.input.enabled=!0),Fs(nn,Ii,function(){mn.value=s,Yn(!1)})))},jn=Si(null),nl=function(s){jn.value=s},sn=Si(null),_i=function(s){sn.value=s},fi=Si(null),sl=function(s){fi.value=s},Gs=Si(null),Ro=function(s){Gs.value=s},dr=Si(null),ya=function(s){dr.value=s},fr=Si(1),No=function(s){fr.value=s},Kn=Si(""),Ki=function(s){Kn.value=s},Xn=Si({overlayVisible:!1,fadeOutCallback:null}),Fr=function(s){Xn.value=Hs(Hs({},Xn.value),{},{overlayVisible:s})},pr=function(s){Xn.value=Hs(Hs({},Xn.value),{},{fadeOutCallback:s})},rl=function(s){vi.value===!0&&zt.play(),setTimeout(function(){cr(!1,!0),Fr(!1)},s)},al=navigator.language||navigator.userLanguage,va=al.split("-")[0].toUpperCase(),gs=Si(null),ol=function(s){gs.value=s},qn=Si([]),gr=function(s,o){if(qn.value=s,rn.value===null){var v,S=(v=dr.value)===null||v===void 0?void 0:v.getValueByName({name:Se.language,returnType:ie.string});if(S){var E=qn.value.find(function(W){return W.id===S});ms(E,o),an(E)}else{var R=qn.value.find(function(W){return W.id===va});ms(R)}}var k=qn.value.find(function(W){return W.id===va});ol(k)},Xi=Si({}),ae=function(s){for(var o={},v=0;v<s.length;v++){var S=s[v];o[S.Key]=S.Value}Xi.value=o},rn=Si(null),ms=function(s,o){rn.value=s,(!o||o!==s.id)&&fi.value&&(fi.value.loadFiles({state:L.HOME_SCREEN,language:s.id,level:Gs.value.getCurrentLevel()}),Gs.value.clearCurrentLevelStateArray(),dr.value.setValueByName({name:Se.current_level_state_array,value:Gs.value.getCurrentLevelStateArray()}),_.isNil(gn.value)||gn.value.logEvent(gn.value.analytics,"language_changed",{value:s.id})),dr.value&&dr.value.setValueByName({name:Se.language,value:s.id})},Jn=Si(null),an=function(s){Jn.value=s},Kt=function(s){var o=s.type,v=s.activeIcon,S=s.passiveIcon,E=rr(!1),R=ri(E,2),k=R[0],W=R[1];o==="soundFx"?W(vi.value):o==="music"&&W(Lo.value);var K=function(){W(function($){var ne=!$;return o==="soundFx"?ur(ne):o==="music"&&Mo(ne),vi.value===!0&&Ce.play(),Kg(o,ne),ne})};return Fe(ua,{className:"".concat(k?"active":""),onClick:K},Fe("img",{src:k?v:S,alt:"toggle icon",className:"ui-circle-button-icon"}))};const Pn=Kt;var Zn="assets/icons-settings/CaretDownIcon.png",$n="assets/icons-settings/LanguageIcon.png",ys="assets/icons-settings/MusicIconActive.png",yn="assets/icons-settings/MusicIconPassive.png",Bo="assets/icons-settings/SoundIconActive.png",Po="assets/icons-settings/SoundIconPassive.png",zu="assets/icons-settings/icoArrowLeft.png",Ad="assets/icons-settings/icoCloud.png",xa="assets/icons-settings/langTick.png",Aa="assets/icons-settings/mailIcon.png",mr="assets/icons-settings/icoClose.png",Vu="assets/icons-settings/HomeIcon.png",hl=function(){return Fe("div",{className:"ui-toggle-buttons","data-main-fade-in":"1"},Fe(Pn,{type:"soundFx",activeIcon:Bo,passiveIcon:Po}),Fe(Pn,{type:"music",activeIcon:ys,passiveIcon:yn}))};const Qn=hl;var ko=["children","className","icon","onClick"],Us=function(s){var o=s.children,v=s.className,S=s.icon,E=s.onClick,R=fn(s,ko);return Fe("div",Mn({className:"ui-rounded-button ".concat(v||""," ")},R,{onClick:E}),S&&Fe("img",{src:S,alt:"rounded button icon"}),Fe("div",{className:"ui-rounded-button-body ".concat(S?"icon-margin":"")},o))};const qi=Us;var ll=["className"],ul=function(s){var o,v=s.className,S=fn(s,ll),E=function(){vi.value===!0&&Ce.play(),Fs(nn,Ii,function(){ps(hr),Ki(Li.LanguageSelectLayout)})};return Fe(qi,Mn({icon:$n,className:"ui-language-button ".concat(v||""),onClick:E},S),Fe("div",{className:"ui-language-button-labels"},Fe("div",{className:"ui-language-button-title"},Xi.value.LanguageText||"Language"),Fe("div",{className:"ui-language-button-value"},((o=rn.value)===null||o===void 0?void 0:o.LocalName)||"English")))};const Hr=ul;var vs=function(){return Fe("div",{className:"ui-option-buttons"},Fe("div",{className:"ui-rounded-button-anim-wrapper","data-main-fade-in":"2"},Fe(Hr,null)),Fe("div",{className:"ui-rounded-button-anim-wrapper","data-main-fade-in":"3"}))};const cl=vs;var Yu=["children","className"],ba=function(s){var o=s.children,v=s.className,S=fn(s,Yu);return Fe("div",Mn({className:"ui-small-circle-button ".concat(v||"")},S),o)};const Ta=ba;var Mi=function(){var s=function(){_n.value||(_.isNil(gn.value)||gn.value.logEvent(gn.value.analytics,"game_setting_back_clicked"),vi.value===!0&&Ce.play(),cr(!1),vi.value===!0&&zt.play(),setTimeout(function(){sn&&sn.value.showObjects()},850))};return Fe("div",{className:"ui-layout-wrapper"},Fe("div",{className:"ui-layout-title-wrapper"},Fe("div",{className:"ui-overlay-title","data-main-fade-in":"0"},Xi.value.SettingsText||"SETTINGS"),Fe(Ta,{"data-main-fade-in":"0",onClick:s,className:"ui-language-list-close-button"},Fe("img",{src:mr,alt:"close icon"}))),Fe("div",{className:"ui-layout-inner-wrapper"},Fe(Qn,null),Fe(cl,null)))};const Do=Mi;var dl=["children","className","active"],kn=function(s){var o=s.children,v=s.className,S=s.active,E=fn(s,dl);return Fe(qi,Mn({icon:S&&xa,className:"ui-language-select-button ".concat(S?"active":""," ").concat(v||"")},E),o)};const Sa=kn;var _a=function(s){var o=s.onOtherLanguagesSelected,v=function(){vi.value===!0&&Ce.play(),Fs(nn,Ii,function(){ps(hr),o()})},S=function(){if(!gs.value||gs.value.id===Jn.value.id)return null;var k=gs.value.id===rn.value.id&&gs.value.id!==Jn.value.id;return Fe(Sa,{active:k,onClick:function(){vi.value===!0&&Ce.play(),!k&&ms(gs.value)}},gs.value.LocalName)},E=function(){var k,W;if(!(!Jn.value&&[va].indexOf((k=rn.value)===null||k===void 0?void 0:k.id)!==-1)){var K=Jn.value;if(!K)return null;var q=K.id===((W=rn.value)===null||W===void 0?void 0:W.id);return Fe(Sa,{active:q,onClick:function(){vi.value===!0&&Ce.play(),!q&&ms(K)}},K.LocalName)}};return Fe("div",{className:"ui-layout-inner-wrapper"},Fe("div",{className:"ui-language-select-buttons-wrapper"},Fe("div",{className:"ui-rounded-button-anim-wrapper","data-main-fade-in":"2"},S()),Fe("div",{className:"ui-rounded-button-anim-wrapper","data-main-fade-in":"3"},E())),Fe("div",{className:"ui-language-select-bottom-wrapper","data-main-fade-in":"3"},Fe("div",{className:"ui-language-select-other-button",onClick:v},Fe("span",null,Xi.value.OtherLanguagesText||"Other Languages"),Fe("img",{src:Zn,alt:"caret down icon"}))))};const xs=_a;var fl=["children"],Gi=function(s){var o=s.children,v=fn(s,fl);return Fe(qi,Mn({className:"ui-green-rounded-button"},v),o)};const Fo=Gi;var ju=function(s){var o=s.onClick,v=function(){vi.value===!0&&Ce.play(),o()};return Fe("div",{className:"ui-play-button-wrapper"},Fe("div",{className:"ui-rounded-button-anim-wrapper","data-main-fade-in":"4"},Fe(Fo,{onClick:v},Xi.value.PlayText||"PLAY",Fe("div",{className:"ui-circle-button-overlay"}))))};const pl=ju;var Ho=function(){var s=function(){vi.value===!0&&Ce.play(),Fs(nn,Ii,function(){ps(hr),Ki(Li.MainLayout)})},o=function(){_n.value||(cr(!1),setTimeout(function(){sn&&sn.value.showObjects()},250))};return Fe("div",{className:"ui-layout-wrapper ui-safari-wrapper"},Fe("div",{className:"ui-layout-title-wrapper"},Fe(Ta,{"data-main-fade-in":"0",onClick:s,className:"ui-layout-back-button"},Fe("img",{src:zu,alt:"arrow left"})),Fe("div",{className:"ui-overlay-title","data-main-fade-in":"0"},Fe("span",null,Xi.value.SelectLanguageText||"SELECT LANGUAGE"))),Fe(xs,{onOtherLanguagesSelected:function(){return Ki(Li.LanguageListLayout)}}),Fe(pl,{onClick:o}))};const Gr=Ho;var gl=function(s){var o=s.title,v=s.onClose,S=function(){vi.value===!0&&Ce.play(),Fs(nn,Ii,function(){ps(hr),v()})};return Fe("div",{className:"ui-layout-title-wrapper"},Fe("div",{className:"ui-language-list-title","data-main-fade-in":"0"},o),Fe(Ta,{"data-main-fade-in":"0",onClick:S,className:"ui-language-list-close-button"},Fe("img",{src:mr,alt:"close icon"})))};const yr=gl;var Go=["children","isSelected","onClick"],ml=function(s){var o=s.children,v=s.isSelected,S=s.onClick,E=fn(s,Go);return Fe("div",Mn({className:"ui-checkmark-option ".concat(v?"selected":""),onClick:S},E),Fe("div",{className:"ui-checkmark-option-icon"},v&&Fe("img",{src:xa,alt:"checkmark icon"})),Fe("div",{className:"ui-checkmark-option-body"},o))};const yl=ml;var Uo=function(s){var o=s.onLanguageChange,v=function(E){vi.value===!0&&Ce.play(),ms(E),Fs(nn,Ii,function(){an(E),ps(hr),o()})};return Fe("div",{className:"ui-language-list-options","data-main-fade-in":"1"},qn.value.map(function(S,E){var R;return Fe(yl,{key:E,isSelected:S.id===((R=rn.value)===null||R===void 0?void 0:R.id),onClick:function(){return v(S)}},S.LocalName)}))};const vl=Uo;var Wo=function(){return Fe("div",{className:"ui-layout-wrapper ui-language-select-wrapper"},Fe(yr,{title:Xi.value.OtherLanguagesText||"Other Languages",onClose:function(){return Ki(Li.LanguageSelectLayout)}}),Fe(vl,{onLanguageChange:function(){return Ki(Li.LanguageSelectLayout)}}))};const xl=Wo;var Al=function(){var s,o=rr(!1),v=ri(o,2),S=v[0],E=v[1];oa(function(){setTimeout(function(){E(mn.value)},100)},[mn.value]);var R=function(){_n.value||(_.isNil(gn.value)||gn.value.logEvent(gn.value.analytics,"game_setting_back_clicked"),vi.value===!0&&Ce.play(),E(!1),rl(400))},k=function(){var K,q;if(R(),Ji.name==="famobi"){var $;window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:($=Gs.value)===null||$===void 0?void 0:$.getCurrentLevel().toString(),reason:"quit"})}if(fi.value){var ne,oe,ce;(ne=fi.value)===null||ne===void 0||ne.setPreviousState((oe=fi.value)===null||oe===void 0?void 0:oe.getCurrentState()),(ce=fi.value)===null||ce===void 0||ce.setCurrentState(L.HOME_SCREEN)}var me=(K=jn.value)===null||K===void 0?void 0:K.getButterflySprite();if(!_.isNil(me)){var fe;(fe=jn.value)===null||fe===void 0||fe.gameObjectsMap.delete("butterflySprite"),me.destroy()}(q=jn.value)===null||q===void 0||q.bonusCoordinates.forEach(function(xe){var ve,We,Ze=(ve=jn.value)===null||ve===void 0?void 0:ve.getBonusImageName({rowIndex:xe.rowIndex,columnIndex:xe.columnIndex}),ke=(We=jn.value)===null||We===void 0?void 0:We.gameObjectsMap.get(Ze);if(!_.isNil(ke)){var ut;(ut=jn.value)===null||ut===void 0||ut.gameObjectsMap.delete(Ze),ke.destroy()}}),setTimeout(function(){var xe;(xe=sn.value)===null||xe===void 0||xe.showMainMenu()},100)};return Fe("div",{className:"ui-in-game-modal ".concat(S?"visible":"")},Fe("div",{className:"ui-in-game-modal-inner"},Fe("div",{className:"ui-in-game-modal-inner-close",onClick:R},Fe("img",{src:mr,alt:"close button"})),Fe("div",{className:"ui-in-game-modal-inner-head"},Fe("div",{className:"ui-in-game-modal-inner-head-title"},Xi.value.SettingsText||"SETTINGS"),Fe("div",{className:"ui-in-game-modal-inner-head-subtitle"},(Xi.value.LevelText||"LEVEL").toUpperCase()," ",(s=Gs.value)===null||s===void 0?void 0:s.getCurrentLevel())),Fe("div",{className:"ui-toggle-buttons"},Fe(ua,{className:"ui-circle-home-button",onClick:k},Fe("img",{src:Vu,alt:"home icon",className:"ui-circle-button-icon"})),Fe(Pn,{type:"soundFx",activeIcon:Bo,passiveIcon:Po}),Fe(Pn,{type:"music",activeIcon:ys,passiveIcon:yn})),Fe("div",{className:"ui-in-game-modal-inner-bottom"},Fe("div",{className:"ui-in-game-modal-inner-bottom-help"}),Fe("div",{className:"ui-in-game-modal-inner-bottom-version"},Xi.value.BuildText||"Version"," ","1.0"))))};const bl=Al;var wa=function(){var s=function(){sn.value&&(cr(!1),setTimeout(function(){sn.value.onButtonPointerupCallback()},500))};return Fe("div",{className:"ui-layout-wrapper ui-safari-wrapper"},Fe("div",{className:"ui-layout-title-wrapper"},Fe("div",{className:"ui-overlay-title","data-main-fade-in":"0"},Fe("span",null,Xi.value.SelectLanguageText||"SELECT LANGUAGE"))),Fe(xs,{onOtherLanguagesSelected:function(){return Ki(Li.InitialSettingsLanguageList)}}),Fe(pl,{onClick:s}))};const Tl=wa;var Sl=function(){return Fe("div",{className:"ui-layout-wrapper ui-language-select-wrapper"},Fe(yr,{title:Xi.value.OtherLanguagesText||"Other Languages",onClose:function(){return Ki(Li.InitialSettings)}}),Fe(vl,{onLanguageChange:function(){return Ki(Li.InitialSettings)}}))};const _l=Sl;var Dn,Li={MainLayout:"MainLayout",LanguageSelectLayout:"LanguageSelectLayout",LanguageListLayout:"LanguageListLayout",InGameLayout:"InGameLayout",InitialSettings:"InitialSettings",InitialSettingsLanguageList:"InitialSettingsLanguageList"},zo=(Dn={},Ci(Dn,Li.MainLayout,Do),Ci(Dn,Li.LanguageSelectLayout,Gr),Ci(Dn,Li.LanguageListLayout,xl),Ci(Dn,Li.InGameLayout,bl),Ci(Dn,Li.InitialSettings,Tl),Ci(Dn,Li.InitialSettingsLanguageList,_l),Dn);class Vo extends Ae{constructor(s){super(s),super.update(s),this.container=null,this.buttonBackground=null,this.mainMenuContext=null,this.gameManagerContext=null,this.uiStateModule=null}load(){super.load(),this.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1)}render(){this.drawReferenceRectangle&&super.renderReferenceRectangle(),super.render(),this.resizeContainer()}getIconHeight(){const s=this.scene.getOrientation();return this.AbsoluteHeight*(s==="portrait"?.43:.66)}initOnComponentsReady(s,o,v){if(this.mainMenuContext=s,this.gameManagerContext=o,this.uiStateModule=v,_.isNil(this.container)){this.container=this.scene.add.container(0,0),this.buttonBackground=this.scene.add.image(0,0,this.selectedImages.settingsBackground[0].key),this.buttonBackground.setInteractive(new Phaser.Geom.Circle(this.buttonBackground.width*.5,this.buttonBackground.height*.5,this.buttonBackground.width*.5),Phaser.Geom.Circle.Contains),this.buttonBackground.on("pointerdown",()=>{this.uiStateModule.isToggleLocked.value||this.uiStateModule.isSettingsOverlayVisible.value||(this.clearWheelCallback(),this.isSoundFxEnabledCallback()&&Ce.play(),this.gameManagerContext.getCurrentState()===L.IN_GAME?(this.isSoundFxEnabledCallback()&&zt.play(),this.uiStateModule.setSelectedLayout(Li.InGameLayout),this.uiStateModule.setSettingsOverlayVisibility(!0)):(this.uiStateModule.setSelectedLayout(Li.MainLayout),this.uiStateModule.isSettingsOverlayVisible.value||setTimeout(()=>{this.isSoundFxEnabledCallback()&&zt.play(),this.mainMenuContext.hideObjects(),this.uiStateModule.setSettingsOverlayVisibility(!0)},250)))}),this.container.add(this.buttonBackground);const S=this.scene.add.image(0,0,this.selectedImages.settingsIcon[0].key);S.setScale(.65),this.container.add(S)}}getRelativePosition(s,o){return{x:this.LeftAbsoluteX+s*this.AbsoluteWidth,y:this.TopAbsoluteY+o*this.AbsoluteHeight}}resizeContainer(){if(!this.container)return;const{x:s,y:o}=this.getRelativePosition(.5,.5),v=this.getIconHeight()/this.buttonBackground.height;this.container.scale!==v&&this.container.setScale(v),this.container.setPosition(s,o),this.container.setDepth(this.depth)}setContainerDepth(s){this.container.depth!==s&&this.container.setDepth(s)}fadeOutContainer(s=500){const o=-this.scene.game.canvas.height*.25;this.scene.tweens.add({targets:this.container,duration:s,alpha:0,y:o})}fadeInContainer(s=800){const{x:o,y:v}=this.getRelativePosition(.5,.5);this.scene.tweens.add({targets:this.container,duration:s,alpha:1,y:v,onStart:()=>{this.container.setPosition(o,-this.scene.game.canvas.height*.25)}})}}class Gt extends Ae{constructor(s){super(s)}load(){super.load(),this.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1)}render(){super.render(),this.addImage()}addImage(){let s=this.getImage();_.isNil(s)&&(s=this.scene.add.image(0,0,this.selectedImages.image[0].key).setVisible(!1),this.gameObjectsMap.set("image",s))}getImage(){return this.gameObjectsMap.get("image")}addTween(s){const o=s.position,v=s.height,S=s.depth;console.log("enters here in",o,v,S);const E=this.getImage();(E.x!==o.x||E.y!==o.y)&&E.setPosition(o.x,o.y);const R=v/E.height;E.scale!==R&&E.setScale(R),E.depth!==S&&E.setDepth(S),E.setAngle(0),E.setVisible(!0),this.rotateTween=this.scene.tweens.addCounter({from:0,to:360,duration:1800,repeat:-1,onUpdate:k=>{E.setAngle(k.getValue())}})}stopTween(){const s=this.getImage();!_.isNil(s)&&s.visible&&(console.log("enters here out"),s.setVisible(!1),this.rotateTween.stop(),this.rotateTween=null)}}class Ku extends Ae{constructor(s){super(s),this.adStates={active:"active",inactive:"inactive"},this.countdownSeconds=-1,this.currentAdState=this.adStates.inactive,this.depth=5,this.timerEvent=null,this.timerSeconds=0}load(){super.load(),this.loadTextures()}textureLoadComplete(){super.textureLoadComplete(),this.isTextureLoadComplete&&(this.onReady(),this.isTextureLoadComplete=!1)}render(){super.render(),this.startTimer();const s=this.renderRewardedImage();this.renderCountdownTimer(s)}getCountdownSeconds(){return this.countdownSeconds}decreaseCountdownSeconds(){this.countdownSeconds--}resetCountdownSeconds(){this.countdownSeconds=-1}setCountdownSeconds(s){this.countdownSeconds=s}getTimerSeconds(){return this.timerSeconds}increaseTimerSeconds(){this.timerSeconds++}resetTimerSeconds(){this.timerSeconds=0}checkAdState(){const s=this.getCurrentAdState();s===this.adStates.inactive?(this.increaseTimerSeconds(),this.getTimerSeconds()===this.delayTime&&(this.setCurrentAdState(this.adStates.active),this.playRewardedAdMoveTween(this.adStates.active))):s===this.adStates.active&&this.getTimerSeconds()>=this.delayTime&&this.getCountdownSeconds()>0&&(this.decreaseCountdownSeconds(),this.getCountdownTimer().setText(Xe(this.getCountdownSeconds())),this.getCountdownSeconds()===0&&(this.setCurrentAdState(this.adStates.inactive),this.playRewardedAdMoveTween(this.adStates.inactive)))}isAvailable(){const s=this.getCurrentLevelCallback();return!(s<this.minLevel||(console.log("levelIntervalCheck",(s-this.minLevel)%this.levelInterval),(s-this.minLevel)%this.levelInterval!==0))}startTimer(){this.isAvailable()&&this.timerEvent===null&&(this.resetTimerSeconds(),this.timerEvent=this.scene.time.addEvent({delay:1e3,loop:!0,callback:this.checkAdState,callbackScope:this}))}removeTimer(){this.timerEvent!==null&&(this.resetTimerSeconds(),this.resetCountdownSeconds(),this.timerEvent.remove(!1),this.timerEvent=null)}getCurrentAdState(){return this.currentAdState}setCurrentAdState(s){this.currentAdState=s}playRewardedAdMoveTween(s=this.getCurrentAdState()){this.scene.tweens.add({duration:500,targets:[this.getRewardedImage(),this.getCountdownTimer()],x:this.getRewardedImagePosition(s).x,onStart:()=>{if(s===this.adStates.active){const o=this.getRewardedImage();o.visible||o.setVisible(!0);const v=this.getCountdownTimer();v.visible||v.setVisible(!0),this.setCountdownSeconds(this.destroyTime),v.setText(Xe(this.getCountdownSeconds()))}else s===this.adStates.inactive&&this.resetTimerSeconds()}})}getRewardedImage(){return this.gameObjectsMap.get("rewardedImage")}renderRewardedImage(){const s=this.getRewardedImagePosition(),o=this.getCurrentAdState()===this.adStates.active&&this.isAvailable();let v=this.getRewardedImage();_.isNil(v)?(v=this.scene.add.image(s.x,s.y,this.selectedImages.rewarded[0].key).setOrigin(.5,1).setDepth(this.depth),v.setInteractive(),v.on("pointerdown",()=>{if(console.log("pointerdown",this.getCurrentAdState()),this.getCurrentAdState()===this.adStates.active){this.setCurrentAdState(this.adStates.inactive),this.playRewardedAdMoveTween(this.adStates.inactive);const E=this.scene.platformSetting;if(E.name==="famobi"){this.onRewardedRequestCallback();const R=window.famobi.hasRewardedAd();console.log({hasRewardedAd:R}),R&&window.famobi.rewardedAd(k=>{console.log("rewarded ad end",k),k.rewardGranted&&this.onRewardGrantedCallback(this.coinReward)})}else console.warn(E.name,"platform does not support rewarded ad feature")}}),this.gameObjectsMap.set("rewardedImage",v)):(v.x!==s.x||v.y!==s.y)&&v.setPosition(s.x,s.y);const S=Math.min(this.AbsoluteWidth,this.AbsoluteHeight)/v.width;return v.scale!==S&&v.setScale(S),v.visible!==o&&v.setVisible(o),v}getCountdownTimer(){return this.gameObjectsMap.get("countdownTimer")}renderCountdownTimer(s){const o={x:s.x,y:s.y-s.displayHeight*.15},v=s.displayHeight*.2;let S=this.getCountdownTimer();_.isNil(S)?(S=this.scene.add.bitmapText(o.x,o.y,this.getBitmapFontKeyCallback(),Xe(this.getCountdownSeconds())).setOrigin(.5).setDepth(this.depth+1),this.gameObjectsMap.set("countdownTimer",S)):(S.x!==o.x||S.y!==o.y)&&S.setPosition(o.x,o.y),S.fontSize!==v&&S.setFontSize(v),S.visible!==s.visible&&S.setVisible(s.visible)}getRewardedImagePosition(s=this.getCurrentAdState()){if(s===this.adStates.active)return{x:this.CenterAbsoluteX,y:this.getPositionYCallback()};if(s===this.adStates.inactive)return{x:this.CenterAbsoluteX+this.scene.game.canvas.width,y:this.getPositionYCallback()}}}class Xu extends Ae{constructor(s){super(s),this.areGemObjectsAdded=!1,this.smallGems=[],this.bigGem=null,this.rewardText=null}load(){super.load(),this.loadSounds()}soundLoadComplete(){super.soundLoadComplete(),this.isSoundLoadComplete&&this.onReady()}render(){super.render(),this.addGems(),this.addRewardText()}playGemShowSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.gemShow[0].key)}playGemDiffuseSound(){this.isSoundFxEnabledCallback()&&this.scene.sound.play(this.selectedSounds.gemDiffuse[0].key)}addRewardText(){_.isNil(this.rewardText)&&(this.rewardText=this.scene.add.bitmapText(0,0,this.getBitmapFontKeyCallback(),"").setDepth(this.depth).setOrigin(.5).setAlpha(0))}addGems(){if(!this.areGemObjectsAdded){this.areGemObjectsAdded=!0,this.bigGem=this.scene.add.image(0,0,this.getGemTextureKeyCallback()).setAlpha(0).setAngle(30).setDepth(this.depth);for(let s=0;s<8;s++){const o=this.scene.add.image(0,0,this.getGemTextureKeyCallback()).setAlpha(0).setAngle(30).setDepth(this.depth);this.smallGems.push(o)}}}getBigGemPosition(){return{x:this.scene.game.canvas.width*.5,y:this.scene.game.canvas.height*.4}}playCollectTween(s){const o=s.destinationPosition,v=s.destinationScale,S=s.reward;this.scene.tweens.killTweensOf(this.bigGem),this.scene.tweens.killTweensOf(this.rewardText);const E=this.getBigGemPosition(),R=Math.min(this.AbsoluteWidth,this.AbsoluteHeight)*.2,k=R/this.bigGem.height,W=R*.5;console.log({rewardTextFinalFontSize:W}),this.bigGem.setScale(0),this.bigGem.setAlpha(1),(this.bigGem.x!==E.x||this.bigGem.y!==E.y)&&this.bigGem.setPosition(E.x,E.y),this.rewardText.setAlpha(0),this.rewardText.fontSize!==W*1.25&&this.rewardText.setFontSize(W*1.25),(this.rewardText.x!==this.bigGem.x||this.rewardText.y!==this.bigGem.y+R)&&this.rewardText.setPosition(this.bigGem.x,this.bigGem.y+R),this.rewardText.text!==S&&this.rewardText.setText(S),console.log({rewardText:this.rewardText}),this.playGemShowSound(),this.scene.tweens.add({duration:400,targets:this.bigGem,scale:k*1.25,onComplete:()=>{this.scene.tweens.add({duration:200,targets:[this.bigGem,this.rewardText],alpha:(K,q,$,ne)=>{if(ne===0)return K.alpha;if(ne===1)return 1},scale:(K,q,$,ne)=>{if(ne===0)return k;if(ne===1)return K.scale},fontSize:(K,q,$,ne)=>{if(ne===0)return K.fontSize;if(ne===1)return W},onComplete:()=>{this.scene.tweens.add({duration:300,delay:200,targets:[this.bigGem,this.rewardText],scale:(K,q,$,ne)=>ne===0?k*1.25:K.scale,fontSize:(K,q,$,ne)=>ne===1?W*1.25:K.fontSize,alpha:(K,q,$,ne)=>ne===1?0:K.alpha,onComplete:()=>{this.scene.tweens.add({duration:300,targets:this.bigGem,alpha:0,scale:0,onStart:()=>{const K=[],q=Math.floor(S/this.smallGems.length),$=this.bigGem.x,ne=this.bigGem.y,oe=this.bigGem.displayWidth,ce=this.bigGem.displayHeight;this.playGemDiffuseSound(),this.smallGems.forEach((me,fe,xe)=>{fe===xe.length-1&&K.push(q+(S-q*xe.length)),K.push(q),me.setAlpha(0),me.setScale(0),me.setAngle(30),me.setVisible(!0);let ve,We,Ze,ke,ut;if(fe===0)ve=$-oe*.1,We=ne-ce*.4,Ze=$-oe*.5,ke=ne-ce*.7,ut=50;else if(fe===1)ve=$+oe*.1,We=ne-ce*.2,Ze=$+oe*.5,ke=ne-ce*.5,ut=100;else if(fe===2)ve=$+oe*.1,We=ne+ce*.2,Ze=$-oe*.7,ke=ne+ce*.2,ut=150;else if(fe===3)ve=$+oe*.2,We=ne+ce*.2,Ze=$+oe*.8,ke=ne+ce*.4,ut=200;else if(fe===4)ve=$,We=ne+ce*.3,Ze=$+oe*.1,ke=ne+ce,ut=250;else if(fe===5)ve=$,We=ne+ce*.3,Ze=$+oe*.1,ke=ne+ce*.1,ut=300;else if(fe===6)ve=$-oe*.2,We=ne+ce*.2,Ze=$-oe*.5,ke=ne,ut=350;else if(fe===7)ve=$,We=ne,Ze=$+oe*.5,ke=ne+ce*.5,ut=400;else return;me.setPosition(ve,We),this.scene.tweens.add({duration:300,delay:ut,targets:me,x:Ze,y:ke,scale:k*.4,alpha:1,onComplete:()=>{this.scene.tweens.killTweensOf([this.bigGem,this.rewardText]),this.scene.tweens.add({duration:300,delay:400,targets:me,x:o.x,y:o.y,scale:v,angle:0,onComplete:()=>{me.setVisible(!1),s.onCompleteCallback({isLastIndex:fe===xe.length-1,reward:K[fe]})}})}})})}})}})}})}})}}class Ur extends Ae{constructor(s){super(s)}load(){super.load(),this.loadSounds()}soundLoadComplete(){super.soundLoadComplete(),this.isSoundLoadComplete&&(this.onReady(),this.isSoundLoadComplete=!1)}render(){super.render(),this.playSound(),this.applyVolume()}applyVolume(){if(this.isMusicEnabledCallback()){let s=this.soundsMap.get("music");!_.isNil(s)&&_.has(this,"volume")&&s.volume!==this.volume&&(s.volume=this.volume)}}playSound(){if(Object.keys(this.selectedSounds).length>0){if(this.isMusicEnabledCallback()){let s=this.soundsMap.get("music");_.isNil(s)?(s=this.scene.sound.add(this.selectedSounds.music[0].key),_.has(this,"volume")?s.volume=this.volume:s.volume=1,this.soundsMap.set("music",s),s.play({loop:!0})):s.key!==this.selectedSounds.music[0].key&&(s.stop(),s=this.scene.sound.add(this.selectedSounds.music[0].key),_.has(this,"volume")?s.volume=this.volume:s.volume=1,this.soundsMap.set("music",s),s.play({loop:!0})),s.isPlaying||s.play({loop:!0})}else if(!this.isMusicEnabledCallback()){let s=this.soundsMap.get("music");_.isNil(s)||s.stop()}}}pauseSound(){const s=this.soundsMap.get("music");_.isNil(s)||s.stop()}}let wl=new Map([["default",{name:"default",isSoundSupported:!0}],["famobi",{name:"famobi",isSoundSupported:!0}]]);var qu=ft(379),Ju=ft.n(qu),vn=ft(795),Zu=ft.n(vn),Ca=ft(569),Yo=ft.n(Ca),Cl=ft(565),El=ft.n(Cl),on=ft(216),As=ft.n(on),jo=ft(589),Il=ft.n(jo),Ws=ft(421),zs={};zs.styleTagTransform=Il(),zs.setAttributes=El(),zs.insert=Yo().bind(null,"head"),zs.domAPI=Zu(),zs.insertStyleElement=As();var Ol=Ju()(Ws.Z,zs);const $u=Ws.Z&&Ws.Z.locals?Ws.Z.locals:void 0;var Ko=function(s){var o=s.children,v=rr(!1),S=ri(v,2),E=S[0],R=S[1];return oa(function(){return ma(nn),E&&setTimeout(function(){Dr(nn,Ii),il(hr)},120),R(!0),function(){return fs(nn)}},[Kn.value]),o};const Xo=Ko;var bs=function(){var s=zo[Kn.value];return Fe("div",{className:"ui-overlay",style:{display:mn.value?"block":"none"}},Fe("div",{className:"ui-layout-wrapper","data-main-fade-in-wrapper":!0},s&&Fe(s,null)))};const Qu=bs;var Ts=function(){return oa(function(){document.getElementById(tl).style.display=mn.value?"block":"none"},[mn.value]),Fe(Xo,{isSettingsOverlayVisible:mn.value},Fe(Qu,null))};const Ll=Ts;var Ml=function(){var s=document.createElement("div");s.setAttribute("id",tl),s.setAttribute("style","position: relative; z-index: 2; width: 100vw; height: 100vh;"),document.body.appendChild(s),Wh(Fe(Ll,null),s)};const Ji=wl.get(Y);function Rl(I){var s=this.constructor;return this.then(function(o){return s.resolve(I()).then(function(){return o})},function(o){return s.resolve(I()).then(function(){return s.reject(o)})})}const Nl=Rl;function Bl(I){var s=this;return new s(function(o,v){if(!(I&&typeof I.length!="undefined"))return v(new TypeError(typeof I+" "+I+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var S=Array.prototype.slice.call(I);if(S.length===0)return o([]);var E=S.length;function R(W,K){if(K&&(typeof K=="object"||typeof K=="function")){var q=K.then;if(typeof q=="function"){q.call(K,function($){R(W,$)},function($){S[W]={status:"rejected",reason:$},--E===0&&o(S)});return}}S[W]={status:"fulfilled",value:K},--E===0&&o(S)}for(var k=0;k<S.length;k++)R(k,S[k])})}const Pl=Bl;var Zi=setTimeout;function wn(I){return Boolean(I&&typeof I.length!="undefined")}function Ea(){}function vr(I,s){return function(){I.apply(s,arguments)}}function pi(I){if(!(this instanceof pi))throw new TypeError("Promises must be constructed via new");if(typeof I!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Jo(I,this)}function qo(I,s){for(;I._state===3;)I=I._value;if(I._state===0){I._deferreds.push(s);return}I._handled=!0,pi._immediateFn(function(){var o=I._state===1?s.onFulfilled:s.onRejected;if(o===null){(I._state===1?Ia:Fn)(s.promise,I._value);return}var v;try{v=o(I._value)}catch(S){Fn(s.promise,S);return}Ia(s.promise,v)})}function Ia(I,s){try{if(s===I)throw new TypeError("A promise cannot be resolved with itself.");if(s&&(typeof s=="object"||typeof s=="function")){var o=s.then;if(s instanceof pi){I._state=3,I._value=s,Vs(I);return}else if(typeof o=="function"){Jo(vr(o,s),I);return}}I._state=1,I._value=s,Vs(I)}catch(v){Fn(I,v)}}function Fn(I,s){I._state=2,I._value=s,Vs(I)}function Vs(I){I._state===2&&I._deferreds.length===0&&pi._immediateFn(function(){I._handled||pi._unhandledRejectionFn(I._value)});for(var s=0,o=I._deferreds.length;s<o;s++)qo(I,I._deferreds[s]);I._deferreds=null}function kl(I,s,o){this.onFulfilled=typeof I=="function"?I:null,this.onRejected=typeof s=="function"?s:null,this.promise=o}function Jo(I,s){var o=!1;try{I(function(v){o||(o=!0,Ia(s,v))},function(v){o||(o=!0,Fn(s,v))})}catch(v){if(o)return;o=!0,Fn(s,v)}}pi.prototype.catch=function(I){return this.then(null,I)},pi.prototype.then=function(I,s){var o=new this.constructor(Ea);return qo(this,new kl(I,s,o)),o},pi.prototype.finally=Nl,pi.all=function(I){return new pi(function(s,o){if(!wn(I))return o(new TypeError("Promise.all accepts an array"));var v=Array.prototype.slice.call(I);if(v.length===0)return s([]);var S=v.length;function E(k,W){try{if(W&&(typeof W=="object"||typeof W=="function")){var K=W.then;if(typeof K=="function"){K.call(W,function(q){E(k,q)},o);return}}v[k]=W,--S===0&&s(v)}catch(q){o(q)}}for(var R=0;R<v.length;R++)E(R,v[R])})},pi.allSettled=Pl,pi.resolve=function(I){return I&&typeof I=="object"&&I.constructor===pi?I:new pi(function(s){s(I)})},pi.reject=function(I){return new pi(function(s,o){o(I)})},pi.race=function(I){return new pi(function(s,o){if(!wn(I))return o(new TypeError("Promise.race accepts an array"));for(var v=0,S=I.length;v<S;v++)pi.resolve(I[v]).then(s,o)})},pi._immediateFn=typeof setImmediate=="function"&&function(I){setImmediate(I)}||function(I){Zi(I,0)},pi._unhandledRejectionFn=function(s){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",s)};const Hn=pi;var Dl="[Filtered]",Wr=128;function Zo(I,s){var o=s===void 0?{}:s,v=o.maxLength,S=v===void 0?64e3:v,E=o.keysBlocklist,R=E===void 0?[]:E;if(I.errors)for(var k=0;k<I.errors.length;k++){var W=new $o({keysBlocklist:R});I.errors[k]=W.truncate(I.errors[k])}for(var K="",q=["params","environment","session"],$=0;$<8;$++){for(var ne={level:$,keysBlocklist:R},oe=0,ce=q;oe<ce.length;oe++){var me=ce[oe],fe=I[me];fe&&(I[me]=Oa(fe,ne))}if(K=JSON.stringify(I),K.length<S)return K}var xe={json:K.slice(0,Math.floor(S/2))+"..."};q.push("errors");for(var ve=0,We=q;ve<We.length;ve++){var me=We[ve],fe=I[me];fe&&(K=JSON.stringify(fe),xe[me]=K.length)}var Ze=new Error("airbrake: notice exceeds max length and can't be truncated");throw Ze.params=xe,Ze}function Ys(I,s){return I>>s||1}var $o=function(){function I(s){this.maxStringLength=1024,this.maxObjectLength=Wr,this.maxArrayLength=Wr,this.maxDepth=8,this.keys=[],this.keysBlocklist=[],this.seen=[];var o=s.level||0;this.keysBlocklist=s.keysBlocklist||[],this.maxStringLength=Ys(this.maxStringLength,o),this.maxObjectLength=Ys(this.maxObjectLength,o),this.maxArrayLength=Ys(this.maxArrayLength,o),this.maxDepth=Ys(this.maxDepth,o)}return I.prototype.truncate=function(s,o,v){if(o===void 0&&(o=""),v===void 0&&(v=0),s==null)return s;switch(typeof s){case"boolean":case"number":case"function":return s;case"string":return this.truncateString(s);case"object":break;default:return this.truncateString(String(s))}if(s instanceof String)return this.truncateString(s.toString());if(s instanceof Boolean||s instanceof Number||s instanceof Date||s instanceof RegExp)return s;if(s instanceof Error)return this.truncateString(s.toString());if(this.seen.indexOf(s)>=0)return"[Circular ".concat(this.getPath(s),"]");var S=eh(s);if(v++,v>this.maxDepth)return"[Truncated ".concat(S,"]");switch(this.keys.push(o),this.seen.push(s),S){case"Array":return this.truncateArray(s,v);case"Object":return this.truncateObject(s,v);default:var E=this.maxDepth;this.maxDepth=0;var R=this.truncateObject(s,v);return R.__type=S,this.maxDepth=E,R}},I.prototype.getPath=function(s){for(var o=this.seen.indexOf(s),v=[this.keys[o]],S=o;S>=0;S--){var E=this.seen[S];E&&Qo(E,v[0])===s&&(s=E,v.unshift(this.keys[S]))}return"~"+v.join(".")},I.prototype.truncateString=function(s){return s.length>this.maxStringLength?s.slice(0,this.maxStringLength)+"...":s},I.prototype.truncateArray=function(s,o){o===void 0&&(o=0);for(var v=0,S=[],E=0;E<s.length;E++){var R=s[E];if(S.push(this.truncate(R,E.toString(),o)),v++,v>=this.maxArrayLength)break}return S},I.prototype.truncateObject=function(s,o){o===void 0&&(o=0);var v=0,S={};for(var E in s)if(Object.prototype.hasOwnProperty.call(s,E)){if(ec(E,this.keysBlocklist)){S[E]=Dl;continue}var R=Qo(s,E);if(!(R===void 0||typeof R=="function")&&(S[E]=this.truncate(R,E,o),v++,v>=this.maxObjectLength))break}return S},I}();function Oa(I,s){s===void 0&&(s={});var o=new $o(s);return o.truncate(I)}function Qo(I,s){try{return I[s]}catch(o){return}}function eh(I){var s=Object.prototype.toString.apply(I);return s.slice(8,-1)}function ec(I,s){for(var o=0,v=s;o<v.length;o++){var S=v[o];if(S===I||S instanceof RegExp&&I.match(S))return!0}return!1}var Fl=function(){function I(s,o,v){this._dur=0,this._level=0,this._metric=s,this.name=o,this.startTime=v||new Date}return I.prototype.end=function(s){this.endTime=s||new Date,this._dur+=this.endTime.getTime()-this.startTime.getTime(),this._metric._incGroup(this.name,this._dur),this._metric=null},I.prototype._pause=function(){if(!this._paused()){var s=new Date;this._dur+=s.getTime()-this.startTime.getTime(),this.startTime=null}},I.prototype._resume=function(){this._paused()&&(this.startTime=new Date)},I.prototype._paused=function(){return this.startTime==null},I}(),Gn=function(){function I(){this._spans={},this._groups={},this.startTime=new Date}return I.prototype.end=function(s){this.endTime||(this.endTime=s||new Date)},I.prototype.isRecording=function(){return!0},I.prototype.startSpan=function(s,o){var v=this._spans[s];v?v._level++:(v=new Fl(this,s,o),this._spans[s]=v)},I.prototype.endSpan=function(s,o){var v=this._spans[s];if(!v){console.error("airbrake: span=%s does not exist",s);return}v._level>0?v._level--:(v.end(o),delete this._spans[v.name])},I.prototype._incGroup=function(s,o){this._groups[s]=(this._groups[s]||0)+o},I.prototype._duration=function(){return this.endTime||(this.endTime=new Date),this.endTime.getTime()-this.startTime.getTime()},I}(),Hl=function(){function I(){}return I.prototype.isRecording=function(){return!1},I.prototype.startSpan=function(s,o){},I.prototype.endSpan=function(s,o){},I.prototype._incGroup=function(s,o){},I}(),js=function(){return js=Object.assign||function(I){for(var s,o=1,v=arguments.length;o<v;o++){s=arguments[o];for(var S in s)Object.prototype.hasOwnProperty.call(s,S)&&(I[S]=s[S])}return I},js.apply(this,arguments)},tc=function(){function I(){this._noopMetric=new Hl,this._context={},this._historyMaxLen=20,this._history=[]}return I.prototype.clone=function(){var s=new I;return s._context=js({},this._context),s._history=this._history.slice(),s},I.prototype.setContext=function(s){this._context=js(js({},this._context),s)},I.prototype.context=function(){var s=js({},this._context);return this._history.length>0&&(s.history=this._history.slice()),s},I.prototype.pushHistory=function(s){if(this._isDupState(s)){this._lastRecord.num?this._lastRecord.num++:this._lastRecord.num=2;return}s.date||(s.date=new Date),this._history.push(s),this._lastRecord=s,this._history.length>this._historyMaxLen&&(this._history=this._history.slice(-this._historyMaxLen))},I.prototype._isDupState=function(s){if(!this._lastRecord)return!1;for(var o in s)if(!(!s.hasOwnProperty(o)||o==="date")&&s[o]!==this._lastRecord[o])return!1;return!0},I.prototype.routeMetric=function(){return this._routeMetric||this._noopMetric},I.prototype.setRouteMetric=function(s){this._routeMetric=s},I.prototype.queueMetric=function(){return this._queueMetric||this._noopMetric},I.prototype.setQueueMetric=function(s){this._queueMetric=s},I}(),Gl=ft(180),es=ft.n(Gl),th=typeof console=="object"&&console.warn;function La(I){try{return es().parse(I)}catch(s){th&&I.stack&&console.warn("ErrorStackParser:",s.toString(),I.stack)}return I.fileName?[I]:[]}function ih(I){var s=[];if(I.noStack)s.push({function:I.functionName||"",file:I.fileName||"",line:I.lineNumber||0,column:I.columnNumber||0});else{var o=La(I);if(o.length===0)try{throw new Error("fake")}catch(W){o=La(W),o.shift(),o.shift()}for(var v=0,S=o;v<S.length;v++){var E=S[v];s.push({function:E.functionName||"",file:E.fileName||"",line:E.lineNumber||0,column:E.columnNumber||0})}}var R=I.name?I.name:"",k=I.message?String(I.message):String(I);return{type:R,message:k,backtrace:s}}var Ma=new RegExp(["^","\\[(\\$.+)\\]","\\s","([\\s\\S]+)","$"].join(""));function xr(I){var s=I.errors[0];if(s.type!==""&&s.type!=="Error")return I;var o=s.message.match(Ma);return o!==null&&(s.type=o[1],s.message=o[2]),I}function St(){var I,s;return function(o){var v=JSON.stringify(o.errors);return v===I?null:(s&&clearTimeout(s),I=v,s=setTimeout(function(){I=""},1e3),o)}}var Ra=["Script error","Script error.","InvalidAccessError"];function nh(I){var s=I.errors[0];if(s.type===""&&Ra.indexOf(s.message)!==-1)return null;if(s.backtrace&&s.backtrace.length>0){var o=s.backtrace[0];if(o.file==="<anonymous>")return null}return I}var Ks=new RegExp(["^","Uncaught\\s","(.+?)",":\\s","(.+)","$"].join(""));function sh(I){var s=I.errors[0];if(s.type!==""&&s.type!=="Error")return I;var o=s.message.match(Ks);return o!==null&&(s.type=o[1],s.message=o[2]),I}var Ul=ft(98),Bi=ft.n(Ul),Ss={unauthorized:new Error("airbrake: unauthorized: project id or key are wrong"),ipRateLimited:new Error("airbrake: IP is rate limited")},rh=0;function ic(I){var s=Date.now()/1e3;if(s<rh)return Hn.reject(Ss.ipRateLimited);var o={method:I.method,body:I.body,headers:I.headers};return Bi()(I.url,o).then(function(v){if(v.status===401)throw Ss.unauthorized;if(v.status===429){var S=v.headers.get("X-RateLimit-Delay");if(!S)throw Ss.ipRateLimited;var E=parseInt(S,10);throw E>0&&(rh=Date.now()/1e3+E),Ss.ipRateLimited}if(v.status===204)return{json:null};if(v.status===404)throw new Error("404 Not Found");return v.status>=200&&v.status<300?v.json().then(function(R){return{json:R}}):v.status>=400&&v.status<500?v.json().then(function(R){var k=new Error(R.message);throw k}):v.text().then(function(R){var k=new Error("airbrake: fetch: unexpected response: code=".concat(v.status," body='").concat(R,"'"));throw k})})}function ts(I){return function(s){return ah(s,I)}}var Pi=0;function ah(I,s){var o=Date.now()/1e3;return o<Pi?Hn.reject(Ss.ipRateLimited):new Hn(function(v,S){s({url:I.url,method:I.method,body:I.body,headers:{"content-type":"application/json"},timeout:I.timeout},function(E,R,k){if(E){S(E);return}if(!R.statusCode){E=new Error("airbrake: request: response statusCode is ".concat(R.statusCode)),S(E);return}if(R.statusCode===401){S(Ss.unauthorized);return}if(R.statusCode===429){S(Ss.ipRateLimited);var W=R.headers["x-ratelimit-delay"];if(!W)return;var K=void 0;if(typeof W=="string")K=W;else if(W instanceof Array)K=W[0];else return;var q=parseInt(K,10);q>0&&(Pi=Date.now()/1e3+q);return}if(R.statusCode===204){v({json:null});return}if(R.statusCode>=200&&R.statusCode<300){var $=void 0;try{$=JSON.parse(k)}catch(ne){S(ne);return}v($);return}if(R.statusCode>=400&&R.statusCode<500){var $=void 0;try{$=JSON.parse(k)}catch(oe){S(oe);return}E=new Error($.message),S(E);return}k=k.trim(),E=new Error("airbrake: node: unexpected response: code=".concat(R.statusCode," body='").concat(k,"'")),S(E)})})}function _s(I){return I.request?ts(I.request):ic}var nc=function(){var I=function(s,o){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(v[E]=S[E])},I(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");I(s,o);function v(){this.constructor=s}s.prototype=o===null?Object.create(o):(v.prototype=o.prototype,new v)}}(),Ar,br=!1;try{Ar=ft(378),br=!0}catch(I){}var zr=function(){function I(){this.count=0,this.sum=0,this.sumsq=0,this._td=new Ar.Digest}return I.prototype.add=function(s){s===0&&(s=1e-5),this.count+=1,this.sum+=s,this.sumsq+=s*s,this._td&&this._td.push(s)},I.prototype.toJSON=function(){return{count:this.count,sum:this.sum,sumsq:this.sumsq,tdigestCentroids:hh(this._td)}},I}(),oh=function(I){nc(s,I);function s(){var o=I!==null&&I.apply(this,arguments)||this;return o.groups={},o}return s.prototype.addGroups=function(o,v){this.add(o);for(var S in v)v.hasOwnProperty(S)&&this.addGroup(S,v[S])},s.prototype.addGroup=function(o,v){var S=this.groups[o];S||(S=new zr,this.groups[o]=S),S.add(v)},s.prototype.toJSON=function(){return{count:this.count,sum:this.sum,sumsq:this.sumsq,tdigestCentroids:hh(this._td),groups:this.groups}},s}(zr);function hh(I){var s=[],o=[];return I.centroids.each(function(v){s.push(v.mean),o.push(v.n)}),{mean:s,count:o}}var Tr=function(){return Tr=Object.assign||function(I){for(var s,o=1,v=arguments.length;o<v;o++){s=arguments[o];for(var S in s)Object.prototype.hasOwnProperty.call(s,S)&&(I[S]=s[S])}return I},Tr.apply(this,arguments)},Wl=15e3,Vr=function(){function I(s){s===void 0&&(s=""),this.method="",this.route="",this.query="",this.func="",this.file="",this.line=0,this.startTime=new Date,this.query=s}return I.prototype._duration=function(){return this.endTime||(this.endTime=new Date),this.endTime.getTime()-this.startTime.getTime()},I}(),lh=function(){function I(s){this._m={},this._opt=s,this._url="".concat(s.host,"/api/v5/projects/").concat(s.projectId,"/queries-stats?key=").concat(s.projectKey),this._requester=_s(s)}return I.prototype.start=function(s){return s===void 0&&(s=""),new Vr(s)},I.prototype.notify=function(s){var o=this;if(br&&this._opt.performanceStats&&this._opt.queryStats){var v=s._duration(),S=60*1e3,E=new Date(Math.floor(s.startTime.getTime()/S)*S),R={method:s.method,route:s.route,query:s.query,func:s.func,file:s.file,line:s.line,time:E},k=JSON.stringify(R),W=this._m[k];W||(W=new zr,this._m[k]=W),W.add(v),!this._timer&&(this._timer=setTimeout(function(){o._flush()},Wl))}},I.prototype._flush=function(){var s=[];for(var o in this._m)if(this._m.hasOwnProperty(o)){var v=JSON.parse(o),S=Tr(Tr({},v),this._m[o].toJSON());s.push(S)}this._m={},this._timer=null;var E=JSON.stringify({environment:this._opt.environment,queries:s}),R={method:"POST",url:this._url,body:E};this._requester(R).then(function(k){}).catch(function(k){console.error&&console.error("can not report queries stats",k)})},I}(),zl=function(){var I=function(s,o){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(v[E]=S[E])},I(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");I(s,o);function v(){this.constructor=s}s.prototype=o===null?Object.create(o):(v.prototype=o.prototype,new v)}}(),Yr=function(){return Yr=Object.assign||function(I){for(var s,o=1,v=arguments.length;o<v;o++){s=arguments[o];for(var S in s)Object.prototype.hasOwnProperty.call(s,S)&&(I[S]=s[S])}return I},Yr.apply(this,arguments)},Na=15e3,Vl=function(I){zl(s,I);function s(o){var v=I.call(this)||this;return v.queue=o,v.startTime=new Date,v}return s}(Gn),uh=function(){function I(s){this._m={},this._opt=s,this._url="".concat(s.host,"/api/v5/projects/").concat(s.projectId,"/queues-stats?key=").concat(s.projectKey),this._requester=_s(s)}return I.prototype.notify=function(s){var o=this;if(br&&this._opt.performanceStats&&this._opt.queueStats){var v=s._duration();v===0&&(v=1e-5);var S=60*1e3,E=new Date(Math.floor(s.startTime.getTime()/S)*S),R={queue:s.queue,time:E},k=JSON.stringify(R),W=this._m[k];W||(W=new oh,this._m[k]=W),W.addGroups(v,s._groups),!this._timer&&(this._timer=setTimeout(function(){o._flush()},Na))}},I.prototype._flush=function(){var s=[];for(var o in this._m)if(this._m.hasOwnProperty(o)){var v=JSON.parse(o),S=Yr(Yr({},v),this._m[o].toJSON());s.push(S)}this._m={},this._timer=null;var E=JSON.stringify({environment:this._opt.environment,queues:s}),R={method:"POST",url:this._url,body:E};this._requester(R).then(function(k){}).catch(function(k){console.error&&console.error("can not report queues breakdowns",k)})},I}(),Yl=function(){var I=function(s,o){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(v[E]=S[E])},I(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");I(s,o);function v(){this.constructor=s}s.prototype=o===null?Object.create(o):(v.prototype=o.prototype,new v)}}(),Ui=function(){return Ui=Object.assign||function(I){for(var s,o=1,v=arguments.length;o<v;o++){s=arguments[o];for(var S in s)Object.prototype.hasOwnProperty.call(s,S)&&(I[S]=s[S])}return I},Ui.apply(this,arguments)},ws=15e3,jl=function(I){Yl(s,I);function s(o,v,S,E){o===void 0&&(o=""),v===void 0&&(v=""),S===void 0&&(S=0),E===void 0&&(E="");var R=I.call(this)||this;return R.method=o,R.route=v,R.statusCode=S,R.contentType=E,R.startTime=new Date,R}return s}(Gn),sc=function(){function I(s){this._m={},this._opt=s,this._url="".concat(s.host,"/api/v5/projects/").concat(s.projectId,"/routes-stats?key=").concat(s.projectKey),this._requester=_s(s)}return I.prototype.notify=function(s){var o=this;if(br&&this._opt.performanceStats){var v=s._duration(),S=60*1e3,E=new Date(Math.floor(s.startTime.getTime()/S)*S),R={method:s.method,route:s.route,statusCode:s.statusCode,time:E},k=JSON.stringify(R),W=this._m[k];W||(W=new zr,this._m[k]=W),W.add(v),!this._timer&&(this._timer=setTimeout(function(){o._flush()},ws))}},I.prototype._flush=function(){var s=[];for(var o in this._m)if(this._m.hasOwnProperty(o)){var v=JSON.parse(o),S=Ui(Ui({},v),this._m[o].toJSON());s.push(S)}this._m={},this._timer=null;var E=JSON.stringify({environment:this._opt.environment,routes:s}),R={method:"POST",url:this._url,body:E};this._requester(R).then(function(k){}).catch(function(k){console.error&&console.error("can not report routes stats",k)})},I}(),rc=function(){function I(s){this._m={},this._opt=s,this._url="".concat(s.host,"/api/v5/projects/").concat(s.projectId,"/routes-breakdowns?key=").concat(s.projectKey),this._requester=_s(s)}return I.prototype.notify=function(s){var o=this;if(br&&this._opt.performanceStats&&!(s.statusCode<200||s.statusCode>=300&&s.statusCode<400||s.statusCode===404||Object.keys(s._groups).length===0)){var v=s._duration();v===0&&(v=1e-5);var S=60*1e3,E=new Date(Math.floor(s.startTime.getTime()/S)*S),R={method:s.method,route:s.route,responseType:this._responseType(s),time:E},k=JSON.stringify(R),W=this._m[k];W||(W=new oh,this._m[k]=W),W.addGroups(v,s._groups),!this._timer&&(this._timer=setTimeout(function(){o._flush()},ws))}},I.prototype._flush=function(){var s=[];for(var o in this._m)if(this._m.hasOwnProperty(o)){var v=JSON.parse(o),S=Ui(Ui({},v),this._m[o].toJSON());s.push(S)}this._m={},this._timer=null;var E=JSON.stringify({environment:this._opt.environment,routes:s}),R={method:"POST",url:this._url,body:E};this._requester(R).then(function(k){}).catch(function(k){console.error&&console.error("can not report routes breakdowns",k)})},I.prototype._responseType=function(s){if(s.statusCode>=500)return"5xx";if(s.statusCode>=400)return"4xx";if(!s.contentType)return"";var o=s.contentType.split(";")[0].split("/");return o[o.length-1]},I}(),Kl="airbrake-js/browser",ch="2.1.8",Xl="https://github.com/airbrake/airbrake-js/tree/master/packages/browser",jr=function(){return jr=Object.assign||function(I){for(var s,o=1,v=arguments.length;o<v;o++){s=arguments[o];for(var S in s)Object.prototype.hasOwnProperty.call(s,S)&&(I[S]=s[S])}return I},jr.apply(this,arguments)},ql="2020-06-18",ac=6e5,oc={notifier_name:Kl,notifier_version:ch,os:typeof window!="undefined"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:void 0,language:"JavaScript"},Jl="errors",hn="apm",hc=function(){function I(s){this._opt=s,this._requester=_s(s),this._data=new Zl(s.projectId,{project_id:null,poll_sec:0,updated_at:0,config_route:"",settings:[]}),this._origErrorNotifications=s.errorNotifications,this._origPerformanceStats=s.performanceStats}return I.prototype.poll=function(){var s=this,o=setInterval(function(){s._doRequest(),clearInterval(o)},0);return setInterval(this._doRequest.bind(this),ac)},I.prototype._doRequest=function(){var s=this;this._requester(this._requestParams(this._opt)).then(function(o){s._data.merge(o.json),s._opt.host=s._data.errorHost(),s._opt.apmHost=s._data.apmHost(),s._processErrorNotifications(s._data),s._processPerformanceStats(s._data)}).catch(function(o){})},I.prototype._requestParams=function(s){return{method:"GET",url:this._pollUrl(s),headers:{Accept:"application/json","Cache-Control":"no-cache,no-store"}}},I.prototype._pollUrl=function(s){for(var o=this._data.configRoute(s.remoteConfigHost),v="?",S=0,E=this._entries(oc);S<E.length;S++){var R=E[S],k=R[0],W=R[1];v+="&".concat(encodeURIComponent(k),"=").concat(encodeURIComponent(W))}return o+v},I.prototype._processErrorNotifications=function(s){this._origErrorNotifications&&(this._opt.errorNotifications=s.errorNotifications())},I.prototype._processPerformanceStats=function(s){this._origPerformanceStats&&(this._opt.performanceStats=s.performanceStats())},I.prototype._entries=function(s){for(var o=Object.keys(s),v=o.length,S=new Array(v);v--;)S[v]=[o[v],s[o[v]]];return S},I}(),Zl=function(){function I(s,o){this._projectId=s,this._data=o}return I.prototype.merge=function(s){this._data=jr(jr({},this._data),s)},I.prototype.configRoute=function(s){var o=s.replace(/\/$/,""),v=this._data.config_route;return v==null||v===""?"".concat(o,"/").concat(ql,"/config/").concat(this._projectId,"/config.json"):"".concat(o,"/").concat(v)},I.prototype.errorNotifications=function(){var s=this._findSetting(Jl);return s===null?!0:s.enabled},I.prototype.performanceStats=function(){var s=this._findSetting(hn);return s===null?!0:s.enabled},I.prototype.errorHost=function(){var s=this._findSetting(Jl);return s===null?null:s.endpoint},I.prototype.apmHost=function(){var s=this._findSetting(hn);return s===null?null:s.endpoint},I.prototype._findSetting=function(s){var o=this._data.settings;if(o==null)return null;var v=o.find(function(S){return S.name===s});return v===void 0?null:v},I}(),Ba=function(){return Ba=Object.assign||function(I){for(var s,o=1,v=arguments.length;o<v;o++){s=arguments[o];for(var S in s)Object.prototype.hasOwnProperty.call(s,S)&&(I[S]=s[S])}return I},Ba.apply(this,arguments)},dh=function(){function I(s){var o=this;if(this._filters=[],this._performanceFilters=[],this._scope=new tc,this._onClose=[],!s.projectId||!s.projectKey)throw new Error("airbrake: projectId and projectKey are required");if(this._opt=s,this._opt.host=this._opt.host||"https://api.airbrake.io",this._opt.remoteConfigHost=this._opt.remoteConfigHost||"https://notifier-configs.airbrake.io",this._opt.apmHost=this._opt.apmHost||"https://api.airbrake.io",this._opt.timeout=this._opt.timeout||1e4,this._opt.keysBlocklist=this._opt.keysBlocklist||[/password/,/secret/],this._url="".concat(this._opt.host,"/api/v3/projects/").concat(this._opt.projectId,"/notices?key=").concat(this._opt.projectKey),this._opt.errorNotifications=this._opt.errorNotifications!==!1,this._opt.performanceStats=this._opt.performanceStats!==!1,this._opt.queryStats=this._opt.queryStats!==!1,this._opt.queueStats=this._opt.queueStats!==!1,this._opt.remoteConfig=this._opt.remoteConfig!==!1,this._processor=this._opt.processor||ih,this._requester=_s(this._opt),this.addFilter(nh),this.addFilter(St()),this.addFilter(sh),this.addFilter(xr),this.addFilter(function(S){return S.context.notifier={name:Kl,version:ch,url:Xl},o._opt.environment&&(S.context.environment=o._opt.environment),S}),this.routes=new lc(this),this.queues=new uc(this),this.queries=new lh(this._opt),this._opt.remoteConfig){var v=new hc(this._opt).poll();this._onClose.push(function(){return clearInterval(v)})}}return I.prototype.close=function(){for(var s=0,o=this._onClose;s<o.length;s++){var v=o[s];v()}},I.prototype.scope=function(){return this._scope},I.prototype.setActiveScope=function(s){this._scope=s},I.prototype.addFilter=function(s){this._filters.push(s)},I.prototype.addPerformanceFilter=function(s){this._performanceFilters.push(s)},I.prototype.notify=function(s){var o={errors:[],context:Ba(Ba({severity:"error"},this.scope().context()),s.context),params:s.params||{},environment:s.environment||{},session:s.session||{}};if((typeof s!="object"||s.error===void 0)&&(s={error:s}),!this._opt.errorNotifications)return o.error=new Error("airbrake: not sending this error, errorNotifications is disabled err=".concat(JSON.stringify(s.error))),Hn.resolve(o);if(!s.error)return o.error=new Error("airbrake: got err=".concat(JSON.stringify(s.error),", wanted an Error")),Hn.resolve(o);var v=this._processor(s.error);o.errors.push(v);for(var S=0,E=this._filters;S<E.length;S++){var R=E[S],k=R(o);if(k===null)return o.error=new Error("airbrake: error is filtered"),Hn.resolve(o);o=k}return o.context||(o.context={}),o.context.language="JavaScript",this._sendNotice(o)},I.prototype._sendNotice=function(s){var o=Zo(s,{keysBlocklist:this._opt.keysBlocklist});if(this._opt.reporter){if(typeof this._opt.reporter=="function")return this._opt.reporter(s);console.warn("airbrake: options.reporter must be a function")}var v={method:"POST",url:this._url,body:o};return this._requester(v).then(function(S){return s.id=S.json.id,s.url=S.json.url,s}).catch(function(S){return s.error=S,s})},I.prototype.wrap=function(s,o){if(o===void 0&&(o=[]),s._airbrake)return s;var v=this,S=function(){var W=Array.prototype.slice.call(arguments),K=v._wrapArguments(W);try{return s.apply(this,K)}catch(q){throw v.notify({error:q,params:{arguments:W}}),v._ignoreNextWindowError(),q}};for(var E in s)s.hasOwnProperty(E)&&(S[E]=s[E]);for(var R=0,k=o;R<k.length;R++){var E=k[R];s.hasOwnProperty(E)&&(S[E]=s[E])}return S._airbrake=!0,S.inner=s,S},I.prototype._wrapArguments=function(s){for(var o=0;o<s.length;o++){var v=s[o];typeof v=="function"&&(s[o]=this.wrap(v))}return s},I.prototype._ignoreNextWindowError=function(){},I.prototype.call=function(s){for(var o=[],v=1;v<arguments.length;v++)o[v-1]=arguments[v];var S=this.wrap(s);return S.apply(this,Array.prototype.slice.call(arguments,1))},I}(),lc=function(){function I(s){this._notifier=s,this._routes=new sc(s._opt),this._breakdowns=new rc(s._opt),this._opt=s._opt}return I.prototype.start=function(s,o,v,S){s===void 0&&(s=""),o===void 0&&(o=""),v===void 0&&(v=0),S===void 0&&(S="");var E=new jl(s,o,v,S);if(!this._opt.performanceStats)return E;var R=this._notifier.scope().clone();return R.setContext({httpMethod:s,route:o}),R.setRouteMetric(E),this._notifier.setActiveScope(R),E},I.prototype.notify=function(s){if(this._opt.performanceStats){s.end();for(var o=0,v=this._notifier._performanceFilters;o<v.length;o++){var S=v[o];if(S(s)===null)return}this._routes.notify(s),this._breakdowns.notify(s)}},I}(),uc=function(){function I(s){this._notifier=s,this._queues=new uh(s._opt),this._opt=s._opt}return I.prototype.start=function(s){var o=new Vl(s);if(!this._opt.performanceStats)return o;var v=this._notifier.scope().clone();return v.setContext({queue:s}),v.setQueueMetric(o),this._notifier.setActiveScope(v),o},I.prototype.notify=function(s){this._opt.performanceStats&&(s.end(),this._queues.notify(s))},I}();function cc(I){return window.navigator&&window.navigator.userAgent&&(I.context.userAgent=window.navigator.userAgent),window.location&&(I.context.url=String(window.location),I.context.rootDirectory=window.location.protocol+"//"+window.location.host),I}var fh=["debug","log","info","warn","error"];function $l(I){for(var s=function(E){if(!(E in console))return"continue";var R=console[E],k=function(){for(var W=[],K=0;K<arguments.length;K++)W[K]=arguments[K];R.apply(console,W),I.scope().pushHistory({type:"log",severity:E,arguments:W})};k.inner=R,console[E]=k},o=0,v=fh;o<v.length;o++){var S=v[o];s(S)}}var dc=["type","name","src"];function fc(I){var s=pc(I);window.addEventListener&&(window.addEventListener("load",s),window.addEventListener("error",function(o){ph(o,"error")||s(o)},!0)),typeof document=="object"&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",s),document.addEventListener("click",s),document.addEventListener("keypress",s))}function pc(I){return function(s){var o=ph(s,"target");if(o){var v={type:s.type};try{v.target=yc(o)}catch(S){v.target="<".concat(String(S),">")}I.scope().pushHistory(v)}}}function gc(I){if(!I)return"";var s=[];if(I.tagName&&s.push(I.tagName.toLowerCase()),I.id&&(s.push("#"),s.push(I.id)),I.classList&&Array.from)s.push("."),s.push(Array.from(I.classList).join("."));else if(I.className){var o=mc(I.className);o!==""&&(s.push("."),s.push(o))}if(I.getAttribute)for(var v=0,S=dc;v<S.length;v++){var E=S[v],R=I.getAttribute(E);R&&s.push("[".concat(E,'="').concat(R,'"]'))}return s.join("")}function mc(I){return I.split?I.split(" ").join("."):I.baseVal&&I.baseVal.split?I.baseVal.split(" ").join("."):(console.error("unsupported HTMLElement.className type",typeof I),"")}function yc(I){for(var s=10,o=[],v=I;v;){var S=gc(v);if(S!==""&&(o.push(S),o.length>s))break;v=v.parentNode}return o.length===0?String(I):o.reverse().join(" > ")}function ph(I,s){try{return I[s]}catch(o){return null}}function Pa(I){var s=window.fetch;window.fetch=function(o,v){var S={type:"xhr",date:new Date};return S.method=v&&v.method?v.method:"GET",typeof o=="string"?S.url=o:(S.method=o.method,S.url=o.url),I._ignoreNextXHR++,setTimeout(function(){return I._ignoreNextXHR--}),s.apply(this,arguments).then(function(E){return S.statusCode=E.status,S.duration=new Date().getTime()-S.date.getTime(),I.scope().pushHistory(S),E}).catch(function(E){throw S.error=E,S.duration=new Date().getTime()-S.date.getTime(),I.scope().pushHistory(S),E})}}var gh="";function Ql(){return document.location&&document.location.pathname}function vc(I){gh=Ql();var s=window.onpopstate;window.onpopstate=function(S){var E=Ql();if(E&&eu(I,E),s)return s.apply(this,arguments)};var o=history.pushState;history.pushState=function(S,E,R){R&&eu(I,R.toString()),o.apply(this,arguments)}}function eu(I,s){var o=s.indexOf("://");o>=0?(s=s.slice(o+3),o=s.indexOf("/"),s=o>=0?s.slice(o):"/"):s.charAt(0)!=="/"&&(s="/"+s),I.scope().pushHistory({type:"location",from:gh,to:s}),gh=s}function tu(I){function s(S){var E=S.__state;E.statusCode=S.status,E.duration=new Date().getTime()-E.date.getTime(),I.scope().pushHistory(E)}var o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(E,R,k,W,K){I._ignoreNextXHR===0&&(this.__state={type:"xhr",method:E,url:R}),o.apply(this,arguments)};var v=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(E){var R=this.onreadystatechange;return this.onreadystatechange=function(k){if(this.readyState===4&&this.__state&&s(this),R)return R.apply(this,arguments)},this.__state&&(this.__state.date=new Date),v.apply(this,arguments)}}var iu=function(){var I=function(s,o){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(v[E]=S[E])},I(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");I(s,o);function v(){this.constructor=s}s.prototype=o===null?Object.create(o):(v.prototype=o.prototype,new v)}}(),ka=function(){return ka=Object.assign||function(I){for(var s,o=1,v=arguments.length;o<v;o++){s=arguments[o];for(var S in s)Object.prototype.hasOwnProperty.call(s,S)&&(I[S]=s[S])}return I},ka.apply(this,arguments)},xc=function(I){iu(s,I);function s(o){var v=I.call(this,o)||this;return v.offline=!1,v.todo=[],v._ignoreWindowError=0,v._ignoreNextXHR=0,typeof window=="undefined"||(v.addFilter(cc),window.addEventListener&&(v.onOnline=v.onOnline.bind(v),window.addEventListener("online",v.onOnline),v.onOffline=v.onOffline.bind(v),window.addEventListener("offline",v.onOffline),v.onUnhandledrejection=v.onUnhandledrejection.bind(v),window.addEventListener("unhandledrejection",v.onUnhandledrejection),v._onClose.push(function(){window.removeEventListener("online",v.onOnline),window.removeEventListener("offline",v.onOffline),window.removeEventListener("unhandledrejection",v.onUnhandledrejection)})),v._instrument(o.instrumentation)),v}return s.prototype._instrument=function(o){if(o===void 0&&(o={}),o.console===void 0&&(o.console=!Ac(this._opt.environment)),Cs(o.onerror)){var v=this,S=window.onerror;window.onerror=function(){S&&S.apply(this,arguments),v.onerror.apply(v,arguments)}}fc(this),Cs(o.fetch)&&typeof fetch=="function"&&Pa(this),Cs(o.history)&&typeof history=="object"&&vc(this),Cs(o.console)&&typeof console=="object"&&$l(this),Cs(o.xhr)&&typeof XMLHttpRequest!="undefined"&&tu(this)},s.prototype.notify=function(o){var v=this;return this.offline?new Hn(function(S,E){for(v.todo.push({err:o,resolve:S,reject:E});v.todo.length>100;){var R=v.todo.shift();if(R===void 0)break;R.resolve({error:new Error("airbrake: offline queue is too large")})}}):I.prototype.notify.call(this,o)},s.prototype.onOnline=function(){this.offline=!1;for(var o=function(k){v.notify(k.err).then(function(W){k.resolve(W)})},v=this,S=0,E=this.todo;S<E.length;S++){var R=E[S];o(R)}this.todo=[]},s.prototype.onOffline=function(){this.offline=!0},s.prototype.onUnhandledrejection=function(o){var v=o.reason||o.detail&&o.detail.reason;if(v){var S=v.message||String(v);if(!(S.indexOf&&S.indexOf("airbrake: ")===0)){if(typeof v!="object"||v.error===void 0){this.notify({error:v,context:{unhandledRejection:!0}});return}this.notify(ka(ka({},v),{context:{unhandledRejection:!0}}))}}},s.prototype.onerror=function(o,v,S,E,R){if(!(this._ignoreWindowError>0)){if(R){this.notify({error:R,context:{windowError:!0}});return}!v||!S||this.notify({error:{message:o,fileName:v,lineNumber:S,columnNumber:E,noStack:!0},context:{windowError:!0}})}},s.prototype._ignoreNextWindowError=function(){var o=this;this._ignoreWindowError++,setTimeout(function(){return o._ignoreWindowError--})},s}(dh);function Ac(I){return I&&I.startsWith&&I.startsWith("dev")}function Cs(I){return I===void 0||I===!0}const bc=JSON.parse('{"components":{"commonAssetsLoader1":{"type":"CommonAssetsLoader"},"sectionsManager1":{"type":"SectionsManager"},"giftBoxTweenMaker1":{"type":"GiftBoxTweenMaker","depth":0},"loadingIcon1":{"type":"LoadingIcon"},"backgroundMusic1":{"type":"BackgroundMusic"},"mainMenu1":{"type":"MainMenu","scale":{"portrait":0.8,"landscape":0.8},"size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"depth":11},"mainMenuBackground1":{"parentId":"mainMenu1","position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"type":"MainMenuBackground","name":"MainMenuBackground","volume":1,"zoom":{"portrait":1,"landscape":1},"zoomPosition":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"depth":10},"topUIWrapper1":{"type":"TopUIWrapper","size":{"portrait":{"width":1,"height":0.09},"landscape":{"width":1,"height":0.1}},"position":{"portrait":{"x":0.5,"y":0.045},"landscape":{"x":0.5,"y":0.05}}},"gemCounter1":{"parentId":"topUIWrapper1","type":"GemCounter","size":{"portrait":{"width":0.18,"height":1},"landscape":{"width":0.1,"height":1}},"position":{"portrait":{"x":0.2,"y":0.5},"landscape":{"x":0.1,"y":0.5}},"depth":27,"initialCount":250,"gemPerLetter":10,"fontColor":16777215},"settings1":{"parentId":"topUIWrapper1","type":"Settings","size":{"portrait":{"width":0.18,"height":1},"landscape":{"width":0.2,"height":1}},"position":{"portrait":{"x":0.9,"y":0.5},"landscape":{"x":0.96,"y":0.5}},"depth":11},"adBannerArea1":{"type":"AdBannerArea","size":{"portrait":{"width":1,"height":0.1},"landscape":{"width":1,"height":0.1}},"position":{"portrait":{"x":0.5,"y":0.95},"landscape":{"x":0.5,"y":0.95}}},"dimmer1":{"type":"Dimmer","position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"isVisible":false},"hint1":{"parentId":"canvas1","type":"hint","scale":{"portrait":1,"landscape":1},"size":{"portrait":{"width":0.13,"height":0.1},"landscape":{"width":0.125,"height":0.1}},"position":{"portrait":{"x":0.9,"y":0.6},"landscape":{"x":0.95,"y":0.9}},"fontSize":0.18,"fontColor":"ffffff","origin":{"x":1,"y":1},"hint_tutorial_amount":2,"gemCost":100,"gemImageAngle":30,"isEnabled":true},"hammer1":{"parentId":"canvas1","type":"Hammer","scale":{"portrait":1,"landscape":1},"size":{"portrait":{"width":0.13,"height":0.1},"landscape":{"width":0.125,"height":0.1}},"position":{"portrait":{"x":0.1,"y":0.6},"landscape":{"x":0.55,"y":0.9}},"fontSize":0.18,"fontColor":"ffffff","origin":{"x":1,"y":1},"hammer_hint_tutorial_amount":2,"gemCost":200,"gemImageAngle":30,"isEnabled":true},"fortuneWheel1":{"parentId":"canvas1","type":"FortuneWheel","size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"wheelPosition":{"portrait":{"x":0.5,"y":0.4},"landscape":{"x":0.5,"y":0.4}},"fontSize":0.18,"fontColor":"ffffff","origin":{"x":1,"y":1},"depth":26,"wheel_spincount":6,"wheel_percentages":"500,5|250,10|100,5|25,100|20,125|15,175|10,210|5,80|0,25|-1,1000|-2,30|-3,30|-4,60|-5,30|-100,250|-6,1400","durationMax":8,"noAdWaitTime":100,"prizeString":"1,5|1,20|1,100|1,10|1,25|-100,1|1,15|1,100","colors":"2bd492,5865d3,4dc8f5,872bd4,b81e27,f62a77,f62ae5,ee7a2b,ee8b2b,ffd01a,45953a,97df45,2831f0,1afbf8,e34f15","coinTransformParameters":"100,coin,100|0,hammer,1|0,hint,1|0,gift,1|0,rocket,3|0,goldenspin,1|0,lightning,1","ligthningConversionParameters":"100,coin,100|0,hammer,1|0,hint,1|0,discount,1|0,gift,1|0,rocket,1|0,goldenspin,1","lightning_struck_count":2},"ribbon1":{"parentId":"canvas1","fontSize":0.13,"fontColor":"ffffff","position":{"portrait":{"x":0.5,"y":0.525},"landscape":{"x":0.5,"y":0.5}},"size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"scale":{"portrait":0.9,"landscape":1},"textPositionYOffsetMultiplier":0.33,"type":"cheerBoardWithTexture1","name":"cheerBoardWithTexture1","cheerEveryXMoves":1,"maxLetterCount":15,"depth":7,"appearanceTweenDurationInMilliseconds":400,"disappearanceTweenDurationInMilliseconds":400,"waitDurationAfterAppearanceInMilliseconds":1000},"roundedTextBox1":{"parentId":"canvas1","type":"RoundedTextBox","position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"boxTopColor":14018047,"boxBottomColor":11521535,"fontColor":"3b416c","frameColor":5408737,"isVisible":false},"wordBoard1":{"parentId":"canvas1","type":"wordBoard","size":{"portrait":{"width":1,"height":0.5},"landscape":{"width":0.4,"height":0.9}},"position":{"portrait":{"x":0.5,"y":0.25},"landscape":{"x":0.25,"y":0.5}},"boardScale":{"portrait":0.9,"landscape":1},"boardPosition":{"portrait":{"x":0.5,"y":0.275},"landscape":{"x":0.5,"y":0.5}},"fontColor":"ffffff","fontSize":"0.65","hintedFontColor":"#3b416c","boxHasLetterColor":16777215,"boxHasLetterAlpha":0.8,"boxHasLetterBorderWidth":0.01,"boxFullAlpha":1,"boxEmphasizedAlpha":1,"letterBoxSpacing":0.02,"tweenDuplicateGlowDuration":200,"shakePercentage":0.07,"boxShadow":{"color":"#000000","isEnabled":true,"offset":{"x":0.6,"y":0.7},"alpha":0.15},"tweenMoveDestinationDuration":350,"butterflyString":"13-E,1-BEE,0-BEEGEELEEBEEBEEBEEGEEBEEGEELEE","butterflyProps":{"isActive":1,"legendary_butterfly_fail_count":"1-1","normal_butterfly_fail_count":"5-6","golden_butterfly_fail_count":"2-2","legendary_butterfly_waiting_time":1200,"golden_butterfly_waiting_time":900,"normal_butterfly_waiting_time":600,"normal_butterfly_prize":"30-80","legendary_butterfly_prize":"240-480","golden_butterfly_prize":"80-160","normal_butterfly_prize_pool":"GEM","legendary_butterfly_prize_pool":"GEM","golden_butterfly_prize_pool":"GEM"}},"butterflyTimer1":{"parentId":"canvas1","type":"ButterflyTimer","scale":{"portrait":1,"landscape":1},"size":{"portrait":{"width":0.13,"height":0.1},"landscape":{"width":0.125,"height":0.1}},"position":{"portrait":{"x":0.1,"y":0.6},"landscape":{"x":0.55,"y":0.9}},"depth":0},"wordWheel1":{"parentId":"canvas1","type":"wordWheel","name":"wordWheel1","position":{"portrait":{"x":0.5,"y":0.75},"landscape":{"x":0.75,"y":0.5}},"circlePosition":{"portrait":{"x":0.5,"y":0.75},"landscape":{"x":0.5,"y":0.75}},"size":{"portrait":{"width":0.625,"height":0.45},"landscape":{"width":0.3,"height":0.6}},"fontColor":"3b416c","fontSize":"0.45","radius":1,"selectedFontColor":"#ffffff","wheelColor":16777215,"wheelAlpha":"0.9","wheelScale":{"portrait":1,"landscape":1},"shuffleButtonScale":{"portrait":0.45,"landscape":0.45}},"canvas1":{"type":"canvas","name":"canvas1","position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}}},"background1":{"position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"type":"background","name":"background","volume":1,"zoom":{"portrait":1,"landscape":1},"zoomPosition":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}}},"celebrationParticle1":{"position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"type":"celebrationParticle","name":"celebrationParticle","frequencyScaler":12,"scale":0.07,"maxParticleCount":100,"isEnabled":true,"depth":27},"otherWords1":{"parentId":"canvas1","type":"OtherWords","scale":{"portrait":1,"landscape":1},"size":{"portrait":{"width":0.13,"height":0.1},"landscape":{"width":0.125,"height":0.1}},"position":{"portrait":{"x":0.1,"y":0.9},"landscape":{"x":0.55,"y":0.7}},"depth":0,"progressArray":[5,10,15,20,25],"initialState":{"level":0,"found":0},"rewardedAdMultiplier":2,"duplicateTweenDurationInMilliseconds":200,"isEnabled":true},"endLevelScreen1":{"parentId":"canvas1","type":"EndLevelScreen","size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"depth":1,"isVisible":false},"customRewardedAd1":{"parentId":"canvas1","type":"RewardedAd","size":{"portrait":{"width":0.13,"height":0.1},"landscape":{"width":0.125,"height":0.1}},"position":{"portrait":{"x":0.9,"y":0.9},"landscape":{"x":0.95,"y":0.9}},"minLevel":18,"coinReward":40,"delayTime":30,"destroyTime":45,"levelInterval":1},"rewardCollector1":{"type":"RewardCollector","size":{"portrait":{"width":1,"height":1},"landscape":{"width":1,"height":1}},"position":{"portrait":{"x":0.5,"y":0.5},"landscape":{"x":0.5,"y":0.5}},"depth":10}},"options":{"interstitialAd":{"first_level":15,"default":120,"minimum":60,"intervalChange":-1,"every_x_levels":1},"shouldForcePortraitMode":false}}');var Tc=ft(155);const Sr={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const nu=function(I,s){if(!I)throw su(s)},su=function(I){return new Error("Firebase Database ("+Sr.SDK_VERSION+") INTERNAL ASSERT FAILED: "+I)};const Da=function(I){const s=[];let o=0;for(let v=0;v<I.length;v++){let S=I.charCodeAt(v);S<128?s[o++]=S:S<2048?(s[o++]=S>>6|192,s[o++]=S&63|128):(S&64512)===55296&&v+1<I.length&&(I.charCodeAt(v+1)&64512)===56320?(S=65536+((S&1023)<<10)+(I.charCodeAt(++v)&1023),s[o++]=S>>18|240,s[o++]=S>>12&63|128,s[o++]=S>>6&63|128,s[o++]=S&63|128):(s[o++]=S>>12|224,s[o++]=S>>6&63|128,s[o++]=S&63|128)}return s},ru=function(I){const s=[];let o=0,v=0;for(;o<I.length;){const S=I[o++];if(S<128)s[v++]=String.fromCharCode(S);else if(S>191&&S<224){const E=I[o++];s[v++]=String.fromCharCode((S&31)<<6|E&63)}else if(S>239&&S<365){const E=I[o++],R=I[o++],k=I[o++],W=((S&7)<<18|(E&63)<<12|(R&63)<<6|k&63)-65536;s[v++]=String.fromCharCode(55296+(W>>10)),s[v++]=String.fromCharCode(56320+(W&1023))}else{const E=I[o++],R=I[o++];s[v++]=String.fromCharCode((S&15)<<12|(E&63)<<6|R&63)}}return s.join("")},mh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(I,s){if(!Array.isArray(I))throw Error("encodeByteArray takes an array as a parameter");this.init_();const o=s?this.byteToCharMapWebSafe_:this.byteToCharMap_,v=[];for(let S=0;S<I.length;S+=3){const E=I[S],R=S+1<I.length,k=R?I[S+1]:0,W=S+2<I.length,K=W?I[S+2]:0,q=E>>2,$=(E&3)<<4|k>>4;let ne=(k&15)<<2|K>>6,oe=K&63;W||(oe=64,R||(ne=64)),v.push(o[q],o[$],o[ne],o[oe])}return v.join("")},encodeString(I,s){return this.HAS_NATIVE_SUPPORT&&!s?btoa(I):this.encodeByteArray(Da(I),s)},decodeString(I,s){return this.HAS_NATIVE_SUPPORT&&!s?atob(I):ru(this.decodeStringToByteArray(I,s))},decodeStringToByteArray(I,s){this.init_();const o=s?this.charToByteMapWebSafe_:this.charToByteMap_,v=[];for(let S=0;S<I.length;){const E=o[I.charAt(S++)],k=S<I.length?o[I.charAt(S)]:0;++S;const K=S<I.length?o[I.charAt(S)]:64;++S;const $=S<I.length?o[I.charAt(S)]:64;if(++S,E==null||k==null||K==null||$==null)throw Error();const ne=E<<2|k>>4;if(v.push(ne),K!==64){const oe=k<<4&240|K>>2;if(v.push(oe),$!==64){const ce=K<<6&192|$;v.push(ce)}}}return v},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let I=0;I<this.ENCODED_VALS.length;I++)this.byteToCharMap_[I]=this.ENCODED_VALS.charAt(I),this.charToByteMap_[this.byteToCharMap_[I]]=I,this.byteToCharMapWebSafe_[I]=this.ENCODED_VALS_WEBSAFE.charAt(I),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[I]]=I,I>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(I)]=I,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(I)]=I)}}},Sc=function(I){const s=Da(I);return mh.encodeByteArray(s,!0)},Fa=function(I){return Sc(I).replace(/\./g,"")},_r=function(I){try{return mh.decodeString(I,!0)}catch(s){console.error("base64Decode failed: ",s)}return null};function yh(I){return au(void 0,I)}function au(I,s){if(!(s instanceof Object))return s;switch(s.constructor){case Date:const o=s;return new Date(o.getTime());case Object:I===void 0&&(I={});break;case Array:I=[];break;default:return s}for(const o in s)!s.hasOwnProperty(o)||!vh(o)||(I[o]=au(I[o],s[o]));return I}function vh(I){return I!=="__proto__"}function Kr(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bd(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function Cn(){try{return Object.prototype.toString.call(ft.g.process)==="[object process]"}catch(I){return!1}}function Td(){return typeof self=="object"&&self.self===self}function _c(){const I=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof I=="object"&&I.id!==void 0}function wr(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nt(){return Kr().indexOf("Electron/")>=0}function Sd(){const I=Kr();return I.indexOf("MSIE ")>=0||I.indexOf("Trident/")>=0}function ln(){return Kr().indexOf("MSAppHost/")>=0}function wi(){return Sr.NODE_CLIENT===!0||Sr.NODE_ADMIN===!0}function Xs(){return!Cn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xh(){try{return typeof indexedDB=="object"}catch(I){return!1}}function Ha(){return new Promise((I,s)=>{try{let o=!0;const v="validate-browser-context-for-indexeddb-analytics-module",S=self.indexedDB.open(v);S.onsuccess=()=>{S.result.close(),o||self.indexedDB.deleteDatabase(v),I(!0)},S.onupgradeneeded=()=>{o=!1},S.onerror=()=>{var E;s(((E=S.error)===null||E===void 0?void 0:E.message)||"")}}catch(o){s(o)}})}function is(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}function ou(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof ft.g!="undefined")return ft.g;throw new Error("Unable to locate global object.")}const Ga=()=>ou().__FIREBASE_DEFAULTS__,gi=()=>{if(typeof Tc=="undefined"||typeof{WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0,mode:"production",platform:"famobi"}=="undefined")return;const I={WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0,mode:"production",platform:"famobi"}.__FIREBASE_DEFAULTS__;if(I)return JSON.parse(I)},xi=()=>{if(typeof document=="undefined")return;let I;try{I=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(o){return}const s=I&&_r(I[1]);return s&&JSON.parse(s)},Ua=()=>{try{return Ga()||gi()||xi()}catch(I){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${I}`);return}},hu=I=>{var s,o;return(o=(s=Ua())===null||s===void 0?void 0:s.emulatorHosts)===null||o===void 0?void 0:o[I]},Wa=I=>{const s=hu(I);if(!s)return;const o=s.lastIndexOf(":");if(o<=0||o+1===s.length)throw new Error(`Invalid host ${s} with no separate hostname and port!`);const v=parseInt(s.substring(o+1),10);return s[0]==="["?[s.substring(1,o-1),v]:[s.substring(0,o),v]},Ah=()=>{var I;return(I=Ua())===null||I===void 0?void 0:I.config},wc=I=>{var s;return(s=Ua())===null||s===void 0?void 0:s[`_${I}`]};class Xr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((s,o)=>{this.resolve=s,this.reject=o})}wrapCallback(s){return(o,v)=>{o?this.reject(o):this.resolve(v),typeof s=="function"&&(this.promise.catch(()=>{}),s.length===1?s(o):s(o,v))}}}function xn(I,s){if(I.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const o={alg:"none",type:"JWT"},v=s||"demo-project",S=I.iat||0,E=I.sub||I.user_id;if(!E)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const R=Object.assign({iss:`https://securetoken.google.com/${v}`,aud:v,iat:S,exp:S+3600,auth_time:S,sub:E,user_id:E,firebase:{sign_in_provider:"custom",identities:{}}},I),k="";return[Fa(JSON.stringify(o)),Fa(JSON.stringify(R)),k].join(".")}const Cr="FirebaseError";class ns extends Error{constructor(s,o,v){super(o),this.code=s,this.customData=v,this.name=Cr,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qr.prototype.create)}}class qr{constructor(s,o,v){this.service=s,this.serviceName=o,this.errors=v}create(s,...o){const v=o[0]||{},S=`${this.service}/${s}`,E=this.errors[s],R=E?lu(E,v):"Error",k=`${this.serviceName}: ${R} (${S}).`;return new ns(S,k,v)}}function lu(I,s){return I.replace(ss,(o,v)=>{const S=s[v];return S!=null?String(S):`<${v}?>`})}const ss=/\{\$([^}]+)}/g;function Bt(I){return JSON.parse(I)}function Cc(I){return JSON.stringify(I)}const Wi=function(I){let s={},o={},v={},S="";try{const E=I.split(".");s=Bt(_r(E[0])||""),o=Bt(_r(E[1])||""),S=E[2],v=o.d||{},delete o.d}catch(E){}return{header:s,claims:o,data:v,signature:S}},Ec=function(I){const s=Wi(I).claims,o=Math.floor(new Date().getTime()/1e3);let v=0,S=0;return typeof s=="object"&&(s.hasOwnProperty("nbf")?v=s.nbf:s.hasOwnProperty("iat")&&(v=s.iat),s.hasOwnProperty("exp")?S=s.exp:S=v+86400),!!o&&!!v&&!!S&&o>=v&&o<=S},ni=function(I){const s=Wi(I).claims;return typeof s=="object"&&s.hasOwnProperty("iat")?s.iat:null},_d=function(I){const s=Wi(I),o=s.claims;return!!o&&typeof o=="object"&&o.hasOwnProperty("iat")},Ic=function(I){const s=Wi(I).claims;return typeof s=="object"&&s.admin===!0};function bh(I,s){return Object.prototype.hasOwnProperty.call(I,s)}function wd(I,s){if(Object.prototype.hasOwnProperty.call(I,s))return I[s]}function Cd(I){for(const s in I)if(Object.prototype.hasOwnProperty.call(I,s))return!1;return!0}function Ed(I,s,o){const v={};for(const S in I)Object.prototype.hasOwnProperty.call(I,S)&&(v[S]=s.call(o,I[S],S,I));return v}function za(I,s){if(I===s)return!0;const o=Object.keys(I),v=Object.keys(s);for(const S of o){if(!v.includes(S))return!1;const E=I[S],R=s[S];if(Va(E)&&Va(R)){if(!za(E,R))return!1}else if(E!==R)return!1}for(const S of v)if(!o.includes(S))return!1;return!0}function Va(I){return I!==null&&typeof I=="object"}function uu(I,s=2e3){const o=new Xr;return setTimeout(()=>o.reject("timeout!"),s),I.then(o.resolve,o.reject),o.promise}function Id(I){const s=[];for(const[o,v]of Object.entries(I))Array.isArray(v)?v.forEach(S=>{s.push(encodeURIComponent(o)+"="+encodeURIComponent(S))}):s.push(encodeURIComponent(o)+"="+encodeURIComponent(v));return s.length?"&"+s.join("&"):""}function Od(I){const s={};return I.replace(/^\?/,"").split("&").forEach(v=>{if(v){const[S,E]=v.split("=");s[decodeURIComponent(S)]=decodeURIComponent(E)}}),s}function Ld(I){const s=I.indexOf("?");if(!s)return"";const o=I.indexOf("#",s);return I.substring(s,o>0?o:void 0)}class Ri{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let s=1;s<this.blockSize;++s)this.pad_[s]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(s,o){o||(o=0);const v=this.W_;if(typeof s=="string")for(let $=0;$<16;$++)v[$]=s.charCodeAt(o)<<24|s.charCodeAt(o+1)<<16|s.charCodeAt(o+2)<<8|s.charCodeAt(o+3),o+=4;else for(let $=0;$<16;$++)v[$]=s[o]<<24|s[o+1]<<16|s[o+2]<<8|s[o+3],o+=4;for(let $=16;$<80;$++){const ne=v[$-3]^v[$-8]^v[$-14]^v[$-16];v[$]=(ne<<1|ne>>>31)&4294967295}let S=this.chain_[0],E=this.chain_[1],R=this.chain_[2],k=this.chain_[3],W=this.chain_[4],K,q;for(let $=0;$<80;$++){$<40?$<20?(K=k^E&(R^k),q=1518500249):(K=E^R^k,q=1859775393):$<60?(K=E&R|k&(E|R),q=2400959708):(K=E^R^k,q=3395469782);const ne=(S<<5|S>>>27)+K+W+q+v[$]&4294967295;W=k,k=R,R=(E<<30|E>>>2)&4294967295,E=S,S=ne}this.chain_[0]=this.chain_[0]+S&4294967295,this.chain_[1]=this.chain_[1]+E&4294967295,this.chain_[2]=this.chain_[2]+R&4294967295,this.chain_[3]=this.chain_[3]+k&4294967295,this.chain_[4]=this.chain_[4]+W&4294967295}update(s,o){if(s==null)return;o===void 0&&(o=s.length);const v=o-this.blockSize;let S=0;const E=this.buf_;let R=this.inbuf_;for(;S<o;){if(R===0)for(;S<=v;)this.compress_(s,S),S+=this.blockSize;if(typeof s=="string"){for(;S<o;)if(E[R]=s.charCodeAt(S),++R,++S,R===this.blockSize){this.compress_(E),R=0;break}}else for(;S<o;)if(E[R]=s[S],++R,++S,R===this.blockSize){this.compress_(E),R=0;break}}this.inbuf_=R,this.total_+=o}digest(){const s=[];let o=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let S=this.blockSize-1;S>=56;S--)this.buf_[S]=o&255,o/=256;this.compress_(this.buf_);let v=0;for(let S=0;S<5;S++)for(let E=24;E>=0;E-=8)s[v]=this.chain_[S]>>E&255,++v;return s}}function un(I,s){const o=new Oc(I,s);return o.subscribe.bind(o)}class Oc{constructor(s,o){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=o,this.task.then(()=>{s(this)}).catch(v=>{this.error(v)})}next(s){this.forEachObserver(o=>{o.next(s)})}error(s){this.forEachObserver(o=>{o.error(s)}),this.close(s)}complete(){this.forEachObserver(s=>{s.complete()}),this.close()}subscribe(s,o,v){let S;if(s===void 0&&o===void 0&&v===void 0)throw new Error("Missing Observer.");Mc(s,["next","error","complete"])?S=s:S={next:s,error:o,complete:v},S.next===void 0&&(S.next=Th),S.error===void 0&&(S.error=Th),S.complete===void 0&&(S.complete=Th);const E=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?S.error(this.finalError):S.complete()}catch(R){}}),this.observers.push(S),E}unsubscribeOne(s){this.observers===void 0||this.observers[s]===void 0||(delete this.observers[s],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(s){if(!this.finalized)for(let o=0;o<this.observers.length;o++)this.sendOne(o,s)}sendOne(s,o){this.task.then(()=>{if(this.observers!==void 0&&this.observers[s]!==void 0)try{o(this.observers[s])}catch(v){typeof console!="undefined"&&console.error&&console.error(v)}})}close(s){this.finalized||(this.finalized=!0,s!==void 0&&(this.finalError=s),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lc(I,s){return(...o)=>{Promise.resolve(!0).then(()=>{I(...o)}).catch(v=>{s&&s(v)})}}function Mc(I,s){if(typeof I!="object"||I===null)return!1;for(const o of s)if(o in I&&typeof I[o]=="function")return!0;return!1}function Th(){}const Rc=function(I,s,o,v){let S;if(v<s?S="at least "+s:v>o&&(S=o===0?"none":"no more than "+o),S){const E=I+" failed: Was called with "+v+(v===1?" argument.":" arguments.")+" Expects "+S+".";throw new Error(E)}};function Ya(I,s){return`${I} failed: ${s} argument `}function Nc(I,s,o){if(!(o&&!s)&&typeof s!="string")throw new Error(Ya(I,"namespace")+"must be a valid firebase namespace.")}function Jr(I,s,o,v){if(!(v&&!o)&&typeof o!="function")throw new Error(Ya(I,s)+"must be a valid function.")}function Md(I,s,o,v){if(!(v&&!o)&&(typeof o!="object"||o===null))throw new Error(Ya(I,s)+"must be a valid context object.")}const Bc=function(I){const s=[];let o=0;for(let v=0;v<I.length;v++){let S=I.charCodeAt(v);if(S>=55296&&S<=56319){const E=S-55296;v++,nu(v<I.length,"Surrogate pair missing trail surrogate.");const R=I.charCodeAt(v)-56320;S=65536+(E<<10)+R}S<128?s[o++]=S:S<2048?(s[o++]=S>>6|192,s[o++]=S&63|128):S<65536?(s[o++]=S>>12|224,s[o++]=S>>6&63|128,s[o++]=S&63|128):(s[o++]=S>>18|240,s[o++]=S>>12&63|128,s[o++]=S>>6&63|128,s[o++]=S&63|128)}return s},Pc=function(I){let s=0;for(let o=0;o<I.length;o++){const v=I.charCodeAt(o);v<128?s++:v<2048?s+=2:v>=55296&&v<=56319?(s+=4,o++):s+=3}return s};const Rd=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,I=>{const s=Math.random()*16|0;return(I==="x"?s:s&3|8).toString(16)})};const kc=1e3,Dc=2,Fc=4*60*60*1e3,Hc=.5;function Sh(I,s=kc,o=Dc){const v=s*Math.pow(o,I),S=Math.round(Hc*v*(Math.random()-.5)*2);return Math.min(Fc,v+S)}function cu(I){return Number.isFinite(I)?I+du(I):`${I}`}function du(I){I=Math.abs(I);const s=I%100;if(s>=10&&s<=20)return"th";const o=I%10;return o===1?"st":o===2?"nd":o===3?"rd":"th"}function rs(I){return I&&I._delegate?I._delegate:I}class as{constructor(s,o,v){this.name=s,this.instanceFactory=o,this.type=v,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(s){return this.instantiationMode=s,this}setMultipleInstances(s){return this.multipleInstances=s,this}setServiceProps(s){return this.serviceProps=s,this}setInstanceCreatedCallback(s){return this.onInstanceCreated=s,this}}const os="[DEFAULT]";class Gc{constructor(s,o){this.name=s,this.container=o,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(s){const o=this.normalizeInstanceIdentifier(s);if(!this.instancesDeferred.has(o)){const v=new Xr;if(this.instancesDeferred.set(o,v),this.isInitialized(o)||this.shouldAutoInitialize())try{const S=this.getOrInitializeService({instanceIdentifier:o});S&&v.resolve(S)}catch(S){}}return this.instancesDeferred.get(o).promise}getImmediate(s){var o;const v=this.normalizeInstanceIdentifier(s==null?void 0:s.identifier),S=(o=s==null?void 0:s.optional)!==null&&o!==void 0?o:!1;if(this.isInitialized(v)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:v})}catch(E){if(S)return null;throw E}else{if(S)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(s){if(s.name!==this.name)throw Error(`Mismatching Component ${s.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=s,!!this.shouldAutoInitialize()){if($i(s))try{this.getOrInitializeService({instanceIdentifier:os})}catch(o){}for(const[o,v]of this.instancesDeferred.entries()){const S=this.normalizeInstanceIdentifier(o);try{const E=this.getOrInitializeService({instanceIdentifier:S});v.resolve(E)}catch(E){}}}}clearInstance(s=os){this.instancesDeferred.delete(s),this.instancesOptions.delete(s),this.instances.delete(s)}delete(){return it(this,null,function*(){const s=Array.from(this.instances.values());yield Promise.all([...s.filter(o=>"INTERNAL"in o).map(o=>o.INTERNAL.delete()),...s.filter(o=>"_delete"in o).map(o=>o._delete())])})}isComponentSet(){return this.component!=null}isInitialized(s=os){return this.instances.has(s)}getOptions(s=os){return this.instancesOptions.get(s)||{}}initialize(s={}){const{options:o={}}=s,v=this.normalizeInstanceIdentifier(s.instanceIdentifier);if(this.isInitialized(v))throw Error(`${this.name}(${v}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const S=this.getOrInitializeService({instanceIdentifier:v,options:o});for(const[E,R]of this.instancesDeferred.entries()){const k=this.normalizeInstanceIdentifier(E);v===k&&R.resolve(S)}return S}onInit(s,o){var v;const S=this.normalizeInstanceIdentifier(o),E=(v=this.onInitCallbacks.get(S))!==null&&v!==void 0?v:new Set;E.add(s),this.onInitCallbacks.set(S,E);const R=this.instances.get(S);return R&&s(R,S),()=>{E.delete(s)}}invokeOnInitCallbacks(s,o){const v=this.onInitCallbacks.get(o);if(v)for(const S of v)try{S(s,o)}catch(E){}}getOrInitializeService({instanceIdentifier:s,options:o={}}){let v=this.instances.get(s);if(!v&&this.component&&(v=this.component.instanceFactory(this.container,{instanceIdentifier:Uc(s),options:o}),this.instances.set(s,v),this.instancesOptions.set(s,o),this.invokeOnInitCallbacks(v,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,s,v)}catch(S){}return v||null}normalizeInstanceIdentifier(s=os){return this.component?this.component.multipleInstances?s:os:s}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uc(I){return I===os?void 0:I}function $i(I){return I.instantiationMode==="EAGER"}class _h{constructor(s){this.name=s,this.providers=new Map}addComponent(s){const o=this.getProvider(s.name);if(o.isComponentSet())throw new Error(`Component ${s.name} has already been registered with ${this.name}`);o.setComponent(s)}addOrOverwriteComponent(s){this.getProvider(s.name).isComponentSet()&&this.providers.delete(s.name),this.addComponent(s)}getProvider(s){if(this.providers.has(s))return this.providers.get(s);const o=new Gc(s,this);return this.providers.set(s,o),o}getProviders(){return Array.from(this.providers.values())}}const wh=[];var ai;(function(I){I[I.DEBUG=0]="DEBUG",I[I.VERBOSE=1]="VERBOSE",I[I.INFO=2]="INFO",I[I.WARN=3]="WARN",I[I.ERROR=4]="ERROR",I[I.SILENT=5]="SILENT"})(ai||(ai={}));const ja={debug:ai.DEBUG,verbose:ai.VERBOSE,info:ai.INFO,warn:ai.WARN,error:ai.ERROR,silent:ai.SILENT},Ch=ai.INFO,Wc={[ai.DEBUG]:"log",[ai.VERBOSE]:"log",[ai.INFO]:"info",[ai.WARN]:"warn",[ai.ERROR]:"error"},zc=(I,s,...o)=>{if(s<I.logLevel)return;const v=new Date().toISOString(),S=Wc[s];if(S)console[S](`[${v}]  ${I.name}:`,...o);else throw new Error(`Attempted to log a message with an invalid logType (value: ${s})`)};class Eh{constructor(s){this.name=s,this._logLevel=Ch,this._logHandler=zc,this._userLogHandler=null,wh.push(this)}get logLevel(){return this._logLevel}set logLevel(s){if(!(s in ai))throw new TypeError(`Invalid value "${s}" assigned to \`logLevel\``);this._logLevel=s}setLogLevel(s){this._logLevel=typeof s=="string"?ja[s]:s}get logHandler(){return this._logHandler}set logHandler(s){if(typeof s!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=s}get userLogHandler(){return this._userLogHandler}set userLogHandler(s){this._userLogHandler=s}debug(...s){this._userLogHandler&&this._userLogHandler(this,ai.DEBUG,...s),this._logHandler(this,ai.DEBUG,...s)}log(...s){this._userLogHandler&&this._userLogHandler(this,ai.VERBOSE,...s),this._logHandler(this,ai.VERBOSE,...s)}info(...s){this._userLogHandler&&this._userLogHandler(this,ai.INFO,...s),this._logHandler(this,ai.INFO,...s)}warn(...s){this._userLogHandler&&this._userLogHandler(this,ai.WARN,...s),this._logHandler(this,ai.WARN,...s)}error(...s){this._userLogHandler&&this._userLogHandler(this,ai.ERROR,...s),this._logHandler(this,ai.ERROR,...s)}}function Vc(I){wh.forEach(s=>{s.setLogLevel(I)})}function Nd(I,s){for(const o of wh){let v=null;s&&s.level&&(v=ja[s.level]),I===null?o.userLogHandler=null:o.userLogHandler=(S,E,...R)=>{const k=R.map(W=>{if(W==null)return null;if(typeof W=="string")return W;if(typeof W=="number"||typeof W=="boolean")return W.toString();if(W instanceof Error)return W.message;try{return JSON.stringify(W)}catch(K){return null}}).filter(W=>W).join(" ");E>=(v!=null?v:S.logLevel)&&I({level:ai[E].toLowerCase(),message:k,args:R,type:S.name})}}}const Yc=(I,s)=>s.some(o=>I instanceof o);let Ka,Xa;function jc(){return Ka||(Ka=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kc(){return Xa||(Xa=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fu=new WeakMap,Ih=new WeakMap,qa=new WeakMap,Oh=new WeakMap,Lh=new WeakMap;function Xc(I){const s=new Promise((o,v)=>{const S=()=>{I.removeEventListener("success",E),I.removeEventListener("error",R)},E=()=>{o(le(I.result)),S()},R=()=>{v(I.error),S()};I.addEventListener("success",E),I.addEventListener("error",R)});return s.then(o=>{o instanceof IDBCursor&&fu.set(o,I)}).catch(()=>{}),Lh.set(s,I),s}function w(I){if(Ih.has(I))return;const s=new Promise((o,v)=>{const S=()=>{I.removeEventListener("complete",E),I.removeEventListener("error",R),I.removeEventListener("abort",R)},E=()=>{o(),S()},R=()=>{v(I.error||new DOMException("AbortError","AbortError")),S()};I.addEventListener("complete",E),I.addEventListener("error",R),I.addEventListener("abort",R)});Ih.set(I,s)}let M={get(I,s,o){if(I instanceof IDBTransaction){if(s==="done")return Ih.get(I);if(s==="objectStoreNames")return I.objectStoreNames||qa.get(I);if(s==="store")return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return le(I[s])},set(I,s,o){return I[s]=o,!0},has(I,s){return I instanceof IDBTransaction&&(s==="done"||s==="store")?!0:s in I}};function U(I){M=I(M)}function Z(I){return I===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(s,...o){const v=I.call(pe(this),s,...o);return qa.set(v,s.sort?s.sort():[s]),le(v)}:Kc().includes(I)?function(...s){return I.apply(pe(this),s),le(fu.get(this))}:function(...s){return le(I.apply(pe(this),s))}}function ee(I){return typeof I=="function"?Z(I):(I instanceof IDBTransaction&&w(I),Yc(I,jc())?new Proxy(I,M):I)}function le(I){if(I instanceof IDBRequest)return Xc(I);if(Oh.has(I))return Oh.get(I);const s=ee(I);return s!==I&&(Oh.set(I,s),Lh.set(s,I)),s}const pe=I=>Lh.get(I);function ge(I,s,{blocked:o,upgrade:v,blocking:S,terminated:E}={}){const R=indexedDB.open(I,s),k=le(R);return v&&R.addEventListener("upgradeneeded",W=>{v(le(R.result),W.oldVersion,W.newVersion,le(R.transaction))}),o&&R.addEventListener("blocked",()=>o()),k.then(W=>{E&&W.addEventListener("close",()=>E()),S&&W.addEventListener("versionchange",()=>S())}).catch(()=>{}),k}function be(I,{blocked:s}={}){const o=indexedDB.deleteDatabase(I);return s&&o.addEventListener("blocked",()=>s()),wrap(o).then(()=>{})}const Le=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],Ge=new Map;function rt(I,s){if(!(I instanceof IDBDatabase&&!(s in I)&&typeof s=="string"))return;if(Ge.get(s))return Ge.get(s);const o=s.replace(/FromIndex$/,""),v=s!==o,S=Me.includes(o);if(!(o in(v?IDBIndex:IDBObjectStore).prototype)||!(S||Le.includes(o)))return;const E=function(R,...k){return it(this,null,function*(){const W=this.transaction(R,S?"readwrite":"readonly");let K=W.store;return v&&(K=K.index(k.shift())),(yield Promise.all([K[o](...k),S&&W.done]))[0]})};return Ge.set(s,E),E}U(I=>Mf(Lf({},I),{get:(s,o,v)=>rt(s,o)||I.get(s,o,v),has:(s,o)=>!!rt(s,o)||I.has(s,o)}));class ct{constructor(s){this.container=s}getPlatformInfoString(){return this.container.getProviders().map(o=>{if(vt(o)){const v=o.getImmediate();return`${v.library}/${v.version}`}else return null}).filter(o=>o).join(" ")}}function vt(I){const s=I.getComponent();return(s==null?void 0:s.type)==="VERSION"}const Re="@firebase/app",je="0.9.0";const pt=new Eh("@firebase/app"),tt="@firebase/app-compat",bt="@firebase/analytics-compat",Ft="@firebase/analytics",si="@firebase/app-check-compat",mt="@firebase/app-check",Ct="@firebase/auth",Oi="@firebase/auth-compat",bi="@firebase/database",zi="@firebase/database-compat",li="@firebase/functions",ki="@firebase/functions-compat",Un="@firebase/installations",Es="@firebase/installations-compat",Ja="@firebase/messaging",Er="@firebase/messaging-compat",Is="@firebase/performance",pu="@firebase/performance-compat",gu="@firebase/remote-config",Za="@firebase/remote-config-compat",Mh="@firebase/storage",$a="@firebase/storage-compat",Qa="@firebase/firestore",mu="@firebase/firestore-compat",eo="firebase",to="9.15.0";const yu="[DEFAULT]",Rf={[Re]:"fire-core",[tt]:"fire-core-compat",[Ft]:"fire-analytics",[bt]:"fire-analytics-compat",[mt]:"fire-app-check",[si]:"fire-app-check-compat",[Ct]:"fire-auth",[Oi]:"fire-auth-compat",[bi]:"fire-rtdb",[zi]:"fire-rtdb-compat",[li]:"fire-fn",[ki]:"fire-fn-compat",[Un]:"fire-iid",[Es]:"fire-iid-compat",[Ja]:"fire-fcm",[Er]:"fire-fcm-compat",[Is]:"fire-perf",[pu]:"fire-perf-compat",[gu]:"fire-rc",[Za]:"fire-rc-compat",[Mh]:"fire-gcs",[$a]:"fire-gcs-compat",[Qa]:"fire-fst",[mu]:"fire-fst-compat","fire-js":"fire-js",[eo]:"fire-js-all"};const Zr=new Map,vu=new Map;function Nf(I,s){try{I.container.addComponent(s)}catch(o){pt.debug(`Component ${s.name} failed to register with FirebaseApp ${I.name}`,o)}}function em(I,s){I.container.addOrOverwriteComponent(s)}function Ir(I){const s=I.name;if(vu.has(s))return pt.debug(`There were multiple attempts to register component ${s}.`),!1;vu.set(s,I);for(const o of Zr.values())Nf(o,I);return!0}function io(I,s){const o=I.container.getProvider("heartbeat").getImmediate({optional:!0});return o&&o.triggerHeartbeat(),I.container.getProvider(s)}function tm(I,s,o=yu){io(I,s).clearInstance(o)}function im(){vu.clear()}const Bf={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},qs=new qr("app","Firebase",Bf);class Pf{constructor(s,o,v){this._isDeleted=!1,this._options=Object.assign({},s),this._config=Object.assign({},o),this._name=o.name,this._automaticDataCollectionEnabled=o.automaticDataCollectionEnabled,this._container=v,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(s){this.checkDestroyed(),this._automaticDataCollectionEnabled=s}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(s){this._isDeleted=s}checkDestroyed(){if(this.isDeleted)throw qs.create("app-deleted",{appName:this._name})}}const kf=to;function Bd(I,s={}){let o=I;typeof s!="object"&&(s={name:s});const v=Object.assign({name:yu,automaticDataCollectionEnabled:!1},s),S=v.name;if(typeof S!="string"||!S)throw qs.create("bad-app-name",{appName:String(S)});if(o||(o=Ah()),!o)throw qs.create("no-options");const E=Zr.get(S);if(E){if(za(o,E.options)&&za(v,E.config))return E;throw qs.create("duplicate-app",{appName:S})}const R=new _h(S);for(const W of vu.values())R.addComponent(W);const k=new Pf(o,v,R);return Zr.set(S,k),k}function Pd(I=yu){const s=Zr.get(I);if(!s&&I===yu)return Bd();if(!s)throw qs.create("no-app",{appName:I});return s}function nm(){return Array.from(Zr.values())}function sm(I){return it(this,null,function*(){const s=I.name;Zr.has(s)&&(Zr.delete(s),yield Promise.all(I.container.getProviders().map(o=>o.delete())),I.isDeleted=!0)})}function Os(I,s,o){var v;let S=(v=Rf[I])!==null&&v!==void 0?v:I;o&&(S+=`-${o}`);const E=S.match(/\s|\//),R=s.match(/\s|\//);if(E||R){const k=[`Unable to register library "${S}" with version "${s}":`];E&&k.push(`library name "${S}" contains illegal characters (whitespace or "/")`),E&&R&&k.push("and"),R&&k.push(`version name "${s}" contains illegal characters (whitespace or "/")`),pt.warn(k.join(" "));return}Ir(new as(`${S}-version`,()=>({library:S,version:s}),"VERSION"))}function rm(I,s){if(I!==null&&typeof I!="function")throw qs.create("invalid-log-argument");setUserLogHandler(I,s)}function am(I){setLogLevel$1(I)}const Df="firebase-heartbeat-database",Ff=1,Rh="firebase-heartbeat-store";let qc=null;function kd(){return qc||(qc=ge(Df,Ff,{upgrade:(I,s)=>{switch(s){case 0:I.createObjectStore(Rh)}}}).catch(I=>{throw qs.create("idb-open",{originalErrorMessage:I.message})})),qc}function Hf(I){return it(this,null,function*(){try{return(yield kd()).transaction(Rh).objectStore(Rh).get(Fd(I))}catch(s){if(s instanceof ns)pt.warn(s.message);else{const o=qs.create("idb-get",{originalErrorMessage:s==null?void 0:s.message});pt.warn(o.message)}}})}function Dd(I,s){return it(this,null,function*(){try{const v=(yield kd()).transaction(Rh,"readwrite");return yield v.objectStore(Rh).put(s,Fd(I)),v.done}catch(o){if(o instanceof ns)pt.warn(o.message);else{const v=qs.create("idb-set",{originalErrorMessage:o==null?void 0:o.message});pt.warn(v.message)}}})}function Fd(I){return`${I.name}!${I.options.appId}`}const Gf=1024,Uf=30*24*60*60*1e3;class Wf{constructor(s){this.container=s,this._heartbeatsCache=null;const o=this.container.getProvider("app").getImmediate();this._storage=new Vf(o),this._heartbeatsCachePromise=this._storage.read().then(v=>(this._heartbeatsCache=v,v))}triggerHeartbeat(){return it(this,null,function*(){const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),v=Hd();if(this._heartbeatsCache===null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===v||this._heartbeatsCache.heartbeats.some(S=>S.date===v)))return this._heartbeatsCache.heartbeats.push({date:v,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(S=>{const E=new Date(S.date).valueOf();return Date.now()-E<=Uf}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return it(this,null,function*(){if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Hd(),{heartbeatsToSend:o,unsentEntries:v}=zf(this._heartbeatsCache.heartbeats),S=Fa(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=s,v.length>0?(this._heartbeatsCache.heartbeats=v,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),S})}}function Hd(){return new Date().toISOString().substring(0,10)}function zf(I,s=Gf){const o=[];let v=I.slice();for(const S of I){const E=o.find(R=>R.agent===S.agent);if(E){if(E.dates.push(S.date),Gd(o)>s){E.dates.pop();break}}else if(o.push({agent:S.agent,dates:[S.date]}),Gd(o)>s){o.pop();break}v=v.slice(1)}return{heartbeatsToSend:o,unsentEntries:v}}class Vf{constructor(s){this.app=s,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return it(this,null,function*(){return xh()?Ha().then(()=>!0).catch(()=>!1):!1})}read(){return it(this,null,function*(){return(yield this._canUseIndexedDBPromise)?(yield Hf(this.app))||{heartbeats:[]}:{heartbeats:[]}})}overwrite(s){return it(this,null,function*(){var o;if(yield this._canUseIndexedDBPromise){const S=yield this.read();return Dd(this.app,{lastSentHeartbeatDate:(o=s.lastSentHeartbeatDate)!==null&&o!==void 0?o:S.lastSentHeartbeatDate,heartbeats:s.heartbeats})}else return})}add(s){return it(this,null,function*(){var o;if(yield this._canUseIndexedDBPromise){const S=yield this.read();return Dd(this.app,{lastSentHeartbeatDate:(o=s.lastSentHeartbeatDate)!==null&&o!==void 0?o:S.lastSentHeartbeatDate,heartbeats:[...S.heartbeats,...s.heartbeats]})}else return})}}function Gd(I){return Fa(JSON.stringify({version:2,heartbeats:I})).length}function Yf(I){Ir(new as("platform-logger",s=>new ct(s),"PRIVATE")),Ir(new as("heartbeat",s=>new Wf(s),"PRIVATE")),Os(Re,je,I),Os(Re,je,"esm2017"),Os("fire-js","")}Yf("");var jf="firebase",Kf="9.15.0";Os(jf,Kf,"app");const Ud="@firebase/installations",Jc="0.6.0";const Wd=1e4,zd=`w:${Jc}`,Vd="FIS_v2",Xf="https://firebaseinstallations.googleapis.com/v1",qf=60*60*1e3,Jf="installations",Zf="Installations";const $f={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Js=new qr(Jf,Zf,$f);function Yd(I){return I instanceof ns&&I.code.includes("request-failed")}function Zc({projectId:I}){return`${Xf}/projects/${I}/installations`}function jd(I){return{token:I.token,requestStatus:2,expiresIn:Qf(I.expiresIn),creationTime:Date.now()}}function $c(I,s){return it(this,null,function*(){const v=(yield s.json()).error;return Js.create("request-failed",{requestName:I,serverCode:v.code,serverMessage:v.message,serverStatus:v.status})})}function Kd({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Xd(I,{refreshToken:s}){const o=Kd(I);return o.append("Authorization",ep(s)),o}function Qc(I){return it(this,null,function*(){const s=yield I();return s.status>=500&&s.status<600?I():s})}function Qf(I){return Number(I.replace("s","000"))}function ep(I){return`${Vd} ${I}`}function tp(v,S){return it(this,arguments,function*({appConfig:I,heartbeatServiceProvider:s},{fid:o}){const E=Zc(I),R=Kd(I),k=s.getImmediate({optional:!0});if(k){const $=yield k.getHeartbeatsHeader();$&&R.append("x-firebase-client",$)}const W={fid:o,authVersion:Vd,appId:I.appId,sdkVersion:zd},K={method:"POST",headers:R,body:JSON.stringify(W)},q=yield Qc(()=>fetch(E,K));if(q.ok){const $=yield q.json();return{fid:$.fid||o,registrationStatus:2,refreshToken:$.refreshToken,authToken:jd($.authToken)}}else throw yield $c("Create Installation",q)})}function qd(I){return new Promise(s=>{setTimeout(s,I)})}function ip(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}const np=/^[cdef][\w-]{21}$/,ed="";function sp(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const o=rp(I);return np.test(o)?o:ed}catch(I){return ed}}function rp(I){return ip(I).substr(0,22)}function no(I){return`${I.appName}!${I.appId}`}const so=new Map;function Jd(I,s){const o=no(I);Zd(o,s),hp(o,s)}function ap(I,s){$d();const o=no(I);let v=so.get(o);v||(v=new Set,so.set(o,v)),v.add(s)}function op(I,s){const o=no(I),v=so.get(o);v&&(v.delete(s),v.size===0&&so.delete(o),Qd())}function Zd(I,s){const o=so.get(I);if(o)for(const v of o)v(s)}function hp(I,s){const o=$d();o&&o.postMessage({key:I,fid:s}),Qd()}let $r=null;function $d(){return!$r&&"BroadcastChannel"in self&&($r=new BroadcastChannel("[Firebase] FID Change"),$r.onmessage=I=>{Zd(I.data.key,I.data.fid)}),$r}function Qd(){so.size===0&&$r&&($r.close(),$r=null)}const lp="firebase-installations-database",up=1,Qr="firebase-installations-store";let td=null;function id(){return td||(td=ge(lp,up,{upgrade:(I,s)=>{switch(s){case 0:I.createObjectStore(Qr)}}})),td}function xu(I,s){return it(this,null,function*(){const o=no(I),S=(yield id()).transaction(Qr,"readwrite"),E=S.objectStore(Qr),R=yield E.get(o);return yield E.put(s,o),yield S.done,(!R||R.fid!==s.fid)&&Jd(I,s.fid),s})}function nd(I){return it(this,null,function*(){const s=no(I),v=(yield id()).transaction(Qr,"readwrite");yield v.objectStore(Qr).delete(s),yield v.done})}function Nh(I,s){return it(this,null,function*(){const o=no(I),S=(yield id()).transaction(Qr,"readwrite"),E=S.objectStore(Qr),R=yield E.get(o),k=s(R);return k===void 0?yield E.delete(o):yield E.put(k,o),yield S.done,k&&(!R||R.fid!==k.fid)&&Jd(I,k.fid),k})}function sd(I){return it(this,null,function*(){let s;const o=yield Nh(I.appConfig,v=>{const S=cp(v),E=dp(I,S);return s=E.registrationPromise,E.installationEntry});return o.fid===ed?{installationEntry:yield s}:{installationEntry:o,registrationPromise:s}})}function cp(I){const s=I||{fid:sp(),registrationStatus:0};return tf(s)}function dp(I,s){if(s.registrationStatus===0){if(!navigator.onLine){const S=Promise.reject(Js.create("app-offline"));return{installationEntry:s,registrationPromise:S}}const o={fid:s.fid,registrationStatus:1,registrationTime:Date.now()},v=fp(I,o);return{installationEntry:o,registrationPromise:v}}else return s.registrationStatus===1?{installationEntry:s,registrationPromise:pp(I)}:{installationEntry:s}}function fp(I,s){return it(this,null,function*(){try{const o=yield tp(I,s);return xu(I.appConfig,o)}catch(o){throw Yd(o)&&o.customData.serverCode===409?yield nd(I.appConfig):yield xu(I.appConfig,{fid:s.fid,registrationStatus:0}),o}})}function pp(I){return it(this,null,function*(){let s=yield ef(I.appConfig);for(;s.registrationStatus===1;)yield qd(100),s=yield ef(I.appConfig);if(s.registrationStatus===0){const{installationEntry:o,registrationPromise:v}=yield sd(I);return v||o}return s})}function ef(I){return Nh(I,s=>{if(!s)throw Js.create("installation-not-found");return tf(s)})}function tf(I){return gp(I)?{fid:I.fid,registrationStatus:0}:I}function gp(I){return I.registrationStatus===1&&I.registrationTime+Wd<Date.now()}function mp(v,S){return it(this,arguments,function*({appConfig:I,heartbeatServiceProvider:s},o){const E=yp(I,o),R=Xd(I,o),k=s.getImmediate({optional:!0});if(k){const $=yield k.getHeartbeatsHeader();$&&R.append("x-firebase-client",$)}const W={installation:{sdkVersion:zd,appId:I.appId}},K={method:"POST",headers:R,body:JSON.stringify(W)},q=yield Qc(()=>fetch(E,K));if(q.ok){const $=yield q.json();return jd($)}else throw yield $c("Generate Auth Token",q)})}function yp(I,{fid:s}){return`${Zc(I)}/${s}/authTokens:generate`}function rd(I,s=!1){return it(this,null,function*(){let o;const v=yield Nh(I.appConfig,E=>{if(!sf(E))throw Js.create("not-registered");const R=E.authToken;if(!s&&Ap(R))return E;if(R.requestStatus===1)return o=vp(I,s),E;{if(!navigator.onLine)throw Js.create("app-offline");const k=Tp(E);return o=xp(I,k),k}});return o?yield o:v.authToken})}function vp(I,s){return it(this,null,function*(){let o=yield nf(I.appConfig);for(;o.authToken.requestStatus===1;)yield qd(100),o=yield nf(I.appConfig);const v=o.authToken;return v.requestStatus===0?rd(I,s):v})}function nf(I){return Nh(I,s=>{if(!sf(s))throw Js.create("not-registered");const o=s.authToken;return Sp(o)?Object.assign(Object.assign({},s),{authToken:{requestStatus:0}}):s})}function xp(I,s){return it(this,null,function*(){try{const o=yield mp(I,s),v=Object.assign(Object.assign({},s),{authToken:o});return yield xu(I.appConfig,v),o}catch(o){if(Yd(o)&&(o.customData.serverCode===401||o.customData.serverCode===404))yield nd(I.appConfig);else{const v=Object.assign(Object.assign({},s),{authToken:{requestStatus:0}});yield xu(I.appConfig,v)}throw o}})}function sf(I){return I!==void 0&&I.registrationStatus===2}function Ap(I){return I.requestStatus===2&&!bp(I)}function bp(I){const s=Date.now();return s<I.creationTime||I.creationTime+I.expiresIn<s+qf}function Tp(I){const s={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:s})}function Sp(I){return I.requestStatus===1&&I.requestTime+Wd<Date.now()}function _p(I){return it(this,null,function*(){const s=I,{installationEntry:o,registrationPromise:v}=yield sd(s);return v?v.catch(console.error):rd(s).catch(console.error),o.fid})}function wp(I,s=!1){return it(this,null,function*(){const o=I;return yield Cp(o),(yield rd(o,s)).token})}function Cp(I){return it(this,null,function*(){const{registrationPromise:s}=yield sd(I);s&&(yield s)})}function Ep(I,s){return it(this,null,function*(){const o=Ip(I,s),S={method:"DELETE",headers:Xd(I,s)},E=yield Qc(()=>fetch(o,S));if(!E.ok)throw yield $c("Delete Installation",E)})}function Ip(I,{fid:s}){return`${Zc(I)}/${s}`}function om(I){return it(this,null,function*(){const{appConfig:s}=I,o=yield Nh(s,v=>{if(!(v&&v.registrationStatus===0))return v});if(o){if(o.registrationStatus===1)throw Js.create("delete-pending-registration");if(o.registrationStatus===2)if(navigator.onLine)yield Ep(s,o),yield nd(s);else throw Js.create("app-offline")}})}function hm(I,s){const{appConfig:o}=I;return ap(o,s),()=>{op(o,s)}}function lm(I=getApp()){return _getProvider(I,"installations").getImmediate()}function Op(I){if(!I||!I.options)throw ad("App Configuration");if(!I.name)throw ad("App Name");const s=["projectId","apiKey","appId"];for(const o of s)if(!I.options[o])throw ad(o);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}function ad(I){return Js.create("missing-app-config-values",{valueName:I})}const rf="installations",Lp="installations-internal",Mp=I=>{const s=I.getProvider("app").getImmediate(),o=Op(s),v=io(s,"heartbeat");return{app:s,appConfig:o,heartbeatServiceProvider:v,_delete:()=>Promise.resolve()}},Rp=I=>{const s=I.getProvider("app").getImmediate(),o=io(s,rf).getImmediate();return{getId:()=>_p(o),getToken:S=>wp(o,S)}};function Np(){Ir(new as(rf,Mp,"PUBLIC")),Ir(new as(Lp,Rp,"PRIVATE"))}Np(),Os(Ud,Jc),Os(Ud,Jc,"esm2017");const od="@firebase/remote-config",af="0.4.0";class Bp{constructor(){this.listeners=[]}addEventListener(s){this.listeners.push(s)}abort(){this.listeners.forEach(s=>s())}}const of="remote-config";const Pp={["registration-window"]:"Undefined window object. This SDK only supports usage in a browser environment.",["registration-project-id"]:"Undefined project identifier. Check Firebase app initialization.",["registration-api-key"]:"Undefined API key. Check Firebase app initialization.",["registration-app-id"]:"Undefined app identifier. Check Firebase app initialization.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",["fetch-client-network"]:"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-timeout"]:'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',["fetch-throttle"]:'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',["fetch-client-parse"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["indexed-db-unavailable"]:"Indexed DB is not supported by current browser"},An=new qr("remoteconfig","Remote Config",Pp);function kp(I,s){return I instanceof ns&&I.code.indexOf(s)!==-1}const Dp=!1,Fp="",hf=0,Hp=["1","true","t","yes","y","on"];class hd{constructor(s,o=Fp){this._source=s,this._value=o}asString(){return this._value}asBoolean(){return this._source==="static"?Dp:Hp.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return hf;let s=Number(this._value);return isNaN(s)&&(s=hf),s}getSource(){return this._source}}function Gp(I=Pd()){return I=rs(I),io(I,of).getImmediate()}function Up(I){return it(this,null,function*(){const s=rs(I),[o,v]=yield Promise.all([s._storage.getLastSuccessfulFetchResponse(),s._storage.getActiveConfigEtag()]);return!o||!o.config||!o.eTag||o.eTag===v?!1:(yield Promise.all([s._storageCache.setActiveConfig(o.config),s._storage.setActiveConfigEtag(o.eTag)]),!0)})}function Wp(I){const s=rs(I);return s._initializePromise||(s._initializePromise=s._storageCache.loadFromStorage().then(()=>{s._isInitializationComplete=!0})),s._initializePromise}function zp(I){return it(this,null,function*(){const s=rs(I),o=new Bp;setTimeout(()=>it(this,null,function*(){o.abort()}),s.settings.fetchTimeoutMillis);try{yield s._client.fetch({cacheMaxAgeMillis:s.settings.minimumFetchIntervalMillis,signal:o}),yield s._storageCache.setLastFetchStatus("success")}catch(v){const S=kp(v,"fetch-throttle")?"throttle":"failure";throw yield s._storageCache.setLastFetchStatus(S),v}})}function um(I){const s=getModularInstance(I);return Vp(s._storageCache.getActiveConfig(),s.defaultConfig).reduce((o,v)=>(o[v]=Bh(I,v),o),{})}function cm(I,s){return Bh(getModularInstance(I),s).asBoolean()}function dm(I,s){return Bh(getModularInstance(I),s).asNumber()}function fm(I,s){return Bh(getModularInstance(I),s).asString()}function Bh(I,s){const o=rs(I);o._isInitializationComplete||o._logger.debug(`A value was requested for key "${s}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const v=o._storageCache.getActiveConfig();return v&&v[s]!==void 0?new hd("remote",v[s]):o.defaultConfig&&o.defaultConfig[s]!==void 0?new hd("default",String(o.defaultConfig[s])):(o._logger.debug(`Returning static value for key "${s}". Define a default or remote value if this is unintentional.`),new hd("static"))}function pm(I,s){const o=getModularInstance(I);switch(s){case"debug":o._logger.logLevel=LogLevel.DEBUG;break;case"silent":o._logger.logLevel=LogLevel.SILENT;break;default:o._logger.logLevel=LogLevel.ERROR}}function Vp(I={},s={}){return Object.keys(Object.assign(Object.assign({},I),s))}class Yp{constructor(s,o,v,S){this.client=s,this.storage=o,this.storageCache=v,this.logger=S}isCachedDataFresh(s,o){if(!o)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const v=Date.now()-o,S=v<=s;return this.logger.debug(`Config fetch cache check. Cache age millis: ${v}. Cache max age millis (minimumFetchIntervalMillis setting): ${s}. Is cache hit: ${S}.`),S}fetch(s){return it(this,null,function*(){const[o,v]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(v&&this.isCachedDataFresh(s.cacheMaxAgeMillis,o))return v;s.eTag=v&&v.eTag;const S=yield this.client.fetch(s),E=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return S.status===200&&E.push(this.storage.setLastSuccessfulFetchResponse(S)),yield Promise.all(E),S})}}function jp(I=navigator){return I.languages&&I.languages[0]||I.language}class Kp{constructor(s,o,v,S,E,R){this.firebaseInstallations=s,this.sdkVersion=o,this.namespace=v,this.projectId=S,this.apiKey=E,this.appId=R}fetch(s){return it(this,null,function*(){const[o,v]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),E=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,R={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":s.eTag||"*"},k={sdk_version:this.sdkVersion,app_instance_id:o,app_instance_id_token:v,app_id:this.appId,language_code:jp()},W={method:"POST",headers:R,body:JSON.stringify(k)},K=fetch(E,W),q=new Promise((fe,xe)=>{s.signal.addEventListener(()=>{const ve=new Error("The operation was aborted.");ve.name="AbortError",xe(ve)})});let $;try{yield Promise.race([K,q]),$=yield K}catch(fe){let xe="fetch-client-network";throw(fe==null?void 0:fe.name)==="AbortError"&&(xe="fetch-timeout"),An.create(xe,{originalErrorMessage:fe==null?void 0:fe.message})}let ne=$.status;const oe=$.headers.get("ETag")||void 0;let ce,me;if($.status===200){let fe;try{fe=yield $.json()}catch(xe){throw An.create("fetch-client-parse",{originalErrorMessage:xe==null?void 0:xe.message})}ce=fe.entries,me=fe.state}if(me==="INSTANCE_STATE_UNSPECIFIED"?ne=500:me==="NO_CHANGE"?ne=304:(me==="NO_TEMPLATE"||me==="EMPTY_CONFIG")&&(ce={}),ne!==304&&ne!==200)throw An.create("fetch-status",{httpStatus:ne});return{status:ne,eTag:oe,config:ce}})}}function Xp(I,s){return new Promise((o,v)=>{const S=Math.max(s-Date.now(),0),E=setTimeout(o,S);I.addEventListener(()=>{clearTimeout(E),v(An.create("fetch-throttle",{throttleEndTimeMillis:s}))})})}function qp(I){if(!(I instanceof ns)||!I.customData)return!1;const s=Number(I.customData.httpStatus);return s===429||s===500||s===503||s===504}class Jp{constructor(s,o){this.client=s,this.storage=o}fetch(s){return it(this,null,function*(){const o=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(s,o)})}attemptFetch(S,E){return it(this,arguments,function*(s,{throttleEndTimeMillis:o,backoffCount:v}){yield Xp(s.signal,o);try{const R=yield this.client.fetch(s);return yield this.storage.deleteThrottleMetadata(),R}catch(R){if(!qp(R))throw R;const k={throttleEndTimeMillis:Date.now()+Sh(v),backoffCount:v+1};return yield this.storage.setThrottleMetadata(k),this.attemptFetch(s,k)}})}}const Zp=60*1e3,$p=12*60*60*1e3;class Qp{constructor(s,o,v,S,E){this.app=s,this._client=o,this._storageCache=v,this._storage=S,this._logger=E,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Zp,minimumFetchIntervalMillis:$p},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Au(I,s){const o=I.target.error||void 0;return An.create(s,{originalErrorMessage:o&&(o==null?void 0:o.message)})}const ea="app_namespace_store",eg="firebase_remote_config",tg=1;function ig(){return new Promise((I,s)=>{try{const o=indexedDB.open(eg,tg);o.onerror=v=>{s(Au(v,"storage-open"))},o.onsuccess=v=>{I(v.target.result)},o.onupgradeneeded=v=>{const S=v.target.result;switch(v.oldVersion){case 0:S.createObjectStore(ea,{keyPath:"compositeKey"})}}}catch(o){s(An.create("storage-open",{originalErrorMessage:o==null?void 0:o.message}))}})}class ng{constructor(s,o,v,S=ig()){this.appId=s,this.appName=o,this.namespace=v,this.openDbPromise=S}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(s){return this.set("last_fetch_status",s)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(s){return this.set("last_successful_fetch_timestamp_millis",s)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(s){return this.set("last_successful_fetch_response",s)}getActiveConfig(){return this.get("active_config")}setActiveConfig(s){return this.set("active_config",s)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(s){return this.set("active_config_etag",s)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(s){return this.set("throttle_metadata",s)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(s){return it(this,null,function*(){const o=yield this.openDbPromise;return new Promise((v,S)=>{const R=o.transaction([ea],"readonly").objectStore(ea),k=this.createCompositeKey(s);try{const W=R.get(k);W.onerror=K=>{S(Au(K,"storage-get"))},W.onsuccess=K=>{const q=K.target.result;v(q?q.value:void 0)}}catch(W){S(An.create("storage-get",{originalErrorMessage:W==null?void 0:W.message}))}})})}set(s,o){return it(this,null,function*(){const v=yield this.openDbPromise;return new Promise((S,E)=>{const k=v.transaction([ea],"readwrite").objectStore(ea),W=this.createCompositeKey(s);try{const K=k.put({compositeKey:W,value:o});K.onerror=q=>{E(Au(q,"storage-set"))},K.onsuccess=()=>{S()}}catch(K){E(An.create("storage-set",{originalErrorMessage:K==null?void 0:K.message}))}})})}delete(s){return it(this,null,function*(){const o=yield this.openDbPromise;return new Promise((v,S)=>{const R=o.transaction([ea],"readwrite").objectStore(ea),k=this.createCompositeKey(s);try{const W=R.delete(k);W.onerror=K=>{S(Au(K,"storage-delete"))},W.onsuccess=()=>{v()}}catch(W){S(An.create("storage-delete",{originalErrorMessage:W==null?void 0:W.message}))}})})}createCompositeKey(s){return[this.appId,this.appName,this.namespace,s].join()}}class sg{constructor(s){this.storage=s}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return it(this,null,function*(){const s=this.storage.getLastFetchStatus(),o=this.storage.getLastSuccessfulFetchTimestampMillis(),v=this.storage.getActiveConfig(),S=yield s;S&&(this.lastFetchStatus=S);const E=yield o;E&&(this.lastSuccessfulFetchTimestampMillis=E);const R=yield v;R&&(this.activeConfig=R)})}setLastFetchStatus(s){return this.lastFetchStatus=s,this.storage.setLastFetchStatus(s)}setLastSuccessfulFetchTimestampMillis(s){return this.lastSuccessfulFetchTimestampMillis=s,this.storage.setLastSuccessfulFetchTimestampMillis(s)}setActiveConfig(s){return this.activeConfig=s,this.storage.setActiveConfig(s)}}function rg(){Ir(new as(of,I,"PUBLIC").setMultipleInstances(!0)),Os(od,af),Os(od,af,"esm2017");function I(s,{instanceIdentifier:o}){const v=s.getProvider("app").getImmediate(),S=s.getProvider("installations-internal").getImmediate();if(typeof window=="undefined")throw An.create("registration-window");if(!xh())throw An.create("indexed-db-unavailable");const{projectId:E,apiKey:R,appId:k}=v.options;if(!E)throw An.create("registration-project-id");if(!R)throw An.create("registration-api-key");if(!k)throw An.create("registration-app-id");o=o||"firebase";const W=new ng(k,v.name,o),K=new sg(W),q=new Eh(od);q.logLevel=ai.ERROR;const $=new Kp(S,kf,o,E,R,k),ne=new Jp($,W),oe=new Yp(ne,W,K,q),ce=new Qp(v,oe,K,W,q);return Wp(ce),ce}}function ag(I){return it(this,null,function*(){return I=rs(I),yield zp(I),Up(I)})}function gm(){return it(this,null,function*(){if(!isIndexedDBAvailable())return!1;try{return yield validateIndexedDBOpenable()}catch(I){return!1}})}rg();const bu="analytics",og="firebase_id",hg="origin",lg=60*1e3,ug="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lf="https://www.googletagmanager.com/gtag/js";const Vi=new Eh("@firebase/analytics");function uf(I){return Promise.all(I.map(s=>s.catch(o=>o)))}function cg(I,s){const o=document.createElement("script");o.src=`${lf}?l=${I}&id=${s}`,o.async=!0,document.head.appendChild(o)}function dg(I){let s=[];return Array.isArray(window[I])?s=window[I]:window[I]=s,s}function fg(I,s,o,v,S,E){return it(this,null,function*(){const R=v[S];try{if(R)yield s[R];else{const W=(yield uf(o)).find(K=>K.measurementId===S);W&&(yield s[W.appId])}}catch(k){Vi.error(k)}I("config",S,E)})}function pg(I,s,o,v,S){return it(this,null,function*(){try{let E=[];if(S&&S.send_to){let R=S.send_to;Array.isArray(R)||(R=[R]);const k=yield uf(o);for(const W of R){const K=k.find($=>$.measurementId===W),q=K&&s[K.appId];if(q)E.push(q);else{E=[];break}}}E.length===0&&(E=Object.values(s)),yield Promise.all(E),I("event",v,S||{})}catch(E){Vi.error(E)}})}function gg(I,s,o,v){function S(E,R,k){return it(this,null,function*(){try{E==="event"?yield pg(I,s,o,R,k):E==="config"?yield fg(I,s,o,v,R,k):E==="consent"?I("consent","update",k):I("set",R)}catch(W){Vi.error(W)}})}return S}function mg(I,s,o,v,S){let E=function(...R){window[v].push(arguments)};return window[S]&&typeof window[S]=="function"&&(E=window[S]),window[S]=gg(E,I,s,o),{gtagCore:E,wrappedGtag:window[S]}}function yg(I){const s=window.document.getElementsByTagName("script");for(const o of Object.values(s))if(o.src&&o.src.includes(lf)&&o.src.includes(I))return o;return null}const vg={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},En=new qr("analytics","Analytics",vg);const xg=30,Ag=1e3;class bg{constructor(s={},o=Ag){this.throttleMetadata=s,this.intervalMillis=o}getThrottleMetadata(s){return this.throttleMetadata[s]}setThrottleMetadata(s,o){this.throttleMetadata[s]=o}deleteThrottleMetadata(s){delete this.throttleMetadata[s]}}const cf=new bg;function Tg(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Sg(I){return it(this,null,function*(){var s;const{appId:o,apiKey:v}=I,S={method:"GET",headers:Tg(v)},E=ug.replace("{app-id}",o),R=yield fetch(E,S);if(R.status!==200&&R.status!==304){let k="";try{const W=yield R.json();!((s=W.error)===null||s===void 0)&&s.message&&(k=W.error.message)}catch(W){}throw En.create("config-fetch-failed",{httpStatus:R.status,responseMessage:k})}return R.json()})}function _g(v){return it(this,arguments,function*(I,s=cf,o){const{appId:S,apiKey:E,measurementId:R}=I.options;if(!S)throw En.create("no-app-id");if(!E){if(R)return{measurementId:R,appId:S};throw En.create("no-api-key")}const k=s.getThrottleMetadata(S)||{backoffCount:0,throttleEndTimeMillis:Date.now()},W=new Eg;return setTimeout(()=>it(this,null,function*(){W.abort()}),o!==void 0?o:lg),df({appId:S,apiKey:E,measurementId:R},k,W,s)})}function df(E,R,k){return it(this,arguments,function*(I,{throttleEndTimeMillis:s,backoffCount:o},v,S=cf){var W;const{appId:K,measurementId:q}=I;try{yield wg(v,s)}catch($){if(q)return Vi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${q} provided in the "measurementId" field in the local Firebase config. [${$==null?void 0:$.message}]`),{appId:K,measurementId:q};throw $}try{const $=yield Sg(I);return S.deleteThrottleMetadata(K),$}catch($){const ne=$;if(!Cg(ne)){if(S.deleteThrottleMetadata(K),q)return Vi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${q} provided in the "measurementId" field in the local Firebase config. [${ne==null?void 0:ne.message}]`),{appId:K,measurementId:q};throw $}const oe=Number((W=ne==null?void 0:ne.customData)===null||W===void 0?void 0:W.httpStatus)===503?Sh(o,S.intervalMillis,xg):Sh(o,S.intervalMillis),ce={throttleEndTimeMillis:Date.now()+oe,backoffCount:o+1};return S.setThrottleMetadata(K,ce),Vi.debug(`Calling attemptFetch again in ${oe} millis`),df(I,ce,v,S)}})}function wg(I,s){return new Promise((o,v)=>{const S=Math.max(s-Date.now(),0),E=setTimeout(o,S);I.addEventListener(()=>{clearTimeout(E),v(En.create("fetch-throttle",{throttleEndTimeMillis:s}))})})}function Cg(I){if(!(I instanceof ns)||!I.customData)return!1;const s=Number(I.customData.httpStatus);return s===429||s===500||s===503||s===504}class Eg{constructor(){this.listeners=[]}addEventListener(s){this.listeners.push(s)}abort(){this.listeners.forEach(s=>s())}}let ld;function Ig(I,s,o,v,S){return it(this,null,function*(){if(S&&S.global){I("event",o,v);return}else{const E=yield s,R=Object.assign(Object.assign({},v),{send_to:E});I("event",o,R)}})}function Og(I,s,o,v){return it(this,null,function*(){if(v&&v.global)return I("set",{screen_name:o}),Promise.resolve();{const S=yield s;I("config",S,{update:!0,screen_name:o})}})}function Lg(I,s,o,v){return it(this,null,function*(){if(v&&v.global)return I("set",{user_id:o}),Promise.resolve();{const S=yield s;I("config",S,{update:!0,user_id:o})}})}function Mg(I,s,o,v){return it(this,null,function*(){if(v&&v.global){const S={};for(const E of Object.keys(o))S[`user_properties.${E}`]=o[E];return I("set",S),Promise.resolve()}else{const S=yield s;I("config",S,{update:!0,user_properties:o})}})}function Rg(I,s){return it(this,null,function*(){const o=yield I;window[`ga-disable-${o}`]=!s})}let ud;function ff(I){ud=I}function pf(I){ld=I}function Ng(){return it(this,null,function*(){if(xh())try{yield Ha()}catch(I){return Vi.warn(En.create("indexeddb-unavailable",{errorInfo:I==null?void 0:I.toString()}).message),!1}else return Vi.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Bg(I,s,o,v,S,E,R){return it(this,null,function*(){var k;const W=_g(I);W.then(oe=>{o[oe.measurementId]=oe.appId,I.options.measurementId&&oe.measurementId!==I.options.measurementId&&Vi.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${oe.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(oe=>Vi.error(oe)),s.push(W);const K=Ng().then(oe=>{if(oe)return v.getId()}),[q,$]=yield Promise.all([W,K]);yg(E)||cg(E,q.measurementId),ud&&(S("consent","default",ud),ff(void 0)),S("js",new Date);const ne=(k=R==null?void 0:R.config)!==null&&k!==void 0?k:{};return ne[hg]="firebase",ne.update=!0,$!=null&&(ne[og]=$),S("config",q.measurementId,ne),ld&&(S("set",ld),pf(void 0)),q.measurementId})}class Pg{constructor(s){this.app=s}_delete(){return delete Zs[this.app.options.appId],Promise.resolve()}}let Zs={},gf=[];const mf={};let Tu="dataLayer",yf="gtag",vf,$s,cd=!1;function mm(I){if(cd)throw En.create("already-initialized");I.dataLayerName&&(Tu=I.dataLayerName),I.gtagName&&(yf=I.gtagName)}function kg(){const I=[];if(_c()&&I.push("This is a browser extension environment."),is()||I.push("Cookies are not available."),I.length>0){const s=I.map((v,S)=>`(${S+1}) ${v}`).join(" "),o=En.create("invalid-analytics-context",{errorInfo:s});Vi.warn(o.message)}}function Dg(I,s,o){kg();const v=I.options.appId;if(!v)throw En.create("no-app-id");if(!I.options.apiKey)if(I.options.measurementId)Vi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Zs[v]!=null)throw En.create("already-exists",{id:v});if(!cd){dg(Tu);const{wrappedGtag:E,gtagCore:R}=mg(Zs,gf,mf,Tu,yf);$s=E,vf=R,cd=!0}return Zs[v]=Bg(I,gf,mf,s,vf,Tu,o),new Pg(I)}function Fg(I=Pd()){I=rs(I);const s=io(I,bu);return s.isInitialized()?s.getImmediate():Hg(I)}function Hg(I,s={}){const o=io(I,bu);if(o.isInitialized()){const S=o.getImmediate();if(za(s,o.getOptions()))return S;throw En.create("already-initialized")}return o.initialize({options:s})}function ym(){return it(this,null,function*(){if(isBrowserExtension()||!areCookiesEnabled()||!isIndexedDBAvailable())return!1;try{return yield validateIndexedDBOpenable()}catch(I){return!1}})}function vm(I,s,o){I=getModularInstance(I),Og($s,Zs[I.app.options.appId],s,o).catch(v=>Vi.error(v))}function xm(I,s,o){I=getModularInstance(I),Lg($s,Zs[I.app.options.appId],s,o).catch(v=>Vi.error(v))}function Am(I,s,o){I=getModularInstance(I),Mg($s,Zs[I.app.options.appId],s,o).catch(v=>Vi.error(v))}function bm(I,s){I=getModularInstance(I),Rg(Zs[I.app.options.appId],s).catch(o=>Vi.error(o))}function Tm(I){$s?$s("set",I):pf(I)}function ei(I,s,o,v){I=rs(I),Ig($s,Zs[I.app.options.appId],s,o,v).catch(S=>Vi.error(S))}function Sm(I){$s?$s("consent","update",I):ff(I)}const xf="@firebase/analytics",Af="0.9.0";function Gg(){Ir(new as(bu,(s,{options:o})=>{const v=s.getProvider("app").getImmediate(),S=s.getProvider("installations-internal").getImmediate();return Dg(v,S,o)},"PUBLIC")),Ir(new as("analytics-internal",I,"PRIVATE")),Os(xf,Af),Os(xf,Af,"esm2017");function I(s){try{const o=s.getProvider(bu).getImmediate();return{logEvent:(v,S,E)=>ei(o,v,S,E)}}catch(o){throw En.create("interop-component-reg-failed",{reason:o})}}}Gg();function di(I){const s=I.componentId,o=I.componentConfig,v=I.componentClass,S=I.componentsMap,E=I.checkGameStateReady,R=I.componentsReadyStatusMap,k=I.states,W=new v(o);return W.componentId=s,W.states=k,S.set(s,W),R.set(s,!1),W.onReady=()=>{if(R.set(s,!0),!Tf&&Ji.name==="famobi"){const q=new B().getComponentsByState(L.HOME_SCREEN);let $=0;q.forEach(ne=>{R.get(ne.componentId)===!0&&$++}),window.famobi.setPreloadProgress(Math.round(100*$/q.length))}E()},W}const Ug={closingSliceA:[{key:"selectedClosingSliceA",filePath:"fortuneWheel/Slices/ClosingSliceBackgrounds/SliceA.png"}],closingSliceB:[{key:"selectedClosingSliceB",filePath:"fortuneWheel/Slices/ClosingSliceBackgrounds/SliceB.png"}],closingSliceC:[{key:"selectedClosingSliceC",filePath:"fortuneWheel/Slices/ClosingSliceBackgrounds/SliceC.png"}],closingSliceD:[{key:"selectedClosingSliceD",filePath:"fortuneWheel/Slices/ClosingSliceBackgrounds/SliceD.png"}],closingSliceE:[{key:"selectedClosingSliceE",filePath:"fortuneWheel/Slices/ClosingSliceBackgrounds/SliceE.png"}],closingSliceF:[{key:"selectedClosingSliceF",filePath:"fortuneWheel/Slices/ClosingSliceBackgrounds/SliceF.png"}],spinSlice:[{key:"selectedSpinSlice",filePath:"fortuneWheel/Slices/SliceEffects/standart_spin_slice_img.png"}],spinSliceGlow:[{key:"selectedSpinSliceGlow",filePath:"fortuneWheel/Slices/SliceEffects/standart_spin_slice_glow_img.png"}],glowStarSliceItem:[{key:"selectedGlowStarSliceItem",filePath:"fortuneWheel/Slices/SliceItems/CFXM3_T_GlowStar.png"}],gemSliceItem:[{key:"selectedGemSliceItem",filePath:"fortuneWheel/Slices/SliceItems/Gem.png"}],gemLightningSliceItem:[{key:"selectedGemLightningSliceItem",filePath:"fortuneWheel/Slices/SliceItems/lighting_icon_img.png"}],slicedButtonBg:[{key:"selectedSlicedButtonBg",filePath:"fortuneWheel/WheelBase/9SlicedButtonWhite-sqr-2.png"}],buttonFrame:[{key:"selectedButtonFrame",filePath:"fortuneWheel/WheelBase/buttonFrame.png"}],midTable:[{key:"selectedMidTable",filePath:"fortuneWheel/WheelBase/mid_table.png"}],midTablePinTop:[{key:"selectedMidTablePinTop",filePath:"fortuneWheel/WheelBase/middle_pin_top_circle.png"}],midPin:[{key:"selectedMidPin",filePath:"fortuneWheel/WheelBase/middle_pin.png"}],sliceStroke:[{key:"selectedSliceStroke",filePath:"fortuneWheel/WheelBase/slice_stroke.png"}],spinFrameLamp:[{key:"selectedSpinFrameLamp",filePath:"fortuneWheel/WheelBase/spin_frame_lamp_img.png"}],spinFrame:[{key:"selectedSpinFrame",filePath:"fortuneWheel/WheelBase/spin_frame.png"}],spinNumberActive:[{key:"selectedSpinNumberActive",filePath:"fortuneWheel/WheelBase/spin_number_active.png"}],spinNumberPassive:[{key:"selectedSpinNumberPassive",filePath:"fortuneWheel/WheelBase/spin_number_passive.png"}],spinBg:[{key:"selectedSpinBg",filePath:"fortuneWheel/WheelBase/spin-bg.png"}],glassTable:[{key:"selectedGlassTable",filePath:"fortuneWheel/WheelBase/WheelInactive/GlassTable.png"}],glassTableLight:[{key:"selectedGlassTableLight",filePath:"fortuneWheel/WheelBase/WheelInactive/GlassTableLight.png"}],lightning:[{key:"selectedLightning",filePath:"fortuneWheel/lightning_transition/lightning.png"}],buttonShine:[{key:"selectedButtonShine",filePath:"fortuneWheel/WheelBase/ButtonShine.png"}],fwToggleIcon:[{key:"selectedFwtoggleIcon",filePath:"fortuneWheel/FWImage.png"}]},Wg={click:[{filePath:"fortuneWheel/sounds/click.mp3"}],collectCoin:[{filePath:"fortuneWheel/sounds/collect_coin.mp3"}],spinMorf:[{filePath:"fortuneWheel/sounds/spinMorfSound.mp3"}],uiCoinNew:[{filePath:"fortuneWheel/sounds/ui_coin_new.mp3"}],wheelElectro:[{filePath:"fortuneWheel/sounds/wheelelectro.mp3"}],wheelSpinClick:[{filePath:"fortuneWheel/sounds/wheelspinclick.mp3"}],fortuneGoldenGemWon:[{filePath:"fortuneWheel/sounds/fortuneGoldenGemWon.mp3"}],spinStandardOpening:[{filePath:"sound/spinStandardOpening.mp3"}]},zg=JSON.parse(`{"S":[{"s":"1","t":"EGYPT","T":[{"t":"1","s":"1","n":"GIZA","f":"GIZA PYRAMID","q":"GIZA PYRAMID \u25CF Cairo / EGYPT","w":"The Great Pyramid of Giza is the oldest of the Seven Wonders of the Ancient World.","c":"4"},{"t":"2","s":"1","n":"SPHINX","f":"GREAT SPHINX","q":"GREAT SPHINX \u25CF Cairo / EGYPT","w":"The face of the Great Sphinx of Giza is generally believed to represent the Pharaoh Khafre.","c":"8"},{"t":"3","s":"1","n":"RED SEA","f":"RED SEA","q":"RED SEA \u25CF Sharm El Sheikh / EGYPT","w":"The Red Sea is a seawater inlet noted for its marine life and corals.","c":"8"}],"c":"20"},{"s":"2","t":"FRANCE","T":[{"t":"4","s":"2","n":"EIFFEL","f":"EIFFEL TOWER","q":"EIFFEL TOWER \u25CF Paris / FRANCE","w":"The Eiffel Tower was constructed to demonstrate France's industrial prowess.","c":"8"},{"t":"5","s":"2","n":"N-DAME","f":"NOTRE-DAME DE PARIS","q":"NOTRE-DAME DE PARIS \u25CF Paris / FRANCE","w":"Notre-Dame is a medieval Catholic cathedral in Paris.","c":"12"},{"t":"6","s":"2","n":"LOUVRE","f":"THE LOUVRE","q":"THE LOUVRE \u25CF Paris / FRANCE","w":"The Louvre is the world's largest art museum and a historic monument.","c":"12"},{"t":"7","s":"2","n":"ARC TRIOMPHE","f":"ARC DE TRIOMPHE","q":"ARC DE TRIOMPHE \u25CF Paris / FRANCE","w":"The Arc de Triomphe de l'Etoile honors those who died in the French Revolutionary and Napoleonic Wars.","c":"12"},{"t":"8","s":"2","n":"MONT BLANC","f":"MONT BLANC","q":"MONT BLANC \u25CF Haute-Savoie / FRANCE","w":"It is the highest mountain in the Alps and Western Europe.","c":"16"}],"c":"60"},{"s":"3","t":"CHILE","T":[{"t":"9","s":"3","n":"EL TATIO","f":"EL TATIO","q":"EL TATIO \u25CF Antofagasta / CHILE","w":"El Tatio is the third-largest geyser field in the world and the largest in the Southern Hemisphere.","c":"16"},{"t":"10","s":"3","n":"TORRES DEL PAINE","f":"TORRES DEL PAINE","q":"TORRES DEL PAINE \u25CF Chilean Patagonia / CHILE","w":"The word 'paine' means blue in the native Tehuelche language. The national park gets its name from a mountain group.","c":"16"},{"t":"11","s":"3","n":"AHU TONGARIKI","f":"AHU TONGARIKI","q":"AHU TONGARIKI \u25CF Valparaiso / CHILE","w":"Ahu Tongariki was the main center and capital of the Hotu Iti, the eastern confederation of the Rapanui.","c":"16"},{"t":"12","s":"3","n":"PETROHUE","f":"PETROHUE WATERFALLS","q":"PETROHUE WATERFALLS \u25CF Los Lagos / CHILE","w":"The waterfall is supported by basaltic lava stemming from the Osorno Volcano and provides an interesting background for pictures.","c":"16"},{"t":"13","s":"3","n":"LAKE CARRERA","f":"GENERAL CARRERA LAKE","q":"GENERAL CARRERA LAKE \u25CF Chile Chico / CHILE","w":"One of the most picturesque bodies of water in Patagonia and is known as a trout and salmon fishing destination.","c":"16"}],"c":"80"},{"s":"4","t":"SPAIN","T":[{"t":"14","s":"4","n":"SAGRADA","f":"SAGRADA FAMILIA","q":"SAGRADA FAMILIA \u25CF Barcelona / SPAIN","w":"It is the largest unfinished Roman Catholic church in the world.","c":"16"},{"t":"15","s":"4","n":"PALAU NACIONAL","f":"PALAU NACIONAL","q":"PALAU NACIONAL \u25CF Barcelona / SPAIN","w":"It was the main site of the 1929 International Exhibition on the hill of Montju\xEFc in Barcelona.","c":"16"},{"t":"16","s":"4","n":"SEGOVIA AQUEDUCT","f":"AQUEDUCT OF SEGOVIA","q":"AQUEDUCT OF SEGOVIA \u25CF Segovia / SPAIN","w":"It is one of the best-preserved elevated Roman aqueducts.","c":"16"},{"t":"17","s":"4","n":"ROYAL PALACE","f":"ROYAL PALACE OF MADRID","q":"ROYAL PALACE OF MADRID \u25CF Madrid / SPAIN","w":"It is the official residence of the Spanish Royal Family.","c":"16"},{"t":"18","s":"4","n":"CIBELES","f":"PLAZA DE CIBELES","q":"PLAZA DE CIBELES \u25CF Madrid / SPAIN","w":"It is a square with a neo-classical complex of marble sculptures with fountains that has become an iconic symbol for the city of Madrid.","c":"16"}],"c":"80"},{"s":"5","t":"TURKEY","T":[{"t":"19","s":"5","n":"BASILICA","f":"BASILICA CISTERN","q":"BASILICA CISTERN \u25CF Istanbul / TURKEY","w":"It is the largest of several hundred ancient cisterns that lie beneath the city of Istanbul.","c":"16"},{"t":"20","s":"5","n":"PAMUKKALE","f":"PAMUKKALE","q":"PAMUKKALE \u25CF Denizli / TURKEY","w":"Pamukkale, meaning ''cotton castle'', is a natural site that is famous for a carbonate mineral left by the flowing water.","c":"16"},{"t":"21","s":"5","n":"EPHESUS","f":"EPHESUS","q":"EPHESUS \u25CF Izmir / TURKEY","w":"Ephesus was an ancient Greek city on the coast of Ionia.","c":"16"},{"t":"22","s":"5","n":"CAPPADOCIA","f":"CAPPADOCIA","q":"CAPPADOCIA \u25CF Nevsehir / TURKEY","w":"It is a region of exceptional natural wonders, with fairy chimneys and unique historical and cultural heritage.","c":"16"},{"t":"23","s":"5","n":"NEMRUT","f":"MOUNT NEMRUT","q":"MOUNT NEMRUT \u25CF Ad\u0131yaman / TURKEY","w":"It is notable for the summit where several large statues are erected around what is assumed to be a royal tomb from the 1st century BC.","c":"16"}],"c":"80"},{"s":"6","t":"JAPAN","T":[{"t":"24","s":"6","n":"KIYOMIZU","f":"KIYOMIZU-DERA","q":"KIYOMIZU-DERA \u25CF Kyoto / JAPAN","w":"Kiyomizu-dera is an independent Buddhist temple in eastern Kyoto.","c":"16"},{"t":"25","s":"6","n":"FUSHIMI INARI-TAISHA","f":"FUSHIMI INARI-TAISHA","q":"FUSHIMI INARI-TAISHA \u25CF Kyoto / JAPAN","w":"It is the head shrine of the god Inari, located in Fushimi Ward in Kyoto.","c":"16"},{"t":"26","s":"6","n":"OSAKA CASTLE","f":"OSAKA CASTLE","q":"OSAKA CASTLE \u25CF Osaka / JAPAN","w":"It played a major role in the unification of Japan during the sixteenth century of the Azuchi-Momoyama period.","c":"16"},{"t":"27","s":"6","n":"ITSUKUSHIMA","f":"ITSUKUSHIMA SHRINE","q":"ITSUKUSHIMA SHRINE \u25CF Hatsukaichi / JAPAN","w":"It is a Shinto shrine best known for its ''floating'' torii gate.","c":"16"},{"t":"28","s":"6","n":"ARASHIYAMA","f":"ARASHIYAMA","q":"ARASHIYAMA \u25CF Kyoto / JAPAN","w":"It is a nationally designated Historic Site and Place of Scenic Beauty.","c":"16"}],"c":"80"},{"s":"7","t":"RUSSIA","T":[{"t":"29","s":"7","n":"HERMITAGE","f":"HERMITAGE MUSEUM","q":"HERMITAGE MUSEUM \u25CF Saint Petersburg / RUSSIA","w":"It is a museum of art and culture in Saint Petersburg, Russia. The second-largest in the world.","c":"16"},{"t":"30","s":"7","n":"LAKE BAIKAL","f":"LAKE BAIKAL","q":"Lake Baikal \u25CF Siberia / RUSSIA","w":"Lake Baikal is the largest freshwater lake by volume in the world.","c":"16"},{"t":"31","s":"7","n":"RED SQUARE","f":"RED SQUARE","q":"RED SQUARE \u25CF Moscow / RUSSIA","w":"It is often considered the central square of Moscow since Moscow's major streets, which connect to Russia's major highways, originate from the square.","c":"16"},{"t":"32","s":"7","n":"SAINT BASIL","f":"SAINT BASIL'S CATHEDRAL","q":"SAINT BASIL'S CATHEDRAL \u25CF Moscow / RUSSIA","w":"The church has been part of the Moscow Kremlin and Red Square UNESCO World Heritage Site since 1990.","c":"16"},{"t":"33","s":"7","n":"THEATRE","f":"BOLSHOI THEATRE","q":"BOLSHOI THEATRE \u25CF Moscow / RUSSIA","w":"The main building of the theatre, rebuilt and renovated several times, is a landmark of Moscow and Russia.","c":"16"}],"c":"80"},{"s":"9","t":"NORWAY","T":[{"t":"39","s":"9","n":"URNES STAVE","f":"URNES STAVE CHURCH","q":"URNES STAVE CHURCH \u25CF Ornes / NORWAY","w":"Urnes Stave Church is a 12th-century stave church that was listed as a World Heritage Site by UNESCO.","c":"16"},{"t":"40","s":"9","n":"FJORD","f":"GEIRANGERFJORD","q":"GEIRANGERFJORD \u25CF M\xF8re og Romsdal / NORWAY","w":"The fjord is one of Norway's most visited tourist sites. It is listed as a UNESCO World Heritage Site.","c":"16"},{"t":"41","s":"9","n":"VIGELAND","f":"VIGELAND SCULPTURE PARK","q":"VIGELAND SCULPTURE PARK \u25CF Oslo / NORWAY","w":"Frogner Park is the largest park in the city and is the world's largest sculpture park made by a single artist.","c":"16"},{"t":"42","s":"9","n":"BRYGGEN","f":"BRYGGEN","q":"BRYGGEN \u25CF Bergen / NORWAY","w":"Bryggen has been on the UNESCO list for World Cultural Heritage sites since 1979.","c":"16"},{"t":"43","s":"9","n":"TROLLTUNGA","f":"TROLLTUNGA","q":"TROLLTUNGA \u25CF Hordaland County / NORWAY","w":"The increased popularity has turned Trolltunga into a national icon and a major tourist attraction for the region.","c":"16"}],"c":"80"},{"s":"10","t":"GERMANY","T":[{"t":"44","s":"10","n":"BRANDEN BURG","f":"BRANDENBURG GATE","q":"BRANDENBURG GATE \u25CF Berlin / GERMANY","w":"The Brandenburg Gate was often a site for major historical events and is today considered a symbol of European unity and peace.","c":"16"},{"t":"45","s":"10","n":"SAXON SWITZERLAND PARK","f":"SAXON SWITZERLAND NATIONAL PARK","q":"SAXON SWITZERLAND NATIONAL PARK \u25CF Dresden / GERMANY","w":"It covers two areas of 93.5 km\xB2 in the German part of the Elbe Sandstone Mountains, adjoining a national park in Czechia.","c":"16"},{"t":"46","s":"10","n":"COLOGNE CATHEDRAL","f":"COLOGNE CATHEDRAL","q":"COLOGNE CATHEDRAL \u25CF K\xF6ln / GERMANY","w":"It is a renowned monument of German Catholicism and Gothic architecture and was declared a World Heritage Site.","c":"16"},{"t":"47","s":"10","n":"NEUSCHWAN STEIN CASTLE","f":"NEUSCHWANSTEIN CASTLE","q":"NEUSCHWANSTEIN CASTLE \u25CF Hohenschwangau / GERMANY","w":"It was commissioned as a retreat and as a homage to Richard Wagner. The castle was intended as a home for the king.","c":"16"},{"t":"48","s":"10","n":"OBERSEE","f":"OBERSEE","q":"Obersee \u25CF Bavaria / GERMANY","w":"It is a natural lake in the German state of Bavaria, near the Austrian border.","c":"16"}],"c":"80"},{"s":"11","t":"ITALY","T":[{"t":"49","s":"11","n":"MILAN CATHEDRAL","f":"MILAN CATHEDRAL","q":"MILAN CATHEDRAL \u25CF Milan / ITALY","w":"It took nearly six centuries to complete. It is the largest church in Italy and the third-largest in the world.","c":"16"},{"t":"50","s":"11","n":"GRAND CANAL","f":"GRAND CANAL","q":"GRAND CANAL \u25CF Venice / ITALY","w":"It forms one of the major water-traffic corridors in the city and many tourists explore the canal by gondola.","c":"16"},{"t":"51","s":"11","n":"PISA TOWER","f":"LEANING TOWER OF PISA","q":"LEANING TOWER OF PISA \u25CF Pisa / ITALY","w":"The Leaning Tower of Pisa  is the campanile of the cathedral of Pisa, known worldwide for its unintended tilt.","c":"16"},{"t":"52","s":"11","n":"COLOSSEUM","f":"COLOSSEUM","q":"COLLESSEUM \u25CF Rome / ITALY","w":"The Colosseum is an oval amphitheater built of travertine and is the largest amphitheatre built.","c":"16"},{"t":"53","s":"11","n":"TREVI FOUNTAIN","f":"TREVI FOUNTAIN","q":"TREVI FOUNTAIN \u25CF Rome / ITALY","w":"It is the largest Baroque fountain in the city and one of the most famous fountains in the world.","c":"16"}],"c":"80"},{"s":"12","t":"CHINA","T":[{"t":"54","s":"12","n":"GREAT WALL","f":"GREAT WALL OF CHINA","q":"GREAT WALL OF CHINA \u25CF Beijing / CHINA","w":"The Great Wall is generally recognized as one of the most impressive architectural feats in history.","c":"16"},{"t":"55","s":"12","n":"TERRACOTTA","f":"TERRACOTTA ARMY","q":"TERRACOTTA ARMY \u25CF Xi'an / CHINA","w":"It is a form of funerary art buried with the emperor and whose purpose was to protect the emperor in the afterlife.","c":"16"},{"t":"56","s":"12","n":"LI RIVER","f":"LI RIVER","q":"Li River \u25CF Guangxi Zhuang / CHINA","w":"It flows 83 kilometres to where the karst mountains and river sights highlight the famous Li River cruise.","c":"16"},{"t":"57","s":"12","n":"PAGODA","f":"GIANT WILD GOOSE PAGODA","q":"GIANT WILD GOOSE PAGODA \u25CF Xi'an / CHINA","w":"One of the pagoda's many functions was to hold sutras and figurines of the Buddha.","c":"16"},{"t":"58","s":"12","n":"ZHANGJIAJIE PARK","f":"ZHANGJIAJIE NATIONAL FOREST PARK","q":"ZHANGJIAJIE NATIONAL FOREST PARK \u25CF Zhangjiajie / CHINA","w":"It is a unique national forest park and is one of several national parks within the Wulingyuan Scenic Area.","c":"16"}],"c":"80"},{"s":"13","t":"INDIA","T":[{"t":"59","s":"13","n":"GOLDEN TEMPLE","f":"GOLDEN TEMPLE","q":"GOLDEN TEMPLE \u25CF Amritsar / INDIA","w":"It is one of the most revered spiritual sites of Sikhism.","c":"16"},{"t":"60","s":"13","n":"GANGES","f":"GANGES","q":"GANGES \u25CF Uttarakhand / INDIA","w":"It is the third-largest river in the world by discharge and is one of the most sacred rivers to Hindus.","c":"16"},{"t":"61","s":"13","n":"HAWA MAHAL","f":"HAWA MAHAL","q":"HAWA MAHAL \u25CF Jaipur / INDIA","w":"The intent of the lattice design was to allow royal ladies to observe everyday life and festivals celebrated in the street below without being seen.","c":"16"},{"t":"62","s":"13","n":"TAJ MAHAL","f":"TAJ MAHAL","q":"TAJ MAHAL \u25CF Agra / INDIA","w":"It is a UNESCO World Heritage Site for being ''one of the universally admired masterpieces of the world's heritage''.","c":"16"},{"t":"63","s":"13","n":"MEENAKSHI AMMAN TEMPLE","f":"MEENAKSHI AMMAN TEMPLE","q":"MEENAKSHI AMMAN TEMPLE \u25CF Madurai / INDIA","w":"Meenakshi Temple is a historic Hindu temple that is dedicated to Meenakshi and Sundareswar","c":"16"}],"c":"80"},{"s":"14","t":"BRAZIL","T":[{"t":"64","s":"14","n":"LEN\xC7\xD3IS MARANHENSES NATIONAL PARK","f":"LEN\xC7\xD3IS MARANHENSES NATIONAL PARK","q":"LEN\xC7\xD3IS MARANHENSES NATIONAL PARK \u25CF Barreirinhas / BRAZIL","w":"It is an area of low, flat, occasionally flooded land, overlaid with large, discrete dunes and despite abundant rain, supports almost no vegetation.","c":"16"},{"t":"65","s":"14","n":"AMAZON RAINFOREST","f":"AMAZON RAINFOREST","q":"Amazon Rainforest \u25CF BRAZIL","w":"The rainforest has been in existence for at least 55 million years","c":"16"},{"t":"66","s":"14","n":"CHAPADA DOS VEADEIROS NATIONAL PARK","f":"CHAPADA DOS VEADEIROS NATIONAL PARK","q":"CHAPADA DOS VEADEIROS NATIONAL PARK \u25CF Goi\xE1s / BRAZIL","w":"This national park is located on the top of an ancient plateau and is listed as a World Heritage Site by UNESCO in 2001.","c":"16"},{"t":"67","s":"14","n":"CHRIST THE REDEEMER","f":"CHRIST THE REDEEMER","q":"CHRIST THE REDEEMER \u25CF Rio De Janeiro / BRAZIL","w":"It is a cultural icon of both Rio de Janeiro and Brazil and is listed as one of the New Seven Wonders of the World.","c":"16"},{"t":"68","s":"14","n":"ILHA DE SANTA CATARINA","f":"ILHA DE SANTA CATARINA","q":"ILHA DE SANTA CATARINA \u25CF Santa Catarina / BRAZIL","w":"It is the largest largest island of an archipelago consisting of more than 30 islands, also contains numerous beach resorts.","c":"16"}],"c":"80"},{"s":"15","t":"USA","T":[{"t":"69","s":"15","n":"STATUE OF LIBERTY","f":"STATUE OF LIBERTY","q":"STATUE OF LIBERTY \u25CF New York / USA","w":"The statue became an icon of freedom and the United States. It is also a welcoming sight to immigrants.","c":"16"},{"t":"70","s":"15","n":"GOLDEN GATE BRIDGE","f":"GOLDEN GATE BRIDGE","q":"GOLDEN GATE BRIDGE \u25CF San Francisco / USA","w":"It has been declared one of the Wonders of the Modern World by the American Society of Civil Engineers.","c":"16"},{"t":"71","s":"15","n":"YELLOWSTONE NATIONAL PARK","f":"YELLOWSTONE NATIONAL PARK","q":"YELLOWSTONE NATIONAL PARK \u25CF Wyoming / USA","w":"Yellowstone is widely held to be the first national park in the world. It is known for its Old Faithful geyser.","c":"16"},{"t":"72","s":"15","n":"LAS VEGAS STRIP","f":"LAS VEGAS STRIP","q":"LAS VEGAS STRIP \u25CF Las Vegas / USA","w":"It is one of the most popular and iconic tourist destinations in the United States and the world.","c":"16"},{"t":"73","s":"15","n":"GRAND CANYON NATIONAL PARK","f":"GRAND CANYON NATIONAL PARK","q":"GRAND CANYON NATIONAL PARK \u25CF Arizona / USA","w":"Its main feature is the Grand Canyon, which is often considered one of the Wonders of the World.","c":"16"}],"c":"80"},{"s":"17","t":"SOUTH AFRICA","T":[{"t":"79","s":"17","n":"KRUGER NATIONAL PARK","f":"KRUGER NATIONAL PARK","q":"KRUGER NATIONAL PARK \u25CF Northeast South Africa / SOUTH AFRICA","w":"It is one of the largest game reserves in Africa. It covers an area of 19,485 square kilometers.","c":"16"},{"t":"80","s":"17","n":"BLYDE RIVER CANYON","f":"BLYDE RIVER CANYON","q":"BLYDE RIVER CANYON \u25CF Mpumalanga / SOUTH AFRICA","w":"It is one of the largest canyons and is known as one of the great wonders of nature on the continent.","c":"16"},{"t":"81","s":"17","n":"CRADLE OF HUMANKIND","f":"CRADLE OF HUMANKIND","q":"CRADLE OF HUMANKIND \u25CF Johannesburg / SOUTH AFRICA","w":"It is a World Heritage Site and was the site of the discovery of a 2.3-million-year-old fossil.","c":"16"},{"t":"82","s":"17","n":"KIRSTENBOSCH NATIONAL BOTANICAL GARDEN","f":"KIRSTENBOSCH NATIONAL BOTANICAL GARDEN","q":"KIRSTENBOSCH NATIONAL BOTANICAL GARDEN \u25CF Cape Town / SOUTH AFRICA","w":"The garden is one of nine National Botanical Gardens covering five of South Africa's six different biomes.","c":"16"},{"t":"83","s":"17","n":"CANGO CAVES","f":"CANGO CAVES","q":"CANGO CAVES \u25CF Oudtshoorn / SOUTH AFRICA","w":"The principal cave is one of the country's finest, best-known, and most popular tourist caves.","c":"16"}],"c":"80"},{"s":"18","t":"SWEDEN","T":[{"t":"84","s":"18","n":"ICEHOTEL","f":"ICEHOTEL","q":"ICEHOTEL \u25CF Jukkasj\xE4rvi / SWEDEN","w":"It is a temporary hotel made up of snow and sculpted blocks of ice that are built every year.","c":"16"},{"t":"85","s":"18","n":"VASA","f":"VASA","q":"VASA \u25CF Vasa / SWEDEN","w":"The museum displays the only almost fully intact ship that has ever been salvaged, the 64-gun warship Vasa that sank on her maiden voyage in 1628.","c":"16"},{"t":"86","s":"18","n":"KALMAR CASTLE","f":"KALMAR CASTLE","q":"KALMAR CASTLE \u25CF Kalmar / SWEDEN","w":"One of the most significant political events in Scandinavia took place here when the Kalmar Union was formed.","c":"16"},{"t":"87","s":"18","n":"\xD8RESUND BRIDGE","f":"\xD8RESUND BRIDGE","q":"\xD8RESUND BRIDGE \u25CF Malm\xF6 / SWEDEN","w":"It is the longest combined road and rail bridge in Europe and connects two major metropolitan areas.","c":"16"},{"t":"88","s":"18","n":"TURNING TORSO","f":"TURNING TORSO","q":"TURNING TORSO \u25CF Malm\xF6 / SWEDEN","w":"It was the winner of the 10 Year Award from the Council on Tall Buildings and Urban Habitat and is also the tallest building in Scandinavia.","c":"16"}],"c":"80"},{"s":"19","t":"AUSTRALIA","T":[{"t":"89","s":"19","n":"GREAT BARRIER REEF","f":"GREAT BARRIER REEF","q":"GREAT BARRIER REEF \u25CF Queensland / AUSTRALIA","w":"The Great Barrier Reef is the world's largest coral reef system with over 2,900 individual reefs.","c":"20"},{"t":"90","s":"19","n":"THREE SISTERS","f":"THREE SISTERS","q":"THREE SISTERS \u25CF New South Wales / AUSTRALIA","w":"The Three Sisters are an unusual rock formation and are one of the Blue Mountains' best-known sites.","c":"20"},{"t":"91","s":"19","n":"SYDNEY OPERA HOUSE","f":"SYDNEY OPERA HOUSE","q":"SYDNEY OPERA HOUSE \u25CF Sydney / AUSTRALIA","w":"It is one of the 20th century's most famous and distinctive buildings and became a UNESCO World Heritage Site.","c":"20"},{"t":"92","s":"19","n":"GRAMPIANS NATIONAL PARK","f":"GRAMPIANS NATIONAL PARK","q":"GRAMPIANS NATIONAL PARK \u25CF Victoria / AUSTRALIA","w":"Noted for its outstanding natural beauty, it is one of the richest indigenous rock art sites in south-eastern Australia.","c":"20"},{"t":"93","s":"19","n":"SYDNEY TOWER","f":"SYDNEY TOWER","q":"SYDNEY TOWER \u25CF Sydney / AUSTRALIA","w":"It is Sydney's tallest structure and the second tallest observation tower in the Southern Hemisphere.","c":"20"}],"c":"100"},{"s":"20","t":"SOUTH KOREA","T":[{"t":"94","s":"20","n":"GYEONGBOKGUNG","f":"GYEONGBOKGUNG","q":"GYEONGBOKGUNG \u25CF Seoul / SOUTH KOREA","w":"The largest of the Five Grand Palaces built by the Joseon dynasty, it served as the home of Kings.","c":"24"},{"t":"95","s":"20","n":"N SEOUL TOWER","f":"N SEOUL TOWER","q":"N SEOUL TOWER \u25CF Seoul / SOUTH KOREA","w":"It marks the second-highest point in Seoul and is South Korea's first general radio wave tower.","c":"24"},{"t":"96","s":"20","n":"NAMISEOM","f":"NAMISEOM","q":"NAMISEOM \u25CF Chuncheon / SOUTH KOREA","w":"The name originated from General Nami. It was believed that if someone took even one stone from his grave, it would bring misfortune to their house.","c":"24"},{"t":"97","s":"20","n":"NAEJANGSAN NATIONAL PARK","f":"NAEJANGSAN NATIONAL PARK","q":"NAEJANGSAN NATIONAL PARK \u25CF Jeollabuk-do / SOUTH KOREA","w":"It is named after the famous 763-meter mountain Naejangsan and is home to many species.","c":"24"},{"t":"98","s":"20","n":"HAEDONG YONGGUNGSA","f":"HAEDONG YONGGUNGSA","q":"HAEDONG YONGGUNGSA \u25CF Busan / SOUTH KOREA","w":"The temple complex is very large and one of few in Korea to be set on the seaside.","c":"24"}],"c":"120"},{"s":"21","t":"TAIWAN","T":[{"t":"99","s":"21","n":"SUN MOON LAKE","f":"SUN MOON LAKE","q":"SUN MOON LAKE \u25CF Taipei / TAIWAN","w":"It is the largest body of water in Taiwan. The area around the lake is home to the Thao tribe.","c":"24"},{"t":"100","s":"21","n":"YEHLIU","f":"YEHLIU","q":"YEHLIU \u25CF Taipei / TAIWAN","w":"A distinctive feature of the cape is the hoodoo stones that dot its surface.","c":"24"},{"t":"101","s":"21","n":"SHIFEN WATERFALL","f":"SHIFEN WATERFALL","q":"SHIFEN WATERFALL \u25CF Taipei / TAIWAN","w":"The falls' total width is 40 meters, making it the broadest waterfall in Taiwan.","c":"24"},{"t":"102","s":"21","n":"YUSHAN","f":"YUSHAN","q":"Yushan Mountain \u25CF TAIWAN","w":"It is the highest mountain in Taiwan at 3,952 meters.","c":"24"},{"t":"103","s":"21","n":"KAOHSIUNG","f":"KAOHSIUNG","q":"KAOHSIUNG \u25CF Kaohsiung / TAIWAN","w":"With a population of 2.77 million people, it has been officially ranked as Taiwan's third most populous city.","c":"24"}],"c":"120"},{"s":"22","t":"SWITZERLAND","T":[{"t":"104","s":"22","n":"GROSSM\xDCNSTER","f":"GROSSM\xDCNSTER","q":"GROSSM\xDCNSTER \u25CF Z\xFCrich / SWITZERLAND","w":"It is one of the four major churches in the city. Construction of the present structure commenced around 1100 and it was inaugurated around 1220.","c":"24"},{"t":"105","s":"22","n":"KAPELLBR\xDCCKE","f":"KAPELLBR\xDCCKE","q":"KAPELLBR\xDCCKE \u25CF Lucerne / SWITZERLAND","w":"It is the oldest wooden covered bridge in Europe, as well as the world's oldest surviving truss bridge.","c":"24"},{"t":"106","s":"22","n":"RH\xD4NE GLACIER","f":"RH\xD4NE GLACIER","q":"Rh\xF4ne Glacier \u25CF Valais / SWITZERLAND","w":"The Rh\xF4ne Glacier is the largest in the Urner Alps.","c":"24"},{"t":"107","s":"22","n":"LAKE GENEVA","f":"LAKE GENEVA","q":"LAKE GENEVA \u25CF Geneva / SWITZERLAND","w":"It is one of the largest lakes in Western Europe and the largest on the course of the Rh\xF4ne.","c":"24"},{"t":"108","s":"22","n":"MATTERHORN","f":"MATTERHORN","q":"MATTERHORN \u25CF Valais / SWITZERLAND","w":"It is a large, pyramidal peak in the extended Monte Rosa area of the Pennine Alps and is one of the highest summits in the Alps and Europe.","c":"24"}],"c":"120"},{"s":"23","t":"PORTUGAL","T":[{"t":"109","s":"23","n":"CL\xC9RIGOS CHURCH","f":"CL\xC9RIGOS CHURCH","q":"CL\xC9RIGOS CHURCH \u25CF Porto / PORTUGAL","w":"Its tall bell tower, the Torre dos Cl\xE9rigos is one of its most characteristic symbols.","c":"24"},{"t":"110","s":"23","n":"PENA PALACE","f":"PENA PALACE","q":"PENA PALACE \u25CF Lisbon / PORTUGAL","w":"The Pena Palace is a Romanticist castle and a UNESCO World Heritage Site as one of the Seven Wonders of Portugal, located in S\xE3o Pedro de Penaferrim.","c":"24"},{"t":"111","s":"23","n":"BENAGIL","f":"BENAGIL","q":"Benagil \u25CF Algarve / PORTUGAL","w":"It is a small Portuguese village on the Atlantic coast.","c":"24"},{"t":"112","s":"23","n":"BEL\xC9M TOWER","f":"BEL\xC9M TOWER","q":"BEL\xC9M TOWER \u25CF Lisbon / PORTUGAL","w":"It is a UNESCO World Heritage site because of the significant role it played in the Portuguese maritime discoveries during the Age of Discoveries.","c":"24"},{"t":"113","s":"23","n":"CARMO CONVENT","f":"CARMO CONVENT","q":"CARMO CONVENT \u25CF Lisbon / PORTUGAL","w":"The destroyed Gothic Church of Our Lady of Mount Carmel is the main trace of the great earthquake still visible in the old city.","c":"24"}],"c":"120"},{"s":"24","t":"POLAND","T":[{"t":"114","s":"24","n":"S\u0141OWI\u0143SKI NATIONAL PARK","f":"S\u0141OWI\u0143SKI NATIONAL PARK","q":"S\u0141OWI\u0143SKI NATIONAL PARK \u25CF Smoldzino / POLAND","w":"It is a national park in Pomeranian Voivodeship. The northern boundary of the park consists of 32.5 kilometers of coastline.","c":"24"},{"t":"115","s":"24","n":"MALBORK CASTLE","f":"MALBORK CASTLE","q":"MALBORK CASTLE \u25CF Malbork / POLAND","w":"The Castle of the Teutonic Order in Malbork, located in the Polish town of Malbork, is the largest in the world measured by land area.","c":"24"},{"t":"116","s":"24","n":"BIA\u0141OWIE\u017BA FOREST","f":"BIA\u0141OWIE\u017BA FOREST","q":"BIA\u0141OWIE\u017BA FOREST \u25CF Podlaskie Voivodeship / POLAND","w":"It is one of the last and largest remaining parts of the immense primeval forest and has been designated a UNESCO World Heritage Site.","c":"24"},{"t":"117","s":"24","n":"JASNA G\xD3RA MONASTERY","f":"JASNA G\xD3RA MONASTERY","q":"JASNA G\xD3RA MONASTERY \u25CF Czestochowa / POLAND","w":"It is a famous Polish shrine to the Virgin Mary and is one of Poland's official national Historic Monuments.","c":"24"},{"t":"118","s":"24","n":"NIEDZICA CASTLE","f":"NIEDZICA CASTLE","q":"NIEDZICA CASTLE \u25CF Niedzica / POLAND","w":"The castle is known as one of the most picturesque castles in the country and adorns the covers of many books.","c":"24"}],"c":"120"},{"s":"25","t":"GREECE","T":[{"t":"74","s":"25","n":"METEORA","f":"METEORA","q":"METEORA \u25CF Kalabaka / GREECE","w":"It hosts one of the largest complexes of Eastern Orthodox monasteries and is included on the UNESCO World Heritage List.","c":"24"},{"t":"75","s":"25","n":"TEMPLE OF OLYMPIAN ZEUS","f":"TEMPLE OF OLYMPIAN ZEUS","q":"TEMPLE OF OLYMPIAN ZEUS \u25CF Athens / GREECE","w":"It was dedicated to Olympian Zeus, a name originating from his position as head of the Olympian gods.","c":"24"},{"t":"76","s":"25","n":"ERECHTHEION","f":"ERECHTHEION","q":"ERECHTHEION \u25CF Athens / GREECE","w":"It is an ancient Greek temple in Greece which was dedicated to both Athena and Poseidon.","c":"24"},{"t":"77","s":"25","n":"IONIAN ISLANDS","f":"IONIAN ISLANDS","q":"IONIAN ISLANDS \u25CF Ionian Sea / GREECE","w":"The islands form a historic region, where a unique cultural identity was built with some influences of the Italian culture.","c":"24"},{"t":"78","s":"25","n":"ZAKYNTHOS","f":"ZAKYNTHOS","q":"ZAKYNTHOS \u25CF Ionian Islands / GREECE","w":"In Greek mythology, the island was said to be named after Zakynthos, the son of Dardanus.","c":"24"}],"c":"120"},{"s":"26","t":"ARGENTINA","T":[{"t":"124","s":"26","n":"IBER\xC1 WETLANDS","f":"IBER\xC1 WETLANDS","q":"IBER\xC1 WETLANDS \u25CF Northeast Argentina / ARGENTINA","w":"Iber\xE1 is one of the most important freshwater reservoirs in the continent and the second-largest wetland in the world.","c":"24"},{"t":"125","s":"26","n":"TALAMPAYA NATIONAL PARK","f":"TALAMPAYA NATIONAL PARK","q":"TALAMPAYA NATIONAL PARK \u25CF La Rioja Province / ARGENTINA","w":"It was designated a provincial reserve, a national park, and a UNESCO World Heritage Site in 2000.","c":"24"},{"t":"126","s":"26","n":"LA BOCA","f":"LA BOCA","q":"LA BOCA \u25CF Buenos Aires / ARGENTINA","w":"La Boca is a neighborhood that retains a strong European flavor, with many of its early settlers being from Italy.","c":"24"},{"t":"127","s":"26","n":"SERRAN\xCDA DE HORNOCAL","f":"SERRAN\xCDA DE HORNOCAL","q":"Serran\xEDa de Hornocal \u25CF Humahuaca / ARGENTINA","w":"It was declared a UNESCO World Heritage Site for its wondrous peaks and the Inca road.","c":"24"},{"t":"128","s":"26","n":"PERITO MORENO GLACIER","f":"PERITO MORENO GLACIER","q":"PERITO MORENO GLACIER \u25CF Santa Cruz / ARGENTINA","w":"This ice field is the world's third-largest reserve of fresh water and played a major role in defending the territory of Argentina.","c":"24"}],"c":"120"},{"s":"27","t":"MALTA","T":[{"t":"129","s":"27","n":"AZURE WINDOW","f":"AZURE WINDOW","q":"AZURE WINDOW \u25CF San Lawrenz / MALTA","w":"The Azure Window, also known as the Dwejra Window, was a 28-meter-tall natural arch on the island of Gozo in Malta.","c":"24"},{"t":"130","s":"27","n":"ST.JOHN'S CO-CATHEDRAL","f":"ST.JOHN'S CO-CATHEDRAL","q":"ST.JOHN'S CO-CATHEDRAL \u25CF Valletta / MALTA","w":"St John's Co-Cathedral is a Roman Catholic co-cathedral in Valletta, Malta, dedicated to Saint John the Baptist.","c":"24"},{"t":"131","s":"27","n":"POPEYE VILLAGE","f":"POPEYE VILLAGE","q":"POPEYE VILLAGE \u25CF Mellieha / MALTA","w":"It was built as a film set for the 1980 musical 'Popeye'. It is converted into a themepark village with a collection of rustic buildings.","c":"24"},{"t":"132","s":"27","n":"FORT SAINT ELMO","f":"FORT SAINT ELMO","q":"FORT SAINT ELMO \u25CF Valletta / MALTA","w":"This star fort stands on the seaward shore of the Sciberras Peninsula that divides Marsamxett Harbour from Grand Harbour.","c":"24"},{"t":"133","s":"27","n":"TA'PINU","f":"TA'PINU","q":"TA'PINU \u25CF  Gozo / MALTA","w":"The Sanctuary of Ta' Pinu is an architectural masterpiece built on an isolated site in the island of Gozo, between the villages of Gharb and Ghammar.","c":"24"}],"c":"120"},{"s":"28","t":"MEXICO","T":[{"t":"134","s":"28","n":"TULUM","f":"TULUM","q":"TULUM \u25CF Quintana Roo / MEXICO","w":"Tulum is a town on the Caribbean coastline of Mexico\u2019s Yucat\xE1n Peninsula. It\u2019s known for well-preserved ruins of an ancient Mayan port city.","c":"24"},{"t":"135","s":"28","n":"EL CASTILLO","f":"EL CASTILLO","q":"EL CASTILLO \u25CF Yucatan / MEXICO","w":"El Castillo or the Temple of Kukulcan is the most famous and recognizable landmark of the entire archaeological site.","c":"24"},{"t":"136","s":"28","n":"SIAN KA'AN","f":"SIAN KA'AN","q":"SIAN KA'AN \u25CF  Quintana Roo / MEXICO","w":"Sian Ka'an is a biosphere reserve in the municipality of Tulum. It was established in 1986 and became a UNESCO World Heritage Site in 1987.","c":"24"},{"t":"137","s":"28","n":"AGUA AZUL WATERFALLS","f":"AGUA AZUL WATERFALLS","q":"AGUA AZUL WATERFALLS \u25CF Chiapas / MEXICO","w":"The Cascadas de Agua Azul are a series of waterfalls found on the Xanil River in the southern Mexican state of Chiapas.","c":"24"},{"t":"138","s":"28","n":"ISLAS MARIETAS NATIONAL PARK","f":"ISLAS MARIETAS NATIONAL PARK","q":"ISLAS MARIETAS NATIONAL PARK \u25CF Islas Marietas / MEXICO","w":"The islands are home to 44 different species of plants and wildlife. This has led to the inclusion of National Park in RAMSAR sites.","c":"24"}],"c":"120"},{"s":"29","t":"ENGLAND","T":[{"t":"139","s":"29","n":"BIG BEN","f":"BIG BEN","q":"BIG BEN \u25CF London / ENGLAND","w":"Big Ben is the nickname for the Great Bell of the clock at the north end of the Palace of Westminster in London.","c":"24"},{"t":"140","s":"29","n":"STONEHENGE","f":"STONEHENGE","q":"STONEHENGE \u25CF Salisbury / ENGLAND","w":"Stonehenge is a prehistoric monument in Wiltshire, England, two miles west of Amesbury.","c":"24"},{"t":"141","s":"29","n":"LAKE DISTRICT","f":"LAKE DISTRICT","q":"LAKE DISTRICT \u25CF Cumbria / ENGLAND","w":"The Lake District is the largest of the United Kingdom\u2019s National Parks and contains 16 lakes, more than 150 high peaks, with four over 3000 feet.","c":"24"},{"t":"142","s":"29","n":"TOWER OF LONDON","f":"TOWER OF LONDON","q":"TOWER OF LONDON \u25CF London / ENGLAND","w":"The Tower of London is a medieval castle that has served many purposes. It was a royal residence (and still is, officially).","c":"24"},{"t":"143","s":"29","n":"WINDSOR CASTLE","f":"WINDSOR CASTLE","q":"WINDSOR CASTLE \u25CF Windsor / ENGLAND","w":"Windsor Castle is a royal residence at Windsor in the English county of Berkshire.","c":"24"}],"c":"120"},{"s":"30","t":"FINLAND","T":[{"t":"144","s":"30","n":"OLD RAUMA","f":"OLD RAUMA","q":"OLD RAUMA \u25CF Rauma / FINLAND","w":"Old Rauma is the wooden city center of the town of Rauma, Finland. It is listed as a UNESCO World Heritage Site.","c":"24"},{"t":"145","s":"30","n":"SUOMENLINNA","f":"SUOMENLINNA","q":"SUOMENLINNA \u25CF Helsinki / FINLAND","w":"Suomenlinna is an 18th-century sea fortress and nature area with centuries-old artillery and defensive walls, spread across 6 linked islands.","c":"24"},{"t":"146","s":"30","n":"TURKU CASTLE","f":"TURKU CASTLE","q":"TURKU CASTLE \u25CF Turku / FINLAND","w":"Turku Castle is a medieval building in the city of Turku in Finland.","c":"24"},{"t":"147","s":"30","n":"NUUKSIO NATIONAL PARK","f":"NUUKSIO NATIONAL PARK","q":"NUUKSIO NATIONAL PARK \u25CF Espoo / FINLAND","w":"Established in 1994, this national park spreads over an area of forests and lakes in Espoo, Kirkkonummi and Vihti.","c":"24"},{"t":"148","s":"30","n":"OLAVINLINNA","f":"OLAVINLINNA","q":"OLAVINLINNA \u25CF Savonlinna / FINLAND","w":"Olavinlinna is a 15th-century three-tower castle located in Savonlinna, Finland. It is the northernmost medieval stone fortress still standing.","c":"24"}],"c":"120"},{"s":"31","t":"COLOMBIA","T":[{"t":"149","s":"31","n":"CASTILLO DE SAN FELIPE DE BARAJAS","f":"CASTILLO DE SAN FELIPE DE BARAJAS","q":"CASTILLO DE SAN FELIPE DE BARAJAS \u25CF Cartagena / COLOMBIA","w":"The Castillo San Felipe de Barajas is a fortress in the city of Cartagena, Colombia.","c":"24"},{"t":"150","s":"31","n":"TATACOA DESERT","f":"TATACOA DESERT","q":"TATACOA DESERT \u25CF Huila / COLOMBIA","w":"The Tatacoa Desert is the second largest arid zone in Colombia after the Guajira Peninsula.","c":"24"},{"t":"151","s":"31","n":"PLAZA BOLIVAR","f":"PLAZA BOLIVAR","q":"PLAZA BOLIVAR \u25CF Bogota / COLOMBIA","w":"The Bol\xEDvar Square is the main square of the Colombian capital Bogot\xE1.","c":"24"},{"t":"152","s":"31","n":"CIUDAD PERDIDA","f":"CIUDAD PERDIDA","q":"CIUDAD PERDIDA \u25CF Magdalena / COLOMBIA","w":"Ciudad Perdida is the archaeological site of an ancient city in Colombia's Sierra Nevada de Santa Marta.","c":"24"},{"t":"153","s":"31","n":"LAKE GUATAVITA","f":"LAKE GUATAVITA","q":"LAKE GUATAVITA \u25CF Sesquil\xE9 / COLOMBIA","w":"Lake Guatavita is a small body of water in a forest-fringed crater, northeast of Bogot\xE1 in central Colombia.","c":"24"}],"c":"120"},{"s":"32","t":"ROMANIA","T":[{"t":"154","s":"32","n":"BRAN CASTLE","f":"BRAN CASTLE","q":"BRAN CASTLE \u25CF Bran / ROMANIA","w":"Bran Castle, situated near Bran and in the vicinity of Bra\u0219ov, is a national monument and landmark in Romania.","c":"24"},{"t":"155","s":"32","n":"CASTELUL CORVINILOR","f":"CASTELUL CORVINILOR","q":"CASTELUL CORVINILOR \u25CF Hunedoara / ROMANIA","w":"Corvin Castle, also known as Hunyadi Castle or Hunedoara Castle, is a Gothic-Renaissance castle in Hunedoara, Romania.","c":"24"},{"t":"156","s":"32","n":"PELES CASTLE","f":"PELES CASTLE","q":"PELES CASTLE \u25CF Sinaia / ROMANIA","w":"This elaborately decorated, fairytale-like Romanian royal palace is one of the most striking castles in Europe.","c":"24"},{"t":"157","s":"32","n":"IRON GATES","f":"IRON GATES","q":"IRON GATES \u25CF Portile de Fier/ ROMANIA","w":"The Iron Gates is a gorge on the river Danube. It forms part of the boundary between Serbia and Romania.","c":"24"},{"t":"158","s":"32","n":"VORONET MONASTERY","f":"VORONET MONASTERY","q":"VORONET MONASTERY \u25CF Voronet / ROMANIA","w":"Part of the UNESCO World Heritage Sites, Voronet Monastery is one of the most popular cultural attractions in Bucovina, Romania.","c":"24"}],"c":"120"},{"s":"33","t":"NETHERLANDS","T":[{"t":"159","s":"33","n":"DE HAAR CASTLE","f":"DE HAAR CASTLE","q":"DE HAAR CASTLE \u25CF Utrecht / NETHERLANDS","w":"De Haar Castle is the biggest and most luxurious castle in The Netherlands. It is one of the top European historic houses.","c":"24"},{"t":"160","s":"33","n":"TOWER OF THE DOM CATHEDRAL","f":"TOWER OF THE DOM CATHEDRAL","q":"TOWER OF THE DOM CATHEDRAL \u25CF Utrecht / NETHERLANDS","w":"The Dom Tower of Utrecht is the tallest church tower in the Netherlands, at 112.5 metres in height, and is the symbol of the city.","c":"24"},{"t":"161","s":"33","n":"NATIONAL MONUMENT","f":"NATIONAL MONUMENT","q":"NATIONAL MONUMENT \u25CF Amsterdam / NETHERLANDS","w":"Standing an imposing 22-metres high in the centre of Amsterdam\u2019s Dam Square, it is the Netherlands\u2019 most important memorial to World War II.","c":"24"},{"t":"162","s":"33","n":"VONDELPARK","f":"VONDELPARK","q":"VONDELPARK \u25CF Amsterdam / NETHERLANDS","w":"The Vondelpark is a public urban park of 47 hectares in Amsterdam, Netherlands.","c":"24"},{"t":"163","s":"33","n":"ZAANSE SCHANS","f":"ZAANSE SCHANS","q":"ZAANSE SCHANS \u25CF Zaandam / NETHERLANDS","w":"Historic windmills and distinctive green wooden houses were relocated here to recreate the look of an 18th/19th-century village.","c":"24"}],"c":"120"},{"s":"34","t":"KAZAKHSTAN","T":[{"t":"164","s":"34","n":"BAITEREK TOWER","f":"BAITEREK TOWER","q":"BAITEREK TOWER \u25CF Astana / KAZAKHSTAN","w":"Bayterek is a monument and observation tower in Astana, the capital city of Kazakhstan.","c":"24"},{"t":"165","s":"34","n":"PALACE OF PEACE AND RECONCILIATION","f":"PALACE OF PEACE AND RECONCILIATION","q":"PALACE OF PEACE AND RECONCILIATION \u25CF Astana / KAZAKHSTAN","w":"The Palace of Peace and Reconciliation, is a 77-metre-high pyramid in Nursultan, the capital of Kazakhstan, that serves as an event venue.","c":"24"},{"t":"166","s":"34","n":"CHARYN NATIONAL PARK","f":"CHARYN NATIONAL PARK","q":"CHARYN NATIONAL PARK \u25CF Tamerlik / KAZAKHSTAN","w":"Charyn Canyon National Nature Park is a national park in Kazakhstan, stretching along the Charyn River, including Charyn Canyon.","c":"24"},{"t":"167","s":"34","n":"MAUSOLEUM","f":"MAUSOLEUM OF KHOJA AHMED YASAWI","q":"MAUSOLEUM OF KHOJA AHMED YASAWI \u25CF Turkistan / KAZAKHSTAN","w":"Rectangular in plan and 38.7 meters in height, the mausoleum is one of the largest and best-preserved examples of Timurid construction.","c":"24"},{"t":"168","s":"34","n":"KHAN SHATYR ENTERTAINMENT","f":"KHAN SHATYR ENTERTAINMENT","q":"KHAN SHATYR ENTERTAINMENT \u25CF Astana / KAZAKHSTAN","w":"Entertainment Centre stands 150 metres tall, covers 10,000 square metres and is to become the capital's major civic and cultural venue.","c":"24"}],"c":"120"},{"s":"35","t":"NEW ZEALAND","T":[{"t":"169","s":"35","n":"SKY TOWER","f":"SKY TOWER","q":"SKY TOWER \u25CF Auckland / NEW ZEALAND","w":"The Sky Tower is a telecommunications and observation tower in Auckland, New Zealand.","c":"28"},{"t":"170","s":"35","n":"TONGARIRO","f":"TONGARIRO","q":"TONGARIRO \u25CF Manawatu-Wanganui / NEW ZEALAND","w":"Tongariro National Park is on New Zealand's North Island. The park has 3 active volcanoes.","c":"28"},{"t":"171","s":"35","n":"FIORDLAND NATIONAL PARK","f":"FIORDLAND NATIONAL PARK","q":"FIORDLAND NATIONAL PARK \u25CF Southland / NEW ZEALAND","w":"It is by far the largest national park in New Zealand, with an area of 12,607 square kilometres and part of the Te Wahipounamu World Heritage site.","c":"28"},{"t":"172","s":"35","n":"WAITOMO GLOWWORM CAVES","f":"WAITOMO GLOWWORM CAVES","q":"WAITOMO GLOWWORM CAVES \u25CF Waikato / NEW ZEALAND","w":"It is known for its population of Arachnocampa luminosa, a glowworm species found exclusively in New Zealand.","c":"28"},{"t":"173","s":"35","n":"LARNACH CASTLE","f":"LARNACH CASTLE","q":"LARNACH CASTLE \u25CF Dunedin, Otago / NEW ZEALAND","w":"Larnach Castle, is a mock castle on the ridge of the Otago Peninsula in Dunedin, close to the small settlement of Pukehiki.","c":"28"}],"c":"140"},{"s":"36","t":"ICELAND","T":[{"t":"174","s":"36","n":"BLUE LAGOON","f":"BLUE LAGOON","q":"BLUE LAGOON \u25CF Grindavik / ICELAND","w":"The Blue Lagoon is a geothermal spa located in a lava field near Grindav\xEDk.","c":"28"},{"t":"175","s":"36","n":"GULLFOSS","f":"GULLFOSS","q":"GULLFOSS \u25CF Gullfoss Falls / ICELAND","w":"Gullfoss is two separate waterfalls, the upper one has a drop of 11 metres and the lower one 21 metres.","c":"28"},{"t":"176","s":"36","n":"HALLGRIMSKIRKJA","f":"HALLGRIMSKIRKJA","q":"HALLGRIMSKIRKJA \u25CF Reykjav\xEDk / ICELAND","w":"Hallgr\xEDmskirkja church is a Lutheran parish church in Reykjav\xEDk. At 74.5 metres high, it is the largest church in Iceland.","c":"28"},{"t":"177","s":"36","n":"SVARTIFOSS","f":"SVARTIFOSS","q":"SVARTIFOSS \u25CF Skaftafell / ICELAND","w":"Svartifoss is a waterfall in Skaftafell in Vatnaj\xF6kull National Park in Iceland, and is one of the most popular sights in the park.","c":"28"},{"t":"178","s":"36","n":"DYNJANDI WATERFALL","f":"DYNJANDI WATERFALL","q":"DYNJANDI WATERFALL \u25CF  Dynjandi / ICELAND","w":"Dynjandi is a series of waterfalls located in the Westfjords, Iceland. The waterfalls have a total height of 100 metres.","c":"28"}],"c":"140"},{"s":"37","t":"NEPAL","T":[{"t":"179","s":"37","n":"KATHMANDU DURBAR SQUARE","f":"KATHMANDU DURBAR SQUARE","q":"KATHMANDU DURBAR SQUARE \u25CF Kathmandu / NEPAL","w":"Kathmandu Durbar Square is one of three Durbar (Royal) Squares in the Kathmandu Valley in Nepal.","c":"28"},{"t":"180","s":"37","n":"ANNAPURNA SANCTUARY","f":"ANNAPURNA SANCTUARY","q":"ANNAPURNA SANCTUARY / NEPAL","w":"The Annapurna Sanctuary is a high glacial basin lying 40 km directly north of Pokhara.","c":"28"},{"t":"181","s":"37","n":"BARDIA NATIONAL PARK","f":"BARDIA NATIONAL PARK","q":"BARDIA NATIONAL PARK / NEPAL","w":"Bardia National Park is a protected area in Nepal that was established in 1988 as Royal Bardia National Park.","c":"28"},{"t":"182","s":"37","n":"TENGBOCHE MONASTERY","f":"TENGBOCHE MONASTERY","q":"TENGBOCHE MONASTERY \u25CF Khumjung / NEPAL","w":"Tengboche Monastery in Khumbu region of eastern Nepal is a Tibetan Buddhist monastery of the Sherpa community.","c":"28"},{"t":"183","s":"37","n":"KABRU","f":"KABRU","q":"KABRU / NEPAL","w":"Kabru is a mountain in the Himalayas on the border of eastern Nepal and India and is the southernmost 7,000 metres peak in the world.","c":"28"}],"c":"140"},{"s":"38","t":"THAILAND","T":[{"t":"184","s":"38","n":"THE GRAND PALACE","f":"THE GRAND PALACE","q":"THE GRAND PALACE \u25CF Bangkok / THAILAND","w":"The Grand palace has been the official residence of the Kings of Siam since 1782.","c":"28"},{"t":"185","s":"38","n":"WAT ARUN","f":"WAT ARUN","q":"WAT ARUN \u25CF Bangkok / THAILAND","w":"Wat Arun on the bank of the Chao Phraya River is one of Bangkok\u2019s world-famous landmarks.","c":"28"},{"t":"186","s":"38","n":"DOI INTHANON NATIONAL PARK","f":"DOI INTHANON NATIONAL PARK","q":"DOI INTHANON NATIONAL PARK \u25CF Chiang Mai / THAILAND","w":"Doi Inthanon National Park, nicknamed ''the roof of Thailand'', is in northern Thailand. It includes Doi Inthanon, the country's highest mountain.","c":"28"},{"t":"187","s":"38","n":"PHANOM RUNG","f":"PHANOM RUNG","q":"PHANOM RUNG \u25CF Chiang Mai / THAILAND","w":"Phanom Rung is a Hindu Khmer Empire temple complex set on the rim of an extinct volcano at 402 metres elevation.","c":"28"},{"t":"188","s":"38","n":"SUKHOTHAI HISTORICAL PARK","f":"SUKHOTHAI HISTORICAL PARK","q":"SUKHOTHAI HISTORICAL PARK \u25CF Sukhothai / THAILAND","w":"Sukhothai Historical Park covers the ruins of Sukhothai which means ''dawn of happiness''.","c":"28"}],"c":"140"},{"s":"39","t":"CUBA","T":[{"t":"189","s":"39","n":"CASTILLO DE SAN PEDRO DE LA ROCA","f":"CASTILLO DE SAN PEDRO DE LA ROCA","q":"CASTILLO DE SAN PEDRO DE LA ROCA / CUBA","w":"The Castillo de San Pedro de la Roca is a fortress on the coast of the Cuban city of Santiago de Cuba which overlooks the bay.","c":"28"},{"t":"190","s":"39","n":"PLAZA DE LA CATEDRAL","f":"PLAZA DE LA CATEDRAL","q":"PLAZA DE LA CATEDRAL \u25CF Havana / CUBA","w":"Plaza de la Catedral is one of the five main squares in Old Havana. Originally a swamp, it was later drained and used as a naval dockyard.","c":"28"},{"t":"191","s":"39","n":"CASTILLO DE LA REAL FUERZA","f":"CASTILLO DE LA REAL FUERZA","q":"CASTILLO DE LA REAL Fuerza \u25CF Havana / CUBA","w":"The Castillo de la Real Fuerza is a bastion fort on the western side of the harbour in Havana.","c":"28"},{"t":"192","s":"39","n":"CUEVA DE SATURNO","f":"CUEVA DE SATURNO","q":"CUEVA DE SATURNO / CUBA","w":"Cueva de Saturno is a cenote cave located near Varadero, Matanzas Province. The cave consists of a large opening and some offshoot caverns.","c":"28"},{"t":"193","s":"39","n":"VINALES VALLEY","f":"VINALES VALLEY","q":"VINALES VALLEY \u25CF Vinales / CUBA","w":"Vi\xF1ales Valley is a karstic depression in Cuba. The valley has an area of 132 km\xB2 and is located in the Sierra de los \xD3rganos mountains.","c":"28"}],"c":"140"},{"s":"40","t":"LUXEMBOURG","T":[{"t":"194","s":"40","n":"VIANDEN CASTLE","f":"VIANDEN CASTLE","q":"VIANDEN CASTLE \u25CF Vianden / LUXEMBOURG","w":"Vianden Castle, located in Vianden in the north of Luxembourg, is one of the largest fortified castles west of the Rhine.","c":"28"},{"t":"195","s":"40","n":"FORT THUNGEN","f":"FORT THUNGEN","q":"FORT THUNGEN \u25CF  Luxembourg City / LUXEMBOURG","w":"Fort Th\xFCngen is a historic fortification that was built in 1732 to enclose the defense work called Park Redoubt.","c":"28"},{"t":"196","s":"40","n":"NOTRE-DAME CATHEDRAL","f":"NOTRE-DAME CATHEDRAL","q":"NOTRE-DAME CATHEDRAL \u25CF Luxembourg City / LUXEMBOURG","w":"The church is a noteworthy example of late gothic architecture; however, it also has many Renaissance elements and adornments.","c":"28"},{"t":"197","s":"40","n":"LAROCHETTE CASTLE","f":"LAROCHETTE CASTLE","q":"LAROCHETTE CASTLE \u25CF Larochette / LUXEMBOURG","w":"Larochette Castle stood high above the town of Larochette from the 11th century to the end of the 16th century when a fire destroyed it.","c":"28"},{"t":"198","s":"40","n":"BOURSCHEID CASTLE","f":"BOURSCHEID CASTLE","q":"BOURSCHEID CASTLE \u25CF Buerschent / LUXEMBOURG","w":"Bourscheid Castle is a medieval castle that stands on a site with archeological evidence of structures dating back to Roman times.","c":"28"}],"c":"140"},{"s":"41","t":"BELGIUM","T":[{"t":"199","s":"41","n":"ATOMIUM","f":"ATOMIUM","q":"ATOMIUM \u25CF Brussels / BELGIUM","w":"The Atomium is a landmark building in Brussels, originally constructed for the 1958 Brussels World Expo.","c":"28"},{"t":"200","s":"41","n":"ST MICHAEL AND ST GUDULA","f":"ST MICHAEL AND ST GUDULA CATHEDRAL","q":"ST MICHAEL AND ST GUDULA CATHEDRAL \u25CF Brussels / BELGIUM","w":"The building of the Cathedral started at the beginning of the 13th century and it took about 300 years to complete this gigantic undertaking.","c":"28"},{"t":"201","s":"41","n":"BELFRY OF BRUGES","f":"BELFRY OF BRUGES","q":"BELFRY OF BRUGES \u25CF Bruges / BELGIUM","w":"The Belfry of Bruges is a medieval bell tower in the center of Bruges, Belgium.","c":"28"},{"t":"202","s":"41","n":"GRAVENSTEEN","f":"GRAVENSTEEN","q":"GRAVENSTEEN \u25CF Ghent / BELGIUM","w":"The Gravensteen is a medieval castle at Ghent. The current castle dates to 1180 and was the residence of the Counts of Flanders until 1353.","c":"28"},{"t":"203","s":"41","n":"HET BELFORT","f":"HET BELFORT","q":"HET BELFORT \u25CF Ghent / BELGIUM","w":"The 91-meter-tall belfry of Ghent is one of three medieval towers that overlook the old city center of Ghent.","c":"28"}],"c":"140"},{"s":"42","t":"NORTH MACEDONIA","T":[{"t":"204","s":"42","n":"ST. JOHN KANEO","f":"ST. JOHN KANEO","q":"ST. JOHN KANEO \u25CF Ohrid / MACEDONIA","w":"St. John Kaneo is a Macedonian Orthodox church situated on the cliff over Kaneo Beach overlooking Lake Ohrid in the city of Ohrid.","c":"35"},{"t":"205","s":"42","n":"SKOPJE FORTRESS","f":"SKOPJE FORTRESS","q":"SKOPJE FORTRESS \u25CF Skopje / MACEDONIA","w":"The Skopje Fortress, commonly referred to as Kale, is a historic fortress located in the old town of Skopje.","c":"35"},{"t":"206","s":"42","n":"CLOCK TOWER","f":"CLOCK TOWER","q":"CLOCK TOWER \u25CF Bitola / MACEDONIA","w":"The Clock Tower of Bitola, known as Saat Kula, is a clock tower and one of the landmarks of the Macedonian city of Bitola.","c":"35"},{"t":"207","s":"42","n":"BABA MOUNTAIN","f":"BABA MOUNTAIN","q":"BABA MOUNTAIN / MACEDONIA","w":"Baba Mountain also known by the name of its highest peak, Pelister, is a mountain in North Macedonia.","c":"35"},{"t":"208","s":"42","n":"SOBORNA CRKVA","f":"SOBORNA CRKVA","q":"SOBORNA CRKVA \u25CF Skopje / MACEDONIA","w":"Soborna Crkva located in Skopje, North Macedonia is the largest cathedral of the Macedonian Orthodox Church today.","c":"35"}],"c":"175"},{"s":"43","t":"PERU ","T":[{"t":"209","s":"43","n":"LAGUNA 69 HUARAZ","f":"LAGUNA 69 HUARAZ","q":"LAGUNA 69 HUARAZ \u25CF Huaraz / PERU","w":"It is one of the most beautiful lagoons in the world with an altitude of 4500 m.","c":"35"},{"t":"210","s":"43","n":"DESERT OASIS HUACACHINA","f":"DESERT OASIS HUACACHINA","q":"DESERT OASIS HUACACHINA \u25CF Huacachina / PERU","w":"Huacachina is a village surrounded by natural oases and dunes in South America.","c":"35"},{"t":"211","s":"43","n":"CHAN CHAN","f":"CHAN CHAN","q":"Chan Chan \u25CF Huanchaco / PERU","w":"It is the largest city of the pre-Columbian era in South America with a name meaning Sun Sun.","c":"35"},{"t":"212","s":"43","n":"PARACAS NATIONAL RESERVE","f":"PARACAS NATIONAL RESERVE","q":"PARACAS NATIONAL RESERVE \u25CF Pisco / PERU","w":"Paracas is a protected natural area known for its wealth of marine wildlife and dramatic shoreline of wind and wave sculpted rock formations","c":"35"},{"t":"213","s":"43","n":"MACHU PICCHU","f":"MACHU PICCHU","q":"MACHU PICCHU \u25CF Urubamba / PERU","w":"Machu Picchu is a 15th-century Inca citadel that was constructed as an estate for the Inca emperor Pachacuti.","c":"35"}],"c":"175"},{"s":"44","t":"BAHRAIN","T":[{"t":"214","s":"44","n":"FORT OF BAHRAIN","f":"FORT OF BAHRAIN","q":"FORT OF BAHRAIN \u25CF Manama / BAHRAIN","w":"Fort of Bahrain is part of the Unesco World Heritage site believed to be the capital of the ancient Dilmun Empire.","c":"35"},{"t":"215","s":"44","n":"BAHRAIN WORLD TRADE CENTER","f":"BAHRAIN WORLD TRADE CENTER","q":"BAHRAIN WORLD TRADE CENTER \u25CF Manama / BAHRAIN","w":"It is the first skyscraper in the world to integrate wind turbines into its design.","c":"35"},{"t":"216","s":"44","n":"TREE OF LIFE","f":"TREE OF LIFE","q":"TREE OF LIFE \u25CF Jebel Dukhan / BAHRAIN","w":"It is a 32 feet long tree that is over 400 years old located in a barren area of Arabian Desert.","c":"35"},{"t":"217","s":"44","n":"AL FATEH GRAND MOSQUE","f":"AL FATEH GRAND MOSQUE","q":"AL FATEH GRAND MOSQUE \u25CF Manama / BAHRAIN","w":"The Mosque is one of the largest mosques in the world, encompassing 6,500 square meters.","c":"35"},{"t":"218","s":"44","n":"ARAD FORT","f":"ARAD FORT","q":"Arad Fort\u25CF Arad / BAHRAIN","w":"The Fort was built in the style of Islamic forts at the end of the 15th and early 16th centuries","c":"35"}],"c":"175"},{"s":"45","t":"AUSTRIA","T":[{"t":"219","s":"45","n":"ST. STEPHEN'S CATHEDRAL","f":"ST. STEPHEN'S CATHEDRAL","q":"ST. STEPHEN'S CATHEDRAL \u25CF Vienna / AUSTRIA","w":"It is the most important religious building in Vienna built in 1137 with its multi-colored tile roof.","c":"35"},{"t":"220","s":"45","n":"BELVEDERE PALACE","f":"BELVEDERE PALACE","q":"BELVEDERE PALACE \u25CF Vienna / AUSTRIA","w":"This historic building complex consists of two Baroque palaces, the Orangery, and the Palace Stables.","c":"35"},{"t":"221","s":"45","n":"HOHENSALZBURG CASTLE","f":"HOHENSALZBURG CASTLE","q":"HOHENSALZBURG CASTLE \u25CF Salzburg / AUSTRIA","w":"The Castle was built to protect the prince bishops and the principality itself from attack.","c":"35"},{"t":"222","s":"45","n":"HALLSTATT","f":"HALLSTATT","q":"HALLSTATT \u25CF Salzkammergut / AUSTRIA","w":"Hallstatt is a stunning vacation place with its beautiful lake and gorgeous houses famous for its salt mine and salt caves.","c":"35"},{"t":"223","s":"45","n":"ST. ANTON AM ARLBERG","f":"ST. ANTON AM ARLBERG","q":"ST. ANTON AM ARLBERG \u25CF Tyrol / AUSTRIA","w":"The cozy little town with 2,470 inhabitants has still maintained its genuine ambiance and charming atmosphere.","c":"35"}],"c":"175"},{"s":"46","t":"MOROCCO ","T":[{"t":"224","s":"46","n":"ERG CHEBBI","f":"ERG CHEBBI","q":"Erg Chebbi \u25CF Meknes / MOROCCO","w":"They are large seas of dunes formed by wind-blown sand rising 150 meters in height over the rocky desert at their base.","c":"45"},{"t":"225","s":"46","n":"ARCHAEOLOGICAL SITE OF VOLUBILIS","f":"ARCHAEOLOGICAL SITE OF VOLUBILIS","q":"ARCHAEOLOGICAL SITE OF VOLUBILIS \u25CF MOROCCO","w":"Volubilis was the Roman Empire\u2019s most remote and far-flung base over 1,000 years of continuous occupation from pre-historical times.","c":"45"},{"t":"226","s":"46","n":"CHEFCHAOUEN","f":"CHEFCHAOUEN","q":"CHEFCHAOUEN \u25CF Chefchaouen / MOROCCO","w":"The blue city of Morocco famous for all the houses and shops painted different shades of blue, known as Morocco's \u201Cblue pearl\u201D","c":"45"},{"t":"227","s":"46","n":"A\xCFT BENHADDOU","f":"A\xCFT BENHADDOU","q":"A\xCFT BENHADDOU \u25CF Marrakech / MOROCCO","w":"It is considered a great example of Moroccan earthen clay architecture and has been declared a UNESCO World Heritage Site.","c":"45"},{"t":"228","s":"46","n":"KING HASSAN MOSQUE","f":"KING HASSAN MOSQUE","q":"KING HASSAN MOSQUE \u25CF Casablanca / MOROCCO","w":"The building was commissioned by King Hassan II to be the most ambitious structure ever built in Morocco.","c":"45"}],"c":"225"},{"s":"47","t":"PHILIPPINES","T":[{"t":"229","s":"47","n":"BANAUE RICE TERRACES","f":"BANAUE RICE TERRACES","q":"BANAUE RICE TERRACES \u25CF Banaue / PHILLIPPINES","w":"The Rice Terraces that were built 2000 years ago represent an enduring illustration of an ancient civilization.","c":"45"},{"t":"230","s":"47","n":"MAYON VOLCANO","f":"MAYON VOLCANO","q":"MAYON VOLCANO \u25CF Luzon Island / PHILLIPPINES","w":"Mayon volcano is an active stratovolcano renowned for its perfect cone because of its symmetric conical shape.","c":"45"},{"t":"231","s":"47","n":"PUERTO PRINCESA","f":"PUERTO PRINCESA","q":"PUERTO PRINCESA \u25CF Palawan / PHILLIPPINES","w":"Puerto Princesa subterranean river has a second floor, meaning that there are small waterfalls inside the cave.","c":"45"},{"t":"232","s":"47","n":"CHOCOLATE HILLS","f":"CHOCOLATE HILLS","q":"CHOCOLATE HILLS \u25CF Bohol / PHILLIPPINES","w":"Chocolate hills are symmetrical and conical hills that symbolize the abundance of natural attractions in the province.","c":"45"},{"t":"233","s":"47","n":"BANTAY BELL TOWER","f":"BANTAY BELL TOWER","q":"BANTAY BELL TOWER \u25CF Bantay / PHILLIPPINES","w":"First built in 1591, it served as the town\u2019s watchtower before being turned into a bell tower by the nearby church in 1857.","c":"45"}],"c":"225"},{"s":"48","t":"SCOTLAND","T":[{"t":"234","s":"48","n":"EDINBURGH CASTLE","f":"EDINBURGH CASTLE","q":"EDINBURGH CASTLE \u25CF Edinburg / SCOTLAND","w":"The crown-owned castle belongs to the ruling monarch at the time, a tradition that dates back to 1837.","c":"45"},{"t":"235","s":"48","n":"NEIST POINT LIGHTHOUSE","f":"NEIST POINT LIGHTHOUSE","q":"NEIST POINT LIGHTHOUSE  \u25CF Skye / SCOTLAND","w":"Neist Point Lighthouse marks the most westerly point of the Isle of Skye and its elevated spot allows its lights to be seen up to 16 nautical miles.","c":"45"},{"t":"236","s":"48","n":"FINGAL'S CAVE","f":"FINGAL'S CAVE","q":"FINGAL'S CAVE \u25CF Staffa / SCOTLAND","w":"The Cave was discovered by Sir Joseph Banks who landed on the island in August 1772.","c":"45"},{"t":"237","s":"48","n":"THE KELPIES","f":"THE KELPIES","q":"The Kelpies \u25CF The Helix / SCOTLAND","w":"The Kelpies reflected the mythological transforming beasts possessing the strength and endurance of ten horses.","c":"45"},{"t":"238","s":"48","n":"BEN NEVIS MOUNTAIN","f":"BEN NEVIS MOUNTAIN","q":"BEN NEVIS MOUNTAIN \u25CF Highlands / SCOTLAND","w":"Ben Nevis is the highest mountain in the British Isles, the summit is 1,345 meters above sea level.","c":"45"}],"c":"225"},{"s":"49","t":"CANADA","T":[{"t":"239","s":"49","n":"CN TOWER","f":"CN TOWER","q":"CN TOWER \u25CF Toronto / CANADA","w":"CN Tower is a concrete communication and observation tower that held the record for the world's tallest free-standing structure until 2007.","c":"45"},{"t":"240","s":"49","n":"MORAINE LAKE","f":"MORAINE LAKE","q":"MORAINE LAKE \u25CF Alberta / CANADA","w":"Moraine Lake is glacier-fed and the sediment and minerals give it its distinctive blue color.","c":"45"},{"t":"241","s":"49","n":"FAIRMONT LE CH\xC2TEAU FRONTENAC","f":"FAIRMONT LE CH\xC2TEAU FRONTENAC","q":"FAIRMONT LE CH\xC2TEAU FRONTENAC \u25CF Qu\xE9bec / CANADA","w":"The Ch\xE2teau Frontenac is Canada's most famous grand railway hotel with its 611 rooms.","c":"45"},{"t":"242","s":"49","n":"MONT TREMBLANT","f":"MONT TREMBLANT","q":"MONT-TREMBLANT  \u25CF Quebec / CANADA","w":"Located northwest of Montreal in Quebec's Laurentian Mountains, Mont-Tremblant is best known for its skiing, hiking trails, and beaches.","c":"45"},{"t":"243","s":"49","n":"NIAGARA FALLS","f":"NIAGARA FALLS","q":"NIAGARA FALLS \u25CF Ontario / CANADA","w":"Niagara Falls is the collective, name of three big waterfalls on the Niagara River straddling the border between the United States and Canada.","c":"45"}],"c":"225"},{"s":"50","t":"MADAGASCAR","T":[{"t":"244","s":"50","n":"NOSY TANIKELY","f":"NOSY TANIKELY","q":"NOSY TANIKELY \u25CF Nosy Tanikely / MADAGASCAR","w":"The island is a marine sanctuary, while in the water one can see all manner of healthy and colorful corals, with vast numbers of reef fish.","c":"60"},{"t":"245","s":"50","n":"RAINFORESTS OF THE ATSINANANA","f":"RAINFORESTS OF THE ATSINANANA","q":"RAINFORESTS OF THE ATSINANANA \u25CF Atsinanana / MADAGASCAR","w":"The Rainforests of the Atsinanana is a World Heritage Site and consists of 13 specific areas in six national parks in the eastern part of Madagascar.","c":"60"},{"t":"246","s":"50","n":"TSINGY DE BEMARAHA STRICT NATURE RESERVE","f":"TSINGY DE BEMARAHA STRICT NATURE RESERVE","q":"TSINGY DE BEMARAHA STRICT NATURE RESERVE \u25CF Melaky / MADAGASCAR","w":"Nature Reserve is characterized by needle-shaped limestone formations that comprise landscapes and limestone uplands.","c":"60"},{"t":"247","s":"50","n":"AVENUE OF THE BAOBABS","f":"AVENUE OF THE BAOBABS","q":"AVENUE OF THE BAOBABS \u25CF Menabe / MADAGASCAR","w":"Its striking landscape draws travelers from around the world, making it one of the most visited locations in the Menabe region of Madagascar.","c":"60"},{"t":"248","s":"50","n":"NOSY BORAHA","f":"NOSY BORAHA","q":"NOSY BORAHA \u25CF Nosy Boraha / MADAGASCAR","w":"Nosy Boraha is a tropical islet that once provided shelter for almost 1000 marauders.","c":"60"}],"c":"300"},{"s":"51","t":"JORDAN","T":[{"t":"249","s":"51","n":"WADI RUM DESERT","f":"WADI RUM DESERT","q":"WADI RUM DESERT \u25CF Wadi Rum Village / JORDAN","w":"It is Jordan's largest valley, cut into sandstone and granite rock. It is also known as the Valley of the Moon.","c":"60"},{"t":"250","s":"51","n":"OVAL PLAZA OF JERASH","f":"OVAL PLAZA OF JERASH","q":"OVAL PLAZA OF JERASH \u25CF Jerash / JORDAN","w":"Jerash became an urban center during the 3rd century BC and is known for the ruins of the Greco-Roman city of Gerasa.","c":"60"},{"t":"251","s":"51","n":"DEAD SEA","f":"DEAD SEA","q":"DEAD SEA \u25CF JORDAN","w":"The Dead Sea has the lowest elevation and is the lowest body of water on the surface of Earth.","c":"60"},{"t":"252","s":"51","n":"PETRA","f":"PETRA","q":"PETRA \u25CF Ma'an Governorate / JORDAN","w":"It is believed that Petra was established in 312 BC, making it one of the oldest cities in the world.","c":"60"},{"t":"253","s":"51","n":"MUJIB NATURE RESERVE","f":"MUJIB NATURE RESERVE","q":"MUJIB NATURE RESERVE \u25CF Dead Sea Region / JORDAN","w":"The Mujib Reserve has a dramatic altitude change with its sandstone rock terrain reaching 900 meters above sea level and 400 meters below.","c":"60"}],"c":"300"},{"s":"52","t":"IRELAND ","T":[{"t":"254","s":"52","n":"CLIFFS OF MOHER","f":"CLIFFS OF MOHER","q":"CLIFFS OF MOHER \u25CF Munster / IRELAND","w":"One of Ireland\u2019s most famous sights, the Cliffs of Moher are entirely vertical and the cliff edge is abrupt.","c":"60"},{"t":"255","s":"52","n":"MUCKROSS HOUSE","f":"MUCKROSS HOUSE","q":"MUCKROSS HOUSE \u25CF Killarney / IRELAND","w":"The house and its garden became the first National Park of the Republic of Ireland.","c":"60"},{"t":"256","s":"52","n":"SCEILG MHICH\xCDL","f":"SCEILG MHICH\xCDL","q":"SCEILG MHICH\xCDL \u25CF Skellig Islands / IRELAND","w":"Skellig Island was once the home of a community of isolated monks and has remained inhabited for 1000 years.","c":"60"},{"t":"257","s":"52","n":"DOON FORT","f":"DOON FORT","q":"DOON FORT \u25CF Donegal / IRELAND","w":"The Fort is a large drystone fort that may date from the late Iron Age to Early Medieval times.","c":"60"},{"t":"258","s":"52","n":"BRU NA BOINNE","f":"BRU NA BOINNE","q":"BRU NA BOINNE \u25CF County Meath / IRELAND","w":"The Br\xFA na B\xF3inne tombs contain the largest assemblage of megalithic art in Western Europe.","c":"60"}],"c":"300"},{"s":"53","t":"MALDIVES","T":[{"t":"259","s":"53","n":"MEERU","f":"MEERU","q":"MEERU \u25CF MALDIVES","w":"The island is formed above peaks emerging from the depths of the ocean, upon layers of both living and dead coral, and remnants of other marine life.","c":"60"},{"t":"260","s":"53","n":"MAL\xC9 FRIDAY MOSQUE","f":"MAL\xC9 FRIDAY MOSQUE","q":"MAL\xC9 FRIDAY MOSQUE\u25CF MALE / MALDIVES","w":"In terms of artistic excellence and construction technique, Mal\xE9 Friday Mosque is one of the finest coral stone buildings in the world.","c":"60"},{"t":"261","s":"53","n":"KURUMBA MALDIVES","f":"KURUMBA MALDIVES","q":"KURUMBA MALDIVES \u25CF Vihamanaafushi / MALDIVES","w":"Kurumba Maldives is a 5-star resort on the island of Vihamanaafushi and is the country's first Maldives resort.","c":"60"},{"t":"262","s":"53","n":"MILAIDHOO","f":"MILAIDHOO","q":"MILAIDHOO \u25CF MALDIVES","w":"Milaidhoo is a tropical island, surrounded by a vibrant coral reef, lapped by warm turquoise waters, and hidden in the heart of a biosphere reserve.","c":"60"},{"t":"263","s":"53","n":"FISH HEAD DIVING","f":"FISH HEAD DIVING","q":"FISH HEAD DIVING \u25CF Hangnaameedhoo / MALDIVES","w":"This is the most famous diving spot in the Maldives protected by the government. No anchoring, no fishing, no collecting of shells or coral allowed.","c":"60"}],"c":"300"},{"s":"54","t":"QATAR","T":[{"t":"264","s":"54","n":"QATAR STATE MOSQUE","f":"QATAR STATE MOSQUE","q":"QATAR STATE MOSQUE \u25CF Doha / QATAR","w":"Established in 2011, Qatar's State Mosque is the largest in Qatar, fitting more than 30,000 worshippers for prayers.","c":"60"},{"t":"265","s":"54","n":"ZUBARAH FORT","f":"ZUBARAH FORT","q":"ZUBARAH FORT \u25CF Al Zubarah / QATAR","w":"Al Zubarah Fort is the most iconic desert fort in Qatar. It gets its name from the nearby archaeological site of Al Zubarah town.","c":"60"},{"t":"266","s":"54","n":"SINGING SAND DUNES","f":"SINGING SAND DUNES","q":"SINGING SAND DUNES \u25CF QATAR","w":"They are a group of crescent-shaped dunes making a ''singing'' sound created by wind or friction caused by walking, running, or sliding down the dune.","c":"60"},{"t":"267","s":"54","n":"MUSEUM OF ISLAMIC ART","f":"MUSEUM OF ISLAMIC ART","q":"MUSEUM OF ISLAMIC ART \u25CF Doha / QATAR","w":"Standing alone on reclaimed land and influenced by ancient Islamic architecture, the museum building has rapidly become an iconic feature of Doha.","c":"60"},{"t":"268","s":"54","n":"SOUQ WAQIF","f":"SOUQ WAQIF","q":"SOUQ WAQIF \u25CF Doha / QATAR","w":"Souq Waqif is an important heritage market a major tourism landmark in Qatar. It is one of the most famous traditional folk markets in the region.","c":"60"}],"c":"300"},{"s":"55","t":"VENEZUELA ","T":[{"t":"269","s":"55","n":"ANGEL FALLS","f":"ANGEL FALLS","q":"ANGEL FALLS \u25CF Bol\xEDvar / VENEZUELA","w":"The highest waterfall in the world, Angel Falls is named after Jimmie Angel, a US aviator, who was the first person to fly over the falls.","c":"60"},{"t":"270","s":"55","n":"MOUNT RORAIMA","f":"MOUNT RORAIMA","q":"MOUNT RORAIMA \u25CF VENEZUELA","w":"It is famous for its table-top shape, with the flat plateau - bounded on all sides by massive cliffs rising over 400 metres.","c":"60"},{"t":"271","s":"55","n":"MEDANOS DE CORO NATIONAL PARK","f":"MEDANOS DE CORO NATIONAL PARK","q":"MEDANOS DE CORO NATIONAL PARK \u25CF Falc\xF3n / VENEZUELA","w":"M\xE9danos de Coro National Park protects part of the Paraguana xeric scrub ecoregion. It is known for its massive dunes, also known as M\xE9danos.","c":"60"},{"t":"272","s":"55","n":"LOS ROQUES ARCHIPELAGO","f":"LOS ROQUES ARCHIPELAGO","q":"LOS ROQUES ARCHIPELAGO \u25CF VENEZUELA","w":"Los Roques archipelago is a federal dependency of Venezuela consisting of approximately 350 islands, cays, and islets.","c":"60"},{"t":"273","s":"55","n":"MARGARITA ISLAND","f":"MARGARITA ISLAND","q":"MARGARITA ISLAND \u25CF VENEZUELA","w":"Also known as the Isle of Pearls, Margarita is the largest of 70 islands comprising Nueva Esparta state.","c":"60"}],"c":"300"},{"s":"56","t":"UZBEKISTAN","T":[{"t":"274","s":"56","n":"REGISTAN","f":"REGISTAN","q":"REGISTAN \u25CF Samarkand / UZBEKISTAN","w":"The name means ''sandy place'' or ''desert'' in Persian, Registan was the heart of the ancient city of Samarkand of the Timurid Empire, now in Uzbekistan.","c":"60"},{"t":"275","s":"56","n":"EMIR CASTLE","f":"EMIR CASTLE","q":"EMIR CASTLE \u25CF Samarkand / UZBEKISTAN","w":"The castle is a mausoleum of the Asian conqueror Timur, occupies an important place in the history of Persian-Mongolian Architecture as the precursor.","c":"60"},{"t":"276","s":"56","n":"BIBI KHANYM MOSQUE","f":"BIBI KHANYM MOSQUE","q":"BIBI KHANYM MOSQUE \u25CF Samarkand / UZBEKISTAN","w":"Erected in the 15th century, it was one of the largest and most magnificent mosques in the Islamic world.","c":"60"},{"t":"277","s":"56","n":"ARK OF BUKHARA","f":"ARK OF BUKHARA","q":"ARK OF BUKHARA \u25CF Bukhara / UZBEKISTAN","w":"It is a massive fortress built and occupied around the 5th century AD. This military structure also encompassed what was essentially a town.","c":"60"},{"t":"278","s":"56","n":"AMIR TIMUR MUSEUM","f":"AMIR TIMUR MUSEUM","q":"AMIR TIMUR MUSEUM \u25CF Tashkent / UZBEKISTAN","w":"It was established to commemorate the 660th birthday of Amir Timur. The museum\u2019s architecture references Central Asian Islamic architecture.","c":"60"}],"c":"300"},{"s":"57","t":"PANAMA","T":[{"t":"279","s":"57","n":"DARIEN NATIONAL PARK","f":"DARIEN NATIONAL PARK","q":"DARIEN NATIONAL PARK\u25CF PANAMA","w":"This national park contains an exceptional variety of habitats, sandy beaches, rocky coasts, mangroves, swamps, and upland tropical forests.","c":"60"},{"t":"280","s":"57","n":"BOCAS DEL TORO","f":"BOCAS DEL TORO","q":"BOCAS DEL TORO \u25CF PANAMA","w":"Bocas del Toro captivates its visitors with its incredible vegetation, biodiversity, ancient customs, and lush tropical vegetation.","c":"60"},{"t":"281","s":"57","n":"EL VALLE VOLCANO","f":"EL VALLE VOLCANO","q":"EL VALLE VOLCANO \u25CF PANAMA","w":"El Valle volcano is a broad stratovolcano cut by a large compound Pleistocene caldera in central Panama.","c":"60"},{"t":"282","s":"57","n":"FORT SAN LORENZO","f":"FORT SAN LORENZO","q":"FORT SAN LORENZO \u25CF Col\xF3n / PANAMA","w":"Fort San Lorenzo was originally constructed in 1595 by the Spanish as a means to protect their trade routes and defend against pirates.","c":"60"},{"t":"283","s":"57","n":"PANAMA CANAL","f":"PANAMA CANAL","q":"PANAMA CANAL\u25CF PANAMA","w":"The idea for a canal across Panama dates back to the 16th century, thanks to that, today between 13,000 and 14,000 ships use the canal every year.","c":"60"}],"c":"300"},{"s":"58","t":"CROATIA","T":[{"t":"284","s":"58","n":"PULA ARENA","f":"PULA ARENA","q":"PULA ARENA \u25CF Pula / CROATIA","w":"This arena, the starting and ending point of the sightseeing tours in Pula, was built in the 1st century AD and was once the site of gladiator fights.","c":"60"},{"t":"285","s":"58","n":"BLUE CAVE","f":"BLUE CAVE","q":"BLUE CAVE \u25CF Bi\u0161evo / CROATIA","w":"One of the famous natural beauty spots on the Adriatic, this cave is a popular site for the glowing blue light appearing at certain times of the day.","c":"60"},{"t":"286","s":"58","n":"DIOCLETIAN'S PALACE","f":"DIOCLETIAN'S PALACE","q":"DIOCLETIAN'S PALACE \u25CF Split / CROATIA","w":"Emperor Diocletian, who voluntarily gave up the throne of the Roman Empire, built the palace that resembles a Roman military fortress.","c":"60"},{"t":"287","s":"58","n":"HVAR TOWN","f":"HVAR TOWN","q":"HVAR TOWN \u25CF CROATIA","w":"Hvar is an ancient town with a rich history on the island in the Croatian Adriatic Sea with the same name.","c":"60"},{"t":"288","s":"58","n":"KORNATI NATIONAL PARK","f":"KORNATI NATIONAL PARK","q":"KORNATI NATIONAL PARK \u25CF Murter / CROATIA","w":"The Kornati Islands are the densest archipelago in the Mediterranean: A great number of islands are crammed in so little space.","c":"60"}],"c":"300"},{"s":"59","t":"GUATEMALA","T":[{"t":"289","s":"59","n":"TIKAL","f":"TIKAL","q":"TIKAL \u25CF GUATEMALA","w":"It is one of the largest archaeological sites and urban centers of the pre-Columbian Maya civilization and was the capital of a conquest state.","c":"60"},{"t":"290","s":"59","n":"SEMUC CHAMPEY","f":"SEMUC CHAMPEY","q":"SEMUC CHAMPEY \u25CF San Agust\xEDn Lanqu\xEDn / GUATEMALA","w":"A giant, 300-meter-long limestone bridge forms the backbone for the descending series of pools and small waterfalls that make up Semuc Champey.","c":"60"},{"t":"291","s":"59","n":"ACATENANGO","f":"ACATENANGO","q":"ACATENANGO \u25CF Antigua  / GUATEMALA","w":"Towering above its landscape, this active Guatemalan volcano is very famous. However, it has only seen a short period of eruptions from 1924 to 1927.","c":"60"},{"t":"292","s":"59","n":"YAXHA","f":"YAXHA","q":"YAXHA \u25CF GUATEMALA","w":"Yaxha is a former ceremonial center and city of the pre-Columbian Maya civilization - experienced its maximum power during the Early Classic period.","c":"60"},{"t":"293","s":"59","n":"SAN PEDRO VOLCANO","f":"SAN PEDRO VOLCANO","q":"SAN PEDRO VOLCANO \u25CF Solol\xE1  / GUATEMALA","w":"Volcano offers the best view of Lake Atitlan, rising to an altitude of about 3,000 meters above sea level.","c":"60"}],"c":"300"},{"s":"60","t":"DOMINICAN REPUBLIC","T":[{"t":"294","s":"60","n":"LOS HAITISES NATIONAL PARK","f":"LOS HAITISES NATIONAL PARK","q":"LOS HAITISES NATIONAL PARK\u25CF DOMINICAN REPUBLIC","w":"The park has a great diversity of mammals and birds, including some rare species endemic to the island.","c":"60"},{"t":"295","s":"60","n":"BACARDI ISLAND","f":"BACARDI ISLAND","q":"BACARDI ISLAND \u25CF Saman\xE1 Bay / DOMINICAN REPUBLIC","w":"Bacardi Island is an islet in Saman\xE1 Bay, which belongs administratively to Saman\xE1 Province, in the Dominican Republic.","c":"60"},{"t":"296","s":"60","n":"THE THREE EYES","f":"THE THREE EYES","q":"THE THREE EYES \u25CF Santo Domingo Este / DOMINICAN REPUBLIC","w":"The 50-yard open-air limestone cave was created centuries ago as a result of tectonic fractures when caves collapsed,","c":"60"},{"t":"297","s":"60","n":"ALTOS DE CHAV\xD3N","f":"ALTOS DE CHAV\xD3N","q":"ALTOS DE CHAV\xD3N \u25CF La Romana / DOMINICAN REPUBLIC","w":"The village is a cultural center for tourists and working artists. Every detail of Altos de Chav\xF3n was handcrafted by local artisans.","c":"60"},{"t":"298","s":"60","n":"OZAMA FORTRESS","f":"OZAMA FORTRESS","q":"OZAMA FORTRESS \u25CF Santo Domingo / DOMINICAN REPUBLIC","w":"Erected at the mouth of the Ozama River, the Fortress is the first military construction in the New World and is one of the World Heritage jewels.","c":"60"}],"c":"300"},{"s":"61","t":"HUNGARY","T":[{"t":"299","s":"61","n":"BUDA CASTLE","f":"BUDA CASTLE","q":"BUDA CASTLE \u25CF Budapest / HUNGARY","w":"Buda Castle was first completed in 1265, but the massive Baroque palace today occupying most of the site was built between 1749 and 1769.","c":"60"},{"t":"300","s":"61","n":"FISHERMAN'S BASTION","f":"FISHERMAN'S BASTION","q":"FISHERMAN'S BASTION \u25CF Budapest / HUNGARY","w":"It is one of the most important attractions in Hungary due to the unique panorama of Budapest from the Neo-Romanesque lookout terraces.","c":"60"},{"t":"301","s":"61","n":"ST. STEPHEN'S BASILICA","f":"ST. STEPHEN'S BASILICA","q":"ST. STEPHEN'S BASILICA \u25CF Budapest / HUNGARY","w":"St. Stephen\u2019s Basilica is the largest Church in the country. It can house more than 8,500 people, in its 87 meters long by 55 meters wide layout.","c":"60"},{"t":"302","s":"61","n":"SZ\xC9CHENYI THERMAL BATH","f":"SZ\xC9CHENYI THERMAL BATH","q":"SZ\xC9CHENYI THERMAL BATH \u25CF Budapest / HUNGARY","w":"The Neo-baroque palace was specifically built for hosting Szechenyi Baths as Hungary has been the country of baths for many centuries.","c":"60"},{"t":"303","s":"61","n":"HEROES' SQUARE","f":"HEROES' SQUARE","q":"HEROES' SQUARE \u25CF Budapest / HUNGARY","w":"It is the largest and most symbolic square in Budapest. It is dominated by the Millenary Monument and topped by an Archangel Gabriel statue.","c":"60"}],"c":"300"},{"s":"62","t":"DENMARK","T":[{"t":"304","s":"62","n":"RABJERG MILE","f":"RABJERG MILE","q":"RABJERG MILE \u25CF Skagen / DENMARK","w":"The dune developed along the western coast during the sixteenth century B.C. and is one of the main migrating dunes across the country.","c":"60"},{"t":"305","s":"62","n":"TIVOLI GARDENS","f":"TIVOLI GARDENS","q":"TIVOLI GARDENS \u25CF Copenhagen / DENMARK","w":"Tivoli Gardens is a world-renowned amusement park and an enchanting garden which was opened its doors to the public in 1843.","c":"60"},{"t":"306","s":"62","n":"ROSENBORG CASTLE","f":"ROSENBORG CASTLE","q":"ROSENBORG CASTLE \u25CF Copenhagen / DENMARK","w":"In the museum of the castle, belonging of the Danish Royal Family from the reign of Christian IV to the present are displayed.","c":"60"},{"t":"307","s":"62","n":"CHRISTIANSBORG PALACE","f":"CHRISTIANSBORG PALACE","q":"CHRISTIANSBORG PALACE \u25CF Copenhagen / DENMARK","w":"It is the only building in the world that houses all three of a country's branches of government and is home to the three supreme powers.","c":"60"},{"t":"308","s":"62","n":"SKAGEN","f":"SKAGEN","q":"SKAGEN \u25CF DENMARK","w":"Skagen is a renowned town with amazing light, combined with a unique nature and white sand beaches with its characteristic yellow houses.","c":"60"}],"c":"300"},{"s":"63","t":"ALBANIA","T":[{"t":"309","s":"63","n":"THETH TO VALBONA HIKE","f":"THETH TO VALBONA HIKE","q":"THETH TO VALBONA HIKE \u25CF ALBANIA","w":"It\u2019s a beautiful route that starts in the mountain village of Theth and heads over a mountain pass and into Valbona National Park.","c":"60"},{"t":"310","s":"63","n":"MOUNT DAJTI","f":"MOUNT DAJTI","q":"MOUNT DAJTI \u25CF Tirana / ALBANIA","w":"Reaching an elevation of 1,613 meters and crossing an area of 294 km square, Mount Dajti has a magnificent panorama over the entire Albanian capital.","c":"60"},{"t":"311","s":"63","n":"ROZAFA CASTLE","f":"ROZAFA CASTLE","q":"ROZAFA CASTLE \u25CF Shkodra / ALBANIA","w":"Rozafa castle is famous for its tragic legend, one of the most interesting legends of the country which is about three brothers.","c":"60"},{"t":"312","s":"63","n":"BENJA HOT SPRINGS","f":"BENJA HOT SPRINGS","q":"BENJA HOT SPRINGS \u25CF Permet City / ALBANIA","w":"Springing from the deep chasms of the cliffs surrounding the Langarica Canyon, the thermal pools are clear and contain a high content of sulfur.","c":"60"},{"t":"313","s":"63","n":"BLUE EYE","f":"BLUE EYE","q":"BLUE EYE  \u25CF Muzin\xEB / ALBANIA","w":"Blue Eye is a water spring and natural phenomenon with the beautiful light turquoise river stuns with its beauty.","c":"60"}],"c":"300"},{"s":"64","t":"SLOVAKIA","T":[{"t":"314","s":"64","n":"BRATISLAVA","f":"BRATISLAVA","q":"STREETS OF BRATISLAVA \u25CF Bratislava / SLOVAKIA","w":"Since the city was founded in 907, a lot happened in this area due to the city being in a strategically important location in Central Europe.","c":"60"},{"t":"315","s":"64","n":"THE HIGH TATRAS","f":"THE HIGH TATRAS","q":"THE HIGH TATRAS \u25CF Tatra Mountains / SLOVAKIA","w":"With its abundance of high peaks, rugged valleys, alpine tarns and wildlife, the High Tatras are often likened to the Alps, but smaller and secluded.","c":"60"},{"t":"316","s":"64","n":"MUSEUM OF THE SLOVAK VILLAGE","f":"MUSEUM OF THE SLOVAK VILLAGE","q":"MUSEUM OF THE SLOVAK VILLAGE \u25CF Martin / SLOVAKIA","w":"The Museum of the Slovak Village is the largest ethnographic open-air exposition in Slovakia since the 1960s.","c":"60"},{"t":"317","s":"64","n":"THE BLUE CHURCH","f":"THE BLUE CHURCH","q":"THE BLUE CHURCH \u25CF Bratislava / SLOVAKIA","w":"Built at the beginning of the 20th century, the Blue Church has become famous mainly due to its color and shape resembling a gingerbread house.","c":"60"},{"t":"318","s":"64","n":"SLOVAK PARADISE NATIONAL PARK","f":"SLOVAK PARADISE NATIONAL PARK","q":"SLOVAK PARADISE NATIONAL PARK \u25CF East Slovakia / SLOVAKIA","w":"Slovak Paradise National Park is composed of several smaller nature reserves with over 300km of trails.","c":"60"}],"c":"300"},{"s":"65","t":"LEBANON","T":[{"t":"319","s":"65","n":"QADISHA VALLEY","f":"QADISHA VALLEY","q":"QADISHA VALLEY \u25CF Bcharr\xE9 / LEBANON","w":"Qadisha Valley is a Unesco World Heritage-listed site that is home to isolated rock-cut monasteries, wildflowers, and plenty of wildlife.","c":"60"},{"t":"320","s":"65","n":"CEDARS TREE","f":"CEDARS TREE","q":"CEDARS TREE \u25CF Arz Mountains / LEBANON","w":"Cedars are another source of pride for the Lebanese. The tree is a large evergreen conifer that has great religious and historical significance.","c":"60"},{"t":"321","s":"65","n":"TRIPOLI CITY","f":"TRIPOLI CITY","q":"TRIPOLI CITY \u25CF LEBANON","w":"Even though the history of Tripoli dates back to the 14th century BCE, the city is famous for having the largest Crusader fortress in Lebanon.","c":"60"},{"t":"322","s":"65","n":"BYBLOS CITY","f":"BYBLOS CITY","q":"BYBLOS CITY \u25CF LEBANON","w":"Inhabited since Neolithic times, Byblos is directly associated with the history and diffusion of the Phoenician alphabet.","c":"60"},{"t":"323","s":"65","n":"PIGEON ROCKS","f":"PIGEON ROCKS","q":"PIGEON ROCKS \u25CF Raouche / LEBANON","w":"Raouche Rock is a natural landmark, it was formed after a very big earthquake that hit the area in the 13th century.","c":"60"}],"c":"300"},{"s":"66","t":"FIJI","T":[{"t":"324","s":"66","n":"MALOLO","f":"MALOLO","q":"MALOLO \u25CF Mamanuca Islands / FIJI","w":"Surrounded by fringing reef and azure waters, this is a tropical island paradise in the middle of the Pacific Ocean.","c":"60"},{"t":"325","s":"66","n":"GARDEN OF SLEEPING GIANT","f":"GARDEN OF SLEEPING GIANT","q":"GARDEN OF SLEEPING GIANT \u25CF Nadi / FIJI","w":"The Garden, which contains a vast collection of 30 to 40 varieties of magnificent Asian orchids, was once the private collection of an American actor.","c":"60"},{"t":"326","s":"66","n":"SIGATOKA SAND DUNES","f":"SIGATOKA SAND DUNES","q":"SIGATOKA SAND DUNES \u25CF Viti Levu / FIJI","w":"Covering an area of 650 hectares, the extensive dune system is a product of erosion in the coastal hinterland and coastal dune forming processes.","c":"60"},{"t":"327","s":"66","n":"TAVEUNI ISLAND","f":"TAVEUNI ISLAND","q":"TAVEUNI ISLAND \u25CF FIJI","w":"Taveuni Island has abundant flora and a massive shield volcano that rises from the floor of the Pacific Ocean.","c":"60"},{"t":"328","s":"66","n":"PACIFIC HARBOUR","f":"PACIFIC HARBOUR","q":"PACIFIC HARBOUR \u25CF FIJI","w":"Pacific Harbour Fiji referred to as Pac Harbour by the locals, is the home to the world-famous Beqa Lagoon and the Beqa Island fire walkers.","c":"60"}],"c":"300"},{"s":"67","t":"URUGUAY","T":[{"t":"329","s":"67","n":"COLONIA DEL SACRAMENTO","f":"COLONIA DEL SACRAMENTO","q":"COLONIA DEL SACRAMENTO \u25CF URUGUAY","w":"Colonia is an irresistibly picturesque town enshrined as a Unesco World Heritage site with an irregular nucleus of narrow cobbled streets.","c":"60"},{"t":"330","s":"67","n":"PUNTA DEL DIABLO","f":"PUNTA DEL DIABLO","q":"PUNTA DEL DIABLO \u25CF URUGUAY","w":"Punta Del Diablo is perched on a gentle rise overlooking the ocean and centered around a square of brightly colored buildings.","c":"60"},{"t":"331","s":"67","n":"JOS\xC9 IGNACIO LAGOON","f":"JOS\xC9 IGNACIO LAGOON","q":"JOS\xC9 IGNACIO LAGOON \u25CF Punta del Este / URUGUAY","w":"The lagoon bearing the same name as the town also bears the same tranquility","c":"60"},{"t":"332","s":"67","n":"MINAS HIKING POINT","f":"MINAS HIKING POINT","q":"MINAS HIKING POINT \u25CF Lavalleja / URUGUAY","w":"The area is characterized by a landscape of rolling hills, rich flora and fauna comprise an idyllic environment for physical and spiritual enjoyment.","c":"60"},{"t":"333","s":"67","n":"PUNTA DEL ESTE","f":"PUNTA DEL ESTE","q":"PUNTA DEL ESTE \u25CF URUGUAY","w":"Referred to as ''the Monaco of the South'', the city is one of the most touristic places in the country, especially in the summer season.","c":"60"}],"c":"300"},{"s":"68","t":"ECUADOR","T":[{"t":"334","s":"68","n":"DIABLO WATERFALL","f":"DIABLO WATERFALL","q":"DIABLO WATERFALL \u25CF Banos / ECUADOR","w":"The Diablo Waterfall is about 80 meters high and it\u2019s one of the most spectacular waterfalls to see in Ecuador.","c":"60"},{"t":"335","s":"68","n":"AMAZON JUNGLE","f":"AMAZON JUNGLE","q":"AMAZON JUNGLE \u25CF ECUADOR","w":"The Ecuadorian Amazon contains only 2% of the entire Amazon basin, but this represents 80% of forested land in Ecuador.","c":"60"},{"t":"336","s":"68","n":"CHIMBORAZO VOLCANO","f":"CHIMBORAZO VOLCANO","q":"CHIMBORAZO VOLCANO \u25CF Andes / ECUADOR","w":"Chimborazo is a currently inactive stratovolcano whose last known eruption is believed to have occurred around 550 A.D.","c":"60"},{"t":"337","s":"68","n":"MINDO VALLEY","f":"MINDO VALLEY","q":"MINDO VALLEY \u25CF Andes / ECUADOR","w":"Mindo is a mountainous watershed where two of the most biologically diverse ecoregions in the world meet: the Chocoan lowlands and the Tropical Andes.","c":"60"},{"t":"338","s":"68","n":"GALAPAGOS ISLANDS","f":"GALAPAGOS ISLANDS","q":"GALAPAGOS ISLANDS \u25CF ECUADOR","w":"Islands are an archipelago of volcanic islands distributed on either side of the equator in the Pacific Ocean.","c":"60"}],"c":"300"},{"s":"69","t":"YEMEN","T":[{"t":"339","s":"69","n":"AL SALEH MOSQUE","f":"AL SALEH MOSQUE","q":"AL SALEH MOSQUE \u25CF Sanaa / YEMEN","w":"The mosque is notable in its accessibility to non-Muslims and its adherence to moderate Islam.","c":"60"},{"t":"340","s":"69","n":"SOCOTRA ISLAND","f":"SOCOTRA ISLAND","q":"SOCOTRA ISLAND \u25CF YEMEN","w":"Incredibly isolated, Socotra is known for the plethora of species endemic to the island.","c":"60"},{"t":"341","s":"69","n":"HABABAH WATER CISTERN","f":"HABABAH WATER CISTERN","q":"HABABAH WATER CISTERN \u25CF Yemeni / YEMEN","w":"The houses and winding streets in this village retain the fascinating features reminiscent of Middle Eastern fairytales.","c":"60"},{"t":"342","s":"69","n":"OLD CITY OF SANAA","f":"OLD CITY OF SANAA","q":"OLD CITY OF SANAA \u25CF Sanaa / YEMEN","w":"This religious and political heritage can be seen in the 103 mosques, 14 hammams, and over 6,000 houses, all built before the 11th century.","c":"60"},{"t":"343","s":"69","n":"CAIRO CASTLE","f":"CAIRO CASTLE","q":"CAIRO CASTLE \u25CF Taiz / YEMEN","w":"Situated upon a hilltop, the Castle was known for its beautiful gardens.","c":"60"}],"c":"300"},{"s":"70","t":"BELARUS","T":[{"t":"344","s":"70","n":"BELOVEZHSKAYA PUSHCHA","f":"BELOVEZHSKAYA PUSHCHA","q":"BELOVEZHSKAYA PUSHCHA \u25CF Grodno / BELARUS","w":"National Park is home to over 900 plants and 250 animals and birds, including several rare species.","c":"60"},{"t":"345","s":"70","n":"MIR CASTLE","f":"MIR CASTLE","q":"MIR CASTLE \u25CF Mir / BELARUS","w":"The successful blend of Gothic, Baroque, and Renaissance architecture makes Mir Castle one of the most impressive castles in Europe.","c":"60"},{"t":"346","s":"70","n":"BREST FORTRESS","f":"BREST FORTRESS","q":"BREST FORTRESS \u25CF Brest / BELARUS","w":"Brest Fortress, one of the most important places in Belarus, dates back to the 19th century and became a symbol of Soviet resistance in World War 2.","c":"60"},{"t":"347","s":"70","n":"DUDUTKI MUSEUM","f":"DUDUTKI MUSEUM","q":"DUDUTKI MUSEUM \u25CF Ptich / BELARUS","w":"Dudutki is a museum of Belarusian rural culture, which represented many national crafts.","c":"60"},{"t":"348","s":"70","n":"POLOTSK","f":"POLOTSK","q":"POLOTSK \u25CF Vitsebsk / BELARUS","w":"Founded in 862 and not only is it the oldest town in the country, it is one of the oldest in the whole Slavic region.","c":"60"}],"c":"300"},{"s":"71","t":"VATICAN CITY ","T":[{"t":"349","s":"71","n":"ST. PETER'S BASILICA","f":"ST. PETER'S BASILICA","q":"ST. PETER'S BASILICA \u25CF VATICAN CITY","w":"Basilica has been described as holding a unique position in the Christian world and as the greatest of all churches of Christendom.","c":"60"},{"t":"350","s":"71","n":"ST. PETER'S SQUARE","f":"ST. PETER'S SQUARE","q":"ST. PETER'S SQUARE \u25CF VATICAN CITY","w":"The construction of the square was carried out between 1656 and 1667 at the hand of Bernini, now the square houses over 300,000 people.","c":"60"},{"t":"351","s":"71","n":"SISTINE CHAPEL","f":"SISTINE CHAPEL","q":"SISTINE CHAPEL \u25CF VATICAN CITY","w":"Today, the chapel is the site of the papal conclave, the process by which a new pope is selected.","c":"60"},{"t":"352","s":"71","n":"VATICAN GARDENS","f":"VATICAN GARDENS","q":"VATICAN GARDENS \u25CF VATICAN CITY","w":"The Gardens are a natural and artistic space of beauty and spirituality, boasting an area of 23 hectares occupying most of the Vatican Hill.","c":"60"},{"t":"353","s":"71","n":"VATICAN LIBRARY","f":"VATICAN LIBRARY","q":"VATICAN LIBRARY \u25CF VATICAN CITY","w":"It has 75,000 codices from throughout history, as well as 1.1 million printed books, which include some 8,500 incunabula.","c":"60"}],"c":"300"},{"s":"72","t":"MONACO","T":[{"t":"354","s":"72","n":"MONTE CARLO CASINO","f":"MONTE CARLO CASINO","q":"MONTE CARLO CASINO \u25CF MONACO","w":"The casino is Monaco's main tourist attraction. Contained within the casino building is an opera, ballet house.","c":"60"},{"t":"355","s":"72","n":"LARVOTTO BEACH","f":"LARVOTTO BEACH","q":"LARVOTTO BEACH \u25CF MONACO","w":"Invigorating activities available in Larvotto Beach include windsurfing, water skiing, wakeboarding, banana boats, jet skis, parascending.","c":"60"},{"t":"356","s":"72","n":"12TH CENTURY PRINCE\u2019S PALACE","f":"12TH CENTURY PRINCE\u2019S PALACE","q":"12TH CENTURY PRINCE\u2019S PALACE \u25CF MONACO","w":"Erected in 1191 as a Genoese fortress, during its long and often dramatic history it has been bombarded and besieged by many foreign powers.","c":"60"},{"t":"357","s":"72","n":"PORT HERCULES","f":"PORT HERCULES","q":"PORT HERCULES \u25CF MONACO","w":"Port Hercule is one of the very few deep-water ports of the French Riviera which was used since ancient times","c":"60"},{"t":"358","s":"72","n":"OCEANOGRAPHIC MUSEUM","f":"OCEANOGRAPHIC MUSEUM","q":"OCEANOGRAPHIC MUSEUM\u25CF MONACO","w":"The Museum is renowned throughout the world for its expertise and has more than 6,000 specimens on display.","c":"60"}],"c":"300"},{"s":"73","t":"UNITED ARAB EMIRATES","T":[{"t":"359","s":"73","n":"BURJ KHALIFA","f":"BURJ KHALIFA","q":"BURJ KHALIFA \u25CF Dubai / UNITED ARAB EMIRATES","w":"Not only is Burj Khalifa the world's tallest building but it has also broken two records: tallest structure and tallest free-standing structure.","c":"60"},{"t":"360","s":"73","n":"SHEIKH ZAYED MOSQUE","f":"SHEIKH ZAYED MOSQUE","q":"SHEIKH ZAYED MOSQUE \u25CF Abu Dhabi / UNITED ARAB EMIRATES","w":"The Sheikh Zayed Grand Mosque was built to be a symbol of tolerance and respect, allowing different cultures to understand each other.","c":"60"},{"t":"361","s":"73","n":"JEBEL HAFEET","f":"JEBEL HAFEET","q":"JEBEL HAFEET \u25CF Abu Dhabi / UNITED ARAB EMIRATES","w":"Jebel Hafeet is the third highest peak in the UAE. It is also home to some of the most beautiful roads in the country.","c":"60"},{"t":"362","s":"73","n":"DUBAI MALL","f":"DUBAI MALL","q":"DUBAI MALL \u25CF Dubai / UNITED ARAB EMIRATES","w":"The Dubai Mall has over 1,300 retail outlets, including two anchor department stores and over 200 food and beverage outlets.","c":"60"},{"t":"363","s":"73","n":"DUBAI FRAME","f":"DUBAI FRAME","q":"DUBAI FRAME \u25CF Dubai / UNITED ARAB EMIRATES","w":"The structure is a colossal rectangular picture frame, with two towers straddling an enormous bridge that forms the top of the picture frame.","c":"60"}],"c":"300"},{"s":"74","t":"PAPUA NEW GUINEA","T":[{"t":"364","s":"74","n":"MOUNT TAVURVUR","f":"MOUNT TAVURVUR","q":"MOUNT TAVURVUR \u25CF Rabaul / PAPUA NEW GUINEA","w":"Mount Tavurvur is the most active volcano in Rabaul caldera and erupted most recently on 29 August 2014.","c":"60"},{"t":"365","s":"74","n":"PORT MORESBY","f":"PORT MORESBY","q":"PORT MORESBY \u25CF PAPUA NEW GUINEA","w":"Port Moresby is the capital and largest city of Papua New Guinea and the largest city in the South Pacific outside of Australia and New Zealand.","c":"60"},{"t":"366","s":"74","n":"MOUNT WILHELM","f":"MOUNT WILHELM","q":"MOUNT WILHELM \u25CF Madang Island / PAPUA NEW GUINEA","w":"Mount Wilhelm is the highest mountain in Papua New Guinea at 4,509 meters.","c":"60"},{"t":"367","s":"74","n":"KIMBE BAY","f":"KIMBE BAY","q":"KIMBE BAY \u25CF Kimbe / PAPUA NEW GUINEA","w":"Some in the scientific community call Kimbe Bay in Papua New Guinea the coral crucible. With 400 species of coral, it lives up to that reputation.","c":"60"},{"t":"368","s":"74","n":"SEPIK RIVER","f":"SEPIK RIVER","q":"SEPIK RIVER \u25CF Sandaun / PAPUA NEW GUINEA","w":"The longest river on the island, it is navigable for more than 480 km by vessels drawing 4 meters of water or less, and by canoe for some 900 km.","c":"60"}],"c":"300"},{"s":"75","t":"COSTA RICA","T":[{"t":"369","s":"75","n":"ARENAL VOLCANO","f":"ARENAL VOLCANO","q":"ARENAL VOLCANO \u25CF Alajuela / COSTA RICA","w":"This area contains a great wealth of geologic and biological complexity, as evidenced by the active and incredible Arenal Volcano.","c":"60"},{"t":"370","s":"75","n":"POAS VOLCANO","f":"POAS VOLCANO","q":"POAS VOLCANO \u25CF Poas / COSTA RICA","w":"Po\xE1s Volcano is one of the major attractions in the Central Valley region, one of the most visited national parks, and a great day trip add-on.","c":"60"},{"t":"371","s":"75","n":"MANUEL ANTONIO NATIONAL PARK","f":"MANUEL ANTONIO NATIONAL PARK","q":"MANUEL ANTONIO NATIONAL PARK \u25CF Quepos / COSTA RICA","w":"Manuel Antonio contains a charming combination of the rain forest, beaches, and coral reefs. The forest is home to unique wildlife.","c":"60"},{"t":"372","s":"75","n":"MONTEVERDE","f":"MONTEVERDE","q":"MONTEVERDE \u25CF  San Jos\xE9 / COSTA RICA","w":"Straddling the Continental Divide and set within an almost mythic cloud forest, Monteverde is truly one of Costa Rica\u2019s most remarkable destinations.","c":"60"},{"t":"373","s":"75","n":"SANTA TERESA","f":"SANTA TERESA","q":"SANTA TERESA \u25CF Puntarenas  / COSTA RICA","w":"Santa Teresa has been hailed as a world-class surfing spot in Costa Rica - with gorgeous white sandy beaches that put a smile on surfers' faces.","c":"60"}],"c":"300"},{"s":"76","t":"BOSNIA AND HERZEGOVINA ","T":[{"t":"374","s":"76","n":"OLD SARAJEVO CLOCK TOWER","f":"OLD SARAJEVO CLOCK TOWER","q":"OLD SARAJEVO CLOCK TOWER \u25CF Sarajevo / BOSNIA AND HERZEGOVINA","w":"Sarajevo's clock tower is believed to be built in the 16th century. The tower's clock is the only public clock in the world that keeps lunar time.","c":"60"},{"t":"375","s":"76","n":"JAHORINA","f":"JAHORINA","q":"JAHORINA \u25CF Pale / BOSNIA AND HERZEGOVINA","w":"Jahorina was an area of major strategic importance during the Bosnian war. Some areas of the mountain still contain land mines.","c":"60"},{"t":"376","s":"76","n":"DRINA RIVER","f":"DRINA RIVER","q":"DRINA RIVER \u25CF  Bajina Ba\u0161ta / BOSNIA AND HERZEGOVINA","w":"The Drina constitutes a large part of the boundary that separates Bosnia and Herzegovina to the west from Serbia to the east.","c":"60"},{"t":"377","s":"76","n":"BJELA\u0160NICA MOUNTAIN","f":"BJELA\u0160NICA MOUNTAIN","q":"BJELA\u0160NICA MOUNTAIN \u25CF  Sarajevo / BOSNIA AND HERZEGOVINA","w":"The mountain's name stems from the root bijel, which means ''white''. The mountain is visited by mountain bikers and paragliders.","c":"60"},{"t":"378","s":"76","n":"OLD BRIDGE","f":"OLD BRIDGE","q":"OLD BRIDGE \u25CF Mostar / BOSNIA AND HERZEGOVINA","w":"A new bridge built largely from the original stones was unveiled in Mostar in 2004, becoming a symbol of postwar reconciliation.","c":"60"}],"c":"300"},{"s":"77","t":"ESTONIA ","T":[{"t":"379","s":"77","n":"TALLINN TOWN HALL","f":"TALLINN TOWN HALL","q":"TALLINN TOWN HALL \u25CF Tallinn / ESTONIA","w":"This is the oldest city hall in North Europe and the only preserved one in Gothic style. Itt was completed, in its current form, in 1404.","c":"60"},{"t":"380","s":"77","n":"ALEXANDER NEVSKY CATHEDRAL","f":"ALEXANDER NEVSKY CATHEDRAL","q":"ALEXANDER NEVSKY CATHEDRAL \u25CF Tallinn / ESTONIA","w":"The large and richly decorated Russian Orthodox church was completed on Toompea Hill in 1900 when Estonia was part of the Czarist Empire.","c":"60"},{"t":"381","s":"77","n":"LAHEMAA NATIONAL PARK","f":"LAHEMAA NATIONAL PARK","q":"LAHEMAA NATIONAL PARK \u25CF Tallinn / ESTONIA","w":"Was founded in 1971, the national park protects historical and architectural monuments, and the ecosystems of forests, swamps, and beaches.","c":"60"},{"t":"382","s":"77","n":"TALLINN TV TOWER","f":"TALLINN TV TOWER","q":"TALLINN TV TOWER \u25CF Tallinn / ESTONIA","w":"At 314 meters the tallest building in Estonia, the tower was opened on 11 July 1980, with all of the party functionaries of that time attending.","c":"60"},{"t":"383","s":"77","n":"TOOMPEA CASTLE","f":"TOOMPEA CASTLE","q":"TOOMPEA CASTLE \u25CF Tallinn / ESTONIA","w":"The castle, an ancient stronghold site in use since at least the 9th century, today houses the Parliament of Estonia.","c":"60"}],"c":"300"},{"s":"78","t":"TAJIKISTAN","T":[{"t":"384","s":"78","n":"STATUE OF ISMOIL SOMONI","f":"STATUE OF ISMOIL SOMONI","q":"STATUE OF ISMOIL SOMONI \u25CF Dushanbe / TAJIKISTAN","w":"With an art-deco quality to the design of the monument's golden casing and a prominent position on Friendship Sq, it is a key meeting point.","c":"60"},{"t":"385","s":"78","n":"ISKANDERKUL LAKE","f":"ISKANDERKUL LAKE","q":"ISKANDERKUL LAKE \u25CF Fann Mountains / TAJIKISTAN","w":"Iskanderkul means the lake of Alexander the Great. Locals believe one of his favorite horses drowned in the lake during a battle.","c":"60"},{"t":"386","s":"78","n":"PAMIR HIGHWAY","f":"PAMIR HIGHWAY","q":"PAMIR HIGHWAY \u25CF Dushanbe / TAJIKISTAN","w":"Pamir Highway is an emerging travel destination for adventurous travelers and this overland journey goes through an incredible pristine landscape.","c":"60"},{"t":"387","s":"78","n":"FANN MOUNTAIN","f":"FANN MOUNTAIN","q":"FANN MOUNTAIN \u25CF Samarkand / TAJIKISTAN","w":"This stunning mountain's route will take you through semi-arid mountains, juniper forests and will find you waking up next to Carib-blue lakes.","c":"60"},{"t":"388","s":"78","n":"KARAKUL LAKE","f":"KARAKUL LAKE","q":"KARAKUL LAKE \u25CF Fann Mountain / TAJIKISTAN","w":"Karakul or ''Black Lake'' is located in the Pamir Mountains in Tajikistan, one of the most beautiful and remote locations in Central Asia.","c":"60"}],"c":"300"},{"s":"79","t":"AZERBAIJAN","T":[{"t":"389","s":"79","n":"GREATER CAUCASUS MOUNTAIN","f":"GREATER CAUCASUS MOUNTAIN","q":"GREATER CAUCASUS MOUNTAIN \u25CF AZERBAIJAN","w":"Stretching between the Black Sea and the Caspian Sea, this mountain system lies at the intersection of Europe and Asia.","c":"60"},{"t":"390","s":"79","n":"GOBUSTAN NATIONAL PARK","f":"GOBUSTAN NATIONAL PARK","q":"GOBUSTAN NATIONAL PARK \u25CF Gobustan / AZERBAIJAN","w":"The reserve has more than 6,000 rock carvings, which depict people, animals, battle pieces, and ritual dances.","c":"60"},{"t":"391","s":"79","n":"SHEKI CITY","f":"SHEKI CITY","q":"SHEKI CITY  \u25CF  AZERBAIJAN","w":"By the 19th century, Sheki, on the Silk Road path through northwest Azerbaijan, was an international center for silk production.","c":"60"},{"t":"392","s":"79","n":"BAKU BOULEVARD","f":"BAKU BOULEVARD","q":"BAKU BOULEVARD \u25CF Baku / AZERBAIJAN","w":"Baku Boulevard is a promenade established in 1909 which runs parallel to Baku's seafront.","c":"60"},{"t":"393","s":"79","n":"ATESHGAH FIRE TEMPLE","f":"ATESHGAH FIRE TEMPLE","q":"ATESHGAH FIRE TEMPLE \u25CF Baku / AZERBAIJAN","w":"The pentagonal complex with a tetrapillar-altar in the middle and cells for monks was built during the 17th and 18th centuries.","c":"60"}],"c":"300"},{"s":"80","t":"JAMAICA","T":[{"t":"394","s":"80","n":"FORT CHARLES","f":"FORT CHARLES","q":"FORT CHARLES \u25CF  Port Royal / JAMAICA","w":"The first fort to be erected in Port Royal was Fort Charles. It was originally called Fort Cromwell but was renamed Fort Charles.","c":"60"},{"t":"395","s":"80","n":"BLUE MOUNTAINS","f":"BLUE MOUNTAINS","q":"BLUE MOUNTAINS \u25CF JAMAICA","w":"Blue Mountain Peak is the highest mountain in Jamaica and one of the highest peaks in the Caribbean at 2,256 meters.","c":"60"},{"t":"396","s":"80","n":"OCHO RIOS","f":"OCHO RIOS","q":"OCHO RIOS \u25CF JAMAICA","w":"Ocho Rios, affectionately called 'Ochi', is probably best known for its use in Dr. No, the very first James Bond film, released in 1962.","c":"60"},{"t":"397","s":"80","n":"GREEN GROTTO CAVES","f":"GREEN GROTTO CAVES","q":"GREEN GROTTO CAVES \u25CF North Coast / JAMAICA","w":"Named for the green algae that cover its walls, the Green Grotto Caves are show caves on the north coast of Jamaica.","c":"60"},{"t":"398","s":"80","n":"TREASURE BEACH","f":"TREASURE BEACH","q":"TREASURE BEACH \u25CF JAMAICA","w":"Treasure Beach is a six-mile stretch of coral-colored and sometimes black sands, private coves, and rocky shores.","c":"60"}],"c":"300"}]}`),bf=108100,Vg={apiKey:"AIzaSyDQx0FNAzlY0v-SRXkp-ta5EMNro3G-27Y",authDomain:"wow-web-c9bc4.firebaseapp.com",projectId:"wow-web-c9bc4",storageBucket:"wow-web-c9bc4.appspot.com",messagingSenderId:"82103144212",appId:"1:82103144212:web:c99952278e0ab4ef567c01",measurementId:"G-V44RP05R1W"},mi=!1;!1&&new xc({projectId:471165,projectKey:"87360a4d51568356d4d3db4f59bcfc8b",environment:T().isNil("production")?"development":"production"}).wrap(Sf);let dd,ti,Su;mi&&(dd=Bd(Vg),ti=Fg(dd),Su=Gp(dd));let ta=!1,ro=!1,_u=!1,Qs=0,Wn=0;const cn=new Set;let hs="no";const fd=new Set;let wu=-1,ao="",kt=T().clone(bc),Cu=!1,Tf=!1,Ls;Ml(),mi&&lr({logEvent:ei,analytics:ti});function Sf(){!T().isNil("production")&&Ji.name!=="default"&&(console.log=function(){},console.debug=function(){},console.warn=function(){},console.info=function(){},console.table=function(){},console.trace=function(){}),mi?(Su.settings.minimumFetchIntervalMillis=0,ag(Su).then(I=>{console.log("isRemoteConfigCurrentlyFetched",I);const s=Bh(Su,"gameConfig");kt=JSON.parse(s._value),Ls=new pd}).catch(I=>{console.log("error",I),Ls=new pd})):Ls=new pd}function Yg(){const I=zg.S,s=[],o=I.length;let v=1,S=1,E=0,R=-1,k=-1;for(let W=0;W<o*5;W++){const K=I[W%o],q=W>=o||parseInt(K.c.toString())===0;q&&R===-1&&(I.some((fe,xe)=>{if(fe.s==="50")return R=xe,!0}),k=W-R);let $=0,ne=R+E%k;const oe=q?s[ne]:null,ce={SectionID:K.s.toString(),title:K.t.toString(),sets:[]};ce.OriginalSectionID=q?oe.SectionID:ce.SectionID,ce.duplicationCount=W/o;const me=K.T;for(let fe=0;fe<me.length;fe++){const xe=T().clone(me[fe]);q?(xe.TotalLevelCount=oe.sets[fe].TotalLevelCount,$+=xe.TotalLevelCount):xe.TotalLevelCount=parseInt(me[fe].c.toString()),xe.FirstLevel=S,xe.LastLevel=xe.FirstLevel+xe.TotalLevelCount-1,ce.sets.push(xe),S+=xe.TotalLevelCount}q?(E++,ce.TotalLevelCount=$):ce.TotalLevelCount=parseInt(K.c.toString()),ce.FirstLevel=v,ce.LastLevel=ce.FirstLevel+ce.TotalLevelCount-1,s.push(ce),v+=ce.TotalLevelCount}return s}class pd{constructor(){this.levelManager=new F,Ro(this.levelManager),this.stringManager=new D,this.setManager=new V,this.sectionManager=new z,this.progressManager=new re,ya(this.progressManager);const s=this.progressManager.initializeValueByName({name:Se.language,value:"",valueType:ie.string}),o=L.HOME_SCREEN;this.isFilesLoadComplete=!1,this.componentsReadyStatusMap=new Map,this.components=new Map;const v=this.progressManager.initializeValueByName({name:Se.free_hint_count,value:-1,valueType:ie.number}),S=this.progressManager.initializeValueByName({name:Se.free_hammer_hint_count,value:-1,valueType:ie.number}),E=this.progressManager.initializeValueByName({name:Se.music_enabled,value:0,valueType:ie.number});Mo(E===1);const R=this.progressManager.initializeValueByName({name:Se.soundfx_enabled,value:1,valueType:ie.number});ur(R===1);const k=this.progressManager.initializeValueByName({name:Se.current_level,value:this.levelManager.getCurrentLevel(),valueType:ie.number});this.levelManager.setCurrentLevel(k);const W=this.progressManager.initializeValueByName({name:Se.current_gem_count,value:kt.components.gemCounter1.initialCount,valueType:ie.number});kt.components.gemCounter1.currentCount=W;const K=this.progressManager.initializeValueByName({name:Se.is_butterfly_displayed_in_current_level,value:"no",valueType:ie.string});hs=K;const q=this.progressManager.initializeValueByName({name:Se.butterfly_remaining_time,value:-1,valueType:ie.number});console.log({butterflyRemainingTime:q}),kt.components.butterflyTimer1.countdownTimeInSeconds=q;const $=this.progressManager.initializeValueByName({name:Se.butterfly_current_prize,value:-1,valueType:ie.number});kt.components.butterflyTimer1.currentPrize=$;const ne=this.progressManager.initializeValueByName({name:Se.butterfly_is_prize_available,value:0,valueType:ie.number});kt.components.butterflyTimer1.isPrizeAvailable=ne;const oe=this.progressManager.initializeValueByName({name:Se.gift_box_type,value:"E",valueType:ie.string});kt.components.butterflyTimer1.giftBoxType=oe,oe!=="E"&&q===0&&$!==-1&&this.progressManager.setValueByName({name:Se.butterfly_is_prize_available,value:1}),K==="no"&&($!==-1||this.progressManager.getValueByName({name:Se.butterfly_is_prize_available,returnType:ie.number})===1)&&(hs="yes",this.progressManager.setValueByName({name:Se.is_butterfly_displayed_in_current_level,value:hs}));const ce=this.progressManager.initializeValueByName({name:Se.current_level_state_array,value:this.levelManager.getCurrentLevelStateArray(),valueType:ie.object});console.log({currentLevelStateArray:ce}),this.levelManager.setCurrentLevelStateArray(ce);const me=this.progressManager.initializeValueByName({name:Se.current_other_words_state,value:kt.components.otherWords1.initialState,valueType:ie.object});kt.components.otherWords1.currentState=me;const fe=this.progressManager.initializeValueByName({name:Se.current_level_found_other_words,value:this.levelManager.getCurrentLevelFoundOtherWords(),valueType:ie.object});this.levelManager.setCurrentLevelFoundOtherWords(fe),T().isNil(kt.components.gemCounter1.currentCount)&&(kt.components.gemCounter1.currentCount=kt.components.gemCounter1.initialCount),T().isNil(kt.components.otherWords1.currentState)&&(kt.components.otherWords1.currentState=kt.components.otherWords1.initialState);const xe=di({componentId:"loadingIcon1",componentClass:Gt,componentConfig:kt.components.loadingIcon1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}});xe.selectedImages={image:[{filePath:"loading.png"}]};const ve=di({componentId:"commonAssetsLoader1",componentClass:Ke,componentConfig:kt.components.commonAssetsLoader1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}});ve.selectedImages={arrow:[{filePath:"arrow.png"}],gem:[{filePath:"gem.png"}],clapper:[{filePath:"clapper.png"}],counterBackground:[{filePath:"counterBackground.png"}],hintBackground:[{filePath:"hintBackground.png"}],halfCircle:[{filePath:"halfCircle.png"}],rectangle:[{filePath:"rectangle.png"}],timeIcon:[{filePath:"timeIcon.png"}],snowGlobeFront:[{filePath:"snowGlobeFront.png"}],snowGlobeGlass:[{filePath:"snowGlobeGlass.png"}],whiteButton:[{filePath:"whiteButton.png"}],cancel:[{filePath:"cancel.png"}],voyageCircle:[{filePath:"voyageCircle.png"}],whiteCircleFrame:[{filePath:"white_circle_frame.png"}],progressBarFill:[{filePath:"progressBarFill.png"}],greenTick:[{filePath:"greenTick.png"}],progressbarShine:[{filePath:"progressbarShine.png"}],setImageFrame:[{filePath:"setImageFrame.png"}],setImageMask:[{filePath:"setImageMask.png"}],mainLogo:[{filePath:"MainLogo.png"}],mainLogoRussian:[{filePath:"MainLogoRussian.png"}],shineImage:[{filePath:"shineImage.png"}],buttonShine:[{filePath:"fortuneWheel/WheelBase/ButtonShine.png"}]},ve.selectedAtlases={butterfly_normal:[{filePath:"butterflyAtlases/normal/spritesheet.png",variant:"image"},{filePath:"butterflyAtlases/normal/spritesheet.json",variant:"JSON"}],butterfly_golden:[{filePath:"butterflyAtlases/golden/spritesheet.png",variant:"image"},{filePath:"butterflyAtlases/golden/spritesheet.json",variant:"JSON"}],butterfly_legendary:[{filePath:"butterflyAtlases/legendary/spritesheet.png",variant:"image"},{filePath:"butterflyAtlases/legendary/spritesheet.json",variant:"JSON"}],giftBoxes:[{filePath:"giftBoxesAtlas/spritesheet.png",variant:"image"},{filePath:"giftBoxesAtlas/spritesheet.json",variant:"JSON"}]},ve.selectedBitmapFonts={font:[{filePath:"bitmapFont/allLetters/allLetters.png",variant:"image"},{filePath:"bitmapFont/allLetters/allLetters.xml",variant:"XML"}]},ve.selectedSounds={levelStart:[{filePath:"sound/level_start.mp3"}]},ve.isSoundFxEnabledCallback=()=>Qi();const We=di({componentId:"topUIWrapper1",componentClass:Oe,componentConfig:kt.components.topUIWrapper1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}}),Ze=di({componentId:"settings1",componentClass:Vo,componentConfig:kt.components.settings1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});Ze.selectedImages={settingsBackground:[{filePath:"mainMenu/settingsBackground.png"}],settingsIcon:[{filePath:"mainMenu/settingsIcon.png"}]},Ze.isSoundFxEnabledCallback=()=>Qi(),Ze.clearWheelCallback=()=>{this.gameManager.getCurrentState()===L.IN_GAME&&qe.clearWheel()};const ke=di({componentId:"gemCounter1",componentClass:lt,componentConfig:kt.components.gemCounter1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}});ke.selectedSounds={collect:[{filePath:"sound/gem_collect.mp3"}]},ke.isSoundFxEnabledCallback=()=>Qi(),ke.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),ke.getBackgroundTextureKeyCallback=()=>ve.getCounterBackgroundTextureKey(),ke.getGemTextureKeyCallback=()=>ve.getGemTextureKey();const ut=di({componentId:"adBannerArea1",componentClass:Ye,componentConfig:kt.components.adBannerArea1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}}),De=di({componentId:"dimmer1",componentClass:Ne,componentConfig:kt.components.dimmer1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}});De.selectedImages={whiteBg:[{filePath:"whiteBg.png"}]};const Tt=di({componentId:"backgroundMusic1",componentClass:Ur,componentConfig:kt.components.backgroundMusic1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}});Tt.selectedSounds={music:[{filePath:"sound/background.mp3"}]},Tt.isMusicEnabledCallback=()=>jg();const xt=di({componentId:"background1",componentClass:he,componentConfig:kt.components.background1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}}),Pt=di({componentId:"canvas1",componentClass:de,componentConfig:kt.components.canvas1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}}),ot=di({componentId:"mainMenu1",componentClass:l,componentConfig:kt.components.mainMenu1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN],checkGameStateReady:()=>{this.checkGameStateReady()}});ot.selectedAtlases={bgBird:[{filePath:"mainMenu/bgBird/bgBird.png",variant:"image"},{filePath:"mainMenu/bgBird/bgBird.json",variant:"JSON"}]},_i(ot),ot.getCurrentLanguageCallback=()=>this.progressManager.getValueByName({name:Se.language,returnType:ie.string}),ot.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),ot.isSoundFxEnabledCallback=()=>Qi(),ot.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),ot.isFinalLevelCallback=()=>this.levelManager.getCurrentLevel()===bf+1,ot.onButtonPointerupCallback=()=>{console.log("current state",this.gameManager.getCurrentState()),this.gameManager.getCurrentState()===L.HOME_SCREEN&&(this.gameManager.setPreviousState(this.gameManager.getCurrentState()),this.gameManager.setCurrentState(L.IN_GAME),this.setCurrentBackgroundImageData(xt),this.loadCurrentStateComponentAssets(),setTimeout(()=>{ot.hideObjects({keepSettingsButton:!0})},300))},ot.getCurrentLevelCallback=()=>this.levelManager.getCurrentLevel();const Ot=di({componentId:"mainMenuBackground1",componentClass:he,componentConfig:kt.components.mainMenuBackground1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN],checkGameStateReady:()=>{this.checkGameStateReady()}});Ot.selectedImages={background:[{filePath:"mainMenu/mainMenuBg.jpg"}]},Ot.setCurrentTextureKey("mainMenu/mainMenuBg");const ze=di({componentId:"wordBoard1",componentClass:ye,componentConfig:kt.components.wordBoard1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});ze.selectedSounds={hint:[{filePath:"sound/hint.mp3"}],letterFit:[{filePath:"sound/Letter_Fit.mp3"}],hammerHint:[{filePath:"sound/hammerhint.mp3"}]},ze.selectedImages={boxBackground:[{filePath:"BoxBg.png"}],boxBackgroundFrame:[{filePath:"boxBackgroundFrame.png"}],hammer:[{filePath:"hammer.png"}],hammerRing:[{filePath:"hammerRing.png"}]},ze.selectedAtlases={hint:[{filePath:"hintAtlas/spritesheet.png",variant:"image"},{filePath:"hintAtlas/spritesheet.json",variant:"JSON"}]},nl(ze),ze.isSoundFxEnabledCallback=()=>Qi(),ze.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),ze.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),ze.onButterflyEscapeCallback=()=>{this.progressManager.setValueByName({name:Se.gift_box_type,value:"E"}),mi&&(ze.butterflyType==="B"?ei(ti,"butterfly_missed"):ze.butterflyType==="G"?ei(ti,"butterfly_missed_gold"):ze.butterflyType==="L"&&ei(ti,"butterfly_missed_legendary"))},ze.getButterflyFlyingSizeCallback=()=>at.getGiftBoxSize(),ze.getButterflyAtlasKeyByNameCallback=Ie=>ve.getAtlasKeyByName(Ie),ze.getButterflyAtlasPlayKeyByNameAndStateCallback=(Ie,ht)=>ve.getButterflyAtlasPlayKeyByNameAndState(Ie,ht),ze.getButterflyDestinationPositionCallback=()=>at.getGiftBoxDestinationPosition(),ze.getButterflyVisibilityCallback=()=>!at.isPrizeAvailable&&at.countdownTimeInSeconds<0,ze.onButterflyTransformCompleteCallback=()=>{at.getContainer().addAt(at.giftBoxSprite,1);const ht=at.getGiftBoxInsideContainerPosition();at.giftBoxSprite.setPosition(ht.x,ht.y),at.render(),at.startCountdownTimerEvent(),at.playSnowGlobeAppearTween()},ze.onButterflyCatchCallback=(Ie,ht,$e)=>{this.progressManager.setValueByName({name:Se.butterfly_remaining_time,value:ht}),this.progressManager.setValueByName({name:Se.butterfly_is_prize_available,value:0}),this.progressManager.setValueByName({name:Se.butterfly_current_prize,value:Ie}),this.progressManager.setValueByName({name:Se.gift_box_type,value:ze.butterflyType}),mi&&(ze.butterflyType==="B"?ei(ti,"butterfly_catch"):ze.butterflyType==="G"?ei(ti,"butterfly_catch_gold"):ze.butterflyType==="L"&&ei(ti,"butterfly_catch_legendary")),at.giftBoxType=ze.butterflyType,at.giftBoxSprite=$e,at.setIsPrizeAvailable(0),at.setCurrentPrize(Ie),at.setCountdownTimeInSeconds(ht),at.playAppearTween()},ze.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),ze.onBoxPointerdownCallback=Ie=>{const ht=Ie.box,$e=Ie.rowIndex,Ut=Ie.columnIndex,At=ze.board[$e][Ut].state;if(At==="full"||At==="hinted"||!ht.visible||ht.depth!==ze.getDepthByName(ze.depthNames.boxActive))return;mi&&ei(ti,"hammer_consumed"),ze.playHammerHintSound(),ze.checkButterflyStateByCoordinate({rowIndex:$e,columnIndex:Ut}),ze.playBoxHitTween({rowIndex:$e,columnIndex:Ut}),Je.setCancelVisibility(!1),De.isVisible=!1,De.render(),yt.isVisible=!1,yt.render(),ze.scene.input.enabled=!1,ze.getLettersAndCoordinatesByBoxStates(["hasLetter","emphasized"]).forEach(Xt=>{const Ai=Xt.rowIndex,ui=Xt.columnIndex,On=ze.getDepthByName(ze.depthNames.boxInactive),ho=ze.getDepthByName(ze.depthNames.frameInactive);ze.setBoxAndFrameDepthByRowAndColumnIndex({rowIndex:Ai,columnIndex:ui,boxDepth:On,frameDepth:ho})}),ze.playHammerTween({rowIndex:$e,columnIndex:Ut}),_u=!1},ze.onHammerHitCallback=Ie=>{const ht=Ie.rowIndex,$e=Ie.columnIndex;if(Je.getFreeHammerHintCount()>0){Je.decreaseFreeHammerHintCount();const At=Je.getFreeHammerHintCount();this.progressManager.setValueByName({name:Se.free_hammer_hint_count,value:At});const Yt=Je.getFreeHammerHintCountText();At===0?(Je.getFreeHammerHintCountImage().setVisible(!1),Yt.setVisible(!1),Je.render()):Yt.setText(At)}else{const At=Je.getGemCost();ke.addToCurrentCount(-At),this.progressManager.setValueByName({name:Se.current_gem_count,value:ke.getCurrentCount()})}if(ze.checkAndRemoveCoordinateInBonusCoordinates({rowIndex:ht,columnIndex:$e})){ke.addToCurrentCount(ke.gemPerLetter),this.progressManager.setValueByName({name:Se.current_gem_count,value:ke.getCurrentCount()});const At=ke.getGemImageMiddlePosition();ze.onLetterRevealedInBonusBox({rowIndex:ht,columnIndex:$e},At)}ze.renderHintedBoxLetter({rowIndex:ht,columnIndex:$e,shouldPlayHintAnimation:!1}),this.levelManager.pushToCurrentLevelStateArray({state:"hinted",rowIndex:ht,columnIndex:$e}),this.progressManager.setValueByName({name:Se.current_level_state_array,value:this.levelManager.getCurrentLevelStateArray()})},ze.makeHammerButtonAvailableCallback=()=>{ze.checkAllWordObjectsIsFoundPropertyTrue()||(ze.scene.input.enabled=!0),ro=!1},ze.getBonusImageTextureKeyCallback=()=>ve.getGemTextureKey(),ze.onMakeMoveTweenCompleteCallback=Ie=>{const ht=Ie.rowIndex,$e=Ie.columnIndex,Ut=ze.getFoundWordObjectsByRowAndColumnIndex({rowIndex:ht,columnIndex:$e});if(Ut.length===0)throw{message:"found word objects length is 0"};Ut.forEach(At=>{cn.has(At.wordString)&&(console.log("word set",cn),cn.delete(At.wordString),Wn++,console.table("for ribbon on word found",{"word status":{foundWordCount:Wn,wordCount:Qs}},{"word string":At.wordString},{"is all is found":JSON.stringify(ze.checkAllWordObjectsIsFoundPropertyTrue())}),console.log("word status",Wn,Qs),console.log(ht,$e,At.wordString),Wn===Qs?(console.log("for ribbon enters here last word"),ii.playRibbonTweens(!0)):(At.wordString===ao||Wn===wu)&&(ze.checkAllWordObjectsIsFoundPropertyTrue()||(ii.playRibbonTweens(!1),console.log("for ribbon enters longest word or ribbon random playindex"))),Wn===Qs-1&&ze.emphasizeLastNotFoundWordInBoard())})},ze.onSetFoundWordCallback=Ie=>{qe.handleWordFoundByHint(Ie),ze.checkAllWordObjectsIsFoundPropertyTrue()&&(ze.scene.input.enabled=!1)};const qe=di({componentId:"wordWheel1",componentClass:ue,componentConfig:kt.components.wordWheel1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});qe.selectedImages={shuffleIcon:[{filePath:"shuffleicon.png"}],letterCircle:[{filePath:"LetterCircle.png"}],wordWheel:[{filePath:"WordWheel.png"}],hand:[{filePath:"hand.png"}]},qe.selectedSounds={letterSelect1:[{filePath:"sound/letter_select_01.mp3"}],letterSelect2:[{filePath:"sound/letter_select_02.mp3"}],letterSelect3:[{filePath:"sound/letter_select_03.mp3"}],letterSelect4:[{filePath:"sound/letter_select_04.mp3"}],letterSelect5:[{filePath:"sound/letter_select_05.mp3"}],letterSelect6:[{filePath:"sound/letter_select_06.mp3"}],letterSelect7:[{filePath:"sound/letter_select_07.mp3"}],letterSelect8:[{filePath:"sound/letter_select_08.mp3"}],shuffleLetters:[{filePath:"sound/shuffle_letters.mp3"}],wordCorrect:[{filePath:"sound/word_correct.mp3"}],wordDuplicate:[{filePath:"sound/word_duplicate.mp3"}],wordInvalid:[{filePath:"sound/word_invalid.mp3"}],otherWordFound:[{filePath:"sound/other_word_found.mp3"}],letterDeselect1:[{filePath:"sound/letter_deselect_01.mp3"}],letterDeselect2:[{filePath:"sound/letter_deselect_02.mp3"}],letterDeselect3:[{filePath:"sound/letter_deselect_03.mp3"}],letterDeselect4:[{filePath:"sound/letter_deselect_04.mp3"}],letterDeselect5:[{filePath:"sound/letter_deselect_05.mp3"}],letterDeselect6:[{filePath:"sound/letter_deselect_06.mp3"}],letterDeselect7:[{filePath:"sound/letter_deselect_07.mp3"}],letterDeselect8:[{filePath:"sound/letter_deselect_08.mp3"}]},qe.getCurrentLanguageCallback=()=>this.progressManager.getValueByName({name:Se.language,returnType:ie.string}),qe.getCurrentGameStateCallback=()=>this.gameManager.getCurrentState(),qe.onShufflePointerdownCallback=()=>{mi&&ei(ti,"shuffle_usage")},qe.getCancelImagePositionHelperCallback=()=>{const Ie=yt.getCurrentCenterPosition(),ht=yt.getCurrentWidth(),$e=yt.getCurrentHeight();return{x:Ie.x+ht*.5,y:Ie.y-$e*.5}},qe.isHintTutorialDisplayCallback=()=>dt.shouldHintTutorialDisplayCallback(),qe.isHammerTutorialDisplayCallback=()=>Je.shouldHammerHintTutorialDisplayCallback(),qe.onShuffleTutorialEndCallback=()=>{if(console.log("end shuffle tutorial"),qe.isShuffleTutorialEnd)return;qe.isShuffleTutorialEnd=!0,De.isVisible=!1,De.render(),yt.isVisible=!1,yt.render(),qe.renderShuffleButton(),qe.getCancelImage().setVisible(!1)},qe.shouldShuffleTutorialDisplayCallback=()=>this.levelManager.getCurrentLevel()===6&&this.levelManager.getCurrentLevelStateArray().length===0&&!qe.isShuffleTutorialEnd,qe.shouldHandDisplayCallback=()=>this.levelManager.getCurrentLevel()===1&&this.levelManager.getCurrentLevelStateArray().length===0&&!qe.isHandTutorialEnd,qe.onResizeHandCallback=()=>{this.addHandActions(),qe.playHandTweens()},qe.isSoundFxEnabledCallback=()=>Qi(),qe.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),qe.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),qe.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),qe.getCancelButtonTextureKeyCallback=()=>ve.getCancelButtonTextureKey(),qe.getPreviewRectangleTextureKeyCallback=()=>ve.getRectangleTextureKey(),qe.getPreviewHalfCircleTextureKeyCallback=()=>ve.getHalfCircleTextureKey(),qe.checkIsHammerButtonPressedCallback=()=>_u,qe.onDuplicateMove=Ie=>{this.components.get("wordBoard1").makeDuplicateMoveByWord({word:Ie.word})},qe.onInvalidMoveCallback=()=>{},qe.onValidMove=Ie=>{console.log("word found"),qe.shouldHandDisplayCallback()&&(qe.isHandTutorialEnd=!0,De.isVisible=!1,De.render(),yt.isVisible=!1,yt.render(),qe.killHandTweens(),qe.clearTutorialHandLines(),qe.getHand().setVisible(!1),qe.render());const ht=this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),$e=this.components.get("wordBoard1"),Ut=$e.getMoveDestinationsAbsoluteByWord(Ie.word),At=ht?Ut.reverse():Ut,Yt=$e.wordsMap.get(Ie.word);Yt.coordinates.forEach(Xt=>{const Ai=Xt.rowIndex,ui=Xt.columnIndex,On=this.levelManager.findIndexInCurrentLevelStateArrayByRowAndColumnIndex({rowIndex:Ai,columnIndex:ui});if(On===-1?this.levelManager.pushToCurrentLevelStateArray({rowIndex:Ai,columnIndex:ui,state:"full"}):this.levelManager.setStateInCurrentLevelStateArrayByIndex({index:On,value:"full"}),$e.checkAndRemoveCoordinateInBonusCoordinates({rowIndex:Ai,columnIndex:ui})){ke.addToCurrentCount(ke.gemPerLetter),this.progressManager.setValueByName({name:Se.current_gem_count,value:ke.getCurrentCount()});const gd=ke.getGemImageMiddlePosition();$e.onLetterRevealedInBonusBox({rowIndex:Ai,columnIndex:ui},gd)}}),$e.checkButterflyStateByWordObject(Yt),$e.setFoundWordInWordsMap(Ie.word),this.progressManager.setValueByName({name:Se.current_level_state_array,value:this.levelManager.getCurrentLevelStateArray()}),Ie.letters.forEach((Xt,Ai,ui)=>{const On=At[Xt.getData("order")].x,ho=At[Xt.getData("order")].y,gd=$e.scene.tweens.add({targets:Xt,duration:$e.tweenMoveDestinationDuration,x:On,y:ho,fontSize:{value:2*Xt.fontSize,yoyo:!0,duration:175},delay:Ai*100,onComplete:()=>{const tr=Yt.coordinates[Ai].rowIndex,Ph=Yt.coordinates[Ai].columnIndex,_f=$e.getDepthByName($e.depthNames.boxInactive),Eu=$e.getDepthByName($e.depthNames.frameInactive);$e.setBoxAndFrameDepthByRowAndColumnIndex({rowIndex:tr,columnIndex:Ph,boxDepth:_f,frameDepth:Eu}),Xt.setDepth($e.getDepthByName($e.depthNames.letter));const wf=$e.getLetterName({rowIndex:tr,columnIndex:Ph});let Ni=$e.gameObjectsMap.get(wf);if(T().isNil(Ni)){Ni=Xt,$e.gameObjectsMap.set(wf,Xt);const Ef=parseInt("0x"+$e.FontColor.replace("#",""));Ni.tintTopLeft!==Ef&&(Ni.clearTint(),Ni.setTint(Ef)),Ni.fontSize!==$e.AbsoluteFontSize&&Ni.setFontSize($e.AbsoluteFontSize)}else Xt.destroy();Ni.text!==Xt.text&&Ni.setText(Xt.text),(Ni.x!==Xt.x||Ni.y!==Xt.y)&&Ni.setPosition(Xt.x,Xt.y);let Cf=parseInt("0x"+$e.FontColor.replace("#",""));Ni.tintTopLeft!==Cf&&(Ni.clearTint(),Ni.setTint(Cf)),Ni.fontSize!==$e.AbsoluteFontSize&&Ni.setFontSize($e.AbsoluteFontSize),Ni.visible||Ni.setVisible(!0),$e.makeMoveByCoordinate({rowIndex:tr,columnIndex:Ph});const Xg=$e.getWordObjectsByRowAndColumnIndex({rowIndex:tr,columnIndex:Ph});$e.processFoundWordObjects(Xg)},onYoyo:(tr,Ph)=>{tr.data.forEach(Eu=>{Eu.key==="fontSize"&&(Eu.start=$e.AbsoluteFontSize)})}})})},qe.onOtherWordFound=Ie=>{const ht=Ie.word,$e=Ie.letters,Ut=Lt.increaseCurrentState();Lt.getCurrentProgress()===1&&mi&&ei(ti,"extra_words_full"),this.levelManager.pushToCurrentLevelFoundOtherWords(ht),this.progressManager.setValueByName({name:Se.current_other_words_state,value:Ut}),this.progressManager.setValueByName({name:Se.current_level_found_other_words,value:this.levelManager.getCurrentLevelFoundOtherWords()});const At=$e[0],Yt=$e[$e.length-1],Xt={x:At.x-At.width*.5+(Yt.x+Yt.width*.5-(At.x-At.width*.5))*.5,y:At.y},Ai=[];$e.forEach(ui=>{Ai.push({x:ui.x-Xt.x,y:ui.y-Xt.y})}),Lt.playLetterMoveTween({letters:$e,offsets:Ai,midPoint:Xt})},qe.onDuplicateOtherWordFound=Ie=>{Lt.onDuplicateOtherWordFound(Ie),mi&&ei(ti,"extra_word_already_found",{value:Ie})};const dt=di({componentId:"hint1",componentClass:we,componentConfig:kt.components.hint1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});dt.selectedImages={hintButton:[{filePath:"hintButton.png"}]},dt.selectedSounds={hintPress:[{filePath:"sound/hint_press.mp3"}]},dt.getBackgroundHeightCallback=()=>qe.AbsoluteRadius*.5,dt.setFreeHintCount(this.progressManager.getValueByName({name:Se.free_hint_count,returnType:ie.number})),dt.shouldHintTutorialDisplayCallback=()=>this.levelManager.getCurrentLevel()===3&&this.levelManager.getCurrentLevelStateArray().length===0&&!dt.isTutorialEnd,dt.onHintTutorialEndCallback=()=>{if(console.log("end hint tutorial"),dt.isTutorialEnd)return;dt.isTutorialEnd=!0,De.isVisible=!1,De.render(),yt.isVisible=!1,yt.render(),dt.getCancelImage().setVisible(!1),dt.render()},dt.isSoundFxEnabledCallback=()=>Qi(),dt.getCancelImagePositionHelperCallback=()=>{const Ie=yt.getCurrentCenterPosition(),ht=yt.getCurrentWidth(),$e=yt.getCurrentHeight();return{x:Ie.x+ht*.5,y:Ie.y-$e*.5}},dt.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),dt.getWhiteButtonTextureKeyCallback=()=>ve.getWhiteButtonTextureKey(),dt.getCancelButtonTextureKeyCallback=()=>ve.getCancelButtonTextureKey(),dt.getBackgroundTextureKeyCallback=()=>ve.getHintBackgroundTextureKey(),dt.getGemImageTextureKeyCallback=()=>ve.getGemTextureKey(),dt.getPositionYHelperCallback=()=>qe.CircleCenterAbsoluteY-qe.AbsoluteRadius,dt.onHintPointerdownCallback=()=>{if(qe.clearWheel(),Wn===Qs||ta)return;ta=!0,dt.playPressTween();const Ie=dt.getInputContainer();Ie.once("pointerup",()=>{dt.playHintPressSound(),dt.shouldHintTutorialDisplayCallback()&&dt.onHintTutorialEndCallback();const ht=dt.getGemCost();if(dt.getFreeHintCount()<1){const ui=ke.getCurrentCount();if(ui<ht){console.warn("current gem count is smaller than hint gem cost",ui,ht);return}}const $e=ze.getLettersAndCoordinatesForHintByBoxStates(["hasLetter","emphasized"]);if($e.length===0){ta=!1,console.warn("no available letter for hint");return}const Ut=Math.floor(Math.random()*$e.length),At=$e[Ut].columnIndex,Yt=$e[Ut].rowIndex,Xt=ze.getLetter({rowIndex:Yt,columnIndex:At});if(!T().isNil(Xt)&&Xt.visible){ta=!1;return}if(ze.board[Yt][At].state==="full"){ta=!1;return}if(mi&&ei(ti,"cout_hint"),dt.getFreeHintCount()>0){dt.decreaseFreeHintCount();const ui=dt.getFreeHintCount();this.progressManager.setValueByName({name:Se.free_hint_count,value:ui});const On=dt.getFreeHintCountText();ui===0?(dt.getFreeHintCountImage().setVisible(!1),On.setVisible(!1),dt.render()):On.setText(ui)}else ke.addToCurrentCount(-ht),this.progressManager.setValueByName({name:Se.current_gem_count,value:ke.getCurrentCount()});if(ze.checkAndRemoveCoordinateInBonusCoordinates({rowIndex:Yt,columnIndex:At})){ke.addToCurrentCount(ke.gemPerLetter),this.progressManager.setValueByName({name:Se.current_gem_count,value:ke.getCurrentCount()});const ui=ke.getGemImageMiddlePosition();ze.onLetterRevealedInBonusBox({rowIndex:Yt,columnIndex:At},ui)}else ze.checkButterflyStateByCoordinate({rowIndex:Yt,columnIndex:At});ze.renderHintedBoxLetter({rowIndex:Yt,columnIndex:At,shouldPlayHintAnimation:!0}),this.levelManager.pushToCurrentLevelStateArray({state:"hinted",rowIndex:Yt,columnIndex:At}),this.progressManager.setValueByName({name:Se.current_level_state_array,value:this.levelManager.getCurrentLevelStateArray()}),ta=!1}),dt.scene.input.once("pointerup",()=>{Ie.removeListener("pointerup"),dt.playUnpressTween(),ta=!1})};const Je=di({componentId:"hammer1",componentClass:et,componentConfig:kt.components.hammer1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});Je.selectedImages={hammer:[{filePath:"hammerIcon.png"}],cancel:[{filePath:"cancel.png"}]},Je.getBackgroundHeightCallback=()=>qe.AbsoluteRadius*.5,Je.setFreeHammerHintCount(this.progressManager.getValueByName({name:Se.free_hammer_hint_count,returnType:ie.number})),Je.getCancelImageTutorialPositionHelperCallback=()=>{const Ie=yt.getCurrentCenterPosition(),ht=yt.getCurrentWidth(),$e=yt.getCurrentHeight();return{x:Ie.x+ht*.5,y:Ie.y-$e*.5}},Je.shouldHammerHintTutorialDisplayCallback=()=>this.levelManager.getCurrentLevel()===8&&this.levelManager.getCurrentLevelStateArray().length===0&&!Je.isTutorialEnd,Je.onHammerHintTutorialEndCallback=()=>{if(console.log("end hammer hint tutorial"),Je.isTutorialEnd)return;Je.isTutorialEnd=!0,De.isVisible=!1,De.render(),yt.isVisible=!1,yt.render(),Je.getCancelImage().setVisible(!1),Je.render()},Je.getWhiteButtonTextureKeyCallback=()=>ve.getWhiteButtonTextureKey(),Je.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),Je.getBackgroundTextureKeyCallback=()=>ve.getHintBackgroundTextureKey(),Je.getGemImageTextureKeyCallback=()=>ve.getGemTextureKey(),Je.getPositionYHelperCallback=()=>qe.CircleCenterAbsoluteY-qe.AbsoluteRadius,Je.onHammerPointerdownCallback=()=>{if(qe.clearWheel(),ze.checkAllWordObjectsIsFoundPropertyTrue()||Wn===Qs||ro)return;ro=!0,Je.playPressTween();const Ie=Je.getInputContainer();Ie.once("pointerup",()=>{if(Qi()&&Ce.play(),Je.shouldHammerHintTutorialDisplayCallback()&&Je.onHammerHintTutorialEndCallback(),Je.getFreeHammerHintCount()<1){const $e=ke.getCurrentCount(),Ut=Je.getGemCost();if($e<Ut){console.warn("current gem count is smaller than hammer gem cost",$e,Ut);return}}const ht=ze.getLettersAndCoordinatesByBoxStates(["hasLetter","emphasized"]);if(ht.length===0){ro=!1,console.warn("no available letter for hammer");return}De.scene.tweens.add({duration:250,targets:De.Dimmer,alpha:De.getDimmerHammerAlpha(),onStart:()=>{De.scene.input.enabled=!1,ht.forEach(At=>{const Yt=At.rowIndex,Xt=At.columnIndex,Ai=ze.getDepthByName(ze.depthNames.boxActive),ui=ze.getDepthByName(ze.depthNames.frameActive);ze.setBoxAndFrameDepthByRowAndColumnIndex({rowIndex:Yt,columnIndex:Xt,boxDepth:Ai,frameDepth:ui})}),De.setDimmerDepth(De.getDimmerHammerDepth()),De.setDimmerAlpha(0),De.isVisible=!0,De.render(),yt.setCurrentType(yt.typeNames.hammer),yt.setRoundedTextBoxAlpha(0),yt.applyCurrentDepth(),yt.isVisible=!0,yt.render();const $e=yt.getRoundedTextBoxObjects(),Ut=yt.getCurrentHeight()*.1;yt.scene.tweens.add({duration:250,targets:$e,alpha:1,y:`+=${Ut}`,onStart:()=>{$e.forEach(At=>{At.setY(At.y-Ut)})},onComplete:()=>{yt.render()}})},onComplete:()=>{De.scene.input.enabled=!0,Je.renderCancel(),Je.setCancelVisibility(!0)}})}),Je.scene.input.once("pointerup",()=>{Ie.removeListener("pointerup"),Je.playUnpressTween(),ro=!1,_u=!0})},Je.onCancelPointerupCallback=()=>{Je.shouldHammerHintTutorialDisplayCallback()?Je.onHammerHintTutorialEndCallback():(De.isVisible=!1,De.render(),Je.setCancelVisibility(!1),yt.isVisible=!1,yt.render(),ze.setAllBoxesAndFramesDepthToInactive()),ro=!1,_u=!1};const Vt=di({componentId:"celebrationParticle1",componentClass:jt,componentConfig:kt.components.celebrationParticle1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN],checkGameStateReady:()=>{this.checkGameStateReady()}});Vt.selectedImages={particle:[{filePath:"fortuneWheel/particle.png"}]};const _t=di({componentId:"fortuneWheel1",componentClass:Jt,componentConfig:kt.components.fortuneWheel1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.HOME_SCREEN,L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});_t.onFreeSpinCallback=()=>{mi&&ei(ti,"spinwheel_free")},_t.isGameStateInGameCallback=()=>this.gameManager.getCurrentState()===L.IN_GAME,_t.onWheelCloseCallback=()=>{mi&&ei(ti,"spinwheel_close")},_t.onRewardedRequestCallback=()=>{mi&&ei(ti,"Rewarded_Request")},_t.onOpenWheelButtonPointerdownCallback=Ie=>{mi&&ei(ti,"fortune_wheel_holder_tap",{status:Ie})},_t.isSoundFxEnabledCallback=()=>Qi(),_t.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),_t.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),_t.getClapperTextureKeyCallback=()=>ve.getClapperTextureKey(),_t.showDimmer=()=>{De.setDimmerDepth(_t.depth-1),De.fadeInDimmer(De.getDimmerFortuneWheelAlpha(),500,0)},_t.hideDimmer=()=>{De.fadeOutDimmer(500,350)},_t.getCancelButtonTextureKey=()=>ve.getCancelButtonTextureKey(),_t.selectedImages=Ug,_t.selectedSounds=Wg,_t.selectedBitmapFonts={font:[{filePath:"bitmapFont/allLetters/allLetters.png",variant:"image"},{filePath:"bitmapFont/allLetters/allLetters.xml",variant:"XML"}]},_t.selectedAtlases={glowTransition:[{filePath:"fortuneWheel/glow_transition/glow_transition.png",variant:"image"},{filePath:"fortuneWheel/glow_transition/glow_transition.json",variant:"JSON"}],spark1:[{filePath:"fortuneWheel/lightning_transition/spark1/spark1.png",variant:"image"},{filePath:"fortuneWheel/lightning_transition/spark1/spark1.json",variant:"JSON"}],spark2:[{filePath:"fortuneWheel/lightning_transition/spark2/spark2.png",variant:"image"},{filePath:"fortuneWheel/lightning_transition/spark2/spark2.json",variant:"JSON"}]};const Lt=di({componentId:"otherWords1",componentClass:Ue,componentConfig:kt.components.otherWords1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});Lt.selectedImages={circle:[{filePath:"otherWordCircle.png"}],icon:[{filePath:"otherWordIcon.png"}]},Lt.selectedSounds={duplicate:[{filePath:"sound/other_word_duplicate.mp3"}]},Lt.getBackgroundHeightCallback=()=>qe.AbsoluteRadius*.5,Lt.isSoundFxEnabledCallback=()=>Qi(),Lt.getClapperTextureKeyCallback=()=>ve.getClapperTextureKey(),Lt.getGemTextureKeyCallback=()=>ve.getGemTextureKey(),Lt.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),Lt.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),Lt.getBackgroundTextureKeyCallback=()=>ve.getHintBackgroundTextureKey(),Lt.getHalfCircleTextureKeyCallback=()=>ve.getHalfCircleTextureKey(),Lt.getRectangleTextureKeyCallback=()=>ve.getRectangleTextureKey(),Lt.getArrowTextureKeyCallback=()=>ve.getArrowTextureKey(),Lt.getPositionYHelperCallback=()=>qe.CircleCenterAbsoluteY+qe.AbsoluteRadius,Lt.onOtherWordsPointerupCallback=Ie=>{console.log("other words pointerup callback",Ie);const ht=Lt.getCurrentProgress(),$e=Ut=>{this.progressManager.setValueByName({name:Se.current_gem_count,value:Ut+ke.getCurrentCount()}),mi&&ei(ti,"coin_extraword",{value:Ut});const At=Lt.onRewardCollect();this.progressManager.setValueByName({name:Se.current_other_words_state,value:At}),Lt.applyMaskToCircle(),Lt.resetProgressFullTween(),De.scene.tweens.add({duration:250,targets:De.Dimmer,alpha:De.getDimmerRewardCollectAlpha(),onStart:()=>{De.setDimmerDepth(er.depth-1),De.setDimmerAlpha(0),De.isVisible=!0,De.render()}});const Yt=ke.getGemImageMiddlePosition(),Xt=ke.getGemImageScale();er.playCollectTween({destinationPosition:Yt,destinationScale:Xt,reward:Ut,onCompleteCallback:Ai=>{const ui=Ai.isLastIndex,On=Ai.reward;ke.addToCurrentCount(On),ke.playGemImageScaleTween(),ui&&De.scene.tweens.add({duration:100,delay:200,targets:De.Dimmer,alpha:0,onComplete:()=>{De.isVisible=!1,De.render()}})}})};if(ht===1){console.log("reward collected");const Ut=Lt.getRewardValue();if(Ji.name==="famobi"){mi&&ei(ti,"Rewarded_Request");const At=window.famobi.hasRewardedAd();console.log({hasRewardedAd:At}),At&&Ie&&window.famobi.rewardedAd(Yt=>{console.log("rewarded ad end",Yt),Yt.rewardGranted?$e(Ut*Lt.getRewardedAdMultiplier()):$e(Ut)})}else console.warn(Ji.name," does not support rewarded ad feature"),$e(Ut)}};const ii=di({componentId:"ribbon1",componentClass:st,componentConfig:kt.components.ribbon1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});ii.selectedImages={ribbon:[{filePath:"ribbon.png"}]},ii.selectedSounds={ribbon:[{filePath:"sound/ribbon.mp3"}]},ii.getCaptionsCallback=()=>this.stringManager.getRibbonCaptions(),ii.isSoundFxEnabledCallback=()=>Qi(),ii.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),ii.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),ii.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),ii.onCompleteCallback=()=>{if(Wn===Qs){this.levelManager.clearCurrentLevelStateArray(),this.progressManager.setValueByName({name:Se.current_level_state_array,value:this.levelManager.getCurrentLevelStateArray()});const Ie=300;ze.disappearBoard(Ie),qe.disappearWheel(Ie),Je.disappearHammer(Ie),dt.disappearHint(Ie),Lt.disappearOtherWords(Ie),at.disappearButterflyTimer(Ie),ke.disappearGemCounter(Ie),Ze.fadeOutContainer(),ot.hideInGameFortuneWheelButton(),setTimeout(()=>{this.gameManager.setPreviousState(this.gameManager.getCurrentState()),this.gameManager.setCurrentState(L.END_LEVEL),this.loadCurrentStateComponentAssets()},Ie+50)}};const yt=di({componentId:"roundedTextBox1",componentClass:Ve,componentConfig:kt.components.roundedTextBox1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}});yt.selectedImages={roundedFrame:[{filePath:"roundedFrame.png"}],roundedRectangle:[{filePath:"roundedRectangle.png"}]},yt.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),yt.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),yt.getCaptionByKeyCallback=Ie=>this.stringManager.getCaptionByKey(Ie),yt.getFirstWordCallback=()=>qe.getFirstWord(),yt.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey();const at=di({componentId:"butterflyTimer1",componentClass:nt,componentConfig:kt.components.butterflyTimer1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});at.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),at.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),at.getCaptionByKeyCallback=Ie=>this.stringManager.getCaptionByKey(Ie),at.getGiftBoxesTextureKeyCallback=()=>ve.getAtlasKeyByName("giftBoxes"),at.getGiftBoxesFrameNameCallback=(Ie,ht)=>ve.getGiftBoxesFrameNameByPartAndType(Ie,ht),at.getClaimButtonTextureKeyCallback=()=>ve.getWhiteButtonTextureKey(),at.getTimerBackgroundTextureKeyCallback=()=>ve.getCounterBackgroundTextureKey(),at.getTimeIconTextureKeyCallback=()=>ve.getTimeIconTextureKey(),at.getSnowGlobeFrontTextureKeyCallback=()=>ve.getSnowGlobeFrontTextureKey(),at.getSnowGlobeGlassTextureKeyCallback=()=>ve.getSnowGlobeGlassTextureKey(),at.getLastFrameOfButterflyAtlasByNameAndStateCallback=(Ie,ht)=>ve.getLastFrameOfButterflyAtlasByNameAndState(Ie,ht),at.getButterflyAtlasKeyByNameCallback=Ie=>ve.getAtlasKeyByName(Ie),at.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),at.getPositionYHelperCallback=()=>qe.CircleCenterAbsoluteY,at.getBackgroundTextureKeyCallback=()=>ve.getHintBackgroundTextureKey(),at.countdownTimerEventCallback=Ie=>{this.progressManager.setValueByName({name:Se.butterfly_remaining_time,value:Ie})},at.setIsPrizeAvailableProgressCallback=()=>{this.progressManager.setValueByName({name:Se.butterfly_is_prize_available,value:at.isPrizeAvailable})},at.onButterflyTimerPointerupCallback=()=>{De.scene.tweens.add({duration:250,targets:De.Dimmer,alpha:De.getDimmerButterflyAlpha(),onStart:()=>{De.setDimmerDepth(De.getDimmerButterflyDepth()),De.setDimmerAlpha(0),De.isVisible=!0,De.render(),Ze.setContainerDepth(De.getDimmerButterflyDepth()-1);const Ie=at.getContainer(),ht=new Phaser.Curves.QuadraticBezier({x:Ie.x,y:Ie.y},{x:at.scene.game.canvas.width*.4,y:at.scene.game.canvas.height*.5},at.getGiftBoxBottomVisiblePosition()),$e=at.getGiftBoxLidImage(),Ut=at.getGiftBoxBottomImage();In.playGiftBoxOpenTween({lidImage:$e,bottomImage:Ut,lidImageInitialScale:at.getGiftBoxLidInitialWidth()/$e.width,bottomImageInitialScale:at.getGiftBoxBottomInitialWidth()/Ut.width,lidImageFinalScale:at.getGiftBoxLidVisibleWidth()/$e.width,bottomImageFinalScale:at.getGiftBoxBottomVisibleWidth()/Ut.width,curveForCenter:ht,onOpenCallback:()=>{},prizeTextValue:at.getCurrentPrize(),onTapToClaimCallback:()=>{const At=at.getGiftBoxType();at.setCountdownTimeInSeconds(-1),at.setIsPrizeAvailable(0),at.setGiftBoxType("E"),this.progressManager.setValueByName({name:Se.butterfly_remaining_time,value:-1}),this.progressManager.setValueByName({name:Se.butterfly_is_prize_available,value:0}),this.progressManager.setValueByName({name:Se.butterfly_current_prize,value:-1}),this.progressManager.setValueByName({name:Se.gift_box_type,value:"E"});const Yt=at.getCurrentPrize();this.progressManager.setValueByName({name:Se.current_gem_count,value:ke.getCurrentCount()+Yt}),mi&&(At==="B"?ei(ti,"butterfly_opened",{value:Yt}):At==="G"?ei(ti,"butterfly_opened_gold",{value:Yt}):At==="L"&&ei(ti,"butterfly_opened_legendary",{value:Yt}))},isEndLevel:!1})}})};const gt=di({componentId:"endLevelScreen1",componentClass:yi,componentConfig:kt.components.endLevelScreen1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}});gt.selectedSounds={levelEnd:[{filePath:"sound/level_end.mp3"}],buttonShine:[{filePath:"sound/end_game_button_shine.mp3"}]},gt.getCurrentLanguageCallback=()=>this.progressManager.getValueByName({name:Se.language,returnType:ie.string}),gt.isSoundFxEnabledCallback=()=>Qi(),gt.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),gt.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),gt.getShineImageTextureKeyCallback=()=>ve.getShineImageTextureKey(),gt.getTextValueBySetIDAndKeyCallback=(Ie,ht)=>this.setManager.getSetsStringBySetIDAndKey(Ie,ht),gt.getSetImageFrameTextureKeyCallback=()=>ve.getSetImageFrameTextureKey(),gt.getSetImageMaskTextureKeyCallback=()=>ve.getSetImageMaskTextureKey(),gt.getSetImageTextureKeyCallback=()=>xt.getCurrentTextureKey(),gt.getSetTextValueByCallback=Ie=>this.setManager.getSetsStringBySetIDAndKey(Ie,"SetFullName"),gt.getProgressbarShineTextureKeyCallback=()=>ve.getProgressbarShineTextureKey(),gt.getGreenTickTextureKeyCallback=()=>ve.getGreenTickTextureKey(),gt.getGiftBoxesTextureKeyCallback=()=>ve.getAtlasKeyByName("giftBoxes"),gt.getGiftBoxesFrameNameCallback=(Ie,ht)=>ve.getGiftBoxesFrameNameByPartAndType(Ie,ht),gt.getBarBackgroundTextureKeyCallback=()=>ve.getCounterBackgroundTextureKey(),gt.getBarFrontTextureKeyCallback=()=>ve.getProgressBarFillTextureKey(),gt.getVoyageTextCaptionByKeyCallback=Ie=>this.stringManager.getCaptionByKey(Ie),gt.getVoyageCircleTextureKeyCallback=()=>ve.getVoyageCircleTextureKey(),gt.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),gt.getButtonTextCaptionByKeyCallback=Ie=>this.stringManager.getCaptionByKey(Ie),gt.getCongratsTextCaptionByKeyCallback=Ie=>this.stringManager.getCaptionByKey(Ie),gt.getButtonTextureKeyCallback=()=>ve.getWhiteButtonTextureKey(),gt.onButtonPointerdownCallback=Ie=>{const ht=gt.getButtonInputContainer(Ie);ht.once("pointerup",()=>{if(Ie===gt.buttonTypes.nextLevel){if(this.levelManager.getCurrentLevel()===bf+1){gt.disappearObjectsBeforeNextLevel(300),this.gameManager.setPreviousState(this.gameManager.getCurrentState()),this.gameManager.setCurrentState(L.HOME_SCREEN),this.loadCurrentStateComponentAssets();return}else this.gameManager.setPreviousState(this.gameManager.getCurrentState()),this.gameManager.setCurrentState(L.IN_GAME),ot.hideObjects(),this.levelManager.checkNextLevelInfoExist(this.gameManager.getLevelCountByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})))||(this.isFilesLoadComplete=!1,this.gameManager.loadAdditionalLevelData({level:this.levelManager.getCurrentLevel()+1,language:this.progressManager.getValueByName({name:Se.language,returnType:ie.string})})),this.setCurrentBackgroundImageData(xt),this.loadCurrentStateComponentAssets();ht.setVisible(!1)}else if(Ie===gt.buttonTypes.setClaim){const $e=gt.getShineImage();$e.setAlpha(0),gt.scene.tweens.killTweensOf($e),ht.setVisible(!1),gt.setSetImageCurrentState(gt.setImageStates.claimed);const Ut=gt.getSetClaimTopText(),At=gt.getSetClaimBottomText(),Yt=300,Xt=gt.getSetImage(),Ai=gt.getSetImageFrame(),ui=gt.getButtonContainer(Ie);gt.scene.tweens.add({targets:[Xt,Ai,ui,Ut,At],duration:Yt,alpha:0,scale:(On,ho,gd,tr)=>tr===0||tr===1?0:On.scale,onUpdate:()=>{gt.applyMaskToSetImage()},onComplete:()=>{gt.playAlphaTweenAfterSetCompleteTweensCompleted(1,this.levelManager.getCurrentLevel())}}),De.scene.tweens.add({duration:Yt,targets:De.Dimmer,alpha:De.getDimmerEndLevelAlpha()})}}),gt.scene.input.once("pointerup",()=>{ht.removeListener("pointerup"),gt.playButtonUnpressTween(Ie)})};const In=di({componentId:"giftBoxTweenMaker1",componentClass:Qt,componentConfig:kt.components.giftBoxTweenMaker1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME,L.END_LEVEL],checkGameStateReady:()=>{this.checkGameStateReady()}});In.selectedSounds={boxOpen:[{filePath:"sound/Claim_Box_Open_01.mp3"}],gemShow:[{filePath:"sound/Claim_Box_Gem_Show_01.mp3"}],gemDiffuse:[{filePath:"sound/Claim_Box_Gem_Diffuse_01.mp3"}]},In.isSoundFxEnabledCallback=()=>Qi(),In.isCurrentLanguageRightToLeftCallback=()=>this.gameManager.isLanguageRightToLeft(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),In.getTextOriginYCallback=()=>this.gameManager.getOriginYByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string})),In.getCaptionByKeyCallback=Ie=>this.stringManager.getCaptionByKey(Ie),In.getGemTextureKeyCallback=()=>ve.getGemTextureKey(),In.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),In.moveGemToGemCounterCallback=Ie=>{const ht=Ie.gem,$e=Ie.prize,Ut=Ie.giftBoxBottomImage,At=Ie.giftBoxLidImage,Yt=Ie.isEndLevel,Xt=Ie.isLastGem,Ai=ke.getGemImageMiddlePosition(),ui=ke.getGemImageScale();In.scene.tweens.add({duration:300,delay:400,targets:ht,x:Ai.x,y:Ai.y,scale:ui*.5,angle:0,onComplete:()=>{ht.setVisible(!1),ke.addToCurrentCount($e),ke.playGemImageScaleTween()}}),In.scene.tweens.add({duration:500,delay:200,targets:[Ut,At],alpha:0,onComplete:()=>{At.setAngle(0),Xt&&(Yt?gt.playAlphaTweenAfterGiftBoxOpened(1,this.levelManager.getCurrentLevel()):De.scene.tweens.add({duration:100,delay:200,targets:De.Dimmer,alpha:0,onComplete:()=>{De.isVisible=!1,De.render(),Ze.setContainerDepth(Ze.depth)}}))}})};const Or=di({componentId:"customRewardedAd1",componentClass:Ku,componentConfig:kt.components.customRewardedAd1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});Or.selectedImages={rewarded:[{filePath:"ingame_rewarded.png"}]},Or.onRewardedRequestCallback=()=>{mi&&ei(ti,"Rewarded_Request")},Or.getPositionYCallback=()=>qe.CircleCenterAbsoluteY+qe.AbsoluteRadius,Or.getCurrentLevelCallback=()=>this.levelManager.getCurrentLevel(),Or.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),Or.onRewardGrantedCallback=Ie=>{this.progressManager.setValueByName({name:Se.current_gem_count,value:ke.getCurrentCount()}),De.scene.tweens.add({duration:250,targets:De.Dimmer,alpha:De.getDimmerRewardCollectAlpha(),onStart:()=>{De.setDimmerDepth(er.depth-1),De.setDimmerAlpha(0),De.isVisible=!0,De.render()}});const ht=ke.getGemImageMiddlePosition(),$e=ke.getGemImageScale();er.playCollectTween({destinationPosition:ht,destinationScale:$e,reward:Ie,onCompleteCallback:Ut=>{const At=Ut.isLastIndex,Yt=Ut.reward;ke.addToCurrentCount(Yt),ke.playGemImageScaleTween(),At&&De.scene.tweens.add({duration:100,delay:200,targets:De.Dimmer,alpha:0,onComplete:()=>{De.isVisible=!1,De.render()}})}})};const er=di({componentId:"rewardCollector1",componentClass:Xu,componentConfig:kt.components.rewardCollector1,componentsMap:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,states:[L.IN_GAME],checkGameStateReady:()=>{this.checkGameStateReady()}});er.selectedSounds={gemDiffuse:[{filePath:"sound/Claim_Gem_Diffuse_01.mp3"}],gemShow:[{filePath:"sound/Claim_Box_Gem_Show_01.mp3"}]},er.isSoundFxEnabledCallback=()=>Qi(),er.getGemTextureKeyCallback=()=>ve.getGemTextureKey(),er.getBitmapFontKeyCallback=()=>ve.getBitmapFontKey(),this.checkGameStateReady=()=>{if(!this.isFilesLoadComplete||this.isCurrentGameStateReady)return;const Ie=this.gameManager.getComponentIdsByState(this.gameManager.getCurrentState()),ht=!Ie.some($e=>this.componentsReadyStatusMap.get($e)===!1);return this.isFilesLoadComplete&&ht?(this.isCurrentGameStateReady=!0,console.log("areCurrentStateComponentsReady",{areCurrentStateComponentsReady:ht,currentStateComponentIds:JSON.parse(JSON.stringify(Ie))}),this.onGameReady(),!0):!1},this.onGameReady=()=>{if(Cu&&xe.stopTween(),!Cu){Cu=!0,Tf=!0;const Ie=document.getElementById("loading");Ie.onanimationend=()=>{Ie.style.display="none",Ie.style.opacity="0"},Ie.style.animationName="fadeOut",Ie.style.animationDuration="0.5s",Ji.name==="famobi"&&window.famobi.gameReady()}this.gameManager.getCurrentState()===L.HOME_SCREEN?(_t.initOnComponentsReady(ke,Vt,this.stringManager,this.progressManager,ot),ot.initOnComponentsReady(ve,_t,Ot,this.stringManager,Ze,He),Ze.initOnComponentsReady(ot,this.gameManager,He),Ze.scene.input.enabled=!1,s===""?(Ze.scene.input.enabled=!0,Ki(Li.InitialSettings),cr(!0),ot.initialTweensRendered=!0,ot.hideAllObjectsWithoutTween()):ot.active?_t.spinCount>0?setTimeout(()=>{ot.hideObjects(),setTimeout(()=>{Ze.scene.input.enabled=!0,_t.playSpinStandardOpeningSound(),_t.showWheel()},250)},1500):Ze.scene.input.enabled=!0:(Ze.scene.input.enabled=!0,ot.showMainMenu()),this.gameManager.renderComponents(this.gameManager.getComponentsByState(this.gameManager.getCurrentState()),!0),ke.appearGemCounter(300),Ze.fadeInContainer(300)):this.gameManager.getCurrentState()===L.IN_GAME?(xt.changeTexture(xt.getCurrentTextureKey()),ot.hideMainMenu(),this.setNewLevel(),this.gameManager.renderComponents(this.gameManager.getComponentsByState(this.gameManager.getCurrentState()),!0),this.renderStartOfLevel()):this.gameManager.getCurrentState()===L.END_LEVEL&&(this.gameManager.renderComponents(this.gameManager.getComponentsByState(this.gameManager.getCurrentState()),!0),this.renderEndOfLevelScreen())},this.gameManager=new B({platformSetting:Ji,components:this.components,componentsReadyStatusMap:this.componentsReadyStatusMap,options:kt.options,currentGameConfig:kt,currentState:o,previousState:""}),sl(this.gameManager),this.gameManager.setSectionList(Yg()),console.log({sectionList:this.gameManager.getSectionList()}),this.gameManager.onAdditionalLevelDataLoadedCallback=Ie=>{this.levelManager.pushToCurrentLevelsInfoArray(Ie),this.isFilesLoadComplete=!0,this.checkGameStateReady()},this.gameManager.onFilesLoadedCallback=Ie=>{this.gameManager.getCurrentState()===L.HOME_SCREEN&&(this.setManager.setSets(Ie.sets),this.sectionManager.setSections(Ie.sections)),this.stringManager.setCurrentStrings(Ie.strings),gr(Ie.languages||[],oo),ae(Ie.strings||[]),this.levelManager.setCurrentLevelsInfoArray(Ie.levels),this.setManager.setCurrentSetsStrings(Ie.sets_strings),this.sectionManager.setCurrentSectionsStrings(Ie.sections_strings),this.isFilesLoadComplete=!0,this.checkGameStateReady(),this.isCurrentGameStateReady&&this.gameManager.renderComponents(this.gameManager.getComponentsByState(this.gameManager.getCurrentState()),!0)},this.gameManager.onGameSceneStarted=()=>{this.loadCurrentStateComponentAssets()},this.gameManager.startGame();let oo=this.progressManager.getValueByName({name:Se.language,returnType:ie.string});if(console.log("currentLanguage",oo),oo===""||T().isNil(oo)){let Ie;if(Ji.name==="famobi"){let ht=window.famobi.getCurrentLanguage().toUpperCase();console.log({famobiCurrentLanguage:ht}),T().isNil(ht)&&(ht="EN"),Ie=ht}else Ie="EN";this.progressManager.setValueByName({name:Se.language,value:Ie}),oo=this.progressManager.getValueByName({name:Se.language,returnType:ie.string})}this.gameManager.setCurrentState(L.HOME_SCREEN),this.isFilesLoadComplete=!1,this.gameManager.loadFiles({state:L.HOME_SCREEN,language:oo,level:this.levelManager.getCurrentLevel()})}loadCurrentStateComponentAssets(){this.isCurrentGameStateReady=!1;const s=this.checkGameStateReady();if(console.log({isGameStateReady:s}),!s){if(Cu){const v=this.components.get("loadingIcon1");v.addTween({position:{x:v.scene.game.canvas.width*.5,y:v.scene.game.canvas.height*.5},height:v.scene.game.canvas.height*.1,depth:1e3})}const o=navigator.onLine;if(console.log("isOnline",o),o)this.gameManager.getScene("gameScene").loadComponents(this.gameManager.getComponentsByState(this.gameManager.getCurrentState()));else{let v=setInterval(()=>{const S=navigator.onLine;console.log("isOnline",S),S&&(clearInterval(v),this.gameManager.getScene("gameScene").loadComponents(this.gameManager.getComponentsByState(this.gameManager.getCurrentState())))},5e3)}}}setCurrentBackgroundImageData(s){const o=this.gameManager.getSectionInfoByLevel(this.levelManager.getCurrentLevel());console.log({sectionInfo:o});const v=o.currentSet.f,S=this.setManager.getBackgroundImageNameBySetFullName(v);s.selectedImages={background:[{filePath:"backgrounds/"+S+".jpg"}]},console.log({currentSetFullName:v,backgroundImageName:S});const E="backgrounds/"+S;s.setCurrentTextureKey(E),s.scene.textures.exists(E)||this.componentsReadyStatusMap.set(s.componentId,!1)}renderEndOfLevelScreen(){Qi()&&this.components.get("endLevelScreen1").playLevelEndSound();const s=this.components.get("customRewardedAd1");s.getCurrentAdState()!==s.adStates.inactive&&(s.setCurrentAdState(s.adStates.inactive),s.playRewardedAdMoveTween(),s.removeTimer()),Ji.name==="famobi"&&(window.famobi_analytics.trackEvent("EVENT_CUSTOM",{eventName:"LEVELEND",result:"success"}),mi&&ei(ti,"Inter_Request"),window.famobi_analytics.trackEvent("EVENT_LEVELSUCCESS",{levelName:this.levelManager.getCurrentLevel().toString()})),mi&&ei(ti,"level_advanced",{level:this.levelManager.getCurrentLevel()}),this.levelManager.increaseCurrentLevel(),mi&&[30,50,60,90,100,150,500,1500,3e3].includes(this.levelManager.getCurrentLevel())&&ei(ti,"level_reached_"+this.levelManager.getCurrentLevel()),this.levelManager.clearCurrentLevelStateArray(),this.levelManager.clearCurrentLevelFoundOtherWords(),this.progressManager.setValueByName({name:Se.current_level_state_array,value:this.levelManager.getCurrentLevelStateArray()}),this.progressManager.setValueByName({name:Se.current_level,value:this.levelManager.getCurrentLevel()}),this.progressManager.setValueByName({name:Se.current_level_found_other_words,value:this.levelManager.getCurrentLevelFoundOtherWords()}),this.progressManager.getValueByName({name:Se.butterfly_current_prize,returnType:ie.number})!==-1||this.progressManager.getValueByName({name:Se.butterfly_is_prize_available,returnType:ie.number})===1||this.progressManager.getValueByName({name:Se.butterfly_remaining_time,returnType:ie.number})!==-1?hs="yes":(hs="no",this.progressManager.setValueByName({name:Se.gift_box_type,value:"E"})),this.progressManager.setValueByName({name:Se.is_butterfly_displayed_in_current_level,value:hs});const o=[],v=this.components.get("dimmer1");o.push(v.Dimmer);const S=this.components.get("gemCounter1"),E=S.getGameObjects();o.push(...E);const R=this.components.get("endLevelScreen1"),k=this.components.get("giftBoxTweenMaker1"),W=this.components.get("canvas1");v.scene.tweens.add({targets:o,duration:300,alpha:{getEnd:(K,q,$,ne)=>ne===0?v.getDimmerEndLevelAlpha():1},y:{getEnd:(K,q,$,ne)=>ne!==0?S.CenterAbsoluteY:K.y},onStart:()=>{v.setDimmerDepth(v.getDimmerEndLevelDepth()),v.setDimmerAlpha(0),v.isVisible=!0,v.render(),S.isVisible=!0,S.render(),E.forEach(K=>{K.setY(-S.scene.game.canvas.height*.25)})},onComplete:()=>{v.scene.input.enabled=!0,v.render();const K=R.getGiftBoxLid(),q=R.getGiftBoxBottom(),$=new Phaser.Curves.QuadraticBezier({x:q.x,y:q.y},{x:R.scene.game.canvas.width*.5+W.AbsoluteWidth*.1,y:R.scene.game.canvas.height*.5},{x:R.scene.game.canvas.width*.5,y:R.scene.game.canvas.height*.7});R.isVisible=!0,R.render();const ne=this.gameManager.getSectionInfoByLevel(this.levelManager.getCurrentLevel()-1),oe=ne.index,ce=ne.currentSetIndex,me=ne.currentSet,xe=this.gameManager.getPreviousSet({currentSectionIndex:oe,currentSetIndex:ce}).TotalLevelCount,ve=ne.lastSectionIndex,We=ne.data.sets.length-1,Ze=ne.levelCountSoFar,ke=this.gameManager.getNextSet({currentSectionIndex:oe,currentSetIndex:ce,lastSectionIndex:ve,lastSetIndex:We});console.log([{sectionIndex:oe},{setIndex:ce},{currentSet:me},{previousSetLevelsCount:xe},{lastSectionIndex:ve},{lastSetIndex:We},{levelCountSoFar:Ze},{nextSet:ke}]);const ut=me.t;R.appearEndLevelScreenObjects({currentLevel:this.levelManager.getCurrentLevel(),sectionIndex:oe,setIndex:ce,currentSet:me,previousSetLevelsCount:xe,lastSectionIndex:ve,lastSetIndex:We,levelCountSoFar:Ze,nextSet:ke,onSetCompleteCallback:()=>{S.disappearGemCounter(300),R.setSetImageCurrentState(R.setImageStates.beforeClaim);const De=1e3;R.playAlphaTweenExceptSetImage(0,De);const Tt=R.getSetImage(),xt=R.getSetImageFrame(),Pt=R.getSetImagePosition(),ot=R.getSetImageDisplayHeight()/Tt.height,Ot=R.getSetImageAngle(),ze=R.getSetImageDisplayHeight()/xt.height;R.scene.tweens.add({duration:De,targets:[Tt,xt],x:Pt.x,y:Pt.y,scale:(dt,Je,Vt,_t)=>_t===0?ot:_t===1?ze:dt.scale,angle:Ot,onUpdate:()=>{R.applyMaskToSetImage()},onComplete:()=>{R.playShineImageTween();const dt=300,Je=R.getButtonContainer(R.buttonTypes.setClaim),Vt=R.getSetClaimTopText();let _t=R.getTextValueBySetIDAndKeyCallback(ut,"TopText");T().isNil(_t)?_t="":_t=_t.replace("\u25CF",`
`),R.changeSetClaimTopTextObject(Vt,_t);const Lt=R.getSetClaimBottomText(),ii=R.getTextValueBySetIDAndKeyCallback(ut,"BottomText");R.changeTextObject(Lt,ii),R.scene.tweens.add({duration:dt,targets:[Je,Vt,Lt],alpha:1,onComplete:()=>{R.getButtonInputContainer(R.buttonTypes.setClaim).setVisible(!0)}})}});const qe=v.Dimmer;v.scene.tweens.add({duration:De,targets:qe,alpha:v.getDimmerSetAlpha()})},onGiftAchieveCallback:()=>{k.playGiftBoxOpenTween({lidImage:K,bottomImage:q,lidImageInitialScale:R.getGiftBoxLidDisplayWidth(R.giftBoxStates.onProgressBar)/K.width,bottomImageInitialScale:R.getGiftBoxBottomDisplayWidth(R.giftBoxStates.onProgressBar)/q.width,lidImageFinalScale:R.getGiftBoxLidDisplayWidth(R.giftBoxStates.opened)/K.width,bottomImageFinalScale:R.getGiftBoxBottomDisplayWidth(R.giftBoxStates.opened)/q.width,curveForCenter:$,onOpenCallback:()=>{R.setGiftBoxCurrentState(R.giftBoxStates.opened)},prizeTextValue:R.getCurrentPrize(),onTapToClaimCallback:()=>{R.setGiftBoxCurrentState(R.giftBoxStates.claimed);const De=parseInt(R.getCurrentPrize());this.progressManager.setValueByName({name:Se.current_gem_count,value:S.getCurrentCount()+De}),mi&&ei(ti,"coin_endgame",{value:De})},isEndLevel:!0})}})}})}renderStartOfLevel(){Qi()&&this.components.get("commonAssetsLoader1").playLevelStartSound(),Ji.name==="famobi"&&window.famobi_analytics.trackEvent("EVENT_LEVELSTART",{levelName:this.levelManager.getCurrentLevel().toString()});const s=this.components.get("gemCounter1"),o=this.components.get("hint1"),v=this.components.get("mainMenu1"),S=this.components.get("otherWords1"),E=this.components.get("wordWheel1"),R=this.components.get("wordBoard1"),k=this.components.get("endLevelScreen1"),W=this.components.get("dimmer1"),K=this.components.get("hammer1"),q=this.components.get("butterflyTimer1"),$=this.components.get("settings1"),ne=300;s.disappearGemCounter(ne),$.fadeOutContainer(ne),this.gameManager.getPreviousState()!==L.HOME_SCREEN&&(k.isVisible=!1,k.setGiftBoxCurrentState(k.giftBoxStates.onProgressBar),k.setSetImageCurrentState(k.setImageStates.onProgressBar),k.disappearObjectsBeforeNextLevel(ne)),E.isVisible=!1,E.render(),R.isVisible=!1,R.render(),o.isVisible=!1,o.render(),K.isVisible=!1,K.render(),q.isVisible=!1,q.render(),S.isVisible=!1,S.render(),setTimeout(()=>{if(this.gameManager.getPreviousState()!==L.HOME_SCREEN){const fe=k.getSetImage(),xe=k.getSetImageTextureKeyCallback();fe.texture.key!==xe&&fe.setTexture(xe),k.renderSetImage()}o.isVisible=!0,o.render(),K.isVisible=!0,K.render(),q.isVisible=!0,q.render(),S.isVisible=!0,S.render();const oe=300;W.isVisible=!1,W.render(),o.appearHint(oe),v.showIngameFortuneWheelButton(),S.appearOtherWords(oe),E.isVisible=!0,E.render(),E.appearWheel(oe),K.appearHammer(oe),s.appearGemCounter(oe),$.fadeInContainer(oe),q.bringButterflyTimer(oe),R.isVisible=!0,R.render(),this.levelManager.getCurrentLevelStateArray().forEach(fe=>{const xe=fe.rowIndex,ve=fe.columnIndex;R.board[fe.rowIndex][fe.columnIndex].state==="emphasized"&&fe.state==="hinted"&&R.renderHintedBoxLetter({rowIndex:xe,columnIndex:ve,shouldPlayHintAnimation:!1})}),R.appearBoard(oe);const ce=this.progressManager.getValueByName({name:Se.free_hint_count,returnType:ie.number}),me=this.progressManager.getValueByName({name:Se.free_hammer_hint_count,returnType:ie.number});if(this.levelManager.getCurrentLevel()===3&&ce===-1){const fe=o.hint_tutorial_amount;this.progressManager.setValueByName({name:Se.free_hint_count,value:fe}),o.setFreeHintCount(fe)}if(this.levelManager.getCurrentLevel()===8&&me===-1){const fe=K.hammer_hint_tutorial_amount;this.progressManager.setValueByName({name:Se.free_hammer_hint_count,value:fe}),K.setFreeHammerHintCount(fe)}E.shouldShuffleTutorialDisplayCallback()&&setTimeout(()=>{W.setDimmerAlpha(0),W.setDimmerDepth(W.getDimmerShuffleTutorialDepth()),W.isVisible=!0,W.render(),W.scene.tweens.add({duration:250,targets:W.Dimmer,alpha:W.getDimmerShuffleTutorialAlpha()});const fe=this.components.get("roundedTextBox1");fe.setCurrentType(fe.typeNames.shuffleTutorial),fe.setRoundedTextBoxAlpha(0),fe.applyCurrentDepth(),fe.isVisible=!0,fe.render();const xe=fe.getRoundedTextBoxObjects(),ve=fe.getCurrentHeight()*.1;E.renderCancelImage(),fe.scene.tweens.add({duration:250,targets:xe,alpha:1,y:`+=${ve}`,onStart:()=>{xe.forEach(We=>{We.setY(We.y-ve)})},onComplete:()=>{fe.render(),E.getCancelImage().setVisible(!0)}})},oe),o.shouldHintTutorialDisplayCallback()&&setTimeout(()=>{W.setDimmerAlpha(0),W.setDimmerDepth(W.getDimmerHintTutorialDepth()),W.isVisible=!0,W.render(),W.scene.tweens.add({duration:250,targets:W.Dimmer,alpha:W.getDimmerHintTutorialAlpha()});const fe=this.components.get("roundedTextBox1");fe.setCurrentType(fe.typeNames.hintTutorial),fe.setRoundedTextBoxAlpha(0),fe.applyCurrentDepth(),fe.isVisible=!0,fe.render();const xe=fe.getRoundedTextBoxObjects(),ve=fe.getCurrentHeight()*.1;o.renderCancelImage(),fe.scene.tweens.add({duration:250,targets:xe,alpha:1,y:`+=${ve}`,onStart:()=>{xe.forEach(We=>{We.setY(We.y-ve)})},onComplete:()=>{fe.render(),o.getCancelImage().setVisible(!0)}})},oe),K.shouldHammerHintTutorialDisplayCallback()&&setTimeout(()=>{W.setDimmerAlpha(0),W.setDimmerDepth(W.getDimmerHammerHintTutorialDepth()),W.isVisible=!0,W.render(),W.scene.tweens.add({duration:250,targets:W.Dimmer,alpha:W.getDimmerHammerHintTutorialAlpha()});const fe=this.components.get("roundedTextBox1");fe.setCurrentType(fe.typeNames.hammerHintTutorial),fe.setRoundedTextBoxAlpha(0),fe.applyCurrentDepth(),fe.isVisible=!0,fe.render();const xe=fe.getRoundedTextBoxObjects(),ve=fe.getCurrentHeight()*.1;K.renderCancel(),fe.scene.tweens.add({duration:250,targets:xe,alpha:1,y:`+=${ve}`,onStart:()=>{xe.forEach(We=>{We.setY(We.y-ve)})},onComplete:()=>{fe.render(),K.getCancelImage().setVisible(!0)}})},oe),E.shouldHandDisplayCallback()&&setTimeout(()=>{this.addHandActions(),W.setDimmerAlpha(0),W.setDimmerDepth(W.getDimmerTutorialDepth()),W.isVisible=!0,W.render(),W.scene.tweens.add({duration:250,targets:W.Dimmer,alpha:W.getDimmerTutorialAlpha()});const fe=this.components.get("roundedTextBox1");fe.setCurrentType(fe.typeNames.tutorial),fe.setRoundedTextBoxAlpha(0),fe.applyCurrentDepth(),fe.isVisible=!0,fe.render();const xe=fe.getRoundedTextBoxObjects(),ve=fe.getCurrentHeight()*.1;fe.scene.tweens.add({duration:250,targets:xe,alpha:1,y:`+=${ve}`,onStart:()=>{xe.forEach(We=>{We.setY(We.y-ve)})},onComplete:()=>{fe.render()}})},oe)},ne+50)}addHandActions(){const s=this.components.get("wordWheel1");s.clearTutorialHandLines();const o=s.getFirstWordLetterCoordinates();if(o.length===0)return;const v=s.getHand(),S=o.shift(),E=[];E.push({action:"fadeIn",duration:500}),o.forEach((R,k,W)=>{k===0?E.push({action:"moveToWithAngle",duration:750,position:{x:R.x,y:R.y},angle:30,onUpdate:()=>{s.drawLineForTutorialHand({lineStartX:S.x,lineStartY:S.y,lineEndX:v.x,lineEndY:v.y})}}):E.push({action:"moveTo",duration:750,position:{x:R.x,y:R.y},onUpdate:()=>{s.drawLineForTutorialHand({lineStartX:o[k-1].x,lineStartY:o[k-1].y,lineEndX:v.x,lineEndY:v.y})},onComplete:()=>{k===W.length-1&&s.clearTutorialHandLines()}})}),E.push({action:"fadeOut",duration:500}),E.push({action:"moveTo",duration:750,position:{x:S.x,y:S.y},onComplete:()=>{v.setAlpha(0),v.setAngle(0)}}),s.setHandStartPosition(S),s.setHandMovements(E)}setNewLevel(){const s=this.components.get("wordWheel1"),o=this.components.get("wordBoard1"),v=this.levelManager.getLevelInfoObject(this.levelManager.getCurrentLevel(),this.gameManager.getLevelCountByLanguage(this.progressManager.getValueByName({name:Se.language,returnType:ie.string}))),E=this.gameManager.getSectionInfoByLevel(this.levelManager.getCurrentLevel()).currentSet.f,R="0x"+this.setManager.getRibbonColorBySetFullName(E).substring(0,6);console.log("ribbonColor",{currentSetName:E,setColor:R,currentLevelInfoObject:v}),o.setPrimaryColor(R),s.setPrimaryColor(R),this.levelManager.setCurrentLevelStateArray(this.progressManager.getValueByName({name:Se.current_level_state_array,returnType:ie.object})),this.levelManager.setCurrentLevelFoundOtherWords(this.progressManager.getValueByName({name:Se.current_level_found_other_words,returnType:ie.object}));const k=v.Words.split("|"),W=T().isNil(v.OtherWords)?[]:v.OtherWords.split(","),K=Array.from(v.Letters),q=[];cn.clear(),k.forEach(ce=>{const me=ce.split(",")[2];q.push(me),cn.add(me)}),o.setCurrentLevel({wordsInfoArray:k});const $=this.components.get("butterflyTimer1");this.progressManager.getValueByName({name:Se.is_butterfly_displayed_in_current_level,returnType:ie.string})==="no"&&this.progressManager.getValueByName({name:Se.butterfly_remaining_time,returnType:ie.number})<0&&this.progressManager.getValueByName({name:Se.butterfly_is_prize_available,returnType:ie.number})===0&&o.isItButterflyLevel(this.levelManager.getCurrentLevel())&&(o.setButterflyCoordinate(),hs="yes",this.progressManager.setValueByName({name:Se.is_butterfly_displayed_in_current_level,value:hs}),this.progressManager.getValueByName({name:Se.gift_box_type,returnType:ie.string})==="E"&&(this.progressManager.setValueByName({name:Se.gift_box_type,value:o.butterflyType}),$.giftBoxType=o.butterflyType,mi&&(o.butterflyType==="B"?ei(ti,"butterfly_appeared"):o.butterflyType==="G"?ei(ti,"butterfly_appeared_gold"):o.butterflyType==="L"&&ei(ti,"butterfly_appeared_legendary"))));let ne=0;if(q.concat(W).forEach(ce=>{ne+=ce.length}),s.Words=q,s.setOtherWords(W),s.setCurrentLevel({wheelLetters:K,wordsTotalLetterCount:ne}),s.prepareOtherWordsCurrentState(this.levelManager.getCurrentLevelFoundOtherWords()),Wn=0,Qs=q.length,fd.clear(),this.levelManager.setCurrentLevelStateArray(this.levelManager.getCurrentLevelStateArray().filter(ce=>{if(!T().isNil(o.board[ce.rowIndex])&&!T().isNil(o.board[ce.rowIndex][ce.columnIndex])&&o.board[ce.rowIndex][ce.columnIndex].state!=="empty")return ce})),this.levelManager.getCurrentLevelStateArray().forEach(ce=>{const me=ce.rowIndex,fe=ce.columnIndex;o.board[me][fe].state=ce.state;const xe=o.getWordObjectsByRowAndColumnIndex({rowIndex:me,columnIndex:fe});if(xe.length===0)throw{message:"wordObjects length is 0 by: ",rowIndex:me,columnIndex:fe};xe.forEach(ve=>{fd.add(ve)}),o.checkAndRemoveCoordinateInBonusCoordinates({rowIndex:me,columnIndex:fe})}),fd.forEach(ce=>{o.getIsWordFoundFromBoardByCoordinates({coordinates:ce.coordinates})&&cn.has(ce.wordString)&&(ce.coordinates.forEach(fe=>{o.board[fe.rowIndex][fe.columnIndex].state="full"}),cn.delete(ce.wordString),Wn++,o.setFoundWordInWordsMap(ce.wordString))}),console.table("resuming level",{wordSet:cn},{foundWordCount:Wn},{wordsMap:o.wordsMap},{currentLevelStateArray:this.levelManager.getCurrentLevelStateArray()}),cn.size===0){this.levelManager.clearCurrentLevelStateArray(),this.levelManager.clearCurrentLevelFoundOtherWords(),this.levelManager.increaseCurrentLevel(),this.progressManager.setValueByName({name:Se.current_level,value:this.levelManager.getCurrentLevel()}),this.progressManager.setValueByName({name:Se.current_level_state_array,value:this.levelManager.getCurrentLevelStateArray()}),this.progressManager.setValueByName({name:Se.current_level_found_other_words,value:this.levelManager.getCurrentLevelFoundOtherWords()}),this.progressManager.getValueByName({name:Se.butterfly_current_prize,returnType:ie.number})!==-1||this.progressManager.getValueByName({name:Se.butterfly_is_prize_available,returnType:ie.number})===1||this.progressManager.getValueByName({name:Se.butterfly_remaining_time,returnType:ie.number})!==-1?hs="yes":(hs="no",this.progressManager.setValueByName({name:Se.gift_box_type,value:"E"})),this.progressManager.setValueByName({name:Se.is_butterfly_displayed_in_current_level,value:hs}),this.setNewLevel();return}else cn.size===1&&o.emphasizeLastNotFoundWordInBoard();cn.size>1?(wu=Math.ceil(Math.random()*(cn.size-2))+(Qs-cn.size),ao="",cn.forEach(ce=>{ao.length<ce.length&&(ao=ce)})):(wu=-1,ao=""),console.table("for ribbon",{"random play index":wu,"longest word":ao,"word set size":cn.size})}}function jg(){return Ls.progressManager.getValueByName({name:Se.music_enabled,returnType:ie.number})===1&&Ji.isSoundSupported}function Qi(){return Ls.progressManager.getValueByName({name:Se.soundfx_enabled,returnType:ie.number})===1&&Ji.isSoundSupported}function Kg(I,s){console.log("handle sound and music click. type",I,"isEnabled",s);const o=new re;I==="soundFx"?(o.setValueByName({name:Se.soundfx_enabled,value:s?1:0}),mi&&ei(ti,"game_setting_sound_clicked",{status:s})):I==="music"?(o.setValueByName({name:Se.music_enabled,value:s?1:0}),mi&&ei(ti,"game_setting_music_clicked",{status:s})):console.warn("this type: ",I,"is not soundFx or music"),Ls.gameManager.renderComponents(Ls.gameManager.getComponentsByState(Ls.gameManager.getCurrentState()),!0)}window.famobi_onPauseRequested=function(){Ls.gameManager.phaserGame.sound.volume=0},window.famobi_onResumeRequested=function(){Ls.gameManager.phaserGame.sound.volume=1},window.famobi_gameJS=[function(){Sf()}]})()})();
